import{g as L,V as Z}from"./vue.runtime.esm-BrouV0Mr.chunk.mjs";import{a as tt,c as et,_ as nt}from"./index-jVSJWteM.chunk.mjs";function ot(t){var e=Number(t.version.split(".")[0]);if(e>=2)t.mixin({beforeCreate:o});else{var n=t.prototype._init;t.prototype._init=function(r){r===void 0&&(r={}),r.init=r.init?[o].concat(r.init):o,n.call(this,r)}}function o(){var r=this.$options;r.store?this.$store=typeof r.store=="function"?r.store():r.store:r.parent&&r.parent.$store&&(this.$store=r.parent.$store)}}var rt=typeof window<"u"?window:typeof L<"u"?L:{},g=rt.__VUE_DEVTOOLS_GLOBAL_HOOK__;function it(t){g&&(t._devtoolHook=g,g.emit("vuex:init",t),g.on("vuex:travel-to-state",function(e){t.replaceState(e)}),t.subscribe(function(e,n){g.emit("vuex:mutation",e,n)},{prepend:!0}),t.subscribeAction(function(e,n){g.emit("vuex:action",e,n)},{prepend:!0}))}function at(t,e){return t.filter(e)[0]}function x(t,e){if(e===void 0&&(e=[]),t===null||typeof t!="object")return t;var n=at(e,function(r){return r.original===t});if(n)return n.copy;var o=Array.isArray(t)?[]:{};return e.push({original:t,copy:o}),Object.keys(t).forEach(function(r){o[r]=x(t[r],e)}),o}function _(t,e){Object.keys(t).forEach(function(n){return e(t[n],n)})}function D(t){return t!==null&&typeof t=="object"}function st(t){return t&&typeof t.then=="function"}function ct(t,e){return function(){return t(e)}}var m=function(t,e){this.runtime=e,this._children=Object.create(null),this._rawModule=t;var n=t.state;this.state=(typeof n=="function"?n():n)||{}},T={namespaced:{configurable:!0}};T.namespaced.get=function(){return!!this._rawModule.namespaced},m.prototype.addChild=function(t,e){this._children[t]=e},m.prototype.removeChild=function(t){delete this._children[t]},m.prototype.getChild=function(t){return this._children[t]},m.prototype.hasChild=function(t){return t in this._children},m.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)},m.prototype.forEachChild=function(t){_(this._children,t)},m.prototype.forEachGetter=function(t){this._rawModule.getters&&_(this._rawModule.getters,t)},m.prototype.forEachAction=function(t){this._rawModule.actions&&_(this._rawModule.actions,t)},m.prototype.forEachMutation=function(t){this._rawModule.mutations&&_(this._rawModule.mutations,t)},Object.defineProperties(m.prototype,T);var v=function(t){this.register([],t,!1)};v.prototype.get=function(t){return t.reduce(function(e,n){return e.getChild(n)},this.root)},v.prototype.getNamespace=function(t){var e=this.root;return t.reduce(function(n,o){return e=e.getChild(o),n+(e.namespaced?o+"/":"")},"")},v.prototype.update=function(t){F([],this.root,t)},v.prototype.register=function(t,e,n){var o=this;n===void 0&&(n=!0);var r=new m(e,n);if(t.length===0)this.root=r;else{var i=this.get(t.slice(0,-1));i.addChild(t[t.length-1],r)}e.modules&&_(e.modules,function(a,u){o.register(t.concat(u),a,n)})},v.prototype.unregister=function(t){var e=this.get(t.slice(0,-1)),n=t[t.length-1],o=e.getChild(n);o&&o.runtime&&e.removeChild(n)},v.prototype.isRegistered=function(t){var e=this.get(t.slice(0,-1)),n=t[t.length-1];return e?e.hasChild(n):!1};function F(t,e,n){if(e.update(n),n.modules)for(var o in n.modules){if(!e.getChild(o))return;F(t.concat(o),e.getChild(o),n.modules[o])}}var d,p=function(t){var e=this;t===void 0&&(t={}),!d&&typeof window<"u"&&window.Vue&&R(window.Vue);var n=t.plugins;n===void 0&&(n=[]);var o=t.strict;o===void 0&&(o=!1),this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new v(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._watcherVM=new d,this._makeLocalGettersCache=Object.create(null);var r=this,i=this,a=i.dispatch,u=i.commit;this.dispatch=function(f,l){return a.call(r,f,l)},this.commit=function(f,l,h){return u.call(r,f,l,h)},this.strict=o;var c=this._modules.root.state;M(this,c,[],this._modules.root),S(this,c),n.forEach(function(f){return f(e)});var s=t.devtools!==void 0?t.devtools:d.config.devtools;s&&it(this)},k={state:{configurable:!0}};k.state.get=function(){return this._vm._data.$$state},k.state.set=function(t){},p.prototype.commit=function(t,e,n){var o=this,r=E(t,e,n),i=r.type,a=r.payload,u={type:i,payload:a},c=this._mutations[i];c&&(this._withCommit(function(){c.forEach(function(s){s(a)})}),this._subscribers.slice().forEach(function(s){return s(u,o.state)}))},p.prototype.dispatch=function(t,e){var n=this,o=E(t,e),r=o.type,i=o.payload,a={type:r,payload:i},u=this._actions[r];if(u){try{this._actionSubscribers.slice().filter(function(s){return s.before}).forEach(function(s){return s.before(a,n.state)})}catch{}var c=u.length>1?Promise.all(u.map(function(s){return s(i)})):u[0](i);return new Promise(function(s,f){c.then(function(l){try{n._actionSubscribers.filter(function(h){return h.after}).forEach(function(h){return h.after(a,n.state)})}catch{}s(l)},function(l){try{n._actionSubscribers.filter(function(h){return h.error}).forEach(function(h){return h.error(a,n.state,l)})}catch{}f(l)})})}},p.prototype.subscribe=function(t,e){return N(t,this._subscribers,e)},p.prototype.subscribeAction=function(t,e){var n=typeof t=="function"?{before:t}:t;return N(n,this._actionSubscribers,e)},p.prototype.watch=function(t,e,n){var o=this;return this._watcherVM.$watch(function(){return t(o.state,o.getters)},e,n)},p.prototype.replaceState=function(t){var e=this;this._withCommit(function(){e._vm._data.$$state=t})},p.prototype.registerModule=function(t,e,n){n===void 0&&(n={}),typeof t=="string"&&(t=[t]),this._modules.register(t,e),M(this,this.state,t,this._modules.get(t),n.preserveState),S(this,this.state)},p.prototype.unregisterModule=function(t){var e=this;typeof t=="string"&&(t=[t]),this._modules.unregister(t),this._withCommit(function(){var n=G(e.state,t.slice(0,-1));d.delete(n,t[t.length-1])}),H(this)},p.prototype.hasModule=function(t){return typeof t=="string"&&(t=[t]),this._modules.isRegistered(t)},p.prototype.hotUpdate=function(t){this._modules.update(t),H(this,!0)},p.prototype._withCommit=function(t){var e=this._committing;this._committing=!0,t(),this._committing=e},Object.defineProperties(p.prototype,k);function N(t,e,n){return e.indexOf(t)<0&&(n&&n.prepend?e.unshift(t):e.push(t)),function(){var o=e.indexOf(t);o>-1&&e.splice(o,1)}}function H(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var n=t.state;M(t,n,[],t._modules.root,!0),S(t,n,e)}function S(t,e,n){var o=t._vm;t.getters={},t._makeLocalGettersCache=Object.create(null);var r=t._wrappedGetters,i={};_(r,function(u,c){i[c]=ct(u,t),Object.defineProperty(t.getters,c,{get:function(){return t._vm[c]},enumerable:!0})});var a=d.config.silent;d.config.silent=!0,t._vm=new d({data:{$$state:e},computed:i}),d.config.silent=a,t.strict&&dt(t),o&&(n&&t._withCommit(function(){o._data.$$state=null}),d.nextTick(function(){return o.$destroy()}))}function M(t,e,n,o,r){var i=!n.length,a=t._modules.getNamespace(n);if(o.namespaced&&(t._modulesNamespaceMap[a],t._modulesNamespaceMap[a]=o),!i&&!r){var u=G(e,n.slice(0,-1)),c=n[n.length-1];t._withCommit(function(){d.set(u,c,o.state)})}var s=o.context=ut(t,a,n);o.forEachMutation(function(f,l){var h=a+l;lt(t,h,f,s)}),o.forEachAction(function(f,l){var h=f.root?l:a+l,y=f.handler||f;ht(t,h,y,s)}),o.forEachGetter(function(f,l){var h=a+l;pt(t,h,f,s)}),o.forEachChild(function(f,l){M(t,e,n.concat(l),f,r)})}function ut(t,e,n){var o=e==="",r={dispatch:o?t.dispatch:function(i,a,u){var c=E(i,a,u),s=c.payload,f=c.options,l=c.type;return(!f||!f.root)&&(l=e+l),t.dispatch(l,s)},commit:o?t.commit:function(i,a,u){var c=E(i,a,u),s=c.payload,f=c.options,l=c.type;(!f||!f.root)&&(l=e+l),t.commit(l,s,f)}};return Object.defineProperties(r,{getters:{get:o?function(){return t.getters}:function(){return ft(t,e)}},state:{get:function(){return G(t.state,n)}}}),r}function ft(t,e){if(!t._makeLocalGettersCache[e]){var n={},o=e.length;Object.keys(t.getters).forEach(function(r){if(r.slice(0,o)===e){var i=r.slice(o);Object.defineProperty(n,i,{get:function(){return t.getters[r]},enumerable:!0})}}),t._makeLocalGettersCache[e]=n}return t._makeLocalGettersCache[e]}function lt(t,e,n,o){var r=t._mutations[e]||(t._mutations[e]=[]);r.push(function(i){n.call(t,o.state,i)})}function ht(t,e,n,o){var r=t._actions[e]||(t._actions[e]=[]);r.push(function(i){var a=n.call(t,{dispatch:o.dispatch,commit:o.commit,getters:o.getters,state:o.state,rootGetters:t.getters,rootState:t.state},i);return st(a)||(a=Promise.resolve(a)),t._devtoolHook?a.catch(function(u){throw t._devtoolHook.emit("vuex:error",u),u}):a})}function pt(t,e,n,o){t._wrappedGetters[e]||(t._wrappedGetters[e]=function(r){return n(o.state,o.getters,r.state,r.getters)})}function dt(t){t._vm.$watch(function(){return this._data.$$state},function(){},{deep:!0,sync:!0})}function G(t,e){return e.reduce(function(n,o){return n[o]},t)}function E(t,e,n){return D(t)&&t.type&&(n=e,e=t,t=t.type),{type:t,payload:e,options:n}}function R(t){d&&t===d||(d=t,ot(d))}var U=$(function(t,e){var n={};return O(e).forEach(function(o){var r=o.key,i=o.val;n[r]=function(){var a=this.$store.state,u=this.$store.getters;if(t){var c=C(this.$store,"mapState",t);if(!c)return;a=c.context.state,u=c.context.getters}return typeof i=="function"?i.call(this,a,u):a[i]},n[r].vuex=!0}),n}),B=$(function(t,e){var n={};return O(e).forEach(function(o){var r=o.key,i=o.val;n[r]=function(){for(var a=[],u=arguments.length;u--;)a[u]=arguments[u];var c=this.$store.commit;if(t){var s=C(this.$store,"mapMutations",t);if(!s)return;c=s.context.commit}return typeof i=="function"?i.apply(this,[c].concat(a)):c.apply(this.$store,[i].concat(a))}}),n}),K=$(function(t,e){var n={};return O(e).forEach(function(o){var r=o.key,i=o.val;i=t+i,n[r]=function(){if(!(t&&!C(this.$store,"mapGetters",t)))return this.$store.getters[i]},n[r].vuex=!0}),n}),q=$(function(t,e){var n={};return O(e).forEach(function(o){var r=o.key,i=o.val;n[r]=function(){for(var a=[],u=arguments.length;u--;)a[u]=arguments[u];var c=this.$store.dispatch;if(t){var s=C(this.$store,"mapActions",t);if(!s)return;c=s.context.dispatch}return typeof i=="function"?i.apply(this,[c].concat(a)):c.apply(this.$store,[i].concat(a))}}),n}),mt=function(t){return{mapState:U.bind(null,t),mapGetters:K.bind(null,t),mapMutations:B.bind(null,t),mapActions:q.bind(null,t)}};function O(t){return vt(t)?Array.isArray(t)?t.map(function(e){return{key:e,val:e}}):Object.keys(t).map(function(e){return{key:e,val:t[e]}}):[]}function vt(t){return Array.isArray(t)||D(t)}function $(t){return function(e,n){return typeof e!="string"?(n=e,e=""):e.charAt(e.length-1)!=="/"&&(e+="/"),t(e,n)}}function C(t,e,n){var o=t._modulesNamespaceMap[n];return o}function gt(t){t===void 0&&(t={});var e=t.collapsed;e===void 0&&(e=!0);var n=t.filter;n===void 0&&(n=function(f,l,h){return!0});var o=t.transformer;o===void 0&&(o=function(f){return f});var r=t.mutationTransformer;r===void 0&&(r=function(f){return f});var i=t.actionFilter;i===void 0&&(i=function(f,l){return!0});var a=t.actionTransformer;a===void 0&&(a=function(f){return f});var u=t.logMutations;u===void 0&&(u=!0);var c=t.logActions;c===void 0&&(c=!0);var s=t.logger;return s===void 0&&(s=console),function(f){var l=x(f.state);typeof s>"u"||(u&&f.subscribe(function(h,y){var b=x(y);if(n(h,l,b)){var j=V(),A=r(h),Y="mutation "+h.type+j;I(s,Y,e),s.log("%c prev state","color: #9E9E9E; font-weight: bold",o(l)),s.log("%c mutation","color: #03A9F4; font-weight: bold",A),s.log("%c next state","color: #4CAF50; font-weight: bold",o(b)),P(s)}l=b}),c&&f.subscribeAction(function(h,y){if(i(h,y)){var b=V(),j=a(h),A="action "+h.type+b;I(s,A,e),s.log("%c action","color: #03A9F4; font-weight: bold",j),P(s)}}))}}function I(t,e,n){var o=n?t.groupCollapsed:t.group;try{o.call(t,e)}catch{t.log(e)}}function P(t){try{t.groupEnd()}catch{t.log("—— log end ——")}}function V(){var t=new Date;return" @ "+w(t.getHours(),2)+":"+w(t.getMinutes(),2)+":"+w(t.getSeconds(),2)+"."+w(t.getMilliseconds(),3)}function _t(t,e){return new Array(e+1).join(t)}function w(t,e){return _t("0",e-t.toString().length)+t}var yt={Store:p,install:R,version:"3.6.2",mapState:U,mapMutations:B,mapGetters:K,mapActions:q,createNamespacedHelpers:mt,createLogger:gt};const J="SET_VIEW_WIDTH",z="SET_HEADINGS",W="SET_ATTACHMENT_LIST",Q=()=>document.documentElement.clientWidth,bt=({commit:t})=>{const e=tt(()=>{t("text/".concat(J),Q())},100);window.addEventListener("resize",e)};Z.use(yt);const X={state:{viewWidth:Q(),headings:Object.freeze([]),attachmentList:[]},getters:{imageAttachments:t=>t.attachmentList.filter(e=>e.isImage),findAttachment:t=>e=>t.attachmentList.find(n=>n.name===e)},mutations:{[J](t,e){t.viewWidth=e},[z](t,e){if(t.headings.length!==e.length){t.headings=Object.freeze(e);return}const n=t.headings,o=e.map((r,i)=>{const a=n[i].level;return Object.freeze({...r,previous:a})});t.headings=Object.freeze(o)},[W](t,e){t.attachmentList=e}},actions:{setHeadings({commit:t},e){t(z,e)},async setAttachmentList({commit:t},{documentId:e,session:n,shareToken:o}){var i;const r=await et.post(nt("/apps/text/attachments"),{documentId:(i=n==null?void 0:n.documentId)!=null?i:e,sessionId:n==null?void 0:n.id,sessionToken:n==null?void 0:n.token,shareToken:o});t(W,r.data)}}},wt=new p({plugins:[bt],modules:{text:{namespaced:!0,...X}}}),Ot=Object.freeze(Object.defineProperty({__proto__:null,default:wt,textModule:X},Symbol.toStringTag,{value:"Module"}));export{K as a,Ot as i,U as m,wt as s,X as t};
