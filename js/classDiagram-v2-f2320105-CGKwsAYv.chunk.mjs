/*! third party licenses: js/vendor.LICENSE.txt */
import{p as z,d as C,s as G}from"./styles-9a916d00-C8NpzZfo.chunk.mjs";import{l as c,c as d,h as v,z as P,u as q,p as M,t as _,o as $,j as B}from"./mermaid.core-ChD64xgE.chunk.mjs";import{G as H}from"./graph-RO1Bel_o.chunk.mjs";import{r as O}from"./index-3862675e-tbT_gb_H.chunk.mjs";import"./layout-CSM-pooY.chunk.mjs";import"./modulepreload-polyfill-DMTabKmO.chunk.mjs";import"./emoji-picker-SoWZqoso.chunk.mjs";import"./vue.runtime.esm-fZsuJKoo.chunk.mjs";import"./clone-CdZcBlbr.chunk.mjs";import"./edges-e0da2a9e-CfclYjfq.chunk.mjs";import"./createText-2e5e7dd3-CGeVxhlf.chunk.mjs";import"./line-DE4vEKog.chunk.mjs";import"./array-CNYCUCI1.chunk.mjs";import"./path-D16fQfbf.chunk.mjs";const T=a=>B.sanitizeText(a,d());let k={dividerMargin:10,padding:5,textHeight:10,curve:void 0};const W=function(a,l,b,n){const e=Object.keys(a);c.info("keys:",e),c.info(a),e.forEach(function(s){var p;var o,r;const t=a[s],i={shape:"rect",id:t.id,domId:t.domId,labelText:T(t.id),labelStyle:"",style:"fill: none; stroke: black",padding:(p=(o=d().flowchart)==null?void 0:o.padding)!=null?p:(r=d().class)==null?void 0:r.padding};l.setNode(t.id,i),R(t.classes,l,b,n,t.id),c.info("setNode",i)})},R=function(a,l,b,n,e){const s=Object.keys(a);c.info("keys:",s),c.info(a),s.filter(o=>a[o].parent==e).forEach(function(o){var u,m;var r,t;const i=a[o],p=i.cssClasses.join(" "),y=M(i.styles),h=(u=i.label)!=null?u:i.id,f=0,g={labelStyle:y.labelStyle,shape:"class_box",labelText:T(h),classData:i,rx:f,ry:f,class:p,style:y.style,id:i.id,domId:i.domId,tooltip:n.db.getTooltip(i.id,e)||"",haveCallback:i.haveCallback,link:i.link,width:i.type==="group"?500:void 0,type:i.type,padding:(m=(r=d().flowchart)==null?void 0:r.padding)!=null?m:(t=d().class)==null?void 0:t.padding};l.setNode(i.id,g),e&&l.setParent(i.id,e),c.info("setNode",g)})},F=function(a,l,b,n){c.info(a),a.forEach(function(e,s){var m;var o,r;const t=e,i="",p={labelStyle:"",style:""},y=t.text,h=0,f={labelStyle:p.labelStyle,shape:"note",labelText:T(y),noteData:t,rx:h,ry:h,class:i,style:p.style,id:t.id,domId:t.id,tooltip:"",type:"note",padding:(m=(o=d().flowchart)==null?void 0:o.padding)!=null?m:(r=d().class)==null?void 0:r.padding};if(l.setNode(t.id,f),c.info("setNode",f),!t.class||!(t.class in n))return;const g=b+s,u={id:"edgeNote".concat(g),classes:"relation",pattern:"dotted",arrowhead:"none",startLabelRight:"",endLabelLeft:"",arrowTypeStart:"none",arrowTypeEnd:"none",style:"fill:none",labelStyle:"",curve:_(k.curve,$)};l.setEdge(t.id,t.class,u,g)})},J=function(a,l){const b=d().flowchart;let n=0;a.forEach(function(e){var r;var s;n++;const o={classes:"relation",pattern:e.relation.lineType==1?"dashed":"solid",id:"id_".concat(e.id1,"_").concat(e.id2,"_").concat(n),arrowhead:e.type==="arrow_open"?"none":"normal",startLabelRight:e.relationTitle1==="none"?"":e.relationTitle1,endLabelLeft:e.relationTitle2==="none"?"":e.relationTitle2,arrowTypeStart:I(e.relation.type1),arrowTypeEnd:I(e.relation.type2),style:"fill:none",labelStyle:"",curve:_(b==null?void 0:b.curve,$)};if(c.info(o,e),e.style!==void 0){const t=M(e.style);o.style=t.style,o.labelStyle=t.labelStyle}e.text=e.title,e.text===void 0?e.style!==void 0&&(o.arrowheadStyle="fill: #333"):(o.arrowheadStyle="fill: #333",o.labelpos="c",((r=(s=d().flowchart)==null?void 0:s.htmlLabels)!=null?r:d().htmlLabels)?(o.labelType="html",o.label='<span class="edgeLabel">'+e.text+"</span>"):(o.labelType="text",o.label=e.text.replace(B.lineBreakRegex,"\n"),e.style===void 0&&(o.style=o.style||"stroke: #333; stroke-width: 1.5px;fill:none"),o.labelStyle=o.labelStyle.replace("color:","fill:"))),l.setEdge(e.id1,e.id2,o,n)})},K=function(a){k={...k,...a}},Q=async function(a,l,b,n){var S,L,E,N;c.info("Drawing class - ",l);const e=(S=d().flowchart)!=null?S:d().class,s=d().securityLevel;c.info("config:",e);const o=(L=e==null?void 0:e.nodeSpacing)!=null?L:50,r=(E=e==null?void 0:e.rankSpacing)!=null?E:50,t=new H({multigraph:!0,compound:!0}).setGraph({rankdir:n.db.getDirection(),nodesep:o,ranksep:r,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}}),i=n.db.getNamespaces(),p=n.db.getClasses(),y=n.db.getRelations(),h=n.db.getNotes();c.info(y),W(i,t,l,n),R(p,t,l,n),J(y,t),F(h,t,y.length+1,p);let f;s==="sandbox"&&(f=v("#i"+l));const g=s==="sandbox"?v(f.nodes()[0].contentDocument.body):v("body"),u=g.select('[id="'.concat(l,'"]')),m=g.select("#"+l+" g");if(await O(m,t,["aggregation","extension","composition","dependency","lollipop"],"classDiagram",l),P.insertTitle(u,"classTitleText",(N=e==null?void 0:e.titleTopMargin)!=null?N:5,n.db.getDiagramTitle()),q(t,u,e==null?void 0:e.diagramPadding,e==null?void 0:e.useMaxWidth),!(e!=null&&e.htmlLabels)){const D=s==="sandbox"?f.nodes()[0].contentDocument:document,j=D.querySelectorAll('[id="'+l+'"] .edgeLabel .label');for(const x of j){const A=x.getBBox(),w=D.createElementNS("http://www.w3.org/2000/svg","rect");w.setAttribute("rx",0),w.setAttribute("ry",0),w.setAttribute("width",A.width),w.setAttribute("height",A.height),x.insertBefore(w,x.firstChild)}}};function I(a){let l;switch(a){case 0:l="aggregation";break;case 1:l="extension";break;case 2:l="composition";break;case 3:l="dependency";break;case 4:l="lollipop";break;default:l="none"}return l}const U={setConf:K,draw:Q},ce={parser:z,db:C,renderer:U,styles:G,init:a=>{a.class||(a.class={}),a.class.arrowMarkerAbsolute=a.arrowMarkerAbsolute,C.clear()}};export{ce as diagram};
