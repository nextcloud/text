const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=[window.OC.filePath('text', '', 'js/RichWorkspace-t4-fZ6Y_.chunk.mjs'),window.OC.filePath('text', '', 'js/NcLoadingIcon-Css8lryc.chunk.mjs'),window.OC.filePath('text', '', 'js/emoji-picker-MDCGxHB0.chunk.mjs'),window.OC.filePath('text', '', 'js/index-D8Q-pYAc.chunk.mjs'),window.OC.filePath('text', '', 'js/vue.runtime.esm-B5f2uKdw.chunk.mjs'),window.OC.filePath('text', '', 'js/index-CCUE3e_p.chunk.mjs'),window.OC.filePath('text', '', 'css/NcLoadingIcon-CAC0K4sG.chunk.css'),window.OC.filePath('text', '', 'js/index-B8nYQ_zQ.chunk.mjs'),window.OC.filePath('text', '', 'js/EditorOutline-Dk_8qfdo.chunk.mjs'),window.OC.filePath('text', '', 'js/logger-rVwCNoFb.chunk.mjs'),window.OC.filePath('text', '', 'js/index-B_MmnsJm.chunk.mjs'),window.OC.filePath('text', '', 'js/NcNoteCard-Dz5-u2BY-CxxmBV2C.chunk.mjs'),window.OC.filePath('text', '', 'css/NcNoteCard-Dz5-u2BY-B0rOTeLb.chunk.css'),window.OC.filePath('text', '', 'js/preload-helper-BorfeO-5.chunk.mjs'),window.OC.filePath('text', '', 'js/NcCheckboxRadioSwitch-ezquUuPz-BtL84BrO.chunk.mjs'),window.OC.filePath('text', '', 'css/NcCheckboxRadioSwitch-ezquUuPz-35V8jJy1.chunk.css'),window.OC.filePath('text', '', 'js/MediaHandler.provider-DcIvqvZJ.chunk.mjs'),window.OC.filePath('text', '', 'css/EditorOutline-CjCEejD7.chunk.css'),window.OC.filePath('text', '', 'js/Editor.singleton-B-F8zYEe.chunk.mjs'),window.OC.filePath('text', '', 'js/RichTextReader-OkjXg55_.chunk.mjs'),window.OC.filePath('text', '', 'js/BaseReader-DS8bMApA.chunk.mjs'),window.OC.filePath('text', '', 'css/BaseReader-DLKIg9lj.chunk.css'),window.OC.filePath('text', '', 'css/RichTextReader-CMPQ_96l.chunk.css'),window.OC.filePath('text', '', 'css/RichWorkspace-DF75DIQU.chunk.css')])))=>i.map(i=>d[i]);
import{H as x,a as b,N as g,r as v}from"./index-B10gVEMl.chunk.mjs";import{F as H,P as p,r as m}from"./dav-CQDyL7M_-s7fsVi86.chunk.mjs";import{l as w}from"./index-B8nYQ_zQ.chunk.mjs";import{_ as R}from"./preload-helper-BorfeO-5.chunk.mjs";import{g as l,e as u}from"./index-D8Q-pYAc.chunk.mjs";import{t as o,c as V}from"./NcLoadingIcon-Css8lryc.chunk.mjs";import{s as _,a as y}from"./NcNoteCard-Dz5-u2BY-CxxmBV2C.chunk.mjs";import{V as I}from"./vue.runtime.esm-B5f2uKdw.chunk.mjs";import"./emoji-picker-MDCGxHB0.chunk.mjs";import"./index-CCUE3e_p.chunk.mjs";import"./index-B_MmnsJm.chunk.mjs";const W='<svg xmlns="http://www.w3.org/2000/svg" id="mdi-text" viewBox="0 0 24 24"><path d="M21,6V8H3V6H21M3,18H12V16H3V18M3,13H21V11H3V13Z" /></svg>',A=()=>{const t=o("text","Readme")+"."+w("text","default_file_extension");b({id:"rich-workspace-init",displayName:o("text","Add folder description"),category:g.Other,enabled(e){return!window?.OCA?.Text?.RichWorkspaceEnabled||Number(e.attributes["rich-workspace-file"])?!1:(e.permissions&p.CREATE)!==0},iconSvgInline:W,async handler(e,a){if(a.map(k=>k.basename).includes(t)){_(o("text",'"{name}" already exist!',{name:t}));return}const i=e.encodedSource+"/"+encodeURIComponent(t),n=await V({method:"PUT",url:i,headers:{Overwrite:"F"}}),d=parseInt(n.headers["oc-fileid"]),f=new H({source:e.source+"/"+t,id:d,mtime:new Date,mime:"text/markdown",owner:l()?.uid||null,permissions:p.ALL,root:e?.root||"/files/"+l()?.uid});y(o("text",'Created "{name}"',{name:t})),e.attributes["rich-workspace-file"]=d,e.attributes["rich-workspace"]="",u("files:node:created",f),u("files:node:updated",e)}})};let c,r,s;const h=(t,e)=>["files","favorites","public-share"].includes(e.id),E=new x({id:"workspace",order:10,enabled:h,render:async(t,e)=>{s=e,c||(c=(await R(()=>import("./RichWorkspace-t4-fZ6Y_.chunk.mjs"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23]),import.meta.url)).default),r&&(r.$destroy(),console.debug("Destroying existing FilesHeaderRichWorkspaceInstance"));const a=!!s.attributes["rich-workspace-file"],i=s.attributes["rich-workspace"]||"",n=s.path||"";r=new I({extends:c,propsData:{content:i,hasRichWorkspace:a,path:n}}).$mount(t),window.FilesHeaderRichWorkspaceInstance=r},updated(t,e){if(s=t,!r){console.error("No vue instance found for FilesWorkspaceHeader");return}const a=!!t.attributes["rich-workspace-file"]&&h(t,e);r.hasRichWorkspace=a,r.content=t.attributes["rich-workspace"]||"",r.path=t.path||""}}),F=w("text","workspace_available");m("nc:rich-workspace",{nc:"http://nextcloud.org/ns"}),m("nc:rich-workspace-file",{nc:"http://nextcloud.org/ns"}),F&&(A(),v(E));
//# sourceMappingURL=text-init.mjs.map
