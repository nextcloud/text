const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=[window.OC.filePath('text', '', 'js/RichWorkspace-wQG4yxwM.chunk.mjs'),window.OC.filePath('text', '', 'js/NcLoadingIcon-CR2lMUNM.chunk.mjs'),window.OC.filePath('text', '', 'js/vue.runtime.esm-nXYIs6vL.chunk.mjs'),window.OC.filePath('text', '', 'js/emoji-picker-hi3Hwbeu.chunk.mjs'),window.OC.filePath('text', '', 'js/index-CdM8BgQf.chunk.mjs'),window.OC.filePath('text', '', 'js/index-DCzdQJ7L.chunk.mjs'),window.OC.filePath('text', '', 'css/NcLoadingIcon-KhuNWNbx.chunk.css'),window.OC.filePath('text', '', 'js/index-D3wiQe9-.chunk.mjs'),window.OC.filePath('text', '', 'js/NcNoteCard-CwNXZ4vV-Dff94GWm.chunk.mjs'),window.OC.filePath('text', '', 'js/index-Bnw2WuIx.chunk.mjs'),window.OC.filePath('text', '', 'css/NcNoteCard-CwNXZ4vV-CAMZkS3U.chunk.css'),window.OC.filePath('text', '', 'js/Editor.singleton-C3cUS0vF.chunk.mjs'),window.OC.filePath('text', '', 'js/preload-helper-BorfeO-5.chunk.mjs'),window.OC.filePath('text', '', 'js/RichTextReader-DKqDEHWw.chunk.mjs'),window.OC.filePath('text', '', 'js/TocContainer-ANCwihb6.chunk.mjs'),window.OC.filePath('text', '', 'js/logger-DS8A9d_w.chunk.mjs'),window.OC.filePath('text', '', 'js/NcCheckboxRadioSwitch-CgbTELjq-C7Y7tXRC.chunk.mjs'),window.OC.filePath('text', '', 'css/NcCheckboxRadioSwitch-CgbTELjq-yZHRUesB.chunk.css'),window.OC.filePath('text', '', 'js/MediaHandler.provider-bE4nrOxZ.chunk.mjs'),window.OC.filePath('text', '', 'css/TocContainer-D5iXcnn-.chunk.css'),window.OC.filePath('text', '', 'js/BaseReader-BZSE6EEb.chunk.mjs'),window.OC.filePath('text', '', 'css/BaseReader-DggDbgkd.chunk.css'),window.OC.filePath('text', '', 'css/RichTextReader-Cxcjv1d6.chunk.css'),window.OC.filePath('text', '', 'css/RichWorkspace-BCr0MiN_.chunk.css')])))=>i.map(i=>d[i]);
import{H as x,a as b,N as g,r as v}from"./index-DGWaRAPl.chunk.mjs";import{F as H,P as p,r as m}from"./dav-Rt1kTtvI-CV-qd1vO.chunk.mjs";import{l as w}from"./index-D3wiQe9-.chunk.mjs";import{_ as R}from"./preload-helper-BorfeO-5.chunk.mjs";import{g as l,e as u}from"./index-CdM8BgQf.chunk.mjs";import{t as s,c as _}from"./NcLoadingIcon-CR2lMUNM.chunk.mjs";import{V as y}from"./vue.runtime.esm-nXYIs6vL.chunk.mjs";import{s as V,a as I}from"./NcNoteCard-CwNXZ4vV-Dff94GWm.chunk.mjs";import"./emoji-picker-hi3Hwbeu.chunk.mjs";import"./index-DCzdQJ7L.chunk.mjs";import"./index-Bnw2WuIx.chunk.mjs";const W='<svg xmlns="http://www.w3.org/2000/svg" id="mdi-text" viewBox="0 0 24 24"><path d="M21,6V8H3V6H21M3,18H12V16H3V18M3,13H21V11H3V13Z" /></svg>',A=()=>{const t=s("text","Readme")+"."+w("text","default_file_extension");b({id:"rich-workspace-init",displayName:s("text","Add folder description"),category:g.Other,enabled(e){return!window?.OCA?.Text?.RichWorkspaceEnabled||Number(e.attributes["rich-workspace-file"])?!1:(e.permissions&p.CREATE)!==0},iconSvgInline:W,async handler(e,a){if(a.map(k=>k.basename).includes(t)){V(s("text",'"{name}" already exist!',{name:t}));return}const i=e.encodedSource+"/"+encodeURIComponent(t),n=await _({method:"PUT",url:i,headers:{Overwrite:"F"}}),d=parseInt(n.headers["oc-fileid"]),f=new H({source:e.source+"/"+t,id:d,mtime:new Date,mime:"text/markdown",owner:l()?.uid||null,permissions:p.ALL,root:e?.root||"/files/"+l()?.uid});I(s("text",'Created "{name}"',{name:t})),e.attributes["rich-workspace-file"]=d,e.attributes["rich-workspace"]="",u("files:node:created",f),u("files:node:updated",e)}})};let c,r,o;const h=(t,e)=>["files","favorites","public-share"].includes(e.id),E=new x({id:"workspace",order:10,enabled:h,render:async(t,e)=>{o=e,c||(c=(await R(()=>import("./RichWorkspace-wQG4yxwM.chunk.mjs"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23]),import.meta.url)).default),r&&(r.$destroy(),console.debug("Destroying existing FilesHeaderRichWorkspaceInstance"));const a=!!o.attributes["rich-workspace-file"],i=o.attributes["rich-workspace"]||"",n=o.path||"";r=new y({extends:c,propsData:{content:i,hasRichWorkspace:a,path:n}}).$mount(t),window.FilesHeaderRichWorkspaceInstance=r},updated(t,e){if(o=t,!r){console.error("No vue instance found for FilesWorkspaceHeader");return}const a=!!t.attributes["rich-workspace-file"]&&h(t,e);r.hasRichWorkspace=a,r.content=t.attributes["rich-workspace"]||"",r.path=t.path||""}}),F=w("text","workspace_available");m("nc:rich-workspace",{nc:"http://nextcloud.org/ns"}),m("nc:rich-workspace-file",{nc:"http://nextcloud.org/ns"}),F&&(A(),v(E));
//# sourceMappingURL=text-init.mjs.map
