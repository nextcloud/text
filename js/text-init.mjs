const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=[window.OC.filePath('text', '', 'js/RichWorkspace-Dinc9pZ_.chunk.mjs'),window.OC.filePath('text', '', 'js/NcLoadingIcon-BLBsV_jd.chunk.mjs'),window.OC.filePath('text', '', 'js/emoji-picker-hi3Hwbeu.chunk.mjs'),window.OC.filePath('text', '', 'js/index-CdM8BgQf.chunk.mjs'),window.OC.filePath('text', '', 'js/vue.runtime.esm-C6p0QIhY.chunk.mjs'),window.OC.filePath('text', '', 'js/index-DCzdQJ7L.chunk.mjs'),window.OC.filePath('text', '', 'css/NcLoadingIcon-CAC0K4sG.chunk.css'),window.OC.filePath('text', '', 'js/index-B8nYQ_zQ.chunk.mjs'),window.OC.filePath('text', '', 'js/EditorOutline-CJaAQE7w.chunk.mjs'),window.OC.filePath('text', '', 'js/logger-JRW888D7.chunk.mjs'),window.OC.filePath('text', '', 'js/index-CAxq7uh6.chunk.mjs'),window.OC.filePath('text', '', 'js/NcNoteCard-Dz5-u2BY-BFR1Ui_6.chunk.mjs'),window.OC.filePath('text', '', 'css/NcNoteCard-Dz5-u2BY-Br35yCJL.chunk.css'),window.OC.filePath('text', '', 'js/preload-helper-BorfeO-5.chunk.mjs'),window.OC.filePath('text', '', 'js/NcCheckboxRadioSwitch-DAPHFb0L-CV26DpRz.chunk.mjs'),window.OC.filePath('text', '', 'css/NcCheckboxRadioSwitch-DAPHFb0L-35V8jJy1.chunk.css'),window.OC.filePath('text', '', 'js/MediaHandler.provider-Co_8hElS.chunk.mjs'),window.OC.filePath('text', '', 'css/EditorOutline-BWZwDcFu.chunk.css'),window.OC.filePath('text', '', 'js/Editor.singleton-DP4rw_vb.chunk.mjs'),window.OC.filePath('text', '', 'js/RichTextReader-CREQD3tP.chunk.mjs'),window.OC.filePath('text', '', 'js/BaseReader-knzSpTcr.chunk.mjs'),window.OC.filePath('text', '', 'css/BaseReader-DLKIg9lj.chunk.css'),window.OC.filePath('text', '', 'css/RichTextReader-78awyFeN.chunk.css'),window.OC.filePath('text', '', 'css/RichWorkspace-Bk6Bf3M6.chunk.css')])))=>i.map(i=>d[i]);
import{H as x,a as b,N as g,r as v}from"./index-UqTcstFW.chunk.mjs";import{F as H,P as p,r as m}from"./dav-CQDyL7M_-DT6toW2Z.chunk.mjs";import{l as w}from"./index-B8nYQ_zQ.chunk.mjs";import{_ as R}from"./preload-helper-BorfeO-5.chunk.mjs";import{g as l,e as u}from"./index-CdM8BgQf.chunk.mjs";import{t as o,c as V}from"./NcLoadingIcon-BLBsV_jd.chunk.mjs";import{s as _,a as y}from"./NcNoteCard-Dz5-u2BY-BFR1Ui_6.chunk.mjs";import{V as I}from"./vue.runtime.esm-C6p0QIhY.chunk.mjs";import"./emoji-picker-hi3Hwbeu.chunk.mjs";import"./index-DCzdQJ7L.chunk.mjs";import"./index-CAxq7uh6.chunk.mjs";const W='<svg xmlns="http://www.w3.org/2000/svg" id="mdi-text" viewBox="0 0 24 24"><path d="M21,6V8H3V6H21M3,18H12V16H3V18M3,13H21V11H3V13Z" /></svg>',A=()=>{const t=o("text","Readme")+"."+w("text","default_file_extension");b({id:"rich-workspace-init",displayName:o("text","Add folder description"),category:g.Other,enabled(e){return!window?.OCA?.Text?.RichWorkspaceEnabled||Number(e.attributes["rich-workspace-file"])?!1:(e.permissions&p.CREATE)!==0},iconSvgInline:W,async handler(e,a){if(a.map(k=>k.basename).includes(t)){_(o("text",'"{name}" already exist!',{name:t}));return}const i=e.encodedSource+"/"+encodeURIComponent(t),n=await V({method:"PUT",url:i,headers:{Overwrite:"F"}}),d=parseInt(n.headers["oc-fileid"]),f=new H({source:e.source+"/"+t,id:d,mtime:new Date,mime:"text/markdown",owner:l()?.uid||null,permissions:p.ALL,root:e?.root||"/files/"+l()?.uid});y(o("text",'Created "{name}"',{name:t})),e.attributes["rich-workspace-file"]=d,e.attributes["rich-workspace"]="",u("files:node:created",f),u("files:node:updated",e)}})};let c,r,s;const h=(t,e)=>["files","favorites","public-share"].includes(e.id),E=new x({id:"workspace",order:10,enabled:h,render:async(t,e)=>{s=e,c||(c=(await R(()=>import("./RichWorkspace-Dinc9pZ_.chunk.mjs"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23]),import.meta.url)).default),r&&(r.$destroy(),console.debug("Destroying existing FilesHeaderRichWorkspaceInstance"));const a=!!s.attributes["rich-workspace-file"],i=s.attributes["rich-workspace"]||"",n=s.path||"";r=new I({extends:c,propsData:{content:i,hasRichWorkspace:a,path:n}}).$mount(t),window.FilesHeaderRichWorkspaceInstance=r},updated(t,e){if(s=t,!r){console.error("No vue instance found for FilesWorkspaceHeader");return}const a=!!t.attributes["rich-workspace-file"]&&h(t,e);r.hasRichWorkspace=a,r.content=t.attributes["rich-workspace"]||"",r.path=t.path||""}}),F=w("text","workspace_available");m("nc:rich-workspace",{nc:"http://nextcloud.org/ns"}),m("nc:rich-workspace-file",{nc:"http://nextcloud.org/ns"}),F&&(A(),v(E));
//# sourceMappingURL=text-init.mjs.map
