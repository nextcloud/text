const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=[window.OC.filePath('text', '', 'js/RichWorkspace-ZF9WJNlL.chunk.mjs'),window.OC.filePath('text', '', 'js/NcLoadingIcon-V-QWbD5-.chunk.mjs'),window.OC.filePath('text', '', 'js/emoji-picker-DJyM6asK.chunk.mjs'),window.OC.filePath('text', '', 'js/index-CkfhUZfI.chunk.mjs'),window.OC.filePath('text', '', 'js/vue.runtime.esm-Ci2e5rf_.chunk.mjs'),window.OC.filePath('text', '', 'js/index-DUrHmx5a.chunk.mjs'),window.OC.filePath('text', '', 'css/NcLoadingIcon-CAC0K4sG.chunk.css'),window.OC.filePath('text', '', 'js/index-B64e8dYD.chunk.mjs'),window.OC.filePath('text', '', 'js/EditorOutline-C5m19S-T.chunk.mjs'),window.OC.filePath('text', '', 'js/logger-Btaw2hdC.chunk.mjs'),window.OC.filePath('text', '', 'js/index-ti_56SXG.chunk.mjs'),window.OC.filePath('text', '', 'js/NcNoteCard-Dz5-u2BY-DEDsgEwb.chunk.mjs'),window.OC.filePath('text', '', 'css/NcNoteCard-Dz5-u2BY-B0rOTeLb.chunk.css'),window.OC.filePath('text', '', 'js/preload-helper-Dlt9bAsw.chunk.mjs'),window.OC.filePath('text', '', 'js/NcCheckboxRadioSwitch-ezquUuPz-BfX8XV6z.chunk.mjs'),window.OC.filePath('text', '', 'css/NcCheckboxRadioSwitch-ezquUuPz-35V8jJy1.chunk.css'),window.OC.filePath('text', '', 'js/MediaHandler.provider-B8o03yiD.chunk.mjs'),window.OC.filePath('text', '', 'css/EditorOutline-Ovd_xCGq.chunk.css'),window.OC.filePath('text', '', 'js/Editor.singleton-FtN1KVr3.chunk.mjs'),window.OC.filePath('text', '', 'js/RichTextReader-Bm9N6A0Y.chunk.mjs'),window.OC.filePath('text', '', 'js/BaseReader-BQtr8O3Q.chunk.mjs'),window.OC.filePath('text', '', 'css/BaseReader-DLKIg9lj.chunk.css'),window.OC.filePath('text', '', 'css/RichTextReader-CMPQ_96l.chunk.css'),window.OC.filePath('text', '', 'css/RichWorkspace-DF75DIQU.chunk.css')])))=>i.map(i=>d[i]);
import{H as g,a as v,N as H,r as R}from"./index-Cqe8I0z9.chunk.mjs";import{F as V,P as l,r as u}from"./dav-CQDyL7M_-CH-BFZ4c.chunk.mjs";import{l as k}from"./index-B64e8dYD.chunk.mjs";import{_}from"./preload-helper-Dlt9bAsw.chunk.mjs";import{g as h,e as w}from"./index-CkfhUZfI.chunk.mjs";import{t as o,c as y}from"./NcLoadingIcon-V-QWbD5-.chunk.mjs";import{s as I,a as W}from"./NcNoteCard-Dz5-u2BY-DEDsgEwb.chunk.mjs";import{V as D}from"./vue.runtime.esm-Ci2e5rf_.chunk.mjs";import"./emoji-picker-DJyM6asK.chunk.mjs";import"./index-DUrHmx5a.chunk.mjs";import"./index-ti_56SXG.chunk.mjs";const E='<svg xmlns="http://www.w3.org/2000/svg" id="mdi-text" viewBox="0 0 24 24"><path d="M21,6V8H3V6H21M3,18H12V16H3V18M3,13H21V11H3V13Z" /></svg>',F=()=>{const t=o("text","Readme")+"."+k("text","default_file_extension");v({id:"rich-workspace-init",displayName:o("text","Add folder description"),category:H.Other,enabled(e){return Number(e.attributes["rich-workspace-file"])?!1:(e.permissions&l.CREATE)!==0},iconSvgInline:E,async handler(e,a){var p,m;if(a.map(b=>b.basename).includes(t)){I(o("text",'"{name}" already exist!',{name:t}));return}const i=e.encodedSource+"/"+encodeURIComponent(t),n=await y({method:"PUT",url:i,headers:{Overwrite:"F"}}),d=parseInt(n.headers["oc-fileid"]),x=new V({source:e.source+"/"+t,id:d,mtime:new Date,mime:"text/markdown",owner:((p=h())==null?void 0:p.uid)||null,permissions:l.ALL,root:(e==null?void 0:e.root)||"/files/"+((m=h())==null?void 0:m.uid)});W(o("text",'Created "{name}"',{name:t})),e.attributes["rich-workspace-file"]=d,e.attributes["rich-workspace"]="",w("files:node:created",x),w("files:node:updated",e)}})};let c,r,s;const f=(t,e)=>["files","favorites","public-share"].includes(e.id),N=new g({id:"workspace",order:10,enabled:f,render:async(t,e)=>{s=e,c||(c=(await _(()=>import("./RichWorkspace-ZF9WJNlL.chunk.mjs"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23]),import.meta.url)).default),r&&(r.$destroy(),console.debug("Destroying existing FilesHeaderRichWorkspaceInstance"));const a=!!s.attributes["rich-workspace-file"],i=s.attributes["rich-workspace"]||"",n=s.path||"";r=new D({extends:c,propsData:{content:i,hasRichWorkspace:a,path:n}}).$mount(t),window.FilesHeaderRichWorkspaceInstance=r},updated(t,e){if(s=t,!r){console.error("No vue instance found for FilesWorkspaceHeader");return}const a=!!t.attributes["rich-workspace-file"]&&f(t,e);r.hasRichWorkspace=a,r.content=t.attributes["rich-workspace"]||"",r.path=t.path||""}}),A=k("text","workspace_available");u("nc:rich-workspace",{nc:"http://nextcloud.org/ns"}),u("nc:rich-workspace-file",{nc:"http://nextcloud.org/ns"}),A&&(F(),R(N));
//# sourceMappingURL=text-init.mjs.map
