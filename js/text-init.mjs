const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=[window.OC.filePath('text', '', 'js/RichWorkspace-NdEw5GmU.chunk.mjs'),window.OC.filePath('text', '', 'js/NcLoadingIcon-CBTC2zMe.chunk.mjs'),window.OC.filePath('text', '', 'js/vue.runtime.esm-B7-PK3p1.chunk.mjs'),window.OC.filePath('text', '', 'js/emoji-picker-hi3Hwbeu.chunk.mjs'),window.OC.filePath('text', '', 'js/index-CdM8BgQf.chunk.mjs'),window.OC.filePath('text', '', 'js/index-DCzdQJ7L.chunk.mjs'),window.OC.filePath('text', '', 'css/NcLoadingIcon-KhuNWNbx.chunk.css'),window.OC.filePath('text', '', 'js/index-D3wiQe9-.chunk.mjs'),window.OC.filePath('text', '', 'js/NcNoteCard-CwNXZ4vV-Dyi378DT.chunk.mjs'),window.OC.filePath('text', '', 'js/index-Bnw2WuIx.chunk.mjs'),window.OC.filePath('text', '', 'css/NcNoteCard-CwNXZ4vV-CAMZkS3U.chunk.css'),window.OC.filePath('text', '', 'js/Editor-BfS2wvfx.chunk.mjs'),window.OC.filePath('text', '', 'js/preload-helper-BorfeO-5.chunk.mjs'),window.OC.filePath('text', '', 'js/index-kwZOOyqh.chunk.mjs'),window.OC.filePath('text', '', 'js/Wrapper-BSNwndmf.chunk.mjs'),window.OC.filePath('text', '', 'js/logger-DS8A9d_w.chunk.mjs'),window.OC.filePath('text', '', 'js/NcCheckboxRadioSwitch-CgbTELjq-BFpDVXaF.chunk.mjs'),window.OC.filePath('text', '', 'css/NcCheckboxRadioSwitch-CgbTELjq-yZHRUesB.chunk.css'),window.OC.filePath('text', '', 'js/MediaHandler.provider-BoQN9QHH.chunk.mjs'),window.OC.filePath('text', '', 'css/Wrapper-DvM8Zo5N.chunk.css'),window.OC.filePath('text', '', 'js/MenuBar-h_ogqLaw.chunk.mjs'),window.OC.filePath('text', '', 'css/MenuBar-nIM-GMTV.chunk.css'),window.OC.filePath('text', '', 'css/Editor-WVhMK67-.chunk.css'),window.OC.filePath('text', '', 'js/RichTextReader-_-cGOvRk.chunk.mjs'),window.OC.filePath('text', '', 'js/BaseReader-K0n_yl6_.chunk.mjs'),window.OC.filePath('text', '', 'css/BaseReader-tgZS41wn.chunk.css'),window.OC.filePath('text', '', 'css/RichTextReader-Cxcjv1d6.chunk.css'),window.OC.filePath('text', '', 'css/RichWorkspace-dJe8ihPi.chunk.css')])))=>i.map(i=>d[i]);
import{H as x,a as b,N as g,F as v,P as p,r as m,b as H}from"./index-kwZOOyqh.chunk.mjs";import{l as w}from"./index-D3wiQe9-.chunk.mjs";import{_ as R}from"./preload-helper-BorfeO-5.chunk.mjs";import{g as l,e as u}from"./index-CdM8BgQf.chunk.mjs";import{t as o,c as _}from"./NcLoadingIcon-CBTC2zMe.chunk.mjs";import{V as y}from"./vue.runtime.esm-B7-PK3p1.chunk.mjs";import{s as V,a as I}from"./NcNoteCard-CwNXZ4vV-Dyi378DT.chunk.mjs";import"./index-DCzdQJ7L.chunk.mjs";import"./index-Bnw2WuIx.chunk.mjs";import"./emoji-picker-hi3Hwbeu.chunk.mjs";const W='<svg xmlns="http://www.w3.org/2000/svg" id="mdi-text" viewBox="0 0 24 24"><path d="M21,6V8H3V6H21M3,18H12V16H3V18M3,13H21V11H3V13Z" /></svg>',A=()=>{const t=o("text","Readme")+"."+w("text","default_file_extension");b({id:"rich-workspace-init",displayName:o("text","Add folder description"),category:g.Other,enabled(e){return!window?.OCA?.Text?.RichWorkspaceEnabled||Number(e.attributes["rich-workspace-file"])?!1:(e.permissions&p.CREATE)!==0},iconSvgInline:W,async handler(e,a){if(a.map(k=>k.basename).includes(t)){V(o("text",'"{name}" already exist!',{name:t}));return}const i=e.encodedSource+"/"+encodeURIComponent(t),n=await _({method:"PUT",url:i,headers:{Overwrite:"F"}}),d=parseInt(n.headers["oc-fileid"]),f=new v({source:e.source+"/"+t,id:d,mtime:new Date,mime:"text/markdown",owner:l()?.uid||null,permissions:p.ALL,root:e?.root||"/files/"+l()?.uid});I(o("text",'Created "{name}"',{name:t})),e.attributes["rich-workspace-file"]=d,e.attributes["rich-workspace"]="",u("files:node:created",f),u("files:node:updated",e)}})};let c,r,s;const h=(t,e)=>["files","favorites","public-share"].includes(e.id),E=new x({id:"workspace",order:10,enabled:h,render:async(t,e)=>{s=e,c||(c=(await R(()=>import("./RichWorkspace-NdEw5GmU.chunk.mjs"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27]),import.meta.url)).default),r&&(r.$destroy(),console.debug("Destroying existing FilesHeaderRichWorkspaceInstance"));const a=!!s.attributes["rich-workspace-file"],i=s.attributes["rich-workspace"]||"",n=s.path||"";r=new y({extends:c,propsData:{content:i,hasRichWorkspace:a,path:n}}).$mount(t),window.FilesHeaderRichWorkspaceInstance=r},updated(t,e){if(s=t,!r){console.error("No vue instance found for FilesWorkspaceHeader");return}const a=!!t.attributes["rich-workspace-file"]&&h(t,e);r.hasRichWorkspace=a,r.content=t.attributes["rich-workspace"]||"",r.path=t.path||""}}),F=w("text","workspace_available");m("nc:rich-workspace",{nc:"http://nextcloud.org/ns"}),m("nc:rich-workspace-file",{nc:"http://nextcloud.org/ns"}),F&&(A(),H(E));
//# sourceMappingURL=text-init.mjs.map
