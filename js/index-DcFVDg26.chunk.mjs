import{g as L,V as et}from"./vue.runtime.esm-Ccc28AWB.chunk.mjs";import{c as nt,_ as ot}from"./index-WPXGtsOH.chunk.mjs";import{g as rt}from"./emoji-picker-DlAAdvrL.chunk.mjs";function it(t){var e=Number(t.version.split(".")[0]);if(e>=2)t.mixin({beforeCreate:o});else{var n=t.prototype._init;t.prototype._init=function(r){r===void 0&&(r={}),r.init=r.init?[o].concat(r.init):o,n.call(this,r)}}function o(){var r=this.$options;r.store?this.$store=typeof r.store=="function"?r.store():r.store:r.parent&&r.parent.$store&&(this.$store=r.parent.$store)}}var at=typeof window<"u"?window:typeof L<"u"?L:{},y=at.__VUE_DEVTOOLS_GLOBAL_HOOK__;function st(t){y&&(t._devtoolHook=y,y.emit("vuex:init",t),y.on("vuex:travel-to-state",function(e){t.replaceState(e)}),t.subscribe(function(e,n){y.emit("vuex:mutation",e,n)},{prepend:!0}),t.subscribeAction(function(e,n){y.emit("vuex:action",e,n)},{prepend:!0}))}function ct(t,e){return t.filter(e)[0]}function k(t,e){if(e===void 0&&(e=[]),t===null||typeof t!="object")return t;var n=ct(e,function(r){return r.original===t});if(n)return n.copy;var o=Array.isArray(t)?[]:{};return e.push({original:t,copy:o}),Object.keys(t).forEach(function(r){o[r]=k(t[r],e)}),o}function _(t,e){Object.keys(t).forEach(function(n){return e(t[n],n)})}function R(t){return t!==null&&typeof t=="object"}function ut(t){return t&&typeof t.then=="function"}function ft(t,e){return function(){return t(e)}}var m=function(t,e){this.runtime=e,this._children=Object.create(null),this._rawModule=t;var n=t.state;this.state=(typeof n=="function"?n():n)||{}},P={namespaced:{configurable:!0}};P.namespaced.get=function(){return!!this._rawModule.namespaced},m.prototype.addChild=function(t,e){this._children[t]=e},m.prototype.removeChild=function(t){delete this._children[t]},m.prototype.getChild=function(t){return this._children[t]},m.prototype.hasChild=function(t){return t in this._children},m.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)},m.prototype.forEachChild=function(t){_(this._children,t)},m.prototype.forEachGetter=function(t){this._rawModule.getters&&_(this._rawModule.getters,t)},m.prototype.forEachAction=function(t){this._rawModule.actions&&_(this._rawModule.actions,t)},m.prototype.forEachMutation=function(t){this._rawModule.mutations&&_(this._rawModule.mutations,t)},Object.defineProperties(m.prototype,P);var g=function(t){this.register([],t,!1)};g.prototype.get=function(t){return t.reduce(function(e,n){return e.getChild(n)},this.root)},g.prototype.getNamespace=function(t){var e=this.root;return t.reduce(function(n,o){return e=e.getChild(o),n+(e.namespaced?o+"/":"")},"")},g.prototype.update=function(t){U([],this.root,t)},g.prototype.register=function(t,e,n){var o=this;n===void 0&&(n=!0);var r=new m(e,n);if(t.length===0)this.root=r;else{var a=this.get(t.slice(0,-1));a.addChild(t[t.length-1],r)}e.modules&&_(e.modules,function(i,u){o.register(t.concat(u),i,n)})},g.prototype.unregister=function(t){var e=this.get(t.slice(0,-1)),n=t[t.length-1],o=e.getChild(n);o&&o.runtime&&e.removeChild(n)},g.prototype.isRegistered=function(t){var e=this.get(t.slice(0,-1)),n=t[t.length-1];return e?e.hasChild(n):!1};function U(t,e,n){if(e.update(n),n.modules)for(var o in n.modules){if(!e.getChild(o))return;U(t.concat(o),e.getChild(o),n.modules[o])}}var d,p=function(t){var e=this;t===void 0&&(t={}),!d&&typeof window<"u"&&window.Vue&&B(window.Vue);var n=t.plugins;n===void 0&&(n=[]);var o=t.strict;o===void 0&&(o=!1),this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new g(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._watcherVM=new d,this._makeLocalGettersCache=Object.create(null);var r=this,a=this,i=a.dispatch,u=a.commit;this.dispatch=function(f,l){return i.call(r,f,l)},this.commit=function(f,l,h){return u.call(r,f,l,h)},this.strict=o;var s=this._modules.root.state;O(this,s,[],this._modules.root),T(this,s),n.forEach(function(f){return f(e)});var c=t.devtools!==void 0?t.devtools:d.config.devtools;c&&st(this)},A={state:{configurable:!0}};A.state.get=function(){return this._vm._data.$$state},A.state.set=function(t){},p.prototype.commit=function(t,e,n){var o=this,r=E(t,e,n),a=r.type,i=r.payload,u={type:a,payload:i},s=this._mutations[a];s&&(this._withCommit(function(){s.forEach(function(c){c(i)})}),this._subscribers.slice().forEach(function(c){return c(u,o.state)}))},p.prototype.dispatch=function(t,e){var n=this,o=E(t,e),r=o.type,a=o.payload,i={type:r,payload:a},u=this._actions[r];if(u){try{this._actionSubscribers.slice().filter(function(c){return c.before}).forEach(function(c){return c.before(i,n.state)})}catch{}var s=u.length>1?Promise.all(u.map(function(c){return c(a)})):u[0](a);return new Promise(function(c,f){s.then(function(l){try{n._actionSubscribers.filter(function(h){return h.after}).forEach(function(h){return h.after(i,n.state)})}catch{}c(l)},function(l){try{n._actionSubscribers.filter(function(h){return h.error}).forEach(function(h){return h.error(i,n.state,l)})}catch{}f(l)})})}},p.prototype.subscribe=function(t,e){return N(t,this._subscribers,e)},p.prototype.subscribeAction=function(t,e){var n=typeof t=="function"?{before:t}:t;return N(n,this._actionSubscribers,e)},p.prototype.watch=function(t,e,n){var o=this;return this._watcherVM.$watch(function(){return t(o.state,o.getters)},e,n)},p.prototype.replaceState=function(t){var e=this;this._withCommit(function(){e._vm._data.$$state=t})},p.prototype.registerModule=function(t,e,n){n===void 0&&(n={}),typeof t=="string"&&(t=[t]),this._modules.register(t,e),O(this,this.state,t,this._modules.get(t),n.preserveState),T(this,this.state)},p.prototype.unregisterModule=function(t){var e=this;typeof t=="string"&&(t=[t]),this._modules.unregister(t),this._withCommit(function(){var n=G(e.state,t.slice(0,-1));d.delete(n,t[t.length-1])}),H(this)},p.prototype.hasModule=function(t){return typeof t=="string"&&(t=[t]),this._modules.isRegistered(t)},p.prototype.hotUpdate=function(t){this._modules.update(t),H(this,!0)},p.prototype._withCommit=function(t){var e=this._committing;this._committing=!0,t(),this._committing=e},Object.defineProperties(p.prototype,A);function N(t,e,n){return e.indexOf(t)<0&&(n&&n.prepend?e.unshift(t):e.push(t)),function(){var o=e.indexOf(t);o>-1&&e.splice(o,1)}}function H(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var n=t.state;O(t,n,[],t._modules.root,!0),T(t,n,e)}function T(t,e,n){var o=t._vm;t.getters={},t._makeLocalGettersCache=Object.create(null);var r=t._wrappedGetters,a={};_(r,function(u,s){a[s]=ft(u,t),Object.defineProperty(t.getters,s,{get:function(){return t._vm[s]},enumerable:!0})});var i=d.config.silent;d.config.silent=!0,t._vm=new d({data:{$$state:e},computed:a}),d.config.silent=i,t.strict&&vt(t),o&&(n&&t._withCommit(function(){o._data.$$state=null}),d.nextTick(function(){return o.$destroy()}))}function O(t,e,n,o,r){var a=!n.length,i=t._modules.getNamespace(n);if(o.namespaced&&(t._modulesNamespaceMap[i],t._modulesNamespaceMap[i]=o),!a&&!r){var u=G(e,n.slice(0,-1)),s=n[n.length-1];t._withCommit(function(){d.set(u,s,o.state)})}var c=o.context=lt(t,i,n);o.forEachMutation(function(f,l){var h=i+l;pt(t,h,f,c)}),o.forEachAction(function(f,l){var h=f.root?l:i+l,v=f.handler||f;dt(t,h,v,c)}),o.forEachGetter(function(f,l){var h=i+l;mt(t,h,f,c)}),o.forEachChild(function(f,l){O(t,e,n.concat(l),f,r)})}function lt(t,e,n){var o=e==="",r={dispatch:o?t.dispatch:function(a,i,u){var s=E(a,i,u),c=s.payload,f=s.options,l=s.type;return(!f||!f.root)&&(l=e+l),t.dispatch(l,c)},commit:o?t.commit:function(a,i,u){var s=E(a,i,u),c=s.payload,f=s.options,l=s.type;(!f||!f.root)&&(l=e+l),t.commit(l,c,f)}};return Object.defineProperties(r,{getters:{get:o?function(){return t.getters}:function(){return ht(t,e)}},state:{get:function(){return G(t.state,n)}}}),r}function ht(t,e){if(!t._makeLocalGettersCache[e]){var n={},o=e.length;Object.keys(t.getters).forEach(function(r){if(r.slice(0,o)===e){var a=r.slice(o);Object.defineProperty(n,a,{get:function(){return t.getters[r]},enumerable:!0})}}),t._makeLocalGettersCache[e]=n}return t._makeLocalGettersCache[e]}function pt(t,e,n,o){var r=t._mutations[e]||(t._mutations[e]=[]);r.push(function(a){n.call(t,o.state,a)})}function dt(t,e,n,o){var r=t._actions[e]||(t._actions[e]=[]);r.push(function(a){var i=n.call(t,{dispatch:o.dispatch,commit:o.commit,getters:o.getters,state:o.state,rootGetters:t.getters,rootState:t.state},a);return ut(i)||(i=Promise.resolve(i)),t._devtoolHook?i.catch(function(u){throw t._devtoolHook.emit("vuex:error",u),u}):i})}function mt(t,e,n,o){t._wrappedGetters[e]||(t._wrappedGetters[e]=function(r){return n(o.state,o.getters,r.state,r.getters)})}function vt(t){t._vm.$watch(function(){return this._data.$$state},function(){},{deep:!0,sync:!0})}function G(t,e){return e.reduce(function(n,o){return n[o]},t)}function E(t,e,n){return R(t)&&t.type&&(n=e,e=t,t=t.type),{type:t,payload:e,options:n}}function B(t){d&&t===d||(d=t,it(d))}var K=j(function(t,e){var n={};return M(e).forEach(function(o){var r=o.key,a=o.val;n[r]=function(){var i=this.$store.state,u=this.$store.getters;if(t){var s=$(this.$store,"mapState",t);if(!s)return;i=s.context.state,u=s.context.getters}return typeof a=="function"?a.call(this,i,u):i[a]},n[r].vuex=!0}),n}),q=j(function(t,e){var n={};return M(e).forEach(function(o){var r=o.key,a=o.val;n[r]=function(){for(var i=[],u=arguments.length;u--;)i[u]=arguments[u];var s=this.$store.commit;if(t){var c=$(this.$store,"mapMutations",t);if(!c)return;s=c.context.commit}return typeof a=="function"?a.apply(this,[s].concat(i)):s.apply(this.$store,[a].concat(i))}}),n}),J=j(function(t,e){var n={};return M(e).forEach(function(o){var r=o.key,a=o.val;a=t+a,n[r]=function(){if(!(t&&!$(this.$store,"mapGetters",t)))return this.$store.getters[a]},n[r].vuex=!0}),n}),Q=j(function(t,e){var n={};return M(e).forEach(function(o){var r=o.key,a=o.val;n[r]=function(){for(var i=[],u=arguments.length;u--;)i[u]=arguments[u];var s=this.$store.dispatch;if(t){var c=$(this.$store,"mapActions",t);if(!c)return;s=c.context.dispatch}return typeof a=="function"?a.apply(this,[s].concat(i)):s.apply(this.$store,[a].concat(i))}}),n}),gt=function(t){return{mapState:K.bind(null,t),mapGetters:J.bind(null,t),mapMutations:q.bind(null,t),mapActions:Q.bind(null,t)}};function M(t){return yt(t)?Array.isArray(t)?t.map(function(e){return{key:e,val:e}}):Object.keys(t).map(function(e){return{key:e,val:t[e]}}):[]}function yt(t){return Array.isArray(t)||R(t)}function j(t){return function(e,n){return typeof e!="string"?(n=e,e=""):e.charAt(e.length-1)!=="/"&&(e+="/"),t(e,n)}}function $(t,e,n){var o=t._modulesNamespaceMap[n];return o}function _t(t){t===void 0&&(t={});var e=t.collapsed;e===void 0&&(e=!0);var n=t.filter;n===void 0&&(n=function(f,l,h){return!0});var o=t.transformer;o===void 0&&(o=function(f){return f});var r=t.mutationTransformer;r===void 0&&(r=function(f){return f});var a=t.actionFilter;a===void 0&&(a=function(f,l){return!0});var i=t.actionTransformer;i===void 0&&(i=function(f){return f});var u=t.logMutations;u===void 0&&(u=!0);var s=t.logActions;s===void 0&&(s=!0);var c=t.logger;return c===void 0&&(c=console),function(f){var l=k(f.state);typeof c>"u"||(u&&f.subscribe(function(h,v){var b=k(v);if(n(h,l,b)){var C=D(),x=r(h),tt="mutation "+h.type+C;I(c,tt,e),c.log("%c prev state","color: #9E9E9E; font-weight: bold",o(l)),c.log("%c mutation","color: #03A9F4; font-weight: bold",x),c.log("%c next state","color: #4CAF50; font-weight: bold",o(b)),V(c)}l=b}),s&&f.subscribeAction(function(h,v){if(a(h,v)){var b=D(),C=i(h),x="action "+h.type+b;I(c,x,e),c.log("%c action","color: #03A9F4; font-weight: bold",C),V(c)}}))}}function I(t,e,n){var o=n?t.groupCollapsed:t.group;try{o.call(t,e)}catch{t.log(e)}}function V(t){try{t.groupEnd()}catch{t.log("—— log end ——")}}function D(){var t=new Date;return" @ "+w(t.getHours(),2)+":"+w(t.getMinutes(),2)+":"+w(t.getSeconds(),2)+"."+w(t.getMilliseconds(),3)}function bt(t,e){return new Array(e+1).join(t)}function w(t,e){return bt("0",e-t.toString().length)+t}var wt={Store:p,install:B,version:"3.6.2",mapState:K,mapMutations:q,mapGetters:J,mapActions:Q,createNamespacedHelpers:gt,createLogger:_t};const X="SET_VIEW_WIDTH",z="SET_HEADINGS",W="SET_ATTACHMENT_LIST";var S={exports:{}};function F(t,e=100,n={}){if(typeof t!="function")throw new TypeError(`Expected the first parameter to be a function, got \`${typeof t}\`.`);if(e<0)throw new RangeError("`wait` must not be negative.");const{immediate:o}=typeof n=="boolean"?{immediate:n}:n;let r,a,i,u,s;function c(){const h=r,v=a;return r=void 0,a=void 0,s=t.apply(h,v),s}function f(){const h=Date.now()-u;h<e&&h>=0?i=setTimeout(f,e-h):(i=void 0,o||(s=c()))}const l=function(...h){if(r&&this!==r&&Object.getPrototypeOf(this)===Object.getPrototypeOf(r))throw new Error("Debounced method called with different contexts of the same prototype.");r=this,a=h,u=Date.now();const v=o&&!i;return i||(i=setTimeout(f,e)),v&&(s=c()),s};return Object.defineProperty(l,"isPending",{get(){return i!==void 0}}),l.clear=()=>{i&&(clearTimeout(i),i=void 0)},l.flush=()=>{i&&l.trigger()},l.trigger=()=>{s=c(),l.clear()},l}S.exports.debounce=F,S.exports=F;var Et=S.exports;const Ot=rt(Et),Y=()=>document.documentElement.clientWidth,Mt=({commit:t})=>{const e=Ot(()=>{t(`text/${X}`,Y())},100);window.addEventListener("resize",e)};et.use(wt);const Z={state:{viewWidth:Y(),headings:Object.freeze([]),attachmentList:[]},getters:{imageAttachments:t=>t.attachmentList.filter(e=>e.isImage),findAttachment:t=>e=>t.attachmentList.find(n=>n.name===e)},mutations:{[X](t,e){t.viewWidth=e},[z](t,e){if(t.headings.length!==e.length){t.headings=Object.freeze(e);return}const n=t.headings,o=e.map((r,a)=>{const i=n[a].level;return Object.freeze({...r,previous:i})});t.headings=Object.freeze(o)},[W](t,e){t.attachmentList=e}},actions:{setHeadings({commit:t},e){t(z,e)},async setAttachmentList({commit:t},{documentId:e,session:n,shareToken:o}){const r=await nt.post(ot("/apps/text/attachments"),{documentId:n?.documentId??e,sessionId:n?.id,sessionToken:n?.token,shareToken:o});t(W,r.data)}}},jt=new p({plugins:[Mt],modules:{text:{namespaced:!0,...Z}}}),At=Object.freeze(Object.defineProperty({__proto__:null,default:jt,textModule:Z},Symbol.toStringTag,{value:"Module"}));export{J as a,Ot as d,At as i,K as m,jt as s,Z as t};
//# sourceMappingURL=index-DcFVDg26.chunk.mjs.map
