/*! third party licenses: js/vendor.LICENSE.txt */
import{V as Z,d as $,r as b,e as g,m as J,w as Q,i as Pe,b as W,k as Ve,n as $e,p as De}from"./vue.runtime.esm.chunk.mjs";import{n as L,G as _e,h as Me,ag as Oe,b as X,C as He,N as Y,ah as N,t as k,s as ee,p as j,ai as de}from"./NcNoteCard-BLPU1den.chunk.mjs";import{i as we,d as Ee,c as pe,e as G,f as Te,g as Re,s as We,h as te,C as fe,j as je,k as Ze}from"./index.chunk6.mjs";import{c as qe,N as Ue,y as Ge,l as Ke,g as Je,z as Qe,k as Xe,B as Ye,b as et,r as tt,D as it}from"./NcUserBubble-DMjZyrGY.chunk.mjs";import{s as nt,u as lt,e as at,l as rt}from"./modulepreload-polyfill.chunk.mjs";import{d as st}from"./index.chunk.mjs";import{c as ke,_ as ie}from"./index.chunk3.mjs";import{l as Ce}from"./index.chunk4.mjs";import"./index.chunk2.mjs";import"./emoji-picker.chunk.mjs";import"./index.chunk5.mjs";import"./es.string.replace.chunk.mjs";const ot={name:"CheckboxBlankOutlineIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var ct=function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon checkbox-blank-outline-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M19,5V19H5V5H19Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},ut=[],dt=L(ot,ct,ut,!1,null,null,null,null);const pt=dt.exports,ft={name:"MinusBoxIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var ht=function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon minus-box-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M17,13H7V11H17M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},mt=[],vt=L(ft,ht,mt,!1,null,null,null,null);const gt=vt.exports,yt={name:"CheckboxMarkedIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var bt=function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon checkbox-marked-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M10,17L5,12L6.41,10.58L10,14.17L17.59,6.58L19,8M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},_t=[],wt=L(yt,bt,_t,!1,null,null,null,null);const kt=wt.exports,Ct={name:"RadioboxMarkedIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var xt=function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon radiobox-marked-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},St=[],Bt=L(Ct,xt,St,!1,null,null,null,null);const Nt=Bt.exports,Ft={name:"RadioboxBlankIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var Lt=function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon radiobox-blank-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},zt=[],At=L(Ft,Lt,zt,!1,null,null,null,null);const It=At.exports,Pt={name:"ToggleSwitchOffIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var Vt=function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon toggle-switch-off-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M17,7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7M7,15A3,3 0 0,1 4,12A3,3 0 0,1 7,9A3,3 0 0,1 10,12A3,3 0 0,1 7,15Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},$t=[],Dt=L(Pt,Vt,$t,!1,null,null,null,null);const Mt=Dt.exports,Ot={name:"ToggleSwitchIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var Ht=function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon toggle-switch-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M17,7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7M17,15A3,3 0 0,1 14,12A3,3 0 0,1 17,9A3,3 0 0,1 20,12A3,3 0 0,1 17,15Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},Et=[],Tt=L(Ot,Ht,Et,!1,null,null,null,null);const Rt=Tt.exports,M="checkbox",O="radio",A="switch",E="button",Wt={name:"NcCheckboxContent",components:{NcLoadingIcon:qe},props:{id:{type:String,default:null},iconClass:{type:[String,Object],default:null},textClass:{type:[String,Object],default:null},type:{type:String,default:"checkbox",validator:e=>[M,O,A,E].includes(e)},buttonVariant:{type:Boolean,default:!1},isChecked:{type:Boolean,default:!1},indeterminate:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},size:{type:Number,default:24}},computed:{isButtonType(){return this.type===E},checkboxRadioIconElement(){return this.type===O?this.isChecked?Nt:It:this.type===A?this.isChecked?Rt:Mt:this.indeterminate?gt:this.isChecked?kt:pt}}};var jt=function(){var e=this,t=e._self._c;return t("span",{staticClass:"checkbox-content",class:{["checkbox-content-"+e.type]:!0,"checkbox-content--button-variant":e.buttonVariant,"checkbox-content--has-text":!!e.$slots.default},attrs:{id:e.isButtonType?void 0:"".concat(e.id,"-label")}},[t("span",{class:{"checkbox-content__icon":!0,"checkbox-content__icon--checked":e.isChecked,[e.iconClass]:!0},attrs:{"aria-hidden":!0,inert:""}},[e._t("icon",function(){return[e.loading?t("NcLoadingIcon"):e.buttonVariant?e._e():t(e.checkboxRadioIconElement,{tag:"component",attrs:{size:e.size}})]},{checked:e.isChecked,loading:e.loading})],2),e.$slots.default?t("span",{class:["checkbox-content__text",e.textClass]},[e._t("default")],2):e._e()])},Zt=[],qt=L(Wt,jt,Zt,!1,null,"02d27370",null,null);const Ut=qt.exports,Gt={name:"NcCheckboxRadioSwitch",components:{NcCheckboxContent:Ut},inheritAttrs:!1,props:{id:{type:String,default:()=>"checkbox-radio-switch-"+_e(),validator:e=>e.trim()!==""},wrapperId:{type:String,default:null},name:{type:String,default:null},ariaLabel:{type:String,default:""},type:{type:String,default:"checkbox",validator:e=>[M,O,A,E].includes(e)},buttonVariant:{type:Boolean,default:!1},buttonVariantGrouped:{type:String,default:"no",validator:e=>["no","vertical","horizontal"].includes(e)},checked:{type:[Boolean,Array,String],default:!1},value:{type:String,default:null},disabled:{type:Boolean,default:!1},indeterminate:{type:Boolean,default:!1},required:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},wrapperElement:{type:String,default:null}},emits:["update:checked"],computed:{dataAttrs(){return Object.fromEntries(Object.entries(this.$attrs).filter(([e])=>e.startsWith("data-")))},nonDataAttrs(){return Object.fromEntries(Object.entries(this.$attrs).filter(([e])=>!e.startsWith("data-")))},isButtonType(){return this.type===E},computedWrapperElement(){return this.isButtonType?"button":this.wrapperElement!==null?this.wrapperElement:"span"},listeners(){return this.isButtonType?{click:this.onToggle}:{change:this.onToggle}},size(){return this.type===A?36:24},cssVars(){return{"--icon-size":this.size+"px","--icon-height":(this.type===A?16:this.size)+"px"}},inputType(){return[M,O,E].includes(this.type)?this.type:M},isChecked(){return this.value!==null?Array.isArray(this.checked)?[...this.checked].indexOf(this.value)>-1:this.checked===this.value:this.checked===!0},hasIndeterminate(){return[M,O].includes(this.inputType)}},mounted(){if(this.name&&this.type===M&&!Array.isArray(this.checked))throw new Error("When using groups of checkboxes, the updated value will be an array.");if(this.name&&this.type===A)throw new Error("Switches are not made to be used for data sets. Please use checkboxes instead.");if(typeof this.checked!="boolean"&&this.type===A)throw new Error("Switches can only be used with boolean as checked prop.")},methods:{t:Me,n:Oe,onToggle(){if(this.disabled)return;if(this.type===O){this.$emit("update:checked",this.value);return}if(this.type===A){this.$emit("update:checked",!this.isChecked);return}if(typeof this.checked=="boolean"){this.$emit("update:checked",!this.checked);return}const e=this.getInputsSet().filter(t=>t.checked).map(t=>t.value);e.includes(this.value)?this.$emit("update:checked",e.filter(t=>t!==this.value)):this.$emit("update:checked",[...e,this.value])},getInputsSet(){return[...document.getElementsByName(this.name)]}}};var Kt=function(){var e=this,t=e._self._c;return t(e.computedWrapperElement,e._g(e._b({tag:"component",staticClass:"checkbox-radio-switch",class:{["checkbox-radio-switch-"+e.type]:e.type,"checkbox-radio-switch--checked":e.isChecked,"checkbox-radio-switch--disabled":e.disabled,"checkbox-radio-switch--indeterminate":e.hasIndeterminate?e.indeterminate:!1,"checkbox-radio-switch--button-variant":e.buttonVariant,"checkbox-radio-switch--button-variant-v-grouped":e.buttonVariant&&e.buttonVariantGrouped==="vertical","checkbox-radio-switch--button-variant-h-grouped":e.buttonVariant&&e.buttonVariantGrouped==="horizontal","button-vue":e.isButtonType},style:e.cssVars,attrs:{id:e.wrapperId,"aria-label":e.isButtonType&&e.ariaLabel?e.ariaLabel:void 0,type:e.isButtonType?"button":null}},"component",e.isButtonType?e.$attrs:e.dataAttrs,!1),e.isButtonType?e.listeners:null),[e.isButtonType?e._e():t("input",e._g(e._b({staticClass:"checkbox-radio-switch__input",attrs:{id:e.id,"aria-labelledby":!e.isButtonType&&!e.ariaLabel?"".concat(e.id,"-label"):null,"aria-label":e.ariaLabel||void 0,disabled:e.disabled,type:e.inputType,required:e.required,name:e.name},domProps:{value:e.value,checked:e.isChecked,indeterminate:e.hasIndeterminate?e.indeterminate:null}},"input",e.nonDataAttrs,!1),e.listeners)),t("NcCheckboxContent",{staticClass:"checkbox-radio-switch__content",attrs:{id:e.id,"icon-class":"checkbox-radio-switch__icon","text-class":"checkbox-radio-switch__text",type:e.type,indeterminate:e.hasIndeterminate?e.indeterminate:!1,"button-variant":e.buttonVariant,"is-checked":e.isChecked,loading:e.loading,size:e.size},nativeOn:{click:function(i){return e.onToggle.apply(null,arguments)}},scopedSlots:e._u([{key:"icon",fn:function(){return[e._t("icon")]},proxy:!0}],null,!0)},[e._t("default")],2)],1)},Jt=[],Qt=L(Gt,Kt,Jt,!1,null,"919d07b7",null,null);const xe=Qt.exports,Xt={name:"NcBreadcrumb",components:{NcActions:X,ChevronRight:He,NcButton:Y},inheritAttrs:!1,props:{name:{type:String,required:!0},title:{type:String,default:null},to:{type:[String,Object],default:void 0},exact:{type:Boolean,default:!1},href:{type:String,default:void 0},icon:{type:String,default:""},forceIconText:{type:Boolean,default:!1},disableDrop:{type:Boolean,default:!1},forceMenu:{type:Boolean,default:!1},open:{type:Boolean,default:!1}},emits:["update:open","dropped"],data(){return{hovering:!1,crumbId:"crumb-id-".concat(_e())}},computed:{linkAttributes(){return this.to?{to:this.to,exact:this.exact,...this.$attrs}:this.href?{href:this.href,...this.$attrs}:this.$attrs}},methods:{onOpenChange(e){this.$emit("update:open",e)},dropped(e){return this.disableDrop||(this.$emit("dropped",e,this.to||this.href),this.$parent.$emit("dropped",e,this.to||this.href),this.hovering=!1),!1},dragEnter(e){this.disableDrop||(this.hovering=!0)},dragLeave(e){this.disableDrop||e.target.contains(e.relatedTarget)||this.$refs.crumb.contains(e.relatedTarget)||(this.hovering=!1)}}};var Yt=function(){var e=this,t=e._self._c;return t("li",e._b({ref:"crumb",staticClass:"vue-crumb",class:{"vue-crumb--hovered":e.hovering},attrs:{draggable:"false"},on:{dragstart:function(i){return i.preventDefault(),(()=>{}).apply(null,arguments)},drop:function(i){return i.preventDefault(),e.dropped.apply(null,arguments)},dragover:function(i){return i.preventDefault(),(()=>{}).apply(null,arguments)},dragenter:e.dragEnter,dragleave:e.dragLeave}},"li",e._d({},[e.crumbId,""])),[(e.name||e.icon||e.$slots.icon)&&!e.$slots.default?t("NcButton",e._g(e._b({attrs:{title:e.title,"aria-label":e.icon?e.name:void 0,type:"tertiary"},scopedSlots:e._u([e.$slots.icon||e.icon?{key:"icon",fn:function(){return[e._t("icon",function(){return[t("span",{staticClass:"icon",class:e.icon})]})]},proxy:!0}:null,!(e.$slots.icon||e.icon)||e.forceIconText?{key:"default",fn:function(){return[e._v(" "+e._s(e.name)+" ")]},proxy:!0}:null],null,!0)},"NcButton",e.linkAttributes,!1),e.$listeners)):e._e(),e.$slots.default?t("NcActions",{ref:"actions",attrs:{type:"tertiary","force-menu":e.forceMenu,open:e.open,"menu-name":e.name,title:e.title,"force-name":!0,container:".vue-crumb[".concat(e.crumbId,"]")},on:{"update:open":e.onOpenChange},scopedSlots:e._u([{key:"icon",fn:function(){return[e._t("menu-icon")]},proxy:!0}],null,!0)},[e._t("default")],2):e._e(),t("ChevronRight",{staticClass:"vue-crumb__separator",attrs:{size:20}})],1)},ei=[],ti=L(Xt,Yt,ei,!1,null,"cfe13af3",null,null);const Se=ti.exports;var U=Symbol(),T=Symbol(),he=Symbol(),me=Symbol(),ne=function(e){return"frag"in e},ii={get:function(){return this[T]||this.parentElement},configurable:!0},R=function(e,t){T in e||(e[T]=t,Object.defineProperty(e,"parentNode",ii))},ni={get:function(){var e=this.parentNode.childNodes,t=e.indexOf(this);return t>-1&&e[t+1]||null}},q=function(e){he in e||(e[he]=!0,Object.defineProperty(e,"nextSibling",ni))},li=function(e,t){for(;e.parentNode!==t;){var i=e,n=i.parentNode;n&&(e=n)}return e},K,Be=function(e){if(!K){var t=Object.getOwnPropertyDescriptor(Node.prototype,"childNodes");K=t.get}var i=K.apply(e),n=Array.from(i).map(function(l){return li(l,e)});return n.filter(function(l,a){return l!==n[a-1]})},ai={get:function(){return this.frag||Be(this)}},ri={get:function(){return this.childNodes[0]||null}};function si(){return this.childNodes.length>0}var ve=function(e){me in e||(e[me]=!0,Object.defineProperties(e,{childNodes:ai,firstChild:ri}),e.hasChildNodes=si)};function oi(){var e;(e=this.frag[0]).before.apply(e,arguments)}function ci(){var e=this.frag,t=e.splice(0,e.length);t.forEach(function(i){i.remove()})}var ui=function e(t){var i;return(i=Array.prototype).concat.apply(i,t.map(function(n){return ne(n)?e(n.frag):n}))},di=function(e,t){var i=e[U];t.before(i),R(i,e),e.frag.unshift(i)};function ge(e){if(ne(this)){var t=this.frag.indexOf(e);if(t>-1){var i=this.frag.splice(t,1),n=i[0];this.frag.length===0&&di(this,n),e.remove()}}else{var l=Be(this),a=l.indexOf(e);a>-1&&e.remove()}return e}function ye(e,t){var i=this,n=e.frag||[e];if(ne(this)){if(e[T]===this&&e.parentElement)return e;var l=this.frag;if(t){var a=l.indexOf(t);a>-1&&(l.splice.apply(l,[a,0].concat(n)),t.before.apply(t,n))}else{var r=l[l.length-1];l.push.apply(l,n),r.after.apply(r,n)}Ne(this)}else t?this.childNodes.includes(t)&&t.before.apply(t,n):this.append.apply(this,n);n.forEach(function(d){R(d,i)});var o=n[n.length-1];return q(o),e}function pi(e){if(e[T]===this&&e.parentElement)return e;var t=this.frag,i=t[t.length-1];return i.after(e),R(e,this),Ne(this),t.push(e),e}var Ne=function(e){var t=e[U];e.frag[0]===t&&(e.frag.shift(),t.remove())},fi={set:function(e){var t=this;if(this.frag[0]!==this[U]&&this.frag.slice().forEach(function(n){return t.removeChild(n)}),e){var i=document.createElement("div");i.innerHTML=e,Array.from(i.childNodes).forEach(function(n){t.appendChild(n)})}},get:function(){return""}},hi={inserted:function(e){var t=e.parentNode,i=e.nextSibling,n=e.previousSibling,l=Array.from(e.childNodes),a=document.createComment("");l.length===0&&l.push(a),e.frag=l,e[U]=a;var r=document.createDocumentFragment();r.append.apply(r,ui(l)),e.replaceWith(r),l.forEach(function(o){R(o,e),q(o)}),ve(e),Object.assign(e,{remove:ci,appendChild:pi,insertBefore:ye,removeChild:ge,before:oi}),Object.defineProperty(e,"innerHTML",fi),t&&(Object.assign(t,{removeChild:ge,insertBefore:ye}),R(e,t),ve(t)),i&&q(e),n&&q(n)},unbind:function(e){e.remove()}},Fe={name:"Fragment",directives:{frag:hi},render:function(e){return e("div",{directives:[{name:"frag"}]},this.$slots.default)}};const be=(e,t,i)=>{if(e!==void 0)for(let n=e.length-1;n>=0;n--){const l=e[n],a=!l.componentOptions&&l.tag&&t.indexOf(l.tag)===-1,r=!!l.componentOptions&&typeof l.componentOptions.tag=="string",o=r&&t.indexOf(l.componentOptions.tag)===-1;(a||!r||o)&&((a||o)&&Z.util.warn("".concat(a?l.tag:l.componentOptions.tag," is not allowed inside the ").concat(i.$options.name," component"),i),e.splice(n,1))}},mi={name:"FolderIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var vi=function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon folder-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6H12L10,4Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},gi=[],yi=L(mi,vi,gi,!1,null,null,null,null);const bi=yi.exports,x="vue-crumb",_i={name:"NcBreadcrumbs",components:{NcActions:X,NcActionButton:Ue,NcActionRouter:Ge,NcActionLink:Ke,NcBreadcrumb:Se,IconFolder:bi},props:{rootIcon:{type:String,default:"icon-home"},ariaLabel:{type:String,default:null}},emits:["dropped"],data(){return{hiddenIndices:[],menuBreadcrumbProps:{name:"",forceMenu:!0,disableDrop:!0,open:!1},breadcrumbsRefs:{}}},beforeMount(){be(this.$slots.default,["NcBreadcrumb"],this)},beforeUpdate(){be(this.$slots.default,["NcBreadcrumb"],this)},created(){window.addEventListener("resize",st(()=>{this.handleWindowResize()},100)),nt("navigation-toggled",this.delayedResize)},mounted(){this.handleWindowResize()},updated(){this.delayedResize(),this.$nextTick(()=>{this.hideCrumbs()})},beforeDestroy(){window.removeEventListener("resize",this.handleWindowResize),lt("navigation-toggled",this.delayedResize)},methods:{closeActions(e){this.$refs.actionsBreadcrumb.$el.contains(e.relatedTarget)||(this.menuBreadcrumbProps.open=!1)},async delayedResize(){await this.$nextTick(),this.handleWindowResize()},handleWindowResize(){var e;if(!this.$refs.container)return;const t=Object.values(this.breadcrumbsRefs),i=t.length,n=[],l=this.$refs.container.offsetWidth;let a=this.getTotalWidth(t);this.$refs.breadcrumb__actions&&(a+=this.$refs.breadcrumb__actions.offsetWidth);let r=a-l;r+=r>0?64:0;let o=0;const d=Math.floor(i/2);for(;r>0&&o<i-2;){const c=d+(o%2?o+1:o)/2*Math.pow(-1,o+i%2);r-=this.getWidth((e=t[c])==null?void 0:e.elm,c===t.length-1),n.push(c),o++}this.arraysEqual(this.hiddenIndices,n.sort((c,p)=>c-p))||(this.hiddenIndices=n)},arraysEqual(e,t){if(e.length!==t.length)return!1;if(e===t)return!0;if(e===null||t===null)return!1;for(let i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0},getTotalWidth(e){return e.reduce((t,i,n)=>t+this.getWidth(i==null?void 0:i.elm,n===e.length-1),0)},getWidth(e,t){if(!(e!=null&&e.classList))return 0;const i=e.classList.contains("".concat(x,"--hidden"));e.style.minWidth="auto",t&&(e.style.maxWidth="210px"),e.classList.remove("".concat(x,"--hidden"));const n=e.offsetWidth;return i&&e.classList.add("".concat(x,"--hidden")),e.style.minWidth="",e.style.maxWidth="",n},preventDefault(e){return e.preventDefault&&e.preventDefault(),!1},dragStart(e){return this.preventDefault(e)},dropped(e,t,i){return i||this.$emit("dropped",e,t),this.menuBreadcrumbProps.open=!1,document.querySelectorAll(".".concat(x)).forEach(n=>{n.classList.remove("".concat(x,"--hovered"))}),this.preventDefault(e)},dragOver(e){return this.preventDefault(e)},dragEnter(e,t){if(!t&&e.target.closest){const i=e.target.closest(".".concat(x));i.classList&&i.classList.contains(x)&&(document.querySelectorAll(".".concat(x)).forEach(n=>{n.classList.remove("".concat(x,"--hovered"))}),i.classList.add("".concat(x,"--hovered")))}},dragLeave(e,t){if(!t&&!e.target.contains(e.relatedTarget)&&e.target.closest){const i=e.target.closest(".".concat(x));if(i.contains(e.relatedTarget))return;i.classList&&i.classList.contains(x)&&i.classList.remove("".concat(x,"--hovered"))}},hideCrumbs(){Object.values(this.breadcrumbsRefs).forEach((e,t)=>{var i;(i=e==null?void 0:e.elm)!=null&&i.classList&&(this.hiddenIndices.includes(t)?e.elm.classList.add("".concat(x,"--hidden")):e.elm.classList.remove("".concat(x,"--hidden")))})},isBreadcrumb(e){var t;return(((t=e==null?void 0:e.componentOptions)==null?void 0:t.tag)||(e==null?void 0:e.tag)||"").includes("NcBreadcrumb")}},render(e){const t=[];if(this.$slots.default.forEach(a=>{var r,o;if(this.isBreadcrumb(a)){t.push(a);return}(a==null?void 0:a.type)===Fe&&((o=(r=a==null?void 0:a.children)==null?void 0:r.forEach)==null||o.call(r,d=>{this.isBreadcrumb(d)&&t.push(d)}))}),t.length===0)return;Z.set(t[0].componentOptions.propsData,"icon",this.rootIcon),Z.set(t[0].componentOptions.propsData,"ref","breadcrumbs");const i={};t.forEach((a,r)=>{Z.set(a,"ref","crumb-".concat(r)),i[r]=a});let n=[];if(!this.hiddenIndices.length)n=t;else{n=t.slice(0,Math.round(t.length/2)),n.push(e("NcBreadcrumb",{class:"dropdown",props:this.menuBreadcrumbProps,attrs:{"aria-hidden":!0},ref:"actionsBreadcrumb",key:"actions-breadcrumb-1",nativeOn:{dragstart:this.dragStart,dragenter:()=>{this.menuBreadcrumbProps.open=!0},dragleave:this.closeActions},on:{"update:open":r=>{this.menuBreadcrumbProps.open=r}}},this.hiddenIndices.filter(r=>r<=t.length-1).map(r=>{const o=t[r],d=o.componentOptions.propsData.to,c=o.componentOptions.propsData.href,p=o.componentOptions.propsData.disableDrop,m=o.componentOptions.propsData.title,_=o.componentOptions.propsData.name;let s="NcActionButton",u="";c&&(s="NcActionLink",u=c),d&&(s="NcActionRouter",u=d);const h=e("IconFolder",{props:{size:20},slot:"icon"});return e(s,{class:x,props:{href:c||null,title:m,to:d||null},attrs:{draggable:!1},on:{...o.componentOptions.listeners},nativeOn:{dragstart:this.dragStart,drop:C=>this.dropped(C,u,p),dragover:this.dragOver,dragenter:C=>this.dragEnter(C,p),dragleave:C=>this.dragLeave(C,p)}},[h,_])})));const a=t.slice(Math.round(t.length/2));n=n.concat(a)}const l=[e("nav",{attrs:{"aria-label":this.ariaLabel}},[e("ul",{class:"breadcrumb__crumbs"},[n])])];return this.$slots.actions&&l.push(e("div",{class:"breadcrumb__actions",ref:"breadcrumb__actions"},this.$slots.actions)),this.breadcrumbsRefs=i,e("div",{class:["breadcrumb",{"breadcrumb--collapsed":this.hiddenIndices.length===t.length-2}],ref:"container"},l)}},wi=null,ki=null;var Ci=L(_i,wi,ki,!1,null,"629bf30f",null,null);const xi=Ci.exports;var Si="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M16.2,16.2L11,13V7H12.5V12.2L17,14.9L16.2,16.2Z",Bi="M10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6H12L10,4Z",Ni="M12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.62L12,2L9.19,8.62L2,9.24L7.45,13.97L5.82,21L12,17.27Z";const Fi={name:"FileIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var Li=function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon file-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M13,9V3.5L18.5,9M6,2C4.89,2 4,2.89 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2H6Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},zi=[],Ai=N(Fi,Li,zi,!1,null,null,null,null);const Le=Ai.exports,ze=()=>{var e,t,i;const n=Ce("files","config",null),l=b((e=n==null?void 0:n.show_hidden)!=null?e:!0),a=b((t=n==null?void 0:n.sort_favorites_first)!=null?t:!0),r=b((i=n==null?void 0:n.crop_image_previews)!=null?i:!0);return W(async()=>{var o,d,c,p,m,_;if(we())console.debug("Skip loading files settings - currently on public share");else try{const{data:s}=await ke.get(ie("/apps/files/api/v1/configs"));l.value=(d=(o=s==null?void 0:s.data)==null?void 0:o.show_hidden)!=null?d:!1,a.value=(p=(c=s==null?void 0:s.data)==null?void 0:c.sort_favorites_first)!=null?p:!0,r.value=(_=(m=s==null?void 0:s.data)==null?void 0:m.crop_image_previews)!=null?_:!0}catch(s){console.error("Could not load files settings",s),ee(k("Could not load files settings"))}}),{showHiddenFiles:l,sortFavoritesFirst:a,cropImagePreviews:r}},Ii=e=>{var t,i,n,l,a,r,o,d,c,p,m,_;const s=F=>F==="asc"?"ascending":F==="desc"?"descending":"none",u=Ce("files","viewConfigs",null),h=b({sortBy:(i=(t=u==null?void 0:u.files)==null?void 0:t.sorting_mode)!=null?i:"basename",order:s((l=(n=u==null?void 0:u.files)==null?void 0:n.sorting_direction)!=null?l:"asc")}),C=b({sortBy:(r=(a=u==null?void 0:u.recent)==null?void 0:a.sorting_mode)!=null?r:"basename",order:s((d=(o=u==null?void 0:u.recent)==null?void 0:o.sorting_direction)!=null?d:"asc")}),S=b({sortBy:(p=(c=u==null?void 0:u.favorites)==null?void 0:c.sorting_mode)!=null?p:"basename",order:s((_=(m=u==null?void 0:u.favorites)==null?void 0:m.sorting_direction)!=null?_:"asc")});W(async()=>{var F,I,f,v,P,D,H,V,le,ae,re,se,oe,ce,ue;if(we())console.debug("Skip loading files views - currently on public share");else try{const{data:w}=await ke.get(ie("/apps/files/api/v1/views"));h.value={sortBy:(f=(I=(F=w==null?void 0:w.data)==null?void 0:F.files)==null?void 0:I.sorting_mode)!=null?f:"basename",order:s((P=(v=w==null?void 0:w.data)==null?void 0:v.files)==null?void 0:P.sorting_direction)},S.value={sortBy:(V=(H=(D=w==null?void 0:w.data)==null?void 0:D.favorites)==null?void 0:H.sorting_mode)!=null?V:"basename",order:s((ae=(le=w==null?void 0:w.data)==null?void 0:le.favorites)==null?void 0:ae.sorting_direction)},C.value={sortBy:(oe=(se=(re=w==null?void 0:w.data)==null?void 0:re.recent)==null?void 0:se.sorting_mode)!=null?oe:"basename",order:s((ue=(ce=w==null?void 0:w.data)==null?void 0:ce.recent)==null?void 0:ue.sorting_direction)}}catch(w){console.error("Could not load files views",w),ee(k("Could not load files views"))}});const B=g(()=>de(e||"files")==="files"?h.value:de(e)==="recent"?C.value:S.value),z=g(()=>B.value.sortBy),y=g(()=>B.value.order);return{filesViewConfig:h,favoritesViewConfig:S,recentViewConfig:C,currentConfig:B,sortBy:z,order:y}},Pi={name:"MenuUpIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var Vi=function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon menu-up-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M7,15L12,10L17,15H7Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},$i=[],Di=N(Pi,Vi,$i,!1,null,null,null,null);const Mi=Di.exports,Oi={name:"MenuDownIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var Hi=function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon menu-down-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M7,10L12,15L17,10H7Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},Ei=[],Ti=N(Oi,Hi,Ei,!1,null,null,null,null);const Ri=Ti.exports,Ae={"file-picker__file-icon":"_file-picker__file-icon_19mjt_9"},Wi=$({__name:"LoadingTableRow",props:{showCheckbox:{type:Boolean}},setup(e){return{__sfc:!0,fileListIconStyles:Ae}}});var ji=function(){var e=this,t=e._self._c,i=e._self._setupProxy;return t("tr",{staticClass:"file-picker__row loading-row",attrs:{"aria-hidden":"true"}},[e.showCheckbox?t("td",{staticClass:"row-checkbox"},[t("span")]):e._e(),t("td",{staticClass:"row-name"},[t("div",{staticClass:"row-wrapper"},[t("span",{class:i.fileListIconStyles["file-picker__file-icon"]}),t("span")])]),e._m(0),e._m(1)])},Zi=[function(){var e=this,t=e._self._c;return e._self._setupProxy,t("td",{staticClass:"row-size"},[t("span")])},function(){var e=this,t=e._self._c;return e._self._setupProxy,t("td",{staticClass:"row-modified"},[t("span")])}],qi=N(Wi,ji,Zi,!1,null,"15187afc",null,null);const Ui=qi.exports;function Gi(e,t={}){var i;t={size:32,cropPreview:!1,mimeFallback:!0,...t};try{const n=((i=e.attributes)==null?void 0:i.previewUrl)||ie("/core/preview?fileId={fileid}",{fileid:e.fileid});let l;try{l=new URL(n)}catch{l=new URL(n,window.location.origin)}return l.searchParams.set("x","".concat(t.size)),l.searchParams.set("y","".concat(t.size)),l.searchParams.set("mimeFallback","".concat(t.mimeFallback)),l.searchParams.set("a",t.cropPreview===!0?"0":"1"),l.searchParams.set("c","".concat(e.attributes.etag)),l}catch{return null}}const Ki={name:"FolderIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var Ji=function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon folder-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6H12L10,4Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},Qi=[],Xi=N(Ki,Ji,Qi,!1,null,null,null,null);const Ie=Xi.exports,Yi={name:"FilePreview"},en=$({...Yi,props:{node:null,cropImagePreviews:{type:Boolean}},setup(e){const t=e,i=b(Ae),n=g(()=>Gi(t.node,{cropPreview:t.cropImagePreviews})),l=g(()=>t.node.type===te.File),a=b(!1);return De(()=>{if(a.value=!1,n.value){const r=new Image;r.src=n.value.href,r.onerror=()=>r.remove(),r.onload=()=>{a.value=!0,r.remove()}}}),{__sfc:!0,fileListIconStyles:i,props:t,previewURL:n,isFile:l,canLoadPreview:a,IconFile:Le,IconFolder:Ie}}});var tn=function(){var e=this,t=e._self._c,i=e._self._setupProxy;return t("div",{class:i.fileListIconStyles["file-picker__file-icon"],style:i.canLoadPreview?{backgroundImage:"url(".concat(i.previewURL,")")}:void 0},[i.canLoadPreview?e._e():[i.isFile?t(i.IconFile,{attrs:{size:20}}):t(i.IconFolder,{attrs:{size:20}})]],2)},nn=[],ln=N(en,tn,nn,!1,null,null,null,null);const an=ln.exports,rn=$({__name:"FileListRow",props:{allowPickDirectory:{type:Boolean},selected:{type:Boolean},showCheckbox:{type:Boolean},canPick:{type:Boolean},node:null,cropImagePreviews:{type:Boolean}},emits:["update:selected","enter-directory"],setup(e,{emit:t}){const i=e,n=g(()=>{var p;return((p=i.node.attributes)==null?void 0:p.displayName)||i.node.basename.slice(0,i.node.extension?-i.node.extension.length:void 0)}),l=g(()=>i.node.extension),a=g(()=>i.node.type===te.Folder),r=g(()=>i.canPick&&(i.allowPickDirectory||!a.value));function o(){t("update:selected",!i.selected)}function d(){a.value?t("enter-directory",i.node):o()}function c(p){p.key==="Enter"&&d()}return{__sfc:!0,props:i,emit:t,displayName:n,fileExtension:l,isDirectory:a,isPickable:r,toggleSelected:o,handleClick:d,handleKeyDown:c,formatFileSize:Ze,NcCheckboxRadioSwitch:xe,NcDateTime:it,t:k,FilePreview:an}}});var sn=function(){var e=this,t=e._self._c,i=e._self._setupProxy;return t("tr",e._g({class:["file-picker__row",{"file-picker__row--selected":e.selected&&!e.showCheckbox}],attrs:{tabindex:e.showCheckbox&&!i.isDirectory?void 0:0,"aria-selected":i.isPickable?e.selected:void 0,"data-filename":e.node.basename,"data-testid":"file-list-row"}},{click:i.handleClick,...!e.showCheckbox||i.isDirectory?{keydown:i.handleKeyDown}:{}}),[e.showCheckbox?t("td",{staticClass:"row-checkbox",on:{click:function(n){return n.stopPropagation(),(()=>{}).apply(null,arguments)}}},[t(i.NcCheckboxRadioSwitch,{attrs:{"aria-label":i.t("Select the row for {nodename}",{nodename:i.displayName}),checked:e.selected,disabled:!i.isPickable,"data-testid":"row-checkbox"},on:{"update:checked":i.toggleSelected}})],1):e._e(),t("td",{staticClass:"row-name"},[t("div",{staticClass:"file-picker__name-container",attrs:{"data-testid":"row-name"}},[t(i.FilePreview,{attrs:{node:e.node,"crop-image-previews":e.cropImagePreviews}}),t("div",{staticClass:"file-picker__file-name",attrs:{title:i.displayName},domProps:{textContent:e._s(i.displayName)}}),t("div",{staticClass:"file-picker__file-extension",domProps:{textContent:e._s(i.fileExtension)}})],1)]),t("td",{staticClass:"row-size"},[e._v(" "+e._s(i.formatFileSize(e.node.size||0))+" ")]),t("td",{staticClass:"row-modified"},[t(i.NcDateTime,{attrs:{timestamp:e.node.mtime,"ignore-seconds":!0}})],1)])},on=[],cn=N(rn,sn,on,!1,null,"cb12dccb",null,null);const un=cn.exports,dn=$({__name:"FileList",props:{currentView:null,multiselect:{type:Boolean},allowPickDirectory:{type:Boolean},loading:{type:Boolean},files:null,selectedFiles:null,path:null},emits:["update:path","update:selectedFiles"],setup(e,{emit:t}){const i=e,n=b(),{currentConfig:l}=Ii(i.currentView),a=g(()=>{var y;return(y=n.value)!=null?y:l.value}),r=g(()=>a.value.sortBy==="basename"?a.value.order==="none"?void 0:a.value.order:void 0),o=g(()=>a.value.sortBy==="size"?a.value.order==="none"?void 0:a.value.order:void 0),d=g(()=>a.value.sortBy==="mtime"?a.value.order==="none"?void 0:a.value.order:void 0),c=y=>{a.value.sortBy===y?a.value.order==="ascending"?n.value={sortBy:a.value.sortBy,order:"descending"}:n.value={sortBy:a.value.sortBy,order:"ascending"}:n.value={sortBy:y,order:"ascending"}},{sortFavoritesFirst:p,cropImagePreviews:m}=ze(),_=g(()=>We(i.files,{sortFoldersFirst:!0,sortFavoritesFirst:p.value,sortingOrder:a.value.order==="descending"?"desc":"asc",sortingMode:a.value.sortBy})),s=g(()=>i.files.filter(y=>i.allowPickDirectory||y.type!==te.Folder)),u=g(()=>!i.loading&&i.selectedFiles.length>0&&i.selectedFiles.length>=s.value.length);function h(){i.selectedFiles.length<s.value.length?t("update:selectedFiles",s.value):t("update:selectedFiles",[])}function C(y){i.selectedFiles.includes(y)?t("update:selectedFiles",i.selectedFiles.filter(F=>F.path!==y.path)):i.multiselect?t("update:selectedFiles",[...i.selectedFiles,y]):t("update:selectedFiles",[y])}function S(y){t("update:path",y.path)}const B=b(4),z=b();{const y=()=>$e(()=>{var F,I,f,v,P;const D=((I=(F=z.value)==null?void 0:F.parentElement)==null?void 0:I.children)||[];let H=((v=(f=z.value)==null?void 0:f.parentElement)==null?void 0:v.clientHeight)||450;for(let V=0;V<D.length;V++)(P=z.value)!=null&&P.isSameNode(D[V])||(H-=D[V].clientHeight);B.value=Math.max(1,Math.floor((H-50)/50))});W(()=>{window.addEventListener("resize",y),y()}),Ve(()=>{window.removeEventListener("resize",y)})}return{__sfc:!0,props:i,emit:t,customSortingConfig:n,filesAppSorting:l,sortingConfig:a,sortByName:r,sortBySize:o,sortByModified:d,toggleSorting:c,sortFavoritesFirst:p,cropImagePreviews:m,sortedFiles:_,selectableFiles:s,allSelected:u,onSelectAll:h,onNodeSelected:C,onChangeDirectory:S,skeletonNumber:B,fileContainer:z,NcButton:Y,NcCheckboxRadioSwitch:xe,t:k,IconSortAscending:Mi,IconSortDescending:Ri,LoadingTableRow:Ui,FileListRow:un}}});var pn=function(){var e=this,t=e._self._c,i=e._self._setupProxy;return t("div",{ref:"fileContainer",staticClass:"file-picker__files"},[t("table",[t("thead",[t("tr",[e.multiselect?t("th",{staticClass:"row-checkbox"},[t("span",{staticClass:"hidden-visually"},[e._v(" "+e._s(i.t("Select entry"))+" ")]),e.multiselect?t(i.NcCheckboxRadioSwitch,{attrs:{"aria-label":i.t("Select all entries"),checked:i.allSelected,"data-testid":"select-all-checkbox"},on:{"update:checked":i.onSelectAll}}):e._e()],1):e._e(),t("th",{staticClass:"row-name",attrs:{"aria-sort":i.sortByName}},[t("div",{staticClass:"header-wrapper"},[t("span",{staticClass:"file-picker__header-preview"}),t(i.NcButton,{attrs:{wide:!0,type:"tertiary","data-test":"file-picker_sort-name"},on:{click:function(n){return i.toggleSorting("basename")}},scopedSlots:e._u([{key:"icon",fn:function(){return[i.sortByName==="ascending"?t(i.IconSortAscending,{attrs:{size:20}}):i.sortByName==="descending"?t(i.IconSortDescending,{attrs:{size:20}}):t("span",{staticStyle:{width:"44px"}})]},proxy:!0}])},[e._v(" "+e._s(i.t("Name"))+" ")])],1)]),t("th",{staticClass:"row-size",attrs:{"aria-sort":i.sortBySize}},[t(i.NcButton,{attrs:{wide:!0,type:"tertiary"},on:{click:function(n){return i.toggleSorting("size")}},scopedSlots:e._u([{key:"icon",fn:function(){return[i.sortBySize==="ascending"?t(i.IconSortAscending,{attrs:{size:20}}):i.sortBySize==="descending"?t(i.IconSortDescending,{attrs:{size:20}}):t("span",{staticStyle:{width:"44px"}})]},proxy:!0}])},[e._v(" "+e._s(i.t("Size"))+" ")])],1),t("th",{staticClass:"row-modified",attrs:{"aria-sort":i.sortByModified}},[t(i.NcButton,{attrs:{wide:!0,type:"tertiary"},on:{click:function(n){return i.toggleSorting("mtime")}},scopedSlots:e._u([{key:"icon",fn:function(){return[i.sortByModified==="ascending"?t(i.IconSortAscending,{attrs:{size:20}}):i.sortByModified==="descending"?t(i.IconSortDescending,{attrs:{size:20}}):t("span",{staticStyle:{width:"44px"}})]},proxy:!0}])},[e._v(" "+e._s(i.t("Modified"))+" ")])],1)])]),t("tbody",[e.loading?e._l(i.skeletonNumber,function(n){return t(i.LoadingTableRow,{key:n,attrs:{"show-checkbox":e.multiselect}})}):e._l(i.sortedFiles,function(n){return t(i.FileListRow,{key:n.fileid||n.path,attrs:{"allow-pick-directory":e.allowPickDirectory,"show-checkbox":e.multiselect,"can-pick":e.multiselect||e.selectedFiles.length===0||e.selectedFiles.includes(n),selected:e.selectedFiles.includes(n),node:n,"crop-image-previews":i.cropImagePreviews},on:{"update:selected":function(l){return i.onNodeSelected(n)},"enter-directory":i.onChangeDirectory}})})],2)])])},fn=[],hn=N(dn,pn,fn,!1,null,"006fdbd0",null,null);const mn=hn.exports,vn={name:"HomeIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var gn=function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon home-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},yn=[],bn=N(vn,gn,yn,!1,null,null,null,null);const _n=bn.exports,wn={name:"PlusIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var kn=function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon plus-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},Cn=[],xn=N(wn,kn,Cn,!1,null,null,null,null);const Sn=xn.exports,Bn=$({__name:"FilePickerBreadcrumbs",props:{path:null,showMenu:{type:Boolean}},emits:["update:path","create-node"],setup(e,{emit:t}){const i=e,n=b(!1),l=b(""),a=b();function r(){var c,p,m,_;const s=l.value.trim(),u=(p=(c=a.value)==null?void 0:c.$el)==null?void 0:p.querySelector("input");let h="";return s.length===0?h=k("Folder name cannot be empty."):s.includes("/")?h=k('"/" is not allowed inside a folder name.'):["..","."].includes(s)?h=k('"{name}" is an invalid folder name.',{name:s}):(m=window.OC.config)!=null&&m.blacklist_files_regex&&s.match((_=window.OC.config)==null?void 0:_.blacklist_files_regex)&&(h=k('"{name}" is not an allowed folder name',{name:s})),u&&u.setCustomValidity(h),h===""}const o=function(){const c=l.value.trim();r()&&(n.value=!1,t("create-node",c),l.value="")},d=g(()=>i.path.split("/").filter(c=>c!=="").map((c,p,m)=>({name:c,path:"/"+m.slice(0,p+1).join("/")})));return{__sfc:!0,props:i,emit:t,actionsOpen:n,newNodeName:l,nameInput:a,validateInput:r,onSubmit:o,pathElements:d,IconFolder:Ie,IconHome:_n,IconPlus:Sn,NcActions:X,NcActionInput:Xe,NcBreadcrumbs:xi,NcBreadcrumb:Se,t:k}}});var Nn=function(){var e=this,t=e._self._c,i=e._self._setupProxy;return t(i.NcBreadcrumbs,{staticClass:"file-picker__breadcrumbs",scopedSlots:e._u([{key:"default",fn:function(){return[t(i.NcBreadcrumb,{attrs:{name:i.t("All files"),title:i.t("Home")},on:{click:function(n){return i.emit("update:path","/")}},scopedSlots:e._u([{key:"icon",fn:function(){return[t(i.IconHome,{attrs:{size:20}})]},proxy:!0}])}),e._l(i.pathElements,function(n){return t(i.NcBreadcrumb,{key:n.path,attrs:{name:n.name,title:n.path},on:{click:function(l){return i.emit("update:path",n.path)}}})})]},proxy:!0},e.showMenu?{key:"actions",fn:function(){return[t(i.NcActions,{attrs:{"aria-label":i.t("Create directory"),"force-menu":!0,"force-name":!0,"menu-name":i.t("New"),open:i.actionsOpen,type:"secondary"},on:{"update:open":function(n){i.actionsOpen=n},close:function(n){i.newNodeName=""}},scopedSlots:e._u([{key:"icon",fn:function(){return[t(i.IconPlus,{attrs:{size:20}})]},proxy:!0}],null,!1,2971667417)},[t(i.NcActionInput,{ref:"nameInput",attrs:{value:i.newNodeName,label:i.t("New folder"),placeholder:i.t("New folder name")},on:{"update:value":function(n){i.newNodeName=n},submit:i.onSubmit,input:i.validateInput},scopedSlots:e._u([{key:"icon",fn:function(){return[t(i.IconFolder,{attrs:{size:20}})]},proxy:!0}],null,!1,1614167509)})],1)]},proxy:!0}:null],null,!0)})},Fn=[],Ln=N(Bn,Nn,Fn,!1,null,"b357227a",null,null);const zn=Ln.exports,An={name:"CloseIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var In=function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon close-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},Pn=[],Vn=N(An,In,Pn,!1,null,null,null,null);const $n=Vn.exports,Dn={name:"MagnifyIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var Mn=function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon magnify-icon",attrs:{"aria-hidden":e.title?null:!0,"aria-label":e.title,role:"img"},on:{click:function(i){return e.$emit("click",i)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},On=[],Hn=N(Dn,Mn,On,!1,null,null,null,null);const En=Hn.exports,Tn=e=>{const t=[{id:"files",label:k("All files"),icon:Bi},{id:"recent",label:k("Recent"),icon:Si},{id:"favorites",label:k("Favorites"),icon:Ni}],i=e.value?t.filter(({id:n})=>n==="files"):t;return{allViews:t,availableViews:i}},Rn=$({__name:"FilePickerNavigation",props:{currentView:null,filterString:null,isCollapsed:{type:Boolean},disabledNavigation:{type:Boolean}},emits:["update:currentView","update:filterString"],setup(e,{emit:t}){const i=e,{availableViews:n}=Tn(b(rt()===null)),l=g(()=>{var a;return(a=n.filter(r=>r.id===i.currentView)[0])!=null?a:n[0]});return{__sfc:!0,props:i,emit:t,availableViews:n,currentViewObject:l,updateFilterValue:a=>t("update:filterString",a),IconClose:$n,IconMagnify:En,NcButton:Y,NcIconSvgWrapper:Ye,NcSelect:et,NcTextField:tt,Fragment:Fe,t:k}}});var Wn=function(){var e=this,t=e._self._c,i=e._self._setupProxy;return t(i.Fragment,[t(i.NcTextField,{staticClass:"file-picker__filter-input",attrs:{value:e.filterString,label:i.t("Filter file list"),"show-trailing-button":!!e.filterString},on:{"update:value":i.updateFilterValue,"trailing-button-click":function(n){return i.updateFilterValue("")}},scopedSlots:e._u([{key:"trailing-button-icon",fn:function(){return[t(i.IconClose,{attrs:{size:16}})]},proxy:!0}])},[t(i.IconMagnify,{attrs:{size:16}})],1),i.availableViews.length>1&&!e.disabledNavigation?[e.isCollapsed?t(i.NcSelect,{attrs:{"aria-label":i.t("Current view selector"),clearable:!1,searchable:!1,options:i.availableViews,value:i.currentViewObject},on:{input:n=>i.emit("update:currentView",n.id)}}):t("ul",{staticClass:"file-picker__side"},e._l(i.availableViews,function(n){return t("li",{key:n.id},[t(i.NcButton,{attrs:{type:e.currentView===n.id?"primary":"tertiary",wide:!0},on:{click:function(l){return e.$emit("update:currentView",n.id)}},scopedSlots:e._u([{key:"icon",fn:function(){return[t(i.NcIconSvgWrapper,{attrs:{path:n.icon,size:20}})]},proxy:!0}],null,!0)},[e._v(" "+e._s(n.label)+" ")])],1)}),0)]:e._e()],2)},jn=[],Zn=N(Rn,Wn,jn,!1,null,"b42054b8",null,null);const qn=Zn.exports,Un=function(e,t){const i=Ee(),n=s=>Te(s),l=()=>{const s=new AbortController,u=Math.round(Date.now()/1e3)-60*60*24*14;return new fe(async(h,C,S)=>{S(()=>s.abort());try{const{data:B}=await i.search("/",{signal:s.signal,details:!0,data:je(u)}),z=B.results.map(n);h(z)}catch(B){C(B)}})},a=()=>{const s=new AbortController;return new fe(async(u,h,C)=>{C(()=>s.abort());try{let S=(await i.getDirectoryContents(j.join(G,t.value),{signal:s.signal,details:!0,data:pe()})).data.map(n);S=S.filter(B=>B.path!==t.value),u(S)}catch(S){h(S)}})},r=J([]),o=J();Q([t],async()=>{var s;o.value=(s=r.value.find(({path:u})=>u===t.value))!=null?s:await m(t.value)},{immediate:!0});const d=b(!0),c=b(null);async function p(s){const u=j.join(t.value,s);await i.createDirectory(j.join(G,u));const h=await m(u);return r.value=[...r.value,h],h}async function m(s,u=G){const{data:h}=await i.stat(j.join(u,s),{details:!0,data:pe()});return n(h)}async function _(){c.value&&c.value.cancel(),d.value=!0,e.value==="favorites"?c.value=Re(i,t.value):e.value==="recent"?c.value=l():c.value=a(),r.value=await c.value,c.value=null,d.value=!1}return Q([e,t],()=>_()),W(()=>_()),{isLoading:d,files:r,folder:o,loadFiles:_,getFile:m,createDirectory:p}},Gn=function(e){const t=g(()=>e.value.map(i=>i.split("/")));return{isSupportedMimeType:i=>{const n=i.split("/");return t.value.some(([l,a])=>(n[0]===l||l==="*")&&(n[1]===a||a==="*"))}}},Kn={name:"FilePicker"},Jn=$({...Kn,props:{buttons:null,name:null,allowPickDirectory:{type:Boolean,default:!1},disabledNavigation:{type:Boolean,default:!1},container:{default:"body"},filterFn:{default:void 0},mimetypeFilter:{default:()=>[]},multiselect:{type:Boolean,default:!0},path:{default:void 0}},emits:["close"],setup(e,{emit:t}){const i=e,n=b(!0),l=g(()=>{const f=c.value.length===0&&i.allowPickDirectory&&C.value?[C.value]:c.value;return(typeof i.buttons=="function"?i.buttons(f,_.value,o.value):i.buttons).map(v=>({...v,callback:()=>{a=!0,r(v.callback,f)}}))});let a=!1;const r=async(f,v)=>{f(v),t("close",v),a=!1},o=b("files"),d=g(()=>o.value==="favorites"?k("Favorites"):o.value==="recent"?k("Recent"):""),c=J([]),p=b((window==null?void 0:window.sessionStorage.getItem("NC.FilePicker.LastPath"))||"/"),m=b("");Q([m],()=>{i.path===void 0&&m.value&&(window.sessionStorage.setItem("NC.FilePicker.LastPath",m.value),c.value=[])});const _=g({get:()=>o.value==="files"?m.value||i.path||p.value:"/",set:f=>{m.value=f}}),s=b(""),{isSupportedMimeType:u}=Gn(Pe(i,"mimetypeFilter")),{files:h,folder:C,isLoading:S,loadFiles:B,createDirectory:z}=Un(o,_);W(()=>B());const{showHiddenFiles:y}=ze(),F=g(()=>{let f=h.value;return y.value||(f=f.filter(v=>!v.basename.startsWith("."))),i.mimetypeFilter.length>0&&(f=f.filter(v=>v.type==="folder"||v.mime&&u(v.mime))),s.value&&(f=f.filter(v=>v.basename.toLowerCase().includes(s.value.toLowerCase()))),i.filterFn&&(f=f.filter(v=>i.filterFn(v))),f}),I=g(()=>o.value==="files"?k("Upload some content or sync with your devices!"):o.value==="recent"?k("Files and folders you recently modified will show up here."):k("Files and folders you mark as favorite will show up here."));return{__sfc:!0,props:i,emit:t,isOpen:n,dialogButtons:l,isHandlingCallback:a,handleButtonClick:r,currentView:o,viewHeadline:d,selectedFiles:c,savedPath:p,navigatedPath:m,currentPath:_,filterString:s,isSupportedMimeType:u,files:h,currentFolder:C,isLoading:S,loadFiles:B,createDirectory:z,showHiddenFiles:y,filteredFiles:F,noFilesDescription:I,onCreateFolder:async f=>{try{const v=await z(f);m.value=v.path,at("files:node:created",h.value.filter(P=>P.basename===f)[0])}catch(v){console.warn("Could not create new folder",{name:f,error:v}),ee(k("Could not create the new folder"))}},handleClose:f=>{!f&&!a&&t("close")},IconFile:Le,FileList:mn,FilePickerBreadcrumbs:zn,FilePickerNavigation:qn,NcDialog:Je,NcEmptyContent:Qe,t:k}}});var Qn=function(){var e=this,t=e._self._c,i=e._self._setupProxy;return t(i.NcDialog,{attrs:{container:e.container,buttons:i.dialogButtons,name:e.name,size:"large","content-classes":"file-picker__content","dialog-classes":"file-picker","navigation-classes":"file-picker__navigation",open:i.isOpen},on:{"update:open":[function(n){i.isOpen=n},i.handleClose]},scopedSlots:e._u([{key:"navigation",fn:function({isCollapsed:n}){return[t(i.FilePickerNavigation,{attrs:{"is-collapsed":n,"current-view":i.currentView,"filter-string":i.filterString,"disabled-navigation":e.disabledNavigation},on:{"update:currentView":function(l){i.currentView=l},"update:current-view":function(l){i.currentView=l},"update:filterString":function(l){i.filterString=l},"update:filter-string":function(l){i.filterString=l}}})]}}])},[t("div",{staticClass:"file-picker__main"},[i.currentView==="files"?t(i.FilePickerBreadcrumbs,{attrs:{path:i.currentPath,"show-menu":e.allowPickDirectory},on:{"update:path":function(n){i.currentPath=n},"create-node":i.onCreateFolder}}):t("div",{staticClass:"file-picker__view"},[t("h3",[e._v(e._s(i.viewHeadline))])]),i.isLoading||i.filteredFiles.length>0?t(i.FileList,{attrs:{"allow-pick-directory":e.allowPickDirectory,"current-view":i.currentView,files:i.filteredFiles,multiselect:e.multiselect,loading:i.isLoading,path:i.currentPath,"selected-files":i.selectedFiles,name:i.viewHeadline},on:{"update:path":[function(n){i.currentPath=n},function(n){i.currentView="files"}],"update:selectedFiles":function(n){i.selectedFiles=n},"update:selected-files":function(n){i.selectedFiles=n}}}):i.filterString?t(i.NcEmptyContent,{attrs:{name:i.t("No matching files"),description:i.t("No files matching your filter were found.")},scopedSlots:e._u([{key:"icon",fn:function(){return[t(i.IconFile)]},proxy:!0}])}):t(i.NcEmptyContent,{attrs:{name:i.t("No files in here"),description:i.noFilesDescription},scopedSlots:e._u([{key:"icon",fn:function(){return[t(i.IconFile)]},proxy:!0}])})],1)])},Xn=[],Yn=N(Jn,Qn,Xn,!1,null,"49c2bc95",null,null);const pl=Yn.exports;export{pl as default};
