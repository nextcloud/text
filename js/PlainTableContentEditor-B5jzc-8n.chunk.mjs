import{c as i,m as a,E as l,a as h,p as u,u as y,e as f}from"./EditorOutline-BUasTTYj.chunk.mjs";import{H as C}from"./index-DBczTzWW.chunk.mjs";import{w as s,p as c}from"./vue.runtime.esm-CU0zJ5AL.chunk.mjs";import{E as b}from"./MediaHandler.provider-CxKbS2cm.chunk.mjs";import{W as E,M as $,C as w}from"./Wrapper-Bt4YwHyH.chunk.mjs";import{n as z}from"./_plugin-vue2_normalizer-wd1ZAbRr.chunk.mjs";import"./NcLoadingIcon-B1Im7aog.chunk.mjs";import"./emoji-picker-MDCGxHB0.chunk.mjs";import"./index-C-U7ohGa.chunk.mjs";import"./index-DxwFe63_.chunk.mjs";import"./logger-CNqRxEFx.chunk.mjs";import"./index-D3wiQe9-.chunk.mjs";import"./NcNoteCard-CwNXZ4vV-Dq8OU3M6.chunk.mjs";import"./NcCheckboxRadioSwitch-CX3HXCEk-C0RoW2-E.chunk.mjs";const O={name:"PlainTableContentEditor",components:{ContentContainer:w,MainContainer:$,Wrapper:E},props:{content:{type:String,default:""},readOnly:{type:Boolean,default:!1}},emits:["update:content","ready","create:content"],setup(t){const e=a.render(t.content),d=[h,C],r=new l({content:e,extensions:d,editable:!t.readOnly}),{setEditable:m,setContent:n}=y(r);return s(()=>t.content,o=>{const p=a.render(o);n(p)}),s(()=>t.readOnly,o=>{m(!o)}),u(r),c(f,{isPublic:!1,isRichEditor:!1,isRichWorkspace:!1}),c(b,!1),{editor:r,setContent:n}},created(){this.editor.on("create",()=>{this.$emit("ready"),this.$parent.$emit("ready");try{const t=i(this.editor.schema).serialize(this.editor.state.doc);this.emit("create:content",{json:this.editor.state.doc,markdown:t})}catch(t){console.error("Error serializing table:",t)}}),this.editor.on("update",({editor:t})=>{try{const e=i(t.schema).serialize(t.state.doc);this.emit("update:content",{json:t.state.doc,markdown:e})}catch(e){console.error("Error serializing table:",e)}})},beforeDestroy(){this.editor.destroy()},methods:{emit(t,e){this.$emit(t,e),this.$parent?.$emit(t,e)}}};var g=function(){var t=this,e=t._self._c;return e("Wrapper",{attrs:{"content-loaded":!0,"show-outline-outside":!1}},[e("MainContainer",[e("ContentContainer",{attrs:{"read-only":t.readOnly}})],1)],1)},k=[],x=z(O,g,k,!1,null,null);const F=x.exports;export{F as default};
//# sourceMappingURL=PlainTableContentEditor-B5jzc-8n.chunk.mjs.map
