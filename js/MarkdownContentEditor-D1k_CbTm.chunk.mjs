import{c as p,R as l,F as m,U as u,a as c,d as h,b as f,p as y,e as C}from"./TocContainer-DqVvaAWi.chunk.mjs";import{M as g,R as B,A as v}from"./MenuBar-K3arGLih.chunk.mjs";import{W as M,M as R,C as $,p as b}from"./Wrapper-BHegzy9o.chunk.mjs";import{g as w}from"./index-CdM8BgQf.chunk.mjs";import{w as s,p as O}from"./vue.runtime.esm-DtYIo4vn.chunk.mjs";import{A as k}from"./MediaHandler.provider-bE4nrOxZ.chunk.mjs";import{n as x}from"./NcCheckboxRadioSwitch-CX3HXCEk-DsKhS70h.chunk.mjs";import"./NcLoadingIcon-SwZTpIP3.chunk.mjs";import"./emoji-picker-hi3Hwbeu.chunk.mjs";import"./index-DCzdQJ7L.chunk.mjs";import"./logger-DS8A9d_w.chunk.mjs";import"./index-Bnw2WuIx.chunk.mjs";import"./index-D3wiQe9-.chunk.mjs";import"./NcNoteCard-CwNXZ4vV-Bnva1u_k.chunk.mjs";import"./preload-helper-BorfeO-5.chunk.mjs";const T={name:"MarkdownContentEditor",components:{ContentContainer:$,ReadonlyBar:B,MenuBar:g,MainContainer:R,Wrapper:M},provide(){const t={};return Object.defineProperties(t,{[k]:{get:()=>this.$attachmentResolver??null}}),t},props:{fileId:{type:Number,default:null},content:{type:String,required:!0},readOnly:{type:Boolean,default:!1},relativePath:{type:String,default:""},shareToken:{type:String,default:null},showMenuBar:{type:Boolean,default:!0}},emits:["update:content"],setup(t){const e=[l.configure({extensions:[u]}),m],r=new c({extensions:e}),{setEditable:a,setContent:o}=f(r),{updateHeadings:i}=h(r);s(()=>t.content,n=>{o(n)}),a(!t.readOnly),s(()=>t.readOnly,n=>{a(!n)}),O(C,{isPublic:!1,isRichEditor:!0,isRichWorkspace:!1,useTableOfContents:!0}),y(r);const{applyEditorWidth:d}=b(!0);return d(),{editor:r,setContent:o,updateHeadings:i}},created(){this.setContent(this.content,{addToHistory:!1}),this.updateHeadings(),this.editor.on("create",()=>{this.$emit("ready"),this.$parent.$emit("ready")}),this.editor.on("update",({editor:t})=>{const e=p(t.schema).serialize(t.state.doc);this.emit("update:content",{json:t.state.doc,markdown:e})}),this.fileId&&(this.$attachmentResolver=new v({currentDirectory:this.relativePath?.match(/.*\//),user:w(),shareToken:this.shareToken,fileId:this.fileId}))},beforeDestroy(){this.editor.destroy()},methods:{emit(t,e){this.$emit(t,e),this.$parent?.$emit(t,e)}}};var W=function(){var t=this,e=t._self._c;return e("Wrapper",{attrs:{"content-loaded":!0}},[e("MainContainer",[t.showMenuBar?[t.readOnly?t._t("readonlyBar",function(){return[e("ReadonlyBar")]}):e("MenuBar",{attrs:{autohide:!1}})]:t._e(),e("ContentContainer",{attrs:{"read-only":t.readOnly}})],2)],1)},E=[],H=x(T,W,E,!1,null,null);const L=H.exports;export{L as default};
//# sourceMappingURL=MarkdownContentEditor-D1k_CbTm.chunk.mjs.map
