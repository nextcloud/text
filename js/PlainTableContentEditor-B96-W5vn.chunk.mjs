import{e as a,c,g as m,U as p,F as l,d as h,p as u,f as y}from"./EditorOutline-Nx6MhnrE.chunk.mjs";import{W as f,M as C,C as b,e as E}from"./Wrapper-tvOPcU_n.chunk.mjs";import{w as d,p as i}from"./vue.runtime.esm-CmyF5LTP.chunk.mjs";import{E as $}from"./MediaHandler.provider-bE4nrOxZ.chunk.mjs";import{n as w}from"./NcCheckboxRadioSwitch-CX3HXCEk-qnG5ZcLO.chunk.mjs";import"./NcLoadingIcon-DAvEVuxu.chunk.mjs";import"./emoji-picker-hi3Hwbeu.chunk.mjs";import"./index-CdM8BgQf.chunk.mjs";import"./index-DCzdQJ7L.chunk.mjs";import"./logger-DS8A9d_w.chunk.mjs";import"./index-Bnw2WuIx.chunk.mjs";import"./index-D3wiQe9-.chunk.mjs";import"./NcNoteCard-CwNXZ4vV-wGY_yume.chunk.mjs";import"./preload-helper-BorfeO-5.chunk.mjs";const g={name:"PlainTableContentEditor",components:{ContentContainer:b,MainContainer:C,Wrapper:f},props:{content:{type:String,required:!0},readOnly:{type:Boolean,default:!1}},emits:["update:content"],setup(t){const e=[m,p,l],o=new c({extensions:e}),{setEditable:n,setContent:s}=h(o);return d(()=>t.content,r=>{s(r)}),n(!t.readOnly),d(()=>t.readOnly,r=>{n(!r)}),u(o),i(y,{isPublic:!1,isRichEditor:!0,isRichWorkspace:!1}),i(E,null),i($,!1),{editor:o,setContent:s}},created(){this.setContent(this.content,{addToHistory:!1}),this.editor.on("create",()=>{this.$emit("ready"),this.$parent.$emit("ready");try{const t=a(this.editor.schema).serialize(this.editor.state.doc);this.emit("create:content",{json:this.editor.state.doc,markdown:t})}catch(t){console.error("Error serializing table:",t)}}),this.editor.on("update",({editor:t})=>{try{const e=a(t.schema).serialize(t.state.doc);this.emit("update:content",{json:t.state.doc,markdown:e})}catch(e){console.error("Error serializing table:",e)}})},beforeDestroy(){this.editor.destroy()},methods:{emit(t,e){this.$emit(t,e),this.$parent?.$emit(t,e)}}};var z=function(){var t=this,e=t._self._c;return e("Wrapper",{attrs:{"content-loaded":!0,"show-outline-outside":!1}},[e("MainContainer",[e("ContentContainer",{attrs:{"read-only":t.readOnly}})],1)],1)},O=[],v=w(g,z,O,!1,null,null);const S=v.exports;export{S as default};
//# sourceMappingURL=PlainTableContentEditor-B96-W5vn.chunk.mjs.map
