import{V as e}from"./vue.runtime.esm-C7aVrvtW.chunk.mjs";import{c as d}from"./index-Dtu68Mmq.chunk.mjs";import{b as s,g as a}from"./NcNoteCard-ChweF_5Q-C5i59jBT.chunk.mjs";import{f as m}from"./NcColorPicker-pK2jvKdu.chunk.mjs";import{P as i}from"./PlainTextReader-DSDNcXi7.chunk.mjs";import n from"./MarkdownContentEditor-C8ZKON3G.chunk.mjs";import{t as r,a as l}from"./NcLoadingIcon-CHw5fok5.chunk.mjs";import{g as u}from"./Editor.singleton-B21uOCsj.chunk.mjs";import{n as p}from"./_plugin-vue2_normalizer-wd1ZAbRr.chunk.mjs";import"./modulepreload-polyfill-nb9XBeg7.chunk.mjs";import"./emoji-picker-DlAAdvrL.chunk.mjs";import"./index-DfiDB3im.chunk.mjs";import"./index-DqP6CuPc.chunk.mjs";import"./NcCheckboxRadioSwitch-ip_mRd2T-kNk9kCSa.chunk.mjs";import"./MediaHandler.provider-BJ1SsG4D.chunk.mjs";import"./logger-Bu78VaEB.chunk.mjs";import"./index-_QHNqdwt.chunk.mjs";import"./BaseReader-BEfO9XrO.chunk.mjs";import"./Wrapper-YcvPFof9.chunk.mjs";import"./MenuBar-1Aa7eUTL.chunk.mjs";import"./index-BWh3WISu.chunk.mjs";e.prototype.t=r,e.prototype.n=l;const c={name:"ViewerComponent",components:{NcButton:e.extend(s),PencilIcon:e.extend(m),PlainTextReader:e.extend(i),MarkdownContentEditor:e.extend(n),Editor:u},provide(){return{isEmbedded:this.isEmbedded}},props:{filename:{type:String,default:null},fileid:{type:Number,default:null},active:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!0},shareToken:{type:String,default:()=>a()},mime:{type:String,default:null},showOutlineOutside:{type:Boolean,default:!1},permissions:{type:String,default:""},source:{type:String,default:void 0},isEmbedded:{type:Boolean,default:!1}},data(){return{content:"",hasToggledInteractiveEmbedding:!1}},computed:{useSourceView(){return this.source&&(this.fileVersion||!this.fileid||this.isEmbedded)&&!this.hasToggledInteractiveEmbedding},readerComponent(){return this.mime==="text/markdown"?n:i}},watch:{source(){this.loadFileContent()}},mounted(){this.loadFileContent()},methods:{t:r,async loadFileContent(){if(this.useSourceView){const t=await d.get(this.source);this.content=t.data,this.contentLoaded=!0}this.$emit("update:loaded",!0)},toggleEdit(){this.hasToggledInteractiveEmbedding=!0}}};var f=function(){var t=this,o=t._self._c;return t.useSourceView?o("div",{staticClass:"text-editor source-viewer",attrs:{id:"editor-container","data-text-el":"editor-container"}},[o(t.readerComponent,{tag:"Component",attrs:{content:t.content,"file-id":t.fileid,"read-only":!0,"show-menu-bar":!1}}),t.isEmbedded?o("NcButton",{staticClass:"toggle-interactive",on:{click:t.toggleEdit},scopedSlots:t._u([{key:"icon",fn:function(){return[o("PencilIcon")]},proxy:!0}],null,!1,411976917)},[t._v(" "+t._s(t.t("text","Edit"))+" ")]):t._e()],1):o("Editor",{class:{"text-editor--embedding":t.isEmbedded},attrs:{"file-id":t.fileid,"relative-path":t.filename,active:t.active||t.isEmbedded,autofocus:t.autofocus,"share-token":t.shareToken,mime:t.mime,"show-outline-outside":t.showOutlineOutside}})},h=[],g=p(c,f,h,!1,null,"6971fd01");const $=g.exports;export{$ as default};
//# sourceMappingURL=ViewerComponent-BM1I6UoX.chunk.mjs.map
