import{B as d,b3 as l}from"./TocContainer-DqVvaAWi.chunk.mjs";import"./preload-helper-BorfeO-5.chunk.mjs";import{V as r}from"./vue.runtime.esm-DtYIo4vn.chunk.mjs";import{E as c}from"./Editor-BDNc0zqc.chunk.mjs";import{l as n}from"./logger-DS8A9d_w.chunk.mjs";import{n as m}from"./NcCheckboxRadioSwitch-CX3HXCEk-DsKhS70h.chunk.mjs";import"./NcLoadingIcon-SwZTpIP3.chunk.mjs";import"./emoji-picker-hi3Hwbeu.chunk.mjs";import"./index-CdM8BgQf.chunk.mjs";import"./index-DCzdQJ7L.chunk.mjs";import"./index-D3wiQe9-.chunk.mjs";import"./NcNoteCard-CwNXZ4vV-Bnva1u_k.chunk.mjs";import"./index-Bnw2WuIx.chunk.mjs";import"./MediaHandler.provider-bE4nrOxZ.chunk.mjs";import"./index-D804-9WX.chunk.mjs";import"./dav-Rt1kTtvI-DEv3Nwu1.chunk.mjs";import"./Wrapper-BHegzy9o.chunk.mjs";import"./MenuBar-K3arGLih.chunk.mjs";const T=Object.freeze(Object.defineProperty({__proto__:null,default:d},Symbol.toStringTag,{value:"Module"})),s=r.observable({messages:[],mtime:0}),o=(e,t)=>{n.debug(`callMobileMessage ${e}`,{attributes:t});let a=e,i=null;try{i=JSON.stringify(t)}catch{i=null}window.DirectEditingMobileInterface&&typeof window.DirectEditingMobileInterface[e]=="function"&&(i===null||typeof i>"u"?window.DirectEditingMobileInterface[e]():window.DirectEditingMobileInterface[e](i)),window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.DirectEditingMobileInterface&&window.webkit.messageHandlers.DirectEditingMobileInterface.postMessage(a),window.postMessage(a)};window.addEventListener("message",function(e){s.messages.push(e.data),n.debug("postMessage",{message:e})});const u={name:"DirectEditing",components:{Editor:c},data(){return{initial:OCP.InitialState.loadState("text","file"),messages:s.messages,log:s,saving:!1}},computed:{initialSession(){return JSON.parse(this.initial.session)||null},isMobile(){return window.DirectEditingMobileInterface||window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.DirectEditingMobileInterface}},beforeMount(){o("loading")},mounted(){document.querySelector('meta[name="viewport"]').setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"),this.$refs.editor.$on("push:forbidden",()=>{n.warn("push was forbidden due to invalidated session"),this.reload()})},methods:{async close(){this.saving=!0,setTimeout(async()=>{await this.$refs.editor.$destroy(),o("close")},0)},share(){o("share")},loaded(){o("loaded")},reload(){o("reload")}}};var w=function(){var e=this,t=e._self._c;return t("div",{class:{"icon-loading":e.saving},attrs:{id:"direct-editor"}},[t("Editor",{ref:"editor",attrs:{"initial-session":e.initialSession,"file-id":e.initial.fileId,active:!0,mime:e.initial.mimetype,"is-direct-editing":!0},on:{ready:e.loaded},scopedSlots:e._u([e.isMobile?{key:"header",fn:function(){return[t("button",{staticClass:"icon-share",on:{click:e.share}}),t("button",{staticClass:"icon-close",on:{click:e.close}})]},proxy:!0}:null],null,!0)})],1)},p=[],g=m(u,w,p,!1,null,"8e7c8dd9");const b=g.exports,f=r.extend(b);new f().$mount("#app-content");const z=Object.freeze(Object.defineProperty({__proto__:null,default:l},Symbol.toStringTag,{value:"Module"}));export{T as N,z as a};
//# sourceMappingURL=text-text.mjs.map
