import{l as s}from"./index-B64e8dYD.chunk.mjs";import{_ as i}from"./index-DUrHmx5a.chunk.mjs";import{l}from"./logger-DH1Ckv9w.chunk.mjs";const A=function(t,o){var a;const e=t.attrs.href;if(!e||!((a=window.OCA)!=null&&a.Viewer)||e.match(/^[a-zA-Z]*:/)||e.startsWith("#")||s("core","active-app","")==="collectives"||e.includes("/apps/collectives/"))return e;const n=e.match(/^([^?]*)\?fileId=(\d+)/);if(n){const[,,r]=n;return new URL(i("/f/".concat(r)),window.origin).href}return e},$=function(t){const o=t.getAttribute("href");if(!o)return o;const e=o.match(/\?dir=([^&]*)&openfile=([^&]*)#relPath=([^&]*)/);if(e){const[,,n]=e;return new URL(i("/f/".concat(n)),window.origin).href}return o},j=function(t){const o=window.location.origin+window.location.pathname+window.location.search;return(t==null?void 0:t.startsWith("#"))||(t==null?void 0:t.startsWith(o+"#"))},c=function(t){var n;const o=new URL(t,window.location.href),e="/apps/collectives";if((n=window.OCA.Collectives)!=null&&n.vueRouter&&o.pathname.toString().startsWith(i(e))){const a=o.href.substring(o.href.indexOf(e)+e.length);window.OCA.Collectives.vueRouter.push(a);return}window.open(o,"_blank")},m=Symbol("editor:file"),d=Symbol("attachment:resolver"),f=Symbol("editor:is-mobile"),u=Symbol("editor:upload"),C=Symbol("hook:mention-search"),k=Symbol("hook:mention-insert"),h=Symbol("editor:open-link-handler"),L={inject:{$isMobile:{from:f,default:!1}}},R={inject:{$file:{from:m,default:()=>({fileId:0,relativePath:null,document:null})}}},O={inject:{$attachmentResolver:{from:d,default:{resolve(t){return l.warn("No attachment resolver provided. Some attachment sources cannot be resolved."),[t]}}}}},U={inject:{$editorUpload:{from:u,default:!0}}},I={inject:{$openLinkHandler:{from:h,default:{openLink:c}}}},p=Symbol("state:uploading-state"),w=Symbol("editor:action:attachment-prompt"),b=Symbol("editor:action:upload-attachment"),v=Symbol("editor:action:create-attachment"),W={inject:{$uploadingState:{from:p,default:{isUploadingAttachments:!1}}}},x={inject:{$callAttachmentPrompt:{from:w,default:()=>{}}}},H={inject:{$callChooseLocalAttachment:{from:b,default:()=>{}}}},P={inject:{$callCreateAttachment:{from:v,default:()=>t=>{}}}};export{d as A,u as E,m as F,k as H,f as I,h as O,p as S,C as a,w as b,R as c,v as d,b as e,U as f,H as g,x as h,W as i,P as j,I as k,A as l,j as m,O as n,c as o,$ as p,L as u};
//# sourceMappingURL=MediaHandler.provider-B-6EH1Bu.chunk.mjs.map
