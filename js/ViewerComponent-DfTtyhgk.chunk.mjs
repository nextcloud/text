/*! third party licenses: js/vendor.LICENSE.txt */
import{V as t}from"./vue.runtime.esm-DexIh3sa.chunk.mjs";import{c as d}from"./index-BFkfowXm.chunk.mjs";import{a4 as s}from"./RichText-BQi85Ilm.chunk.mjs";import{N as a}from"./NcNoteCard-CImn6F9p-Cqtx687c.chunk.mjs";import{P as i}from"./PlainTextReader-CXoPxhlt.chunk.mjs";import{R as n}from"./RichTextReader-BxdwxvhX.chunk.mjs";import{t as r,f as l,n as m}from"./_plugin-vue2_normalizer-mpIN0TCI.chunk.mjs";import{g as u}from"./token-DpxtlN7K.chunk.mjs";import{g as c}from"./Editor.singleton-Dfn68BGs.chunk.mjs";import"./modulepreload-polyfill-BngdAj2f.chunk.mjs";import"./emoji-picker-I9E7i3AY.chunk.mjs";import"./index-CNdHTG-4.chunk.mjs";import"./MediaHandler.provider-B3sBWKr8.chunk.mjs";import"./logger-BjUg4RMP.chunk.mjs";import"./index-DedwEVqf.chunk.mjs";import"./_plugin-vue2_normalizer-Ds4SJl6Q-jlcCRQ9Z.chunk.mjs";import"./index-Ubm2itxG.chunk.mjs";t.prototype.t=r,t.prototype.n=l;const p={name:"ViewerComponent",components:{NcButton:t.extend(a),PencilIcon:t.extend(s),RichTextReader:t.extend(n),PlainTextReader:t.extend(i),Editor:c},provide(){return{isEmbedded:this.isEmbedded}},props:{filename:{type:String,default:null},fileid:{type:Number,default:null},active:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!0},shareToken:{type:String,default:()=>u()},mime:{type:String,default:null},showOutlineOutside:{type:Boolean,default:!1},permissions:{type:String,default:""},source:{type:String,default:void 0},isEmbedded:{type:Boolean,default:!1}},data(){return{content:"",hasToggledInteractiveEmbedding:!1}},computed:{useSourceView(){return this.source&&(this.fileVersion||!this.fileid||this.isEmbedded)&&!this.hasToggledInteractiveEmbedding},readerComponent(){return this.mime==="text/markdown"?n:i}},watch:{source(){this.loadFileContent()}},mounted(){this.loadFileContent()},methods:{t:r,async loadFileContent(){if(this.useSourceView){const e=await d.get(this.source);this.content=e.data,this.contentLoaded=!0}this.$emit("update:loaded",!0)},toggleEdit(){this.hasToggledInteractiveEmbedding=!0}}};var f=function(){var e=this,o=e._self._c;return e.useSourceView?o("div",{staticClass:"text-editor source-viewer",attrs:{id:"editor-container","data-text-el":"editor-container"}},[o(e.readerComponent,{tag:"Component",attrs:{content:e.content}}),e.isEmbedded?o("NcButton",{staticClass:"toggle-interactive",on:{click:e.toggleEdit},scopedSlots:e._u([{key:"icon",fn:function(){return[o("PencilIcon")]},proxy:!0}],null,!1,411976917)},[e._v(" "+e._s(e.t("text","Edit"))+" ")]):e._e()],1):o("Editor",{class:{"text-editor--embedding":e.isEmbedded},attrs:{"file-id":e.fileid,"relative-path":e.filename,active:e.active||e.isEmbedded,autofocus:e.autofocus,"share-token":e.shareToken,mime:e.mime,"show-outline-outside":e.showOutlineOutside}})},h=[],g=m(p,f,h,!1,null,"e6b62ae8",null,null);const R=g.exports;export{R as default};
