import{g as O}from"./emoji-picker-DlAAdvrL.chunk.mjs";import{c as T,r as _,u as b,w as M,o as N,e as z}from"./vue.runtime.esm-Ccc28AWB.chunk.mjs";import{r as D,b as x,f as F,n as q,d as L,g as $}from"./NcLoadingIcon-BcbRVau3.chunk.mjs";var C={exports:{}};(function(a){var t=Object.prototype.hasOwnProperty,e="~";function o(){}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(e=!1));function l(n,r,i){this.fn=n,this.context=r,this.once=i||!1}function h(n,r,i,c,f){if(typeof i!="function")throw new TypeError("The listener must be a function");var u=new l(i,c||n,f),d=e?e+r:r;return n._events[d]?n._events[d].fn?n._events[d]=[n._events[d],u]:n._events[d].push(u):(n._events[d]=u,n._eventsCount++),n}function v(n,r){--n._eventsCount===0?n._events=new o:delete n._events[r]}function m(){this._events=new o,this._eventsCount=0}m.prototype.eventNames=function(){var n=[],r,i;if(this._eventsCount===0)return n;for(i in r=this._events)t.call(r,i)&&n.push(e?i.slice(1):i);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(r)):n},m.prototype.listeners=function(n){var r=e?e+n:n,i=this._events[r];if(!i)return[];if(i.fn)return[i.fn];for(var c=0,f=i.length,u=new Array(f);c<f;c++)u[c]=i[c].fn;return u},m.prototype.listenerCount=function(n){var r=e?e+n:n,i=this._events[r];return i?i.fn?1:i.length:0},m.prototype.emit=function(n,r,i,c,f,u){var d=e?e+n:n;if(!this._events[d])return!1;var s=this._events[d],y=arguments.length,w,p;if(s.fn){switch(s.once&&this.removeListener(n,s.fn,void 0,!0),y){case 1:return s.fn.call(s.context),!0;case 2:return s.fn.call(s.context,r),!0;case 3:return s.fn.call(s.context,r,i),!0;case 4:return s.fn.call(s.context,r,i,c),!0;case 5:return s.fn.call(s.context,r,i,c,f),!0;case 6:return s.fn.call(s.context,r,i,c,f,u),!0}for(p=1,w=new Array(y-1);p<y;p++)w[p-1]=arguments[p];s.fn.apply(s.context,w)}else{var S=s.length,g;for(p=0;p<S;p++)switch(s[p].once&&this.removeListener(n,s[p].fn,void 0,!0),y){case 1:s[p].fn.call(s[p].context);break;case 2:s[p].fn.call(s[p].context,r);break;case 3:s[p].fn.call(s[p].context,r,i);break;case 4:s[p].fn.call(s[p].context,r,i,c);break;default:if(!w)for(g=1,w=new Array(y-1);g<y;g++)w[g-1]=arguments[g];s[p].fn.apply(s[p].context,w)}}return!0},m.prototype.on=function(n,r,i){return h(this,n,r,i,!1)},m.prototype.once=function(n,r,i){return h(this,n,r,i,!0)},m.prototype.removeListener=function(n,r,i,c){var f=e?e+n:n;if(!this._events[f])return this;if(!r)return v(this,f),this;var u=this._events[f];if(u.fn)u.fn===r&&(!c||u.once)&&(!i||u.context===i)&&v(this,f);else{for(var d=0,s=[],y=u.length;d<y;d++)(u[d].fn!==r||c&&!u[d].once||i&&u[d].context!==i)&&s.push(u[d]);s.length?this._events[f]=s.length===1?s[0]:s:v(this,f)}return this},m.prototype.removeAllListeners=function(n){var r;return n?(r=e?e+n:n,this._events[r]&&v(this,r)):(this._events=new o,this._eventsCount=0),this},m.prototype.off=m.prototype.removeListener,m.prototype.addListener=m.prototype.on,m.prefixed=e,m.EventEmitter=m,a.exports=m})(C);var A=C.exports;const j=O(A);class P extends Error{constructor(t){super(t),this.name="TimeoutError"}}class k extends Error{constructor(t){super(),this.name="AbortError",this.message=t}}const I=a=>globalThis.DOMException===void 0?new k(a):new DOMException(a),E=a=>{const t=a.reason===void 0?I("This operation was aborted."):a.reason;return t instanceof Error?t:I(t)};function V(a,t){const{milliseconds:e,fallback:o,message:l,customTimers:h={setTimeout,clearTimeout}}=t;let v;const m=new Promise((n,r)=>{if(typeof e!="number"||Math.sign(e)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${e}\``);if(t.signal){const{signal:c}=t;c.aborted&&r(E(c));const f=()=>{r(E(c))};c.addEventListener("abort",f,{once:!0}),a.finally(()=>{c.removeEventListener("abort",f)})}if(e===Number.POSITIVE_INFINITY){a.then(n,r);return}const i=new P;v=h.setTimeout.call(void 0,()=>{if(o){try{n(o())}catch(c){r(c)}return}typeof a.cancel=="function"&&a.cancel(),l===!1?n():l instanceof Error?r(l):(i.message=l??`Promise timed out after ${e} milliseconds`,r(i))},e),(async()=>{try{n(await a)}catch(c){r(c)}})()}).finally(()=>{m.clear()});return m.clear=()=>{h.clearTimeout.call(void 0,v),v=void 0},m}function Y(a,t,e){let o=0,l=a.length;for(;l>0;){const h=Math.trunc(l/2);let v=o+h;e(a[v],t)<=0?(o=++v,l-=h+1):l=h}return o}class B{#t=[];enqueue(t,e){e={priority:0,...e};const o={priority:e.priority,id:e.id,run:t};if(this.size===0||this.#t[this.size-1].priority>=e.priority){this.#t.push(o);return}const l=Y(this.#t,o,(h,v)=>v.priority-h.priority);this.#t.splice(l,0,o)}setPriority(t,e){const o=this.#t.findIndex(h=>h.id===t);if(o===-1)throw new ReferenceError(`No promise function with the id "${t}" exists in the queue.`);const[l]=this.#t.splice(o,1);this.enqueue(l.run,{priority:e,id:t})}dequeue(){return this.#t.shift()?.run}filter(t){return this.#t.filter(e=>e.priority===t.priority).map(e=>e.run)}get size(){return this.#t.length}}class Z extends j{#t;#o;#s=0;#f;#a;#p=0;#r;#h;#e;#v;#n=0;#c;#i;#d;#g=1n;timeout;constructor(t){if(super(),t={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:B,...t},!(typeof t.intervalCap=="number"&&t.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${t.intervalCap?.toString()??""}\` (${typeof t.intervalCap})`);if(t.interval===void 0||!(Number.isFinite(t.interval)&&t.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${t.interval?.toString()??""}\` (${typeof t.interval})`);this.#t=t.carryoverConcurrencyCount,this.#o=t.intervalCap===Number.POSITIVE_INFINITY||t.interval===0,this.#f=t.intervalCap,this.#a=t.interval,this.#e=new t.queueClass,this.#v=t.queueClass,this.concurrency=t.concurrency,this.timeout=t.timeout,this.#d=t.throwOnTimeout===!0,this.#i=t.autoStart===!1}get#T(){return this.#o||this.#s<this.#f}get#b(){return this.#n<this.#c}#x(){this.#n--,this.#u(),this.emit("next")}#_(){this.#w(),this.#y(),this.#h=void 0}get#I(){const t=Date.now();if(this.#r===void 0){const e=this.#p-t;if(e<0)this.#s=this.#t?this.#n:0;else return this.#h===void 0&&(this.#h=setTimeout(()=>{this.#_()},e)),!0}return!1}#u(){if(this.#e.size===0)return this.#r&&clearInterval(this.#r),this.#r=void 0,this.emit("empty"),this.#n===0&&this.emit("idle"),!1;if(!this.#i){const t=!this.#I;if(this.#T&&this.#b){const e=this.#e.dequeue();return e?(this.emit("active"),e(),t&&this.#y(),!0):!1}}return!1}#y(){this.#o||this.#r!==void 0||(this.#r=setInterval(()=>{this.#w()},this.#a),this.#p=Date.now()+this.#a)}#w(){this.#s===0&&this.#n===0&&this.#r&&(clearInterval(this.#r),this.#r=void 0),this.#s=this.#t?this.#n:0,this.#l()}#l(){for(;this.#u(););}get concurrency(){return this.#c}set concurrency(t){if(!(typeof t=="number"&&t>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${t}\` (${typeof t})`);this.#c=t,this.#l()}async#E(t){return new Promise((e,o)=>{t.addEventListener("abort",()=>{o(t.reason)},{once:!0})})}setPriority(t,e){this.#e.setPriority(t,e)}async add(t,e={}){return e.id??=(this.#g++).toString(),e={timeout:this.timeout,throwOnTimeout:this.#d,...e},new Promise((o,l)=>{this.#e.enqueue(async()=>{this.#n++,this.#s++;try{e.signal?.throwIfAborted();let h=t({signal:e.signal});e.timeout&&(h=V(Promise.resolve(h),{milliseconds:e.timeout})),e.signal&&(h=Promise.race([h,this.#E(e.signal)]));const v=await h;o(v),this.emit("completed",v)}catch(h){if(h instanceof P&&!e.throwOnTimeout){o();return}l(h),this.emit("error",h)}finally{this.#x()}},e),this.emit("add"),this.#u()})}async addAll(t,e){return Promise.all(t.map(async o=>this.add(o,e)))}start(){return this.#i?(this.#i=!1,this.#l(),this):this}pause(){this.#i=!0}clear(){this.#e=new this.#v}async onEmpty(){this.#e.size!==0&&await this.#m("empty")}async onSizeLessThan(t){this.#e.size<t||await this.#m("next",()=>this.#e.size<t)}async onIdle(){this.#n===0&&this.#e.size===0||await this.#m("idle")}async#m(t,e){return new Promise(o=>{const l=()=>{e&&!e()||(this.off(t,l),o())};this.on(t,l)})}get size(){return this.#e.size}sizeBy(t){return this.#e.filter(t).length}get pending(){return this.#n}get isPaused(){return this.#i}}D(F);const R={long:x("a few seconds ago"),short:x("seconds ago"),narrow:x("sec. ago")};function G(a=Date.now(),t={}){const e=_(Date.now());let o;const l=_({format:{timeStyle:"medium",dateStyle:"short"},relativeTime:"long",ignoreSeconds:!1,...b(t)}),h=T(()=>({...b(t),...l.value})),v=T(()=>new Date(b(a))),m=T(()=>new Intl.DateTimeFormat(L(),h.value.format).format(v.value)),n=T(()=>{if(h.value.relativeTime!==!1){const r=new Intl.RelativeTimeFormat($(),{numeric:"auto",style:h.value.relativeTime}),i=(v.value.getTime()-e.value)/1e3;if(Math.abs(i)<59.5)return h.value.ignoreSeconds?R[h.value.relativeTime]:r.format(Math.round(i),"second");const c=i/60;if(Math.abs(c)<=59)return r.format(Math.round(c),"minute");const f=c/60;if(Math.abs(f)<23.5)return r.format(Math.round(f),"hour");const u=f/24;if(Math.abs(u)<6.5)return r.format(Math.round(u),"day");if(Math.abs(u)<27.5){const s=u/7;return r.format(Math.round(s),"week")}const d=u/30;return Math.abs(d)<11.5?r.format(Math.round(d),"month"):r.format(Math.round(u/365),"year")}return m.value});return M([h],()=>{window.clearInterval(o),o=void 0,h.value.relativeTime&&(o=window.setInterval(()=>{e.value=Date.now()},1e3))}),N(()=>{h.value.relativeTime!==!1&&(o=window.setInterval(()=>{e.value=Date.now()},1e3))}),z(()=>{window.clearInterval(o)}),{formattedTime:n,formattedFullTime:m,options:l}}const H={name:"NcDateTime",props:{timestamp:{type:[Date,Number],required:!0},format:{type:Object,default:()=>({timeStyle:"medium",dateStyle:"short"})},relativeTime:{type:[Boolean,String],default:"long",validator:a=>a===!1||["long","short","narrow"].includes(a)},ignoreSeconds:{type:Boolean,default:!1}},setup(a){const t=T(()=>a.timestamp),{formattedTime:e,formattedFullTime:o}=G(t,a);return{formattedTime:e,formattedFullTime:o}}};var J=function(){var a=this,t=a._self._c;return t("span",{staticClass:"nc-datetime",attrs:{"data-timestamp":a.timestamp,title:a.formattedFullTime},domProps:{textContent:a._s(a.formattedTime)}})},K=[],Q=q(H,J,K,!1,null,null);const tt=Q.exports;export{tt as N,Z as P};
//# sourceMappingURL=NcDateTime-DshRFtUU-DIpH_bUF.chunk.mjs.map
