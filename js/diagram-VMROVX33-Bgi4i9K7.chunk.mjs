import{s as ie}from"./chunk-SKB7J2MH-DTAJP4Io.chunk.mjs";import{s as ce,g as de,o as pe,p as he,b as ue,c as fe,_ as w,G as ee,F as te,aY as me,v as ye,E as ge,l as Q,K as xe,k as Se,aZ as B,j as Y}from"./mermaid.core-vlSTWhnv.chunk.mjs";import{p as ve}from"./chunk-353BL4L5-A73uFXgK.chunk.mjs";import{p as Ce}from"./treemap-75Q7IDZK-K8BREnXc.chunk.mjs";import{b as V}from"./defaultLocale-0_YM-Ssk.chunk.mjs";import{o as J}from"./ordinal-D6YK7yj2.chunk.mjs";import"./modulepreload-polyfill-wXdbfrnd.chunk.mjs";import"./emoji-picker-DlAAdvrL.chunk.mjs";import"./NcLoadingIcon-B-OrvSvi.chunk.mjs";import"./vue.runtime.esm-BfXGYTpD.chunk.mjs";import"./_baseUniq-YcfFxM3J.chunk.mjs";import"./_basePickBy-CTGqPDCj.chunk.mjs";import"./clone-2YPmqQ9l.chunk.mjs";import"./init-CLzSasj9.chunk.mjs";function be(a){var t=0,n=a.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;a.value=t}function we(){return this.eachAfter(be)}function $e(a,t){let n=-1;for(const r of this)a.call(t,r,++n,this);return this}function Le(a,t){for(var n=this,r=[n],o,s,d=-1;n=r.pop();)if(a.call(t,n,++d,this),o=n.children)for(s=o.length-1;s>=0;--s)r.push(o[s]);return this}function Te(a,t){for(var n=this,r=[n],o=[],s,d,p,f=-1;n=r.pop();)if(o.push(n),s=n.children)for(d=0,p=s.length;d<p;++d)r.push(s[d]);for(;n=o.pop();)a.call(t,n,++f,this);return this}function ke(a,t){let n=-1;for(const r of this)if(a.call(t,r,++n,this))return r}function Me(a){return this.eachAfter(function(t){for(var n=+a(t.data)||0,r=t.children,o=r&&r.length;--o>=0;)n+=r[o].value;t.value=n})}function ze(a){return this.eachBefore(function(t){t.children&&t.children.sort(a)})}function Fe(a){for(var t=this,n=Ae(t,a),r=[t];t!==n;)t=t.parent,r.push(t);for(var o=r.length;a!==n;)r.splice(o,0,a),a=a.parent;return r}function Ae(a,t){if(a===t)return a;var n=a.ancestors(),r=t.ancestors(),o=null;for(a=n.pop(),t=r.pop();a===t;)o=a,a=n.pop(),t=r.pop();return o}function Pe(){for(var a=this,t=[a];a=a.parent;)t.push(a);return t}function Be(){return Array.from(this)}function We(){var a=[];return this.eachBefore(function(t){t.children||a.push(t)}),a}function Ne(){var a=this,t=[];return a.each(function(n){n!==a&&t.push({source:n.parent,target:n})}),t}function*De(){var a=this,t,n=[a],r,o,s;do for(t=n.reverse(),n=[];a=t.pop();)if(yield a,r=a.children)for(o=0,s=r.length;o<s;++o)n.push(r[o]);while(n.length)}function U(a,t){a instanceof Map?(a=[void 0,a],t===void 0&&(t=Ee)):t===void 0&&(t=Ie);for(var n=new Z(a),r,o=[n],s,d,p,f;r=o.pop();)if((d=t(r.data))&&(f=(d=Array.from(d)).length))for(r.children=d,p=f-1;p>=0;--p)o.push(s=d[p]=new Z(d[p])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(je)}function Re(){return U(this).eachBefore(Ve)}function Ie(a){return a.children}function Ee(a){return Array.isArray(a)?a[1]:null}function Ve(a){a.data.value!==void 0&&(a.value=a.data.value),a.data=a.data.data}function je(a){var t=0;do a.height=t;while((a=a.parent)&&a.height<++t)}function Z(a){this.data=a,this.depth=this.height=0,this.parent=null}Z.prototype=U.prototype={constructor:Z,count:we,each:$e,eachAfter:Te,eachBefore:Le,find:ke,sum:Me,sort:ze,path:Fe,ancestors:Pe,descendants:Be,leaves:We,links:Ne,copy:Re,[Symbol.iterator]:De};function He(a){if(typeof a!="function")throw new Error;return a}function j(){return 0}function H(a){return function(){return a}}function Ge(a){a.x0=Math.round(a.x0),a.y0=Math.round(a.y0),a.x1=Math.round(a.x1),a.y1=Math.round(a.y1)}function Oe(a,t,n,r,o){for(var s=a.children,d,p=-1,f=s.length,i=a.value&&(r-t)/a.value;++p<f;)d=s[p],d.y0=n,d.y1=o,d.x0=t,d.x1=t+=d.value*i}function _e(a,t,n,r,o){for(var s=a.children,d,p=-1,f=s.length,i=a.value&&(o-n)/a.value;++p<f;)d=s[p],d.x0=t,d.x1=r,d.y0=n,d.y1=n+=d.value*i}var qe=(1+Math.sqrt(5))/2;function Ke(a,t,n,r,o,s){for(var d=[],p=t.children,f,i,h=0,C=0,l=p.length,v,g,x=t.value,u,m,A,M,P,D,T;h<l;){v=o-n,g=s-r;do u=p[C++].value;while(!u&&C<l);for(m=A=u,D=Math.max(g/v,v/g)/(x*a),T=u*u*D,P=Math.max(A/T,T/m);C<l;++C){if(u+=i=p[C].value,i<m&&(m=i),i>A&&(A=i),T=u*u*D,M=Math.max(A/T,T/m),M>P){u-=i;break}P=M}d.push(f={value:u,dice:v<g,children:p.slice(h,C)}),f.dice?Oe(f,n,r,o,x?r+=g*u/x:s):_e(f,n,r,x?n+=v*u/x:o,s),x-=u,h=C}return d}const Ye=function a(t){function n(r,o,s,d,p){Ke(t,r,o,s,d,p)}return n.ratio=function(r){return a((r=+r)>1?r:1)},n}(qe);function Ze(){var a=Ye,t=!1,n=1,r=1,o=[0],s=j,d=j,p=j,f=j,i=j;function h(l){return l.x0=l.y0=0,l.x1=n,l.y1=r,l.eachBefore(C),o=[0],t&&l.eachBefore(Ge),l}function C(l){var v=o[l.depth],g=l.x0+v,x=l.y0+v,u=l.x1-v,m=l.y1-v;u<g&&(g=u=(g+u)/2),m<x&&(x=m=(x+m)/2),l.x0=g,l.y0=x,l.x1=u,l.y1=m,l.children&&(v=o[l.depth+1]=s(l)/2,g+=i(l)-v,x+=d(l)-v,u-=p(l)-v,m-=f(l)-v,u<g&&(g=u=(g+u)/2),m<x&&(x=m=(x+m)/2),a(l,g,x,u,m))}return h.round=function(l){return arguments.length?(t=!!l,h):t},h.size=function(l){return arguments.length?(n=+l[0],r=+l[1],h):[n,r]},h.tile=function(l){return arguments.length?(a=He(l),h):a},h.padding=function(l){return arguments.length?h.paddingInner(l).paddingOuter(l):h.paddingInner()},h.paddingInner=function(l){return arguments.length?(s=typeof l=="function"?l:H(+l),h):s},h.paddingOuter=function(l){return arguments.length?h.paddingTop(l).paddingRight(l).paddingBottom(l).paddingLeft(l):h.paddingTop()},h.paddingTop=function(l){return arguments.length?(d=typeof l=="function"?l:H(+l),h):d},h.paddingRight=function(l){return arguments.length?(p=typeof l=="function"?l:H(+l),h):p},h.paddingBottom=function(l){return arguments.length?(f=typeof l=="function"?l:H(+l),h):f},h.paddingLeft=function(l){return arguments.length?(i=typeof l=="function"?l:H(+l),h):i},h}var N,ae=(N=class{constructor(){this.nodes=[],this.levels=new Map,this.outerNodes=[],this.classes=new Map,this.setAccTitle=ce,this.getAccTitle=de,this.setDiagramTitle=pe,this.getDiagramTitle=he,this.getAccDescription=ue,this.setAccDescription=fe}getNodes(){return this.nodes}getConfig(){const t=ge,n=ee();return te({...t.treemap,...n.treemap??{}})}addNode(t,n){this.nodes.push(t),this.levels.set(t,n),n===0&&(this.outerNodes.push(t),this.root??=t)}getRoot(){return{name:"",children:this.outerNodes}}addClass(t,n){const r=this.classes.get(t)??{id:t,styles:[],textStyles:[]},o=n.replace(/\\,/g,"§§§").replace(/,/g,";").replace(/§§§/g,",").split(";");o&&o.forEach(s=>{me(s)&&(r?.textStyles?r.textStyles.push(s):r.textStyles=[s]),r?.styles?r.styles.push(s):r.styles=[s]}),this.classes.set(t,r)}getClasses(){return this.classes}getStylesForClass(t){return this.classes.get(t)?.styles??[]}clear(){ye(),this.nodes=[],this.levels=new Map,this.outerNodes=[],this.classes=new Map,this.root=void 0}},w(N,"TreeMapDB"),N);function ne(a){if(!a.length)return[];const t=[],n=[];return a.forEach(r=>{const o={name:r.name,children:r.type==="Leaf"?void 0:[]};for(o.classSelector=r?.classSelector,r?.cssCompiledStyles&&(o.cssCompiledStyles=[r.cssCompiledStyles]),r.type==="Leaf"&&r.value!==void 0&&(o.value=r.value);n.length>0&&n[n.length-1].level>=r.level;)n.pop();if(n.length===0)t.push(o);else{const s=n[n.length-1].node;s.children?s.children.push(o):s.children=[o]}r.type!=="Leaf"&&n.push({node:o,level:r.level})}),t}w(ne,"buildHierarchy");var Je=w((a,t)=>{ve(a,t);const n=[];for(const s of a.TreemapRows??[])s.$type==="ClassDefStatement"&&t.addClass(s.className??"",s.styleText??"");for(const s of a.TreemapRows??[]){const d=s.item;if(!d)continue;const p=s.indent?parseInt(s.indent):0,f=Qe(d),i=d.classSelector?t.getStylesForClass(d.classSelector):[],h=i.length>0?i.join(";"):void 0,C={level:p,name:f,type:d.$type,value:d.value,classSelector:d.classSelector,cssCompiledStyles:h};n.push(C)}const r=ne(n),o=w((s,d)=>{for(const p of s)t.addNode(p,d),p.children&&p.children.length>0&&o(p.children,d+1)},"addNodesRecursively");o(r,0)},"populate"),Qe=w(a=>a.name?String(a.name):"","getItemName"),re={parser:{yy:void 0},parse:w(async a=>{try{const t=await Ce("treemap",a);Q.debug("Treemap AST:",t);const n=re.parser?.yy;if(!(n instanceof ae))throw new Error("parser.parser?.yy was not a TreemapDB. This is due to a bug within Mermaid, please report this issue at https://github.com/mermaid-js/mermaid/issues.");Je(t,n)}catch(t){throw Q.error("Error parsing treemap:",t),t}},"parse")},Ue=10,W=10,G=25,Xe=w((a,t,n,r)=>{const o=r.db,s=o.getConfig(),d=s.padding??Ue,p=o.getDiagramTitle(),f=o.getRoot(),{themeVariables:i}=ee();if(!f)return;const h=p?30:0,C=xe(t),l=s.nodeWidth?s.nodeWidth*W:960,v=s.nodeHeight?s.nodeHeight*W:500,g=l,x=v+h;C.attr("viewBox",`0 0 ${g} ${x}`),Se(C,x,g,s.useMaxWidth);let u;try{const e=s.valueFormat||",";if(e==="$0,0")u=w(c=>"$"+V(",")(c),"valueFormat");else if(e.startsWith("$")&&e.includes(",")){const c=/\.\d+/.exec(e),y=c?c[0]:"";u=w($=>"$"+V(","+y)($),"valueFormat")}else if(e.startsWith("$")){const c=e.substring(1);u=w(y=>"$"+V(c||"")(y),"valueFormat")}else u=V(e)}catch(e){Q.error("Error creating format function:",e),u=V(",")}const m=J().range(["transparent",i.cScale0,i.cScale1,i.cScale2,i.cScale3,i.cScale4,i.cScale5,i.cScale6,i.cScale7,i.cScale8,i.cScale9,i.cScale10,i.cScale11]),A=J().range(["transparent",i.cScalePeer0,i.cScalePeer1,i.cScalePeer2,i.cScalePeer3,i.cScalePeer4,i.cScalePeer5,i.cScalePeer6,i.cScalePeer7,i.cScalePeer8,i.cScalePeer9,i.cScalePeer10,i.cScalePeer11]),M=J().range([i.cScaleLabel0,i.cScaleLabel1,i.cScaleLabel2,i.cScaleLabel3,i.cScaleLabel4,i.cScaleLabel5,i.cScaleLabel6,i.cScaleLabel7,i.cScaleLabel8,i.cScaleLabel9,i.cScaleLabel10,i.cScaleLabel11]);p&&C.append("text").attr("x",g/2).attr("y",h/2).attr("class","treemapTitle").attr("text-anchor","middle").attr("dominant-baseline","middle").text(p);const P=C.append("g").attr("transform",`translate(0, ${h})`).attr("class","treemapContainer"),D=U(f).sum(e=>e.value??0).sort((e,c)=>(c.value??0)-(e.value??0)),T=Ze().size([l,v]).paddingTop(e=>e.children&&e.children.length>0?G+W:0).paddingInner(d).paddingLeft(e=>e.children&&e.children.length>0?W:0).paddingRight(e=>e.children&&e.children.length>0?W:0).paddingBottom(e=>e.children&&e.children.length>0?W:0).round(!0)(D),le=T.descendants().filter(e=>e.children&&e.children.length>0),R=P.selectAll(".treemapSection").data(le).enter().append("g").attr("class","treemapSection").attr("transform",e=>`translate(${e.x0},${e.y0})`);R.append("rect").attr("width",e=>e.x1-e.x0).attr("height",G).attr("class","treemapSectionHeader").attr("fill","none").attr("fill-opacity",.6).attr("stroke-width",.6).attr("style",e=>e.depth===0?"display: none;":""),R.append("clipPath").attr("id",(e,c)=>`clip-section-${t}-${c}`).append("rect").attr("width",e=>Math.max(0,e.x1-e.x0-12)).attr("height",G),R.append("rect").attr("width",e=>e.x1-e.x0).attr("height",e=>e.y1-e.y0).attr("class",(e,c)=>`treemapSection section${c}`).attr("fill",e=>m(e.data.name)).attr("fill-opacity",.6).attr("stroke",e=>A(e.data.name)).attr("stroke-width",2).attr("stroke-opacity",.4).attr("style",e=>{if(e.depth===0)return"display: none;";const c=B({cssCompiledStyles:e.data.cssCompiledStyles});return c.nodeStyles+";"+c.borderStyles.join(";")}),R.append("text").attr("class","treemapSectionLabel").attr("x",6).attr("y",G/2).attr("dominant-baseline","middle").text(e=>e.depth===0?"":e.data.name).attr("font-weight","bold").attr("style",e=>{if(e.depth===0)return"display: none;";const c="dominant-baseline: middle; font-size: 12px; fill:"+M(e.data.name)+"; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;",y=B({cssCompiledStyles:e.data.cssCompiledStyles});return c+y.labelStyles.replace("color:","fill:")}).each(function(e){if(e.depth===0)return;const c=Y(this),y=e.data.name;c.text(y);const $=e.x1-e.x0,z=6;let F;s.showValues!==!1&&e.value?F=$-10-30-10-z:F=$-z-6;const k=Math.max(15,F),L=c.node();if(L.getComputedTextLength()>k){const S="...";let b=y;for(;b.length>0;){if(b=y.substring(0,b.length-1),b.length===0){c.text(S),L.getComputedTextLength()>k&&c.text("");break}if(c.text(b+S),L.getComputedTextLength()<=k)break}}}),s.showValues!==!1&&R.append("text").attr("class","treemapSectionValue").attr("x",e=>e.x1-e.x0-10).attr("y",G/2).attr("text-anchor","end").attr("dominant-baseline","middle").text(e=>e.value?u(e.value):"").attr("font-style","italic").attr("style",e=>{if(e.depth===0)return"display: none;";const c="text-anchor: end; dominant-baseline: middle; font-size: 10px; fill:"+M(e.data.name)+"; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;",y=B({cssCompiledStyles:e.data.cssCompiledStyles});return c+y.labelStyles.replace("color:","fill:")});const se=T.leaves(),O=P.selectAll(".treemapLeafGroup").data(se).enter().append("g").attr("class",(e,c)=>`treemapNode treemapLeafGroup leaf${c}${e.data.classSelector?` ${e.data.classSelector}`:""}x`).attr("transform",e=>`translate(${e.x0},${e.y0})`);O.append("rect").attr("width",e=>e.x1-e.x0).attr("height",e=>e.y1-e.y0).attr("class","treemapLeaf").attr("fill",e=>e.parent?m(e.parent.data.name):m(e.data.name)).attr("style",e=>B({cssCompiledStyles:e.data.cssCompiledStyles}).nodeStyles).attr("fill-opacity",.3).attr("stroke",e=>e.parent?m(e.parent.data.name):m(e.data.name)).attr("stroke-width",3),O.append("clipPath").attr("id",(e,c)=>`clip-${t}-${c}`).append("rect").attr("width",e=>Math.max(0,e.x1-e.x0-4)).attr("height",e=>Math.max(0,e.y1-e.y0-4)),O.append("text").attr("class","treemapLabel").attr("x",e=>(e.x1-e.x0)/2).attr("y",e=>(e.y1-e.y0)/2).attr("style",e=>{const c="text-anchor: middle; dominant-baseline: middle; font-size: 38px;fill:"+M(e.data.name)+";",y=B({cssCompiledStyles:e.data.cssCompiledStyles});return c+y.labelStyles.replace("color:","fill:")}).attr("clip-path",(e,c)=>`url(#clip-${t}-${c})`).text(e=>e.data.name).each(function(e){const c=Y(this),y=e.x1-e.x0,$=e.y1-e.y0,z=c.node(),F=4,k=y-2*F,L=$-2*F;if(k<10||L<10){c.style("display","none");return}let S=parseInt(c.style("font-size"),10);const b=8,I=28,_=.6,E=6,q=2;for(;z.getComputedTextLength()>k&&S>b;)S--,c.style("font-size",`${S}px`);let K=Math.max(E,Math.min(I,Math.round(S*_))),X=S+q+K;for(;X>L&&S>b&&(S--,K=Math.max(E,Math.min(I,Math.round(S*_))),!(K<E&&S===b));)c.style("font-size",`${S}px`),X=S+q+K;c.style("font-size",`${S}px`),(z.getComputedTextLength()>k||S<b||L<S)&&c.style("display","none")}),s.showValues!==!1&&O.append("text").attr("class","treemapValue").attr("x",e=>(e.x1-e.x0)/2).attr("y",function(e){return(e.y1-e.y0)/2}).attr("style",e=>{const c="text-anchor: middle; dominant-baseline: hanging; font-size: 28px;fill:"+M(e.data.name)+";",y=B({cssCompiledStyles:e.data.cssCompiledStyles});return c+y.labelStyles.replace("color:","fill:")}).attr("clip-path",(e,c)=>`url(#clip-${t}-${c})`).text(e=>e.value?u(e.value):"").each(function(e){const c=Y(this),y=this.parentNode;if(!y){c.style("display","none");return}const $=Y(y).select(".treemapLabel");if($.empty()||$.style("display")==="none"){c.style("display","none");return}const z=parseFloat($.style("font-size")),F=28,k=.6,L=6,S=2,b=Math.max(L,Math.min(F,Math.round(z*k)));c.style("font-size",`${b}px`);const I=(e.y1-e.y0)/2+z/2+S;c.attr("y",I);const _=e.x1-e.x0,E=e.y1-e.y0-4,q=_-2*4;c.node().getComputedTextLength()>q||I+b>E||b<L?c.style("display","none"):c.style("display",null)});const oe=s.diagramPadding??8;ie(C,oe,"flowchart",s?.useMaxWidth||!1)},"draw"),et=w(function(a,t){return t.db.getClasses()},"getClasses"),tt={draw:Xe,getClasses:et},at={sectionStrokeColor:"black",sectionStrokeWidth:"1",sectionFillColor:"#efefef",leafStrokeColor:"black",leafStrokeWidth:"1",leafFillColor:"#efefef",labelColor:"black",labelFontSize:"12px",valueFontSize:"10px",valueColor:"black",titleColor:"black",titleFontSize:"14px"},nt=w(({treemap:a}={})=>{const t=te(at,a);return`
  .treemapNode.section {
    stroke: ${t.sectionStrokeColor};
    stroke-width: ${t.sectionStrokeWidth};
    fill: ${t.sectionFillColor};
  }
  .treemapNode.leaf {
    stroke: ${t.leafStrokeColor};
    stroke-width: ${t.leafStrokeWidth};
    fill: ${t.leafFillColor};
  }
  .treemapLabel {
    fill: ${t.labelColor};
    font-size: ${t.labelFontSize};
  }
  .treemapValue {
    fill: ${t.valueColor};
    font-size: ${t.valueFontSize};
  }
  .treemapTitle {
    fill: ${t.titleColor};
    font-size: ${t.titleFontSize};
  }
  `},"getStyles"),rt=nt,St={parser:re,get db(){return new ae},renderer:tt,styles:rt};export{St as diagram};
//# sourceMappingURL=diagram-VMROVX33-Bgi4i9K7.chunk.mjs.map
