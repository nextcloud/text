{"version":3,"file":"src_extensions_index_js-src_components_Editor_EditorOutline_vue-data_image_svg_xml_base64_PCE-a8d943.js?v=0c7ec656f3ba48c9de1f","mappings":"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","sources":["webpack:///text/src/components/Editor/MediaHandler.provider.js","webpack:///text/src/components/Editor/Wrapper.provider.js","webpack://text/./src/components/Menu/ActionEntry.scss?c415","webpack:///text/src/components/Menu/BaseActionEntry.js","webpack:///text/src/components/Menu/MenuBar.provider.js","webpack:///text/src/components/Menu/EmojiPickerAction.vue","webpack:///text/src/components/Menu/EmojiPickerAction.vue?vue&type=script&lang=js&","webpack://text/./src/components/Menu/EmojiPickerAction.vue?ec5c","webpack://text/./src/components/Menu/EmojiPickerAction.vue?b768","webpack://text/./src/components/Menu/ActionAttachmentUpload.vue?c12b","webpack:///text/src/components/Menu/ActionAttachmentUpload.vue","webpack:///text/src/components/Menu/ActionAttachmentUpload.vue?vue&type=script&lang=js&","webpack://text/./src/components/Menu/ActionAttachmentUpload.vue?3a53","webpack://text/./src/components/Menu/ActionInsertLink.vue?b231","webpack:///text/src/components/Menu/ActionInsertLink.vue","webpack:///text/src/components/Menu/ActionInsertLink.vue?vue&type=script&lang=js&","webpack://text/./src/components/Menu/ActionInsertLink.vue?c5d8","webpack://text/./src/components/Menu/ActionInsertLink.vue?7891","webpack:///text/src/components/Menu/entries.js","webpack:///text/src/components/Menu/keys.js","webpack:///text/src/components/Menu/utils.js","webpack:///text/src/components/Suggestion/suggestions.js","webpack:///text/src/components/icons.js","webpack:///text/src/extensions/transformPastedHTML.js","webpack:///text/src/extensions/Markdown.js","webpack:///text/src/extensions/CollaborationCursor.js","webpack:///text/src/extensions/Emoji.js","webpack:///text/src/extensions/Keymap.js","webpack:///text/src/extensions/tracking/models.js","webpack:///text/src/extensions/tracking/TrackState.js","webpack:///text/src/extensions/UserColor.js","webpack:///text/src/nodes/PlainTextDocument.js","webpack:///text/src/extensions/PlainText.js","webpack:///text/src/nodes/BulletList.js","webpack:///text/src/commands/listInputRule.js","webpack:///text/src/nodes/Callout.vue","webpack:///text/src/nodes/Callout.vue?vue&type=script&lang=js&","webpack://text/./src/nodes/Callout.vue?1092","webpack://text/./src/nodes/Callout.vue?8e96","webpack://text/./src/nodes/Callout.vue?30d8","webpack:///text/src/nodes/Callouts.js","webpack:///text/src/nodes/CodeBlockView.vue","webpack:///text/src/nodes/CodeBlockView.vue?vue&type=script&lang=js&","webpack://text/./src/nodes/CodeBlockView.vue?c353","webpack://text/./src/nodes/CodeBlockView.vue?0dcc","webpack://text/./src/nodes/CodeBlockView.vue?efd6","webpack:///text/src/nodes/CodeBlock.js","webpack:///text/src/nodes/Table/TableCaption.js","webpack:///text/src/nodes/Table/TableCell.js","webpack:///text/src/nodes/Table/TableHeader.js","webpack:///text/src/nodes/Table/TableRow.js","webpack:///text/src/nodes/Table/TableHeadRow.js","webpack:///text/src/nodes/Table/Table.js","webpack:///text/src/nodes/Table/TableView.vue","webpack:///text/src/nodes/Table/TableView.vue?vue&type=script&lang=js&","webpack://text/./src/nodes/Table/TableView.vue?2e18","webpack://text/./src/nodes/Table/TableView.vue?5b22","webpack://text/./src/nodes/Table/TableView.vue?c31b","webpack:///text/src/nodes/Table/TableCellView.vue","webpack:///text/src/nodes/Table/TableCellView.vue?vue&type=script&lang=js&","webpack://text/./src/nodes/Table/TableCellView.vue?b628","webpack://text/./src/nodes/Table/TableCellView.vue?bec9","webpack://text/./src/nodes/Table/TableCellView.vue?f05f","webpack:///text/src/components/InlineActionsContainer.vue","webpack:///text/src/components/InlineActionsContainer.vue?vue&type=script&lang=js&","webpack://text/./src/components/InlineActionsContainer.vue?a13e","webpack://text/./src/components/InlineActionsContainer.vue?7568","webpack://text/./src/components/InlineActionsContainer.vue?e593","webpack:///text/src/nodes/Table/TableHeaderView.vue?vue&type=script&lang=js&","webpack:///text/src/nodes/Table/TableHeaderView.vue","webpack://text/./src/nodes/Table/TableHeaderView.vue?632c","webpack://text/./src/nodes/Table/TableHeaderView.vue?7377","webpack://text/./src/nodes/Table/TableHeaderView.vue?09cc","webpack:///text/src/nodes/EditableTable.js","webpack:///text/src/components/Suggestion/Emoji/EmojiList.vue","webpack:///text/src/components/Suggestion/Emoji/EmojiList.vue?vue&type=script&lang=js&","webpack://text/./src/components/Suggestion/Emoji/EmojiList.vue?a029","webpack://text/./src/components/Suggestion/Emoji/EmojiList.vue?e850","webpack://text/./src/components/Suggestion/Emoji/EmojiList.vue?a16f","webpack:///text/src/nodes/FrontMatter.js","webpack:///text/src/nodes/HardBreak.js","webpack:///text/src/nodes/Heading/extractor.js","webpack://text/./src/nodes/Heading/HeadingView.vue?1546","webpack:///text/src/nodes/Heading/HeadingView.vue","webpack:///text/src/nodes/Heading/HeadingView.vue?vue&type=script&lang=js&","webpack://text/./src/nodes/Heading/HeadingView.vue?65b3","webpack://text/./src/nodes/Heading/HeadingView.vue?c668","webpack:///text/src/nodes/Heading/index.js","webpack:///text/src/components/ImageView/ShowImageModal.vue","webpack:///text/src/components/ImageView/ShowImageModal.vue?vue&type=script&lang=js&","webpack://text/./src/components/ImageView/ShowImageModal.vue?2c1c","webpack://text/./src/components/ImageView/ShowImageModal.vue?7335","webpack://text/./src/components/ImageView/ShowImageModal.vue?6fbd","webpack:///text/src/nodes/ImageView.vue","webpack:///text/src/nodes/ImageView.vue?vue&type=script&lang=js&","webpack://text/./src/nodes/ImageView.vue?11cb","webpack://text/./src/nodes/ImageView.vue?efcd","webpack://text/./src/nodes/ImageView.vue?969a","webpack:///text/src/nodes/Image.js","webpack:///text/src/nodes/ImageInline.js","webpack:///text/src/extensions/KeepSyntax.js","webpack:///text/src/components/Suggestion/LinkPicker/LinkPickerList.vue","webpack:///text/src/components/Suggestion/LinkPicker/LinkPickerList.vue?vue&type=script&lang=js&","webpack://text/./src/components/Suggestion/LinkPicker/LinkPickerList.vue?81f3","webpack://text/./src/components/Suggestion/LinkPicker/LinkPickerList.vue?0ed6","webpack://text/./src/components/Suggestion/LinkPicker/LinkPickerList.vue?bf2d","webpack:///text/src/components/Suggestion/LinkPicker/suggestions.js","webpack:///text/src/extensions/LinkPicker.js","webpack:///text/src/extensions/Mention.vue","webpack:///text/src/extensions/Mention.vue?vue&type=script&lang=js&","webpack://text/./src/extensions/Mention.vue?bb6d","webpack://text/./src/extensions/Mention.vue?f3fc","webpack://text/./src/extensions/Mention.vue?ec9d","webpack:///text/src/extensions/Mention.js","webpack:///text/src/nodes/ParagraphView.vue","webpack:///text/src/nodes/ParagraphView.vue?vue&type=script&lang=js&","webpack://text/./src/nodes/ParagraphView.vue?4568","webpack://text/./src/nodes/ParagraphView.vue?1b24","webpack://text/./src/nodes/ParagraphView.vue?c67b","webpack:///text/src/nodes/Paragraph.js","webpack:///text/src/nodes/Table.js","webpack:///text/src/helpers/prosemirrorUtils.js","webpack:///text/src/nodes/TaskItem.js","webpack:///text/src/nodes/TaskList.js","webpack:///text/src/nodes/TrailingNode.js","webpack:///text/src/helpers/links.js","webpack:///text/src/plugins/link.js","webpack:///text/src/marks/Link.js","webpack:///text/src/marks/Strike.js","webpack:///text/src/marks/Strong.js","webpack:///text/src/marks/Underline.js","webpack:///text/src/marks/index.js","webpack:///text/src/extensions/RichText.js","webpack:///text/src/components/Suggestion/Emoji/suggestions.js","webpack:///text/src/markdownit/callouts.js","webpack:///text/src/markdownit/splitMixedLists.js","webpack:///text/src/markdownit/index.js","webpack:///text/src/markdownit/underline.js","webpack:///text/src/markdownit/hardbreak.js","webpack:///text/src/markdownit/keepSyntax.js","webpack:///text/src/mixins/store.js","webpack:///text/src/components/Menu/ActionEntry.scss","webpack:///text/src/components/Editor/EditorOutline.vue?vue&type=style&index=0&id=4a57d3b2&prod&lang=scss&scoped=true&","webpack:///text/src/components/Editor/TableOfContents.vue?vue&type=style&index=0&id=b2a2fa9e&prod&lang=scss&","webpack:///text/src/components/ImageView/ShowImageModal.vue?vue&type=style&index=0&id=403f8ff2&prod&scoped=true&lang=scss&","webpack:///text/src/components/InlineActionsContainer.vue?vue&type=style&index=0&id=40a23119&prod&lang=scss&","webpack:///text/src/components/Suggestion/Emoji/EmojiList.vue?vue&type=style&index=0&id=74f9a54a&prod&scoped=true&lang=scss&","webpack:///text/src/components/Suggestion/LinkPicker/LinkPickerList.vue?vue&type=style&index=0&id=11ad0ffc&prod&lang=scss&scoped=true&","webpack:///text/src/components/Suggestion/SuggestionListWrapper.vue?vue&type=style&index=0&id=7d01400b&prod&scoped=true&lang=scss&","webpack:///text/src/nodes/Callout.vue?vue&type=style&index=0&id=4387ae9f&prod&lang=scss&scoped=true&","webpack:///text/src/nodes/CodeBlockView.vue?vue&type=style&index=0&id=54c047fa&prod&lang=scss&scoped=true&","webpack:///text/src/nodes/Heading/HeadingView.vue?vue&type=style&index=0&id=4748dbe7&prod&lang=scss&","webpack:///text/src/nodes/ImageView.vue?vue&type=style&index=0&id=58f97ef1&prod&scoped=true&lang=scss&","webpack:///text/src/nodes/ParagraphView.vue?vue&type=style&index=0&id=b95f24a4&prod&lang=scss&scoped=true&","webpack:///text/src/nodes/Table/TableCellView.vue?vue&type=style&index=0&id=3543004d&prod&scoped=true&lang=scss&","webpack:///text/src/nodes/Table/TableHeaderView.vue?vue&type=style&index=0&id=25a85f13&prod&scoped=true&lang=scss&","webpack:///text/src/nodes/Table/TableView.vue?vue&type=style&index=0&id=261cbb42&prod&scoped=true&lang=scss&","webpack:///text/src/components/Menu/ActionInsertLink.vue?vue&type=style&index=0&id=881e5fae&prod&scoped=true&lang=css&","webpack:///text/src/extensions/Mention.vue?vue&type=style&index=0&id=297bb5fa&prod&scoped=true&lang=css&","webpack://text/./src/components/Editor/EditorOutline.vue?ec9a","webpack:///text/src/components/Editor/TableOfContents.vue","webpack:///text/src/components/Editor/TableOfContents.vue?vue&type=script&lang=js&","webpack://text/./src/components/Editor/TableOfContents.vue?214b","webpack://text/./src/components/Editor/TableOfContents.vue?196c","webpack://text/./src/components/Editor/TableOfContents.vue?a843","webpack:///text/src/components/Editor/EditorOutline.vue","webpack:///text/src/components/Editor/EditorOutline.vue?vue&type=script&lang=js&","webpack://text/./src/components/Editor/EditorOutline.vue?68af","webpack://text/./src/components/Editor/EditorOutline.vue?99f8","webpack:///text/src/components/Suggestion/SuggestionListWrapper.vue","webpack:///text/src/components/Suggestion/SuggestionListWrapper.vue?vue&type=script&lang=js&","webpack://text/./src/components/Suggestion/SuggestionListWrapper.vue?e7b0","webpack://text/./src/components/Suggestion/SuggestionListWrapper.vue?9941","webpack://text/./src/components/Suggestion/SuggestionListWrapper.vue?7088"],"sourcesContent":["export const STATE_UPLOADING = Symbol('state:uploading-state')\nexport const ACTION_ATTACHMENT_PROMPT = Symbol('editor:action:attachment-prompt')\nexport const ACTION_CHOOSE_LOCAL_ATTACHMENT = Symbol('editor:action:upload-attachment')\n\nexport const useUploadingStateMixin = {\n\tinject: {\n\t\t$uploadingState: {\n\t\t\tfrom: STATE_UPLOADING,\n\t\t\tdefault: {\n\t\t\t\tisUploadingAttachments: false,\n\t\t\t},\n\t\t},\n\t},\n}\n\nexport const useActionAttachmentPromptMixin = {\n\tinject: {\n\t\t$callAttachmentPrompt: { from: ACTION_ATTACHMENT_PROMPT, default: () => {} },\n\t},\n}\n\nexport const useActionChooseLocalAttachmentMixin = {\n\tinject: {\n\t\t$callChooseLocalAttachment: { from: ACTION_CHOOSE_LOCAL_ATTACHMENT, default: () => {} },\n\t},\n}\n","export const OUTLINE_STATE = Symbol('wrapper:outline-state')\nexport const OUTLINE_ACTIONS = Symbol('wrapper:outline-actions')\n\nexport const useOutlineStateMixin = {\n\tinject: {\n\t\t$outlineState: {\n\t\t\tfrom: OUTLINE_STATE,\n\t\t\tdefault: {\n\t\t\t\tvisible: false,\n\t\t\t\tenable: false,\n\t\t\t},\n\t\t},\n\t},\n}\n\nexport const useOutlineActions = {\n\tinject: {\n\t\t$outlineActions: {\n\t\t\tfrom: OUTLINE_ACTIONS,\n\t\t\tdefault: {\n\t\t\t\ttoggle: () => {},\n\t\t\t},\n\t\t},\n\t},\n}\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./ActionEntry.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./ActionEntry.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * @copyright Copyright (c) 2022 Vinicius Reis <vinicius@nextcloud.com>\n *\n * @author Vinicius Reis <vinicius@nextcloud.com>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\n/* eslint-disable jsdoc/valid-types */\n\nimport { Tooltip } from '@nextcloud/vue'\nimport debounce from 'debounce'\n\nimport { useEditorMixin, useIsMobileMixin } from '../Editor.provider.js'\nimport { useOutlineActions, useOutlineStateMixin } from '../Editor/Wrapper.provider.js'\nimport { getActionState, getKeys, getKeyshortcuts } from './utils.js'\nimport useStore from '../../mixins/store.js'\n\nimport './ActionEntry.scss'\n\n/**\n * @type {import(\"vue\").ComponentOptions} BaseActionEntry\n */\nconst BaseActionEntry = {\n\tdirectives: {\n\t\tTooltip,\n\t},\n\tmixins: [useEditorMixin, useIsMobileMixin, useStore, useOutlineActions, useOutlineStateMixin],\n\tprops: {\n\t\tactionEntry: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tcanBeFocussed: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: null,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tstate: getActionState(this.actionEntry, this.$editor),\n\t\t}\n\t},\n\tcomputed: {\n\t\tlabel() {\n\t\t\tconst { label } = this.actionEntry\n\n\t\t\treturn typeof label === 'function'\n\t\t\t\t? label(this)\n\t\t\t\t: label\n\t\t},\n\t\ticon() {\n\t\t\treturn this.actionEntry.icon\n\t\t},\n\t\tkeyshortcuts() {\n\t\t\treturn getKeyshortcuts(this.actionEntry)\n\t\t},\n\t\ttooltip() {\n\t\t\treturn [\n\t\t\t\tthis.label,\n\t\t\t\tgetKeys(this.$isMobile, this.actionEntry),\n\t\t\t].join(' ')\n\t\t},\n\t},\n\twatch: {\n\t\t/** Handle tabindex for menu toolbar */\n\t\tcanBeFocussed() {\n\t\t\tthis.setTabIndexOnButton()\n\t\t},\n\t},\n\tmounted() {\n\t\tthis.$_updateState = debounce(this.updateState.bind(this), 50)\n\t\tthis.$editor.on('update', this.$_updateState)\n\t\tthis.$editor.on('selectionUpdate', this.$_updateState)\n\t\t// Initially emit the disabled event to set the state in parent\n\t\tthis.$emit('disabled', this.state.disabled)\n\t\t// Initially set the tabindex\n\t\tthis.setTabIndexOnButton()\n\t},\n\tbeforeDestroy() {\n\t\tthis.$editor.off('update', this.$_updateState)\n\t\tthis.$editor.off('selectionUpdate', this.$_updateState)\n\t},\n\tmethods: {\n\t\tupdateState() {\n\t\t\tthis.state = getActionState(this.actionEntry, this.$editor)\n\t\t\tthis.$emit('disabled', this.state.disabled)\n\t\t},\n\t\tsetTabIndexOnButton() {\n\t\t\t/** @type {HTMLButtonElement} */\n\t\t\tconst button = this.$el.tagName.toLowerCase() === 'button' ? this.$el : this.$el.querySelector('button')\n\n\t\t\tif (this.canBeFocussed === null) {\n\t\t\t\tbutton.removeAttribute('tabindex')\n\t\t\t} else {\n\t\t\t\tbutton.setAttribute('tabindex', this.canBeFocussed ? '0' : '-1')\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Focus the inner button of this action\n\t\t */\n\t\tfocusButton() {\n\t\t\t/** @type {HTMLButtonElement} */\n\t\t\tconst button = this.$el.tagName.toLowerCase() === 'button' ? this.$el : this.$el.querySelector('button')\n\t\t\tbutton.focus()\n\t\t},\n\t},\n}\n\nexport { BaseActionEntry }\n","export const MENU_ID = Symbol('menu::id')\n\nexport const useMenuIDMixin = {\n\tinject: {\n\t\t$menuID: { from: MENU_ID, default: null },\n\t},\n\tcomputed: {\n\t\tmenuIDSelector() {\n\t\t\treturn `#${this.$menuID}`\n\t\t},\n\t},\n}\n","<!--\n  - @copyright Copyright (c) 2022 Vinicius Reis <vinicius@nextcloud.com>\n  -\n  - @author Vinicius Reis <vinicius@nextcloud.com>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\n  -\n  -->\n<template>\n\t<NcEmojiPicker class=\"entry-action entry-action__emoji\"\n\t\t:data-text-action-entry=\"actionEntry.key\"\n\t\t:container=\"menuIDSelector\"\n\t\t@select-data=\"addEmoji\">\n\t\t<NcButton v-tooltip=\"actionEntry.label\"\n\t\t\tclass=\"entry-action__button\"\n\t\t\trole=\"menu\"\n\t\t\t:title=\"actionEntry.label\"\n\t\t\t:aria-label=\"actionEntry.label\"\n\t\t\t:aria-haspopup=\"true\">\n\t\t\t<template #icon>\n\t\t\t\t<component :is=\"icon\" />\n\t\t\t</template>\n\t\t</NcButton>\n\t</NcEmojiPicker>\n</template>\n\n<script>\nimport { BaseActionEntry } from './BaseActionEntry.js'\nimport { NcEmojiPicker, NcButton } from '@nextcloud/vue'\nimport { useMenuIDMixin } from './MenuBar.provider.js'\n\nexport default {\n\tname: 'EmojiPickerAction',\n\tcomponents: {\n\t\tNcEmojiPicker,\n\t\tNcButton,\n\t},\n\textends: BaseActionEntry,\n\tmixins: [useMenuIDMixin],\n\tmethods: {\n\t\taddEmoji({ id, native }) {\n\t\t\tthis.actionEntry\n\t\t\t\t.action(this.$editor.chain(), { id, native })\n\t\t\t\t.focus()\n\t\t\t\t.run()\n\t\t},\n\t},\n}\n</script>\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EmojiPickerAction.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EmojiPickerAction.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EmojiPickerAction.vue?vue&type=template&id=7e6ff5ef&\"\nimport script from \"./EmojiPickerAction.vue?vue&type=script&lang=js&\"\nexport * from \"./EmojiPickerAction.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('NcEmojiPicker',{staticClass:\"entry-action entry-action__emoji\",attrs:{\"data-text-action-entry\":_vm.actionEntry.key,\"container\":_vm.menuIDSelector},on:{\"select-data\":_vm.addEmoji}},[_c('NcButton',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:(_vm.actionEntry.label),expression:\"actionEntry.label\"}],staticClass:\"entry-action__button\",attrs:{\"role\":\"menu\",\"title\":_vm.actionEntry.label,\"aria-label\":_vm.actionEntry.label,\"aria-haspopup\":true},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c(_vm.icon,{tag:\"component\"})]},proxy:true}])})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('NcActions',{staticClass:\"entry-action entry-action__image-upload\",attrs:{\"data-text-action-entry\":_vm.actionEntry.key,\"name\":_vm.actionEntry.label,\"aria-label\":_vm.actionEntry.label,\"container\":_vm.menuIDSelector,\"role\":\"menu\",\"aria-haspopup\":\"\"},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c(_vm.icon,{tag:\"component\",attrs:{\"name\":_vm.actionEntry.label,\"aria-label\":_vm.actionEntry.label,\"aria-haspopup\":\"\"}})]},proxy:true}])},[_vm._v(\" \"),(_vm.$editorUpload)?_c('NcActionButton',{attrs:{\"close-after-click\":\"\",\"disabled\":_vm.isUploadingAttachments,\"data-text-action-entry\":`${_vm.actionEntry.key}-upload`},on:{\"click\":_vm.$callChooseLocalAttachment},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('Upload')]},proxy:true}],null,false,933298848)},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('text', 'Upload from computer'))+\"\\n\\t\")]):_vm._e(),_vm._v(\" \"),(!_vm.$isPublic)?_c('NcActionButton',{attrs:{\"close-after-click\":\"\",\"disabled\":_vm.isUploadingAttachments,\"data-text-action-entry\":`${_vm.actionEntry.key}-insert`},on:{\"click\":_vm.$callAttachmentPrompt},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('Folder')]},proxy:true}],null,false,2750733237)},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('text', 'Insert from Files'))+\"\\n\\t\")]):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\n  - @copyright Copyright (c) 2022 Vinicius Reis <vinicius@nextcloud.com>\n  -\n  - @author Vinicius Reis <vinicius@nextcloud.com>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\n  -\n  -->\n<template>\n\t<NcActions class=\"entry-action entry-action__image-upload\"\n\t\t:data-text-action-entry=\"actionEntry.key\"\n\t\t:name=\"actionEntry.label\"\n\t\t:aria-label=\"actionEntry.label\"\n\t\t:container=\"menuIDSelector\"\n\t\trole=\"menu\"\n\t\taria-haspopup>\n\t\t<template #icon>\n\t\t\t<component :is=\"icon\"\n\t\t\t\t:name=\"actionEntry.label\"\n\t\t\t\t:aria-label=\"actionEntry.label\"\n\t\t\t\taria-haspopup />\n\t\t</template>\n\t\t<NcActionButton v-if=\"$editorUpload\"\n\t\t\tclose-after-click\n\t\t\t:disabled=\"isUploadingAttachments\"\n\t\t\t:data-text-action-entry=\"`${actionEntry.key}-upload`\"\n\t\t\t@click=\"$callChooseLocalAttachment\">\n\t\t\t<template #icon>\n\t\t\t\t<Upload />\n\t\t\t</template>\n\t\t\t{{ t('text', 'Upload from computer') }}\n\t\t</NcActionButton>\n\t\t<NcActionButton v-if=\"!$isPublic\"\n\t\t\tclose-after-click\n\t\t\t:disabled=\"isUploadingAttachments\"\n\t\t\t:data-text-action-entry=\"`${actionEntry.key}-insert`\"\n\t\t\t@click=\"$callAttachmentPrompt\">\n\t\t\t<template #icon>\n\t\t\t\t<Folder />\n\t\t\t</template>\n\t\t\t{{ t('text', 'Insert from Files') }}\n\t\t</NcActionButton>\n\t</NcActions>\n</template>\n\n<script>\nimport { NcActions, NcActionButton } from '@nextcloud/vue'\nimport { Loading, Folder, Upload } from '../icons.js'\nimport { useIsPublicMixin, useEditorUpload } from '../Editor.provider.js'\nimport { BaseActionEntry } from './BaseActionEntry.js'\nimport { useMenuIDMixin } from './MenuBar.provider.js'\nimport {\n\tuseActionAttachmentPromptMixin,\n\tuseUploadingStateMixin,\n\tuseActionChooseLocalAttachmentMixin,\n} from '../Editor/MediaHandler.provider.js'\n\nexport default {\n\tname: 'ActionAttachmentUpload',\n\tcomponents: {\n\t\tNcActions,\n\t\tNcActionButton,\n\t\tLoading,\n\t\tFolder,\n\t\tUpload,\n\t},\n\textends: BaseActionEntry,\n\tmixins: [\n\t\tuseIsPublicMixin,\n\t\tuseEditorUpload,\n\t\tuseActionAttachmentPromptMixin,\n\t\tuseUploadingStateMixin,\n\t\tuseActionChooseLocalAttachmentMixin,\n\t\tuseMenuIDMixin,\n\t],\n\tcomputed: {\n\t\ticon() {\n\t\t\treturn this.isUploadingAttachments\n\t\t\t\t? Loading\n\t\t\t\t: this.actionEntry.icon\n\t\t},\n\t\tisUploadingAttachments() {\n\t\t\treturn this.$uploadingState.isUploadingAttachments\n\t\t},\n\t},\n}\n</script>\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ActionAttachmentUpload.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ActionAttachmentUpload.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ActionAttachmentUpload.vue?vue&type=template&id=494a223c&\"\nimport script from \"./ActionAttachmentUpload.vue?vue&type=script&lang=js&\"\nexport * from \"./ActionAttachmentUpload.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('NcActions',{staticClass:\"entry-action entry-action__insert-link\",class:_vm.activeClass,attrs:{\"aria-haspopup\":\"\",\"aria-label\":_vm.actionEntry.label,\"container\":_vm.menuIDSelector,\"data-text-action-entry\":_vm.actionEntry.key,\"name\":_vm.actionEntry.label,\"open\":_vm.menuOpen},on:{\"update:open\":(open) => { _vm.menuOpen = _vm.menuOpen || open }},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c(_vm.icon,{tag:\"component\",attrs:{\"name\":_vm.actionEntry.label,\"aria-label\":_vm.actionEntry.label,\"aria-haspopup\":\"\"}})]},proxy:true}])},[_vm._v(\" \"),(_vm.state.active)?_c('NcActionButton',{attrs:{\"data-text-action-entry\":`${_vm.actionEntry.key}-remove`},on:{\"click\":_vm.removeLink},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('LinkOff')]},proxy:true}],null,false,3589828876)},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('text', 'Remove link'))+\"\\n\\t\")]):_vm._e(),_vm._v(\" \"),_c('NcActionButton',{ref:\"buttonFile\",attrs:{\"data-text-action-entry\":`${_vm.actionEntry.key}-file`},on:{\"click\":_vm.linkFile},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('Document')]},proxy:true}])},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('text', 'Link to file or folder'))+\"\\n\\t\")]),_vm._v(\" \"),(_vm.isInputMode)?_c('NcActionInput',{attrs:{\"type\":\"text\",\"value\":_vm.href,\"data-text-action-entry\":`${_vm.actionEntry.key}-input`},on:{\"submit\":_vm.linkWebsite},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('Web')]},proxy:true}],null,false,1844845715)},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('text', 'Link to website'))+\"\\n\\t\")]):_c('NcActionButton',{attrs:{\"data-text-action-entry\":`${_vm.actionEntry.key}-website`},on:{\"click\":_vm.linkWebsite},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('Web')]},proxy:true}])},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.state.active ? _vm.t('text', 'Update link') : _vm.t('text', 'Link to website'))+\"\\n\\t\")]),_vm._v(\" \"),_c('NcActionButton',{attrs:{\"data-text-action-entry\":`${_vm.actionEntry.key}-picker`},on:{\"click\":_vm.linkPicker},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('Shape')]},proxy:true}])},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('text', 'Open the Smart Picker'))+\"\\n\\t\")])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\n  - @copyright Copyright (c) 2022\n  -\n  - @license AGPL-3.0-or-later\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\n  -\n  -->\n<template>\n\t<NcActions class=\"entry-action entry-action__insert-link\"\n\t\taria-haspopup\n\t\t:aria-label=\"actionEntry.label\"\n\t\t:class=\"activeClass\"\n\t\t:container=\"menuIDSelector\"\n\t\t:data-text-action-entry=\"actionEntry.key\"\n\t\t:name=\"actionEntry.label\"\n\t\t:open=\"menuOpen\"\n\t\t@update:open=\"(open) => { menuOpen = menuOpen || open }\">\n\t\t<template #icon>\n\t\t\t<component :is=\"icon\"\n\t\t\t\t:name=\"actionEntry.label\"\n\t\t\t\t:aria-label=\"actionEntry.label\"\n\t\t\t\taria-haspopup />\n\t\t</template>\n\t\t<NcActionButton v-if=\"state.active\"\n\t\t\t:data-text-action-entry=\"`${actionEntry.key}-remove`\"\n\t\t\t@click=\"removeLink\">\n\t\t\t<template #icon>\n\t\t\t\t<LinkOff />\n\t\t\t</template>\n\t\t\t{{ t('text', 'Remove link') }}\n\t\t</NcActionButton>\n\t\t<NcActionButton ref=\"buttonFile\"\n\t\t\t:data-text-action-entry=\"`${actionEntry.key}-file`\"\n\t\t\t@click=\"linkFile\">\n\t\t\t<template #icon>\n\t\t\t\t<Document />\n\t\t\t</template>\n\t\t\t{{ t('text', 'Link to file or folder') }}\n\t\t</NcActionButton>\n\t\t<NcActionInput v-if=\"isInputMode\"\n\t\t\ttype=\"text\"\n\t\t\t:value=\"href\"\n\t\t\t:data-text-action-entry=\"`${actionEntry.key}-input`\"\n\t\t\t@submit=\"linkWebsite\">\n\t\t\t<template #icon>\n\t\t\t\t<Web />\n\t\t\t</template>\n\t\t\t{{ t('text', 'Link to website') }}\n\t\t</NcActionInput>\n\t\t<NcActionButton v-else\n\t\t\t:data-text-action-entry=\"`${actionEntry.key}-website`\"\n\t\t\t@click=\"linkWebsite\">\n\t\t\t<template #icon>\n\t\t\t\t<Web />\n\t\t\t</template>\n\t\t\t{{ state.active ? t('text', 'Update link') : t('text', 'Link to website') }}\n\t\t</NcActionButton>\n\t\t<NcActionButton :data-text-action-entry=\"`${actionEntry.key}-picker`\"\n\t\t\t@click=\"linkPicker\">\n\t\t\t<template #icon>\n\t\t\t\t<Shape />\n\t\t\t</template>\n\t\t\t{{ t('text', 'Open the Smart Picker') }}\n\t\t</NcActionButton>\n\t</NcActions>\n</template>\n\n<script>\nimport { NcActions, NcActionButton, NcActionInput } from '@nextcloud/vue'\nimport { getLinkWithPicker } from '@nextcloud/vue/dist/Components/NcRichText.js'\nimport { FilePickerType, getFilePickerBuilder } from '@nextcloud/dialogs'\n\nimport { getMarkAttributes, isActive } from '@tiptap/core'\n\nimport { Document, Loading, LinkOff, Web, Shape } from '../icons.js'\nimport { BaseActionEntry } from './BaseActionEntry.js'\nimport { optimalPath } from '../../helpers/files.js'\nimport { useFileMixin } from '../Editor.provider.js'\nimport { useMenuIDMixin } from './MenuBar.provider.js'\n\nexport default {\n\tname: 'ActionInsertLink',\n\tcomponents: {\n\t\tNcActions,\n\t\tNcActionButton,\n\t\tNcActionInput,\n\t\tDocument,\n\t\tLoading,\n\t\tLinkOff,\n\t\tWeb,\n\t\tShape,\n\t},\n\textends: BaseActionEntry,\n\tmixins: [\n\t\tuseFileMixin,\n\t\tuseMenuIDMixin,\n\t],\n\tdata: () => {\n\t\treturn {\n\t\t\thref: null,\n\t\t\tisInputMode: false,\n\t\t\tstartPath: null,\n\t\t\t/** Open state of the actions menu */\n\t\t\tmenuOpen: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\tactiveClass() {\n\t\t\treturn this.state.active ? 'is-active' : ''\n\t\t},\n\t\trelativePath() {\n\t\t\treturn this.$file?.relativePath ?? '/'\n\t\t},\n\t},\n\tmethods: {\n\t\t/**\n\t\t * Open dialog and ask user which file to link to\n\t\t * Triggered by the \"link file\" button\n\t\t */\n\t\tlinkFile() {\n\t\t\tif (this.startPath === null) {\n\t\t\t\tthis.startPath = this.relativePath.split('/').slice(0, -1).join('/')\n\t\t\t}\n\n\t\t\tconst filePicker = getFilePickerBuilder(t('text', 'Select file or folder to link to'))\n\t\t\t\t.startAt(this.startPath)\n\t\t\t\t.allowDirectories(true)\n\t\t\t\t.setMultiSelect(false)\n\t\t\t\t.setType(FilePickerType.Choose)\n\t\t\t\t.build()\n\n\t\t\tfilePicker.pick()\n\t\t\t\t.then((file) => {\n\t\t\t\t\tconst client = OC.Files.getClient()\n\t\t\t\t\tclient.getFileInfo(file).then((_status, fileInfo) => {\n\t\t\t\t\t\tconst path = optimalPath(this.relativePath, `${fileInfo.path}/${fileInfo.name}`)\n\t\t\t\t\t\tconst encodedPath = path.split('/').map(encodeURIComponent).join('/') + (fileInfo.type === 'dir' ? '/' : '')\n\t\t\t\t\t\tconst href = `${encodedPath}?fileId=${fileInfo.id}`\n\t\t\t\t\t\tthis.setLink(href, fileInfo.name)\n\t\t\t\t\t\tthis.startPath = fileInfo.path + (fileInfo.type === 'dir' ? `/${fileInfo.name}/` : '')\n\t\t\t\t\t})\n\t\t\t\t\tthis.menuOpen = false\n\t\t\t\t})\n\t\t\t\t.catch(() => {\n\t\t\t\t\t// do not close menu but keep focus\n\t\t\t\t\tthis.$refs.buttonFile.$el.focus()\n\t\t\t\t})\n\t\t},\n\t\t/**\n\t\t * Allow user to enter an URL manually\n\t\t * Triggered when by the \"link url\" button\n\t\t *\n\t\t * @param {Event} event Triggering event\n\t\t */\n\t\tlinkWebsite(event) {\n\t\t\tif (event?.type === 'submit') {\n\t\t\t\tconst href = [...event.target.elements].filter(e => e?.type === 'text')[0].value\n\t\t\t\tthis.menuOpen = false\n\t\t\t\tthis.isInputMode = false\n\t\t\t\tthis.href = null\n\t\t\t\treturn this.setLink(href, href)\n\t\t\t}\n\n\t\t\tif (isActive(this.$editor.state, 'link')) {\n\t\t\t\tconst attrs = getMarkAttributes(this.$editor.state, 'link')\n\t\t\t\tthis.href = attrs.href\n\t\t\t}\n\t\t\tthis.isInputMode = true\n\t\t},\n\t\t/**\n\t\t * Save user entered URL as a link markup\n\t\t * Triggered when the user submits the ActionInput\n\t\t *\n\t\t * @param {string} url href attribute of the link\n\t\t * @param {string} text Text part of the link\n\t\t */\n\t\tsetLink(url, text) {\n\t\t\t// Heuristics for determining if we need a https:// prefix.\n\t\t\tconst noPrefixes = [\n\t\t\t\t/^[a-zA-Z]+:/, // url with protocol (\"mailTo:email@domain.tld\")\n\t\t\t\t/^\\//, // absolute path\n\t\t\t\t/\\?fileId=/, // relative link with fileId\n\t\t\t\t/^\\.\\.?\\//, // relative link starting with ./ or ../\n\t\t\t\t/^[^.]*[/$]/, // no dots before first '/' - not a domain name\n\t\t\t\t/^#/, // url fragment\n\t\t\t]\n\t\t\tif (url && !noPrefixes.find(regex => url.match(regex))) {\n\t\t\t\turl = 'https://' + url\n\t\t\t}\n\n\t\t\t// Avoid issues when parsing urls later on in markdown that might be entered in an invalid format (e.g. \"mailto: example@example.com\")\n\t\t\tconst href = url.replaceAll(' ', '%20')\n\t\t\tconst chain = this.$editor.chain()\n\t\t\t// Check if any text is selected, if not insert the lunk using the given text property\n\t\t\tif (this.$editor.view.state?.selection.empty) {\n\t\t\t\tchain.insertContent({\n\t\t\t\t\ttype: 'paragraph',\n\t\t\t\t\tcontent: [{\n\t\t\t\t\t\ttype: 'text',\n\t\t\t\t\t\tmarks: [{\n\t\t\t\t\t\t\ttype: 'link',\n\t\t\t\t\t\t\tattrs: {\n\t\t\t\t\t\t\t\thref,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}],\n\t\t\t\t\t\ttext,\n\t\t\t\t\t}],\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tchain.setLink({ href })\n\t\t\t}\n\t\t\tchain.focus().run()\n\t\t},\n\t\t/**\n\t\t * Remove link markup at current position\n\t\t * Triggered by the \"remove link\" button\n\t\t */\n\t\tremoveLink() {\n\t\t\tthis.$editor.chain().unsetLink().focus().run()\n\t\t\tthis.menuOpen = false\n\t\t},\n\t\tlinkPicker() {\n\t\t\tgetLinkWithPicker(null, true)\n\t\t\t\t.then(link => {\n\t\t\t\t\tthis.$editor\n\t\t\t\t\t\t.chain()\n\t\t\t\t\t\t.focus()\n\t\t\t\t\t\t.insertContent(link + ' ')\n\t\t\t\t\t\t.run()\n\t\t\t\t})\n\t\t\t\t.catch(error => {\n\t\t\t\t\tconsole.error('Smart picker promise rejected', error)\n\t\t\t\t})\n\t\t},\n\t},\n}\n</script>\n\n<style scoped>\n\t.action {\n\t\t/* to unify width of ActionInput and ActionButton */\n\t\tmin-width: 218px;\n\t}\n</style>\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ActionInsertLink.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ActionInsertLink.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ActionInsertLink.vue?vue&type=style&index=0&id=881e5fae&prod&scoped=true&lang=css&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ActionInsertLink.vue?vue&type=style&index=0&id=881e5fae&prod&scoped=true&lang=css&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./ActionInsertLink.vue?vue&type=template&id=881e5fae&scoped=true&\"\nimport script from \"./ActionInsertLink.vue?vue&type=script&lang=js&\"\nexport * from \"./ActionInsertLink.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ActionInsertLink.vue?vue&type=style&index=0&id=881e5fae&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"881e5fae\",\n  null\n  \n)\n\nexport default component.exports","/*\n * @copyright Copyright (c) 2019 Julius Hrtl <jus@bitgrid.net>\n *\n * @author Julius Hrtl <jus@bitgrid.net>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport {\n\tUndo,\n\tRedo,\n\tCodeTags,\n\tDanger,\n\tEmoticon,\n\tFormatBold,\n\tFormatItalic,\n\tFormatUnderline,\n\tFormatStrikethrough,\n\tFormatHeader1,\n\tFormatHeader2,\n\tFormatHeader3,\n\tFormatHeader4,\n\tFormatHeader5,\n\tFormatHeader6,\n\tFormatListNumbered,\n\tFormatListBulleted,\n\tFormatListCheckbox,\n\tFormatQuote,\n\tImages,\n\tInfo,\n\tLinkIcon,\n\tPositive,\n\tTable,\n\tWarn,\n} from '../icons.js'\nimport EmojiPickerAction from './EmojiPickerAction.vue'\nimport ActionAttachmentUpload from './ActionAttachmentUpload.vue'\nimport ActionInsertLink from './ActionInsertLink.vue'\n\nimport { MODIFIERS } from './keys.js'\n\nexport const ReadonlyEntries = [{\n\tkey: 'outline',\n\tforceLabel: true,\n\ticon: FormatListBulleted,\n\tclick: ({ $outlineActions }) => $outlineActions.toggle(),\n\tlabel: ({ $outlineState }) => {\n\t\treturn $outlineState.visible\n\t\t\t? t('text', 'Hide outline')\n\t\t\t: t('text', 'Show outline')\n\t},\n}]\n\nexport default [\n\t{\n\t\tkey: 'undo',\n\t\tlabel: t('text', 'Undo'),\n\t\tkeyChar: 'z',\n\t\tkeyModifiers: [MODIFIERS.Mod],\n\t\ticon: Undo,\n\t\taction: (command) => command.undo(),\n\t\tpriority: 6,\n\t},\n\t{\n\t\tkey: 'redo',\n\t\tlabel: t('text', 'Redo'),\n\t\tkeyChar: 'y',\n\t\tkeyModifiers: [MODIFIERS.Mod],\n\t\ticon: Redo,\n\t\taction: (command) => command.redo(),\n\t\tpriority: 12,\n\t},\n\t{\n\t\tkey: 'bold',\n\t\tlabel: t('text', 'Bold'),\n\t\tkeyChar: 'b',\n\t\tkeyModifiers: [MODIFIERS.Mod],\n\t\ticon: FormatBold,\n\t\tisActive: 'strong',\n\t\taction: (command) => {\n\t\t\treturn command.toggleBold()\n\t\t},\n\t\tpriority: 7,\n\t},\n\t{\n\t\tkey: 'italic',\n\t\tlabel: t('text', 'Italic'),\n\t\tkeyChar: 'i',\n\t\tkeyModifiers: [MODIFIERS.Mod],\n\t\ticon: FormatItalic,\n\t\tisActive: 'em',\n\t\taction: (command) => {\n\t\t\treturn command.toggleItalic()\n\t\t},\n\t\tpriority: 8,\n\t},\n\t{\n\t\tkey: 'underline',\n\t\tlabel: t('text', 'Underline'),\n\t\tkeyChar: 'u',\n\t\tkeyModifiers: [MODIFIERS.Mod],\n\t\ticon: FormatUnderline,\n\t\tisActive: 'underline',\n\t\taction: (command) => {\n\t\t\treturn command.toggleUnderline()\n\t\t},\n\t\tpriority: 15,\n\t},\n\t{\n\t\tkey: 'strikethrough',\n\t\tlabel: t('text', 'Strikethrough'),\n\t\tkeyChar: 's',\n\t\tkeyModifiers: [MODIFIERS.Mod, MODIFIERS.Shift],\n\t\ticon: FormatStrikethrough,\n\t\tisActive: 'strike',\n\t\taction: (command) => {\n\t\t\treturn command.toggleStrike()\n\t\t},\n\t\tpriority: 16,\n\t},\n\t{\n\t\tkey: 'headings',\n\t\tlabel: t('text', 'Headings'),\n\t\tkeyChar: '16',\n\t\tkeyModifiers: [MODIFIERS.Mod, MODIFIERS.Shift],\n\t\ticon: FormatHeader1,\n\t\tisActive: 'heading',\n\t\tchildren: [\n\t\t\t{\n\t\t\t\tkey: 'headings-h1',\n\t\t\t\tlabel: t('text', 'Heading 1'),\n\t\t\t\ticon: FormatHeader1,\n\t\t\t\tisActive: ['heading', { level: 1 }],\n\t\t\t\taction: (command) => {\n\t\t\t\t\treturn command.toggleHeading({ level: 1 })\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'headings-h2',\n\t\t\t\tlabel: t('text', 'Heading 2'),\n\t\t\t\ticon: FormatHeader2,\n\t\t\t\tisActive: ['heading', { level: 2 }],\n\t\t\t\taction: (command) => {\n\t\t\t\t\treturn command.toggleHeading({ level: 2 })\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'headings-h3',\n\t\t\t\tlabel: t('text', 'Heading 3'),\n\t\t\t\ticon: FormatHeader3,\n\t\t\t\tisActive: ['heading', { level: 3 }],\n\t\t\t\taction: (command) => {\n\t\t\t\t\treturn command.toggleHeading({ level: 3 })\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'headings-h4',\n\t\t\t\tlabel: t('text', 'Heading 4'),\n\t\t\t\tisActive: ['heading', { level: 4 }],\n\t\t\t\ticon: FormatHeader4,\n\t\t\t\taction: (command) => {\n\t\t\t\t\treturn command.toggleHeading({ level: 4 })\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'headings-h5',\n\t\t\t\tlabel: t('text', 'Heading 5'),\n\t\t\t\tisActive: ['heading', { level: 5 }],\n\t\t\t\ticon: FormatHeader5,\n\t\t\t\taction: (command) => {\n\t\t\t\t\treturn command.toggleHeading({ level: 5 })\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'headings-h6',\n\t\t\t\tlabel: t('text', 'Heading 6'),\n\t\t\t\tisActive: ['heading', { level: 6 }],\n\t\t\t\ticon: FormatHeader6,\n\t\t\t\taction: (command) => {\n\t\t\t\t\treturn command.toggleHeading({ level: 6 })\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'outline',\n\t\t\t\ticon: FormatListBulleted,\n\t\t\t\tclick: ({ $outlineActions }) => $outlineActions.toggle(),\n\t\t\t\tvisible: ({ $outlineState }) => {\n\t\t\t\t\treturn $outlineState.enable\n\t\t\t\t},\n\t\t\t\tlabel: ({ $outlineState }) => {\n\t\t\t\t\treturn $outlineState.visible\n\t\t\t\t\t\t? t('text', 'Hide outline')\n\t\t\t\t\t\t: t('text', 'Show outline')\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t\tpriority: 1,\n\t},\n\t{\n\t\tkey: 'unordered-list',\n\t\tlabel: t('text', 'Unordered list'),\n\t\tkeyChar: '8',\n\t\tkeyModifiers: [MODIFIERS.Mod, MODIFIERS.Shift],\n\t\tisActive: 'bulletList',\n\t\ticon: FormatListBulleted,\n\t\taction: (command) => {\n\t\t\treturn command.toggleBulletList()\n\t\t},\n\t\tpriority: 9,\n\t},\n\t{\n\t\tkey: 'ordered-list',\n\t\tlabel: t('text', 'Ordered list'),\n\t\tkeyChar: '7',\n\t\tkeyModifiers: [MODIFIERS.Mod, MODIFIERS.Shift],\n\t\tisActive: 'orderedList',\n\t\ticon: FormatListNumbered,\n\t\taction: (command) => {\n\t\t\treturn command.toggleOrderedList()\n\t\t},\n\t\tpriority: 10,\n\t},\n\t{\n\t\tkey: 'task-list',\n\t\tlabel: t('text', 'To-Do list'),\n\t\tkeyChar: '9',\n\t\tkeyModifiers: [MODIFIERS.Mod, MODIFIERS.Shift],\n\t\tisActive: 'taskList',\n\t\ticon: FormatListCheckbox,\n\t\taction: (command) => command.toggleTaskList(),\n\t\tpriority: 11,\n\t},\n\t{\n\t\tkey: 'insert-link',\n\t\tlabel: t('text', 'Insert link'),\n\t\tisActive: 'link',\n\t\ticon: LinkIcon,\n\t\tcomponent: ActionInsertLink,\n\t\tpriority: 2,\n\t},\n\t{\n\t\tkey: 'blockquote',\n\t\tlabel: t('text', 'Blockquote'),\n\t\tkeyChar: 'b',\n\t\tkeyModifiers: [MODIFIERS.Mod, MODIFIERS.Shift],\n\t\tisActive: 'blockquote',\n\t\ticon: FormatQuote,\n\t\taction: (command) => {\n\t\t\treturn command.toggleBlockquote()\n\t\t},\n\t\tpriority: 13,\n\t},\n\t{\n\t\tkey: 'callouts',\n\t\tlabel: t('text', 'Callouts'),\n\t\tvisible: false,\n\t\ticon: Info,\n\t\tisActive: 'callout',\n\t\tchildren: [\n\t\t\t{\n\t\t\t\tkey: 'callout-info',\n\t\t\t\tlabel: t('text', 'Info'),\n\t\t\t\tisActive: ['callout', { type: 'info' }],\n\t\t\t\ticon: Info,\n\t\t\t\taction: (command) => {\n\t\t\t\t\treturn command.toggleCallout({ type: 'info' })\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'callout-success',\n\t\t\t\tlabel: t('text', 'Success'),\n\t\t\t\tisActive: ['callout', { type: 'success' }],\n\t\t\t\ticon: Positive,\n\t\t\t\taction: (command) => {\n\t\t\t\t\treturn command.toggleCallout({ type: 'success' })\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'callout-warn',\n\t\t\t\tlabel: t('text', 'Warning'),\n\t\t\t\tisActive: ['callout', { type: 'warn' }],\n\t\t\t\ticon: Warn,\n\t\t\t\taction: (command) => {\n\t\t\t\t\treturn command.toggleCallout({ type: 'warn' })\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'callout-error',\n\t\t\t\tlabel: t('text', 'Danger'),\n\t\t\t\tisActive: ['callout', { type: 'error' }],\n\t\t\t\ticon: Danger,\n\t\t\t\taction: (command) => {\n\t\t\t\t\treturn command.toggleCallout({ type: 'error' })\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t\tpriority: 3,\n\t},\n\t{\n\t\tkey: 'code-block',\n\t\tlabel: t('text', 'Code block'),\n\t\tkeyChar: 'c',\n\t\tkeyModifiers: [MODIFIERS.Mod, MODIFIERS.Alt],\n\t\tisActive: 'codeBlock',\n\t\ticon: CodeTags,\n\t\taction: (command) => {\n\t\t\treturn command.toggleCodeBlock()\n\t\t},\n\t\tpriority: 14,\n\t},\n\t{\n\t\tkey: 'table',\n\t\tlabel: t('text', 'Table'),\n\t\tisActive: 'table',\n\t\ticon: Table,\n\t\taction: (command) => {\n\t\t\treturn command.insertTable()\n\t\t},\n\t\tpriority: 17,\n\t},\n\t{\n\t\tkey: 'emoji-picker',\n\t\tlabel: t('text', 'Insert emoji'),\n\t\ticon: Emoticon,\n\t\tcomponent: EmojiPickerAction,\n\t\taction: (command, emojiObject = {}) => {\n\t\t\treturn command.emoji(emojiObject)\n\t\t},\n\t\tpriority: 5,\n\t},\n\t{\n\t\tkey: 'insert-attachment',\n\t\tlabel: t('text', 'Insert attachment'),\n\t\ticon: Images,\n\t\tcomponent: ActionAttachmentUpload,\n\t\tpriority: 4,\n\t},\n]\n","const isMac = (navigator.userAgent.includes('Mac'))\n\nconst MODIFIERS = {\n\tMod: isMac ? 'Meta' : 'Control',\n\tAlt: 'Alt', // Option key, on Apple computers.\n\tControl: 'Control',\n\tShift: 'Shift',\n\n\t// unused\n\t// AltGraph: 'AltGraph',\n\t// Meta: 'Meta', // Command key on Apple computers\n}\n\nconst TRANSLATIONS = {\n\t[MODIFIERS.Mod]: isMac ? t('text', 'Command') : t('text', 'Control'),\n\t[MODIFIERS.Control]: t('text', 'Ctrl'),\n\t[MODIFIERS.Alt]: t('text', isMac ? 'Option' : 'Alt'),\n\t[MODIFIERS.Shift]: t('text', 'Shift'),\n}\n\nexport {\n\tMODIFIERS,\n\tTRANSLATIONS,\n}\n","/*\n * @copyright Copyright (c) 2022 Vinicius Reis <vinicius@nextcloud.com>\n *\n * @author Vinicius Reis <vinicius@nextcloud.com>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport {\n\tTRANSLATIONS,\n\tMODIFIERS,\n} from './keys.js'\n\nconst getEntryClasses = (actionEntry, isActive) => {\n\treturn {\n\t\t'is-active': isActive,\n\t\t[`action-menu-${actionEntry.key}`]: true,\n\t}\n}\n\nconst keysString = (keyChar, modifiers = []) => {\n\treturn modifiers\n\t\t.map(mod => TRANSLATIONS[mod])\n\t\t.concat(keyChar.toUpperCase())\n\t\t.join('+')\n}\n\nconst getKeyshortcuts = ({ keyChar, keyModifiers = [] }) => {\n\treturn keyModifiers\n\t\t.map(mod => MODIFIERS[mod])\n\t\t.concat(keyChar)\n\t\t.join('+')\n}\n\nconst getKeys = (isMobile, { keyChar, keyModifiers }) => {\n\treturn (!isMobile && keyChar)\n\t\t? `(${keysString(keyChar, keyModifiers)})`\n\t\t: ''\n}\n\nconst isDisabled = (actionEntry, $editor) => {\n\treturn actionEntry.action && !actionEntry.action($editor.can())\n}\n\nconst getIsActive = ({ isActive }, $editor) => {\n\tif (!isActive) {\n\t\treturn false\n\t}\n\n\tconst args = Array.isArray(isActive)\n\t\t? isActive\n\t\t: [isActive]\n\n\treturn $editor.isActive(...args)\n}\n\nconst getActionState = (actionEntry, $editor) => {\n\tconst active = getIsActive(actionEntry, $editor)\n\n\treturn {\n\t\tdisabled: isDisabled(actionEntry, $editor),\n\t\tclass: getEntryClasses(actionEntry, active),\n\t\tactive,\n\t\t'aria-selected': active,\n\t}\n}\n\nexport {\n\tisDisabled,\n\tgetIsActive,\n\tgetKeys,\n\tgetKeyshortcuts,\n\tgetEntryClasses,\n\tgetActionState,\n}\n","/*\n* @copyright Copyright (c) 2022 Julius Hrtl <jus@bitgrid.net>\n*\n* @author Julius Hrtl <jus@bitgrid.net>\n*\n* @license GNU AGPL version 3 or any later version\n*\n* This program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program. If not, see <http://www.gnu.org/licenses/>.\n*/\n\nimport tippy from 'tippy.js'\nimport { VueRenderer } from '@tiptap/vue-2'\n\nexport default ({\n\tlistComponent,\n\titems = () => {},\n\tcommand = ({ editor, range, props }) => {},\n}) => ({\n\titems,\n\tcommand,\n\trender: () => {\n\t\tlet component\n\t\tlet popup\n\n\t\treturn {\n\t\t\tonStart: props => {\n\t\t\t\tcomponent = new VueRenderer(listComponent, {\n\t\t\t\t\tparent: this,\n\t\t\t\t\tpropsData: props,\n\t\t\t\t})\n\n\t\t\t\tif (!props.clientRect) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tpopup = tippy('body', {\n\t\t\t\t\tgetReferenceClientRect: props.clientRect,\n\t\t\t\t\tappendTo: () => document.body,\n\t\t\t\t\tcontent: component.element,\n\t\t\t\t\tshowOnCreate: true,\n\t\t\t\t\tinteractive: true,\n\t\t\t\t\ttrigger: 'manual',\n\t\t\t\t\tplacement: 'bottom-start',\n\t\t\t\t})\n\n\t\t\t\tcomponent.ref.$on('select', () => {\n\t\t\t\t\tpopup.length > 0 && popup[0].hide()\n\t\t\t\t})\n\t\t\t},\n\n\t\t\tonUpdate(props) {\n\t\t\t\tcomponent.updateProps(props)\n\n\t\t\t\tif (!props.clientRect || !popup) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tpopup[0].setProps({\n\t\t\t\t\tgetReferenceClientRect: props.clientRect,\n\t\t\t\t})\n\t\t\t},\n\n\t\t\tonKeyDown(props) {\n\t\t\t\tif (!popup) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tif (props.event.key === 'Escape') {\n\t\t\t\t\tpopup[0].hide()\n\t\t\t\t\tpopup[0].destroy()\n\t\t\t\t\tcomponent.destroy()\n\t\t\t\t\tpopup = null\n\n\t\t\t\t\treturn true\n\t\t\t\t}\n\n\t\t\t\treturn component.ref?.onKeyDown?.(props)\n\t\t\t},\n\n\t\t\tonExit() {\n\t\t\t\tif (!popup) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tpopup[0].destroy()\n\t\t\t\tcomponent.destroy()\n\t\t\t},\n\t\t}\n\t},\n})\n","/* eslint-disable camelcase */\n/*\n * @copyright Copyright (c) 2022 Vinicius Reis <vinicius@nextcloud.com>\n *\n * @author Vinicius Reis <vinicius@nextcloud.com>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport MDI_AlphabeticalVariant from 'vue-material-design-icons/AlphabeticalVariant.vue'\nimport MDI_Close from 'vue-material-design-icons/Close.vue'\nimport MDI_Check from 'vue-material-design-icons/Check.vue'\nimport MDI_CircleMedium from 'vue-material-design-icons/CircleMedium.vue'\nimport MDI_CodeTags from 'vue-material-design-icons/CodeTags.vue'\nimport MDI_Danger from 'vue-material-design-icons/AlertDecagram.vue'\nimport MDI_Delete from 'vue-material-design-icons/Delete.vue'\nimport MDI_Document from 'vue-material-design-icons/FileDocument.vue'\nimport MDI_DotsHorizontal from 'vue-material-design-icons/DotsHorizontal.vue'\nimport MDI_Emoticon from 'vue-material-design-icons/EmoticonOutline.vue'\nimport MDI_Folder from 'vue-material-design-icons/Folder.vue'\nimport MDI_FormatBold from 'vue-material-design-icons/FormatBold.vue'\nimport MDI_AlignHorizontalCenter from 'vue-material-design-icons/AlignHorizontalCenter.vue'\nimport MDI_AlignHorizontalLeft from 'vue-material-design-icons/AlignHorizontalLeft.vue'\nimport MDI_AlignHorizontalRight from 'vue-material-design-icons/AlignHorizontalRight.vue'\nimport MDI_FormatHeader1 from 'vue-material-design-icons/FormatHeader1.vue'\nimport MDI_FormatHeader2 from 'vue-material-design-icons/FormatHeader2.vue'\nimport MDI_FormatHeader3 from 'vue-material-design-icons/FormatHeader3.vue'\nimport MDI_FormatHeader4 from 'vue-material-design-icons/FormatHeader4.vue'\nimport MDI_FormatHeader5 from 'vue-material-design-icons/FormatHeader5.vue'\nimport MDI_FormatHeader6 from 'vue-material-design-icons/FormatHeader6.vue'\nimport MDI_FormatItalic from 'vue-material-design-icons/FormatItalic.vue'\nimport MDI_FormatListBulleted from 'vue-material-design-icons/FormatListBulleted.vue'\nimport MDI_FormatListCheckbox from 'vue-material-design-icons/FormatListCheckbox.vue'\nimport MDI_FormatListNumbered from 'vue-material-design-icons/FormatListNumbered.vue'\nimport MDI_FormatQuote from 'vue-material-design-icons/FormatQuoteClose.vue'\nimport MDI_FormatStrikethrough from 'vue-material-design-icons/FormatStrikethrough.vue'\nimport MDI_FormatUnderline from 'vue-material-design-icons/FormatUnderline.vue'\nimport MDI_Help from 'vue-material-design-icons/HelpCircle.vue'\nimport MDI_Image from 'vue-material-design-icons/ImageOutline.vue'\nimport MDI_Images from 'vue-material-design-icons/ImageMultipleOutline.vue'\nimport MDI_Info from 'vue-material-design-icons/Information.vue'\nimport MDI_Link from 'vue-material-design-icons/Link.vue'\nimport MDI_LinkOff from 'vue-material-design-icons/LinkOff.vue'\nimport MDI_LinkVariantPlus from 'vue-material-design-icons/LinkVariantPlus.vue'\nimport MDI_Loading from 'vue-material-design-icons/Loading.vue'\nimport MDI_Lock from 'vue-material-design-icons/Lock.vue'\nimport MDI_Positive from 'vue-material-design-icons/CheckboxMarkedCircle.vue'\nimport MDI_Redo from 'vue-material-design-icons/ArrowURightTop.vue'\nimport MDI_Shape from 'vue-material-design-icons/Shape.vue'\nimport MDI_Table from 'vue-material-design-icons/Table.vue'\nimport MDI_TableAddColumnAfter from 'vue-material-design-icons/TableColumnPlusAfter.vue'\nimport MDI_TableAddColumnBefore from 'vue-material-design-icons/TableColumnPlusBefore.vue'\nimport MDI_TableAddRowAfter from 'vue-material-design-icons/TableRowPlusAfter.vue'\nimport MDI_TableAddRowBefore from 'vue-material-design-icons/TableRowPlusBefore.vue'\nimport MDI_TableSettings from 'vue-material-design-icons/TableCog.vue'\nimport MDI_TrashCan from 'vue-material-design-icons/TrashCan.vue'\nimport MDI_Undo from 'vue-material-design-icons/ArrowULeftTop.vue'\nimport MDI_Upload from 'vue-material-design-icons/Upload.vue'\nimport MDI_Warn from 'vue-material-design-icons/Alert.vue'\nimport MDI_Web from 'vue-material-design-icons/Web.vue'\nimport MDI_TranslateVariant from 'vue-material-design-icons/TranslateVariant.vue'\n\nconst DEFAULT_ICON_SIZE = 20\n\nconst makeIcon = (original) => ({\n\tfunctional: true,\n\trender(h, { data, props }) {\n\t\treturn h(original, {\n\t\t\tdata,\n\t\t\tkey: data.key,\n\t\t\tstaticClass: data.staticClass,\n\t\t\tprops: { size: DEFAULT_ICON_SIZE, ...props },\n\t\t})\n\t},\n})\n\nexport const Loading = {\n\tfunctional: true,\n\trender(h, { data, props }) {\n\t\treturn h(MDI_Loading, {\n\t\t\tdata,\n\t\t\tstaticClass: 'animation-rotate',\n\t\t\tprops: { size: DEFAULT_ICON_SIZE, ...props },\n\t\t})\n\t},\n}\n\nexport const AlphabeticalVariant = makeIcon(MDI_AlphabeticalVariant)\nexport const AlignHorizontalCenter = makeIcon(MDI_AlignHorizontalCenter)\nexport const AlignHorizontalLeft = makeIcon(MDI_AlignHorizontalLeft)\nexport const AlignHorizontalRight = makeIcon(MDI_AlignHorizontalRight)\nexport const Close = makeIcon(MDI_Close)\nexport const Check = makeIcon(MDI_Check)\nexport const CodeTags = makeIcon(MDI_CodeTags)\nexport const CircleMedium = makeIcon(MDI_CircleMedium)\nexport const Danger = makeIcon(MDI_Danger)\nexport const Delete = makeIcon(MDI_Delete)\nexport const Document = makeIcon(MDI_Document)\nexport const DotsHorizontal = makeIcon(MDI_DotsHorizontal)\nexport const Emoticon = makeIcon(MDI_Emoticon)\nexport const Folder = makeIcon(MDI_Folder)\nexport const FormatBold = makeIcon(MDI_FormatBold)\nexport const FormatHeader1 = makeIcon(MDI_FormatHeader1)\nexport const FormatHeader2 = makeIcon(MDI_FormatHeader2)\nexport const FormatHeader3 = makeIcon(MDI_FormatHeader3)\nexport const FormatHeader4 = makeIcon(MDI_FormatHeader4)\nexport const FormatHeader5 = makeIcon(MDI_FormatHeader5)\nexport const FormatHeader6 = makeIcon(MDI_FormatHeader6)\nexport const FormatItalic = makeIcon(MDI_FormatItalic)\nexport const FormatListBulleted = makeIcon(MDI_FormatListBulleted)\nexport const FormatListCheckbox = makeIcon(MDI_FormatListCheckbox)\nexport const FormatListNumbered = makeIcon(MDI_FormatListNumbered)\nexport const FormatQuote = makeIcon(MDI_FormatQuote)\nexport const FormatStrikethrough = makeIcon(MDI_FormatStrikethrough)\nexport const FormatUnderline = makeIcon(MDI_FormatUnderline)\nexport const Help = makeIcon(MDI_Help)\nexport const Image = makeIcon(MDI_Image)\nexport const Images = makeIcon(MDI_Images)\nexport const Info = makeIcon(MDI_Info)\nexport const LinkIcon = makeIcon(MDI_Link)\nexport const LinkOff = makeIcon(MDI_LinkOff)\nexport const LinkVariantPlus = makeIcon(MDI_LinkVariantPlus)\nexport const Lock = makeIcon(MDI_Lock)\nexport const Positive = makeIcon(MDI_Positive)\nexport const Redo = makeIcon(MDI_Redo)\nexport const Shape = makeIcon(MDI_Shape)\nexport const Table = makeIcon(MDI_Table)\nexport const TableAddColumnAfter = makeIcon(MDI_TableAddColumnAfter)\nexport const TableAddColumnBefore = makeIcon(MDI_TableAddColumnBefore)\nexport const TableAddRowAfter = makeIcon(MDI_TableAddRowAfter)\nexport const TableAddRowBefore = makeIcon(MDI_TableAddRowBefore)\nexport const TableSettings = makeIcon(MDI_TableSettings)\nexport const TrashCan = makeIcon(MDI_TrashCan)\nexport const TranslateVariant = makeIcon(MDI_TranslateVariant)\nexport const Undo = makeIcon(MDI_Undo)\nexport const Upload = makeIcon(MDI_Upload)\nexport const Warn = makeIcon(MDI_Warn)\nexport const Web = makeIcon(MDI_Web)\n","/**\n * @copyright Copyright (c) 2023 Max <max@nextcloud.com>\n *\n * @author Max <max@nextcloud.com>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\n/**\n *\n * Prepare pasted html for insertion into tiptap\n *\n * We render paragraphs with `white-space: pre-wrap`\n * so newlines are visible and preserved.\n *\n * Pasted html may contain newlines inside tags with a different `white-space` style.\n * They are not visible in the source.\n * Strip them so the pasted result wraps nicely.\n *\n * At the same time we need to preserve whitespace inside `<pre>` tags\n * and the like.\n *\n * @param {string} html Pasted html content\n */\nexport default function(html) {\n\tconst parser = new DOMParser()\n\tconst doc = parser.parseFromString(html, 'text/html')\n\tforAllTextNodes(doc, textNode => {\n\t\tif (collapseWhiteSpace(textNode)) {\n\t\t\ttextNode.textContent = textNode.textContent.replaceAll('\\n', ' ')\n\t\t}\n\t})\n\treturn doc.body.innerHTML\n}\n\n/**\n *\n * Run function for all text nodes in the document.\n *\n * @param {Document} doc Html document to process\n * @param {Function} fn Function to run\n *\n */\nfunction forAllTextNodes(doc, fn) {\n\tconst nodeIterator = doc.createNodeIterator(\n\t\tdoc.body,\n\t\tNodeFilter.SHOW_TEXT,\n\t)\n\tlet currentNode = nodeIterator.nextNode()\n\twhile (currentNode) {\n\t\tfn(currentNode)\n\t\tcurrentNode = nodeIterator.nextNode()\n\t}\n}\n\n/**\n *\n * Check if newlines need to be collapsed based on the applied style\n *\n * @param {Text} textNode Text to check the style for\n *\n */\nfunction collapseWhiteSpace(textNode) {\n\t// Values of `white-space` css that will collapse newline whitespace\n\t// See https://developer.mozilla.org/en-US/docs/Web/CSS/white-space#values\n\tconst COLLAPSING_WHITE_SPACE_VALUES = ['normal', 'nowrap']\n\tlet ancestor = textNode.parentElement\n\twhile (ancestor) {\n\t\t// Chrome does not support getComputedStyle on detached dom\n\t\t// https://lists.w3.org/Archives/Public/www-style/2018May/0031.html\n\t\t// Therefore the following logic only works on Firefox\n\t\tconst style = getComputedStyle(ancestor)\n\t\tconst whiteSpace = style?.getPropertyValue('white-space')\n\t\tif (whiteSpace) {\n\t\t\t// Returns false if white-space has a value not listed in COLLAPSING_WHITE_SPACE_VALUES\n\t\t\treturn COLLAPSING_WHITE_SPACE_VALUES.includes(whiteSpace)\n\t\t}\n\n\t\t// Check for `tagName` as fallback on Chrome\n\t\tif (ancestor.tagName === 'PRE') {\n\t\t\treturn false\n\t\t}\n\t\tancestor = ancestor.parentElement\n\t}\n\treturn true\n}\n","/**\n * @copyright Copyright (c) 2022 Max <max@nextcloud.com>\n *\n * @author Max <max@nextcloud.com>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\n/*\n * Tiptap extension to ease customize the serialization to markdown\n *\n * Most markdown serialization can be handled by `prosemirror-markdown`.\n * In order to make it easier to add custom markdown rendering\n * this extension will extend the prosemirror schema for nodes and marks\n * with a `toMarkdown` specification if that is defined in a tiptap extension.\n *\n * For nodes `toMarkown` should be function\n * that take a serializer state and such a node, and serializes the node.\n *\n * For marks `toMarkdown` is an object with open and close properties,\n * which hold the strings that should appear before and after.\n *\n * For more details see\n * https://github.com/ProseMirror/prosemirror-markdown#class-markdownserializer\n */\n\nimport { Extension, getExtensionField } from '@tiptap/core'\nimport { Plugin, PluginKey } from '@tiptap/pm/state'\nimport { MarkdownSerializer, defaultMarkdownSerializer } from '@tiptap/pm/markdown'\nimport { DOMParser } from '@tiptap/pm/model'\nimport markdownit from '../markdownit/index.js'\nimport transformPastedHTML from './transformPastedHTML.js'\n\nconst Markdown = Extension.create({\n\n\tname: 'markdown',\n\n\textendMarkSchema(extension) {\n\t\tconst context = {\n\t\t\tname: extension.name,\n\t\t\toptions: extension.options,\n\t\t\tstorage: extension.storage,\n\t\t}\n\t\treturn {\n\t\t\ttoMarkdown: getExtensionField(extension, 'toMarkdown', context),\n\t\t}\n\t},\n\n\textendNodeSchema(extension) {\n\t\tconst context = {\n\t\t\tname: extension.name,\n\t\t\toptions: extension.options,\n\t\t\tstorage: extension.storage,\n\t\t}\n\t\treturn {\n\t\t\ttoMarkdown: getExtensionField(extension, 'toMarkdown', context),\n\t\t}\n\t},\n\n\taddProseMirrorPlugins() {\n\t\tlet shiftKey = false\n\n\t\treturn [\n\t\t\t// Parse markdown unless Mod+Shift+V is pressed for text clipboard content\n\t\t\tnew Plugin({\n\t\t\t\tkey: new PluginKey('pasteEventHandler'),\n\t\t\t\tprops: {\n\t\t\t\t\thandleDOMEvents: {\n\t\t\t\t\t\tmouseup(_, event) {\n\t\t\t\t\t\t\tshiftKey = event.shiftKey\n\t\t\t\t\t\t\treturn false\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\thandleKeyDown(_, event) {\n\t\t\t\t\t\tshiftKey = event.shiftKey\n\t\t\t\t\t\treturn false\n\t\t\t\t\t},\n\t\t\t\t\tclipboardTextParser(str, $context, _, view) {\n\t\t\t\t\t\tconst parser = DOMParser.fromSchema(view.state.schema)\n\t\t\t\t\t\tconst doc = document.cloneNode(false)\n\t\t\t\t\t\tconst dom = doc.createElement('div')\n\t\t\t\t\t\tif (shiftKey) {\n\t\t\t\t\t\t\t// Treat double newlines as paragraph breaks when pasting as plaintext\n\t\t\t\t\t\t\tfor (const part of str.split('\\n\\n')) {\n\t\t\t\t\t\t\t\tconst para = doc.createElement('p')\n\t\t\t\t\t\t\t\t// Treat single newlines as linebreaks\n\t\t\t\t\t\t\t\tpara.innerText = part\n\t\t\t\t\t\t\t\tdom.append(para)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdom.innerHTML = markdownit.render(str)\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn parser.parseSlice(dom, { preserveWhitespace: true, context: $context })\n\t\t\t\t\t},\n\t\t\t\t\ttransformPastedHTML,\n\t\t\t\t},\n\t\t\t}),\n\t\t]\n\t},\n})\n\nconst createMarkdownSerializer = ({ nodes, marks }) => {\n\tconst defaultNodes = convertNames(defaultMarkdownSerializer.nodes)\n\tconst defaultMarks = convertNames(defaultMarkdownSerializer.marks)\n\treturn {\n\t\tserializer: new MarkdownSerializer(\n\t\t\t{ ...defaultNodes, ...extractToMarkdown(nodes) },\n\t\t\t{ ...defaultMarks, ...extractToMarkdown(marks) },\n\t\t),\n\t\tserialize(content, options) {\n\t\t\treturn this.serializer.serialize(content, { ...options, tightLists: true })\n\t\t},\n\t}\n}\n\nconst extractToMarkdown = (nodesOrMarks) => {\n\treturn Object\n\t\t.entries(nodesOrMarks)\n\t\t.map(([name, nodeOrMark]) => [name, nodeOrMark.spec.toMarkdown])\n\t\t.filter(([, toMarkdown]) => toMarkdown)\n\t\t.reduce((items, [name, toMarkdown]) => ({\n\t\t\t...items,\n\t\t\t[name]: toMarkdown,\n\t\t}), {})\n}\n\nconst convertNames = (object) => {\n\tconst convert = (name) => {\n\t\treturn name.replace(/_(\\w)/g, (_m, letter) => letter.toUpperCase())\n\t}\n\treturn Object.fromEntries(\n\t\tObject.entries(object)\n\t\t\t.map(([name, value]) => [convert(name), value]),\n\t)\n}\n\nexport { createMarkdownSerializer }\nexport default Markdown\n","import { CollaborationCursor as TiptapCollaborationCursor } from '@tiptap/extension-collaboration-cursor'\n\n/**\n * Show cursor for client ID\n * Wait 50ms for cases where the cursor gets re-rendered\n *\n * @param {number} clientId The Yjs client ID\n */\nfunction showCursorLabel(clientId) {\n\tsetTimeout(() => {\n\t\tconst el = document.getElementById(`collaboration-cursor__label__${clientId}`)\n\t\tif (!el) {\n\t\t\treturn\n\t\t}\n\n\t\tel.classList.add('collaboration-cursor__label__active')\n\t\tsetTimeout(() => {\n\t\t\tel?.classList.remove('collaboration-cursor__label__active')\n\t\t}, 50)\n\t}, 50)\n}\n\n/**\n * Unix timestamp in seconds.\n */\nfunction getTimestamp() {\n\treturn Math.floor(Date.now() / 1000)\n}\n\nconst CollaborationCursor = TiptapCollaborationCursor.extend({\n\taddOptions() {\n\t\treturn {\n\t\t\tprovider: null,\n\t\t\tuser: {\n\t\t\t\tname: null,\n\t\t\t\tclientId: null,\n\t\t\t\tcolor: null,\n\t\t\t\tlastUpdate: getTimestamp(),\n\t\t\t},\n\t\t\trender: user => {\n\t\t\t\tconst cursor = document.createElement('span')\n\n\t\t\t\tcursor.classList.add('collaboration-cursor__caret')\n\t\t\t\tcursor.setAttribute('style', `border-color: ${user.color}`)\n\n\t\t\t\tconst label = document.createElement('div')\n\n\t\t\t\tlabel.classList.add('collaboration-cursor__label')\n\t\t\t\tlabel.id = `collaboration-cursor__label__${user.clientId}`\n\t\t\t\tlabel.setAttribute('style', `background-color: ${user.color}`)\n\t\t\t\tlabel.insertBefore(document.createTextNode(user.name), null)\n\t\t\t\tcursor.insertBefore(label, null)\n\n\t\t\t\treturn cursor\n\t\t\t},\n\t\t}\n\t},\n\n\tonCreate() {\n\t\tthis.options.provider.awareness.on('change', ({ added, removed, updated }, origin) => {\n\t\t\tif (origin !== 'local') {\n\t\t\t\tfor (const clientId of [...added, ...updated]) {\n\t\t\t\t\tif (clientId !== this.options.user.clientId) {\n\t\t\t\t\t\tshowCursorLabel(clientId)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t},\n\n\t// Flag own cursor as active on undoable changes to the document state\n\tonTransaction({ transaction }) {\n\t\tconst { updated, meta } = transaction\n\t\tif (updated && (meta.addToHistory ?? true) && !meta.pointer) {\n\t\t\tthis.options.user.lastUpdate = getTimestamp()\n\t\t\tthis.options.provider.awareness.setLocalStateField('user', this.options.user)\n\t\t}\n\t},\n})\n\nexport default CollaborationCursor\n","/*\n * @copyright Copyright (c) 2021 Jonas <jonas@freesources.org>\n *\n * @author Jonas <jonas@freesources.org>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport { Node } from '@tiptap/core'\nimport { PluginKey } from '@tiptap/pm/state'\n// eslint-disable-next-line import/no-named-as-default\nimport Suggestion from '@tiptap/suggestion'\n\nexport const EmojiPluginKey = new PluginKey('emoji')\n\nconst Emoji = Node.create({\n\tname: 'emoji',\n\n\taddOptions() {\n\t\treturn {\n\t\t\tHTMLAttributes: {},\n\t\t\tsuggestion: {\n\t\t\t\tchar: ':',\n\t\t\t\tallowedPrefixes: [' '],\n\t\t\t\tpluginKey: EmojiPluginKey,\n\t\t\t},\n\t\t}\n\t},\n\n\tcontent: 'text*',\n\n\taddCommands() {\n\t\treturn {\n\t\t\temoji: (emojiObject) => ({ commands }) => {\n\t\t\t\treturn commands.insertContent(emojiObject.native + ' ')\n\t\t\t},\n\t\t}\n\t},\n\n\taddProseMirrorPlugins() {\n\t\treturn [\n\t\t\tSuggestion({\n\t\t\t\teditor: this.editor,\n\t\t\t\t...this.options.suggestion,\n\t\t\t}),\n\t\t]\n\t},\n})\n\nexport default Emoji\n","/*\n * @copyright Copyright (c) 2019 Julius Hrtl <jus@bitgrid.net>\n *\n * @author Julius Hrtl <jus@bitgrid.net>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport { Extension } from '@tiptap/core'\nimport { Plugin } from '@tiptap/pm/state'\n\nconst Keymap = Extension.create({\n\n\tname: 'customkeymap',\n\n\taddKeyboardShortcuts() {\n\t\treturn this.options\n\t},\n\n\taddProseMirrorPlugins() {\n\t\treturn [\n\t\t\tnew Plugin({\n\t\t\t\tprops: {\n\t\t\t\t\thandleKeyDown(view, event) {\n\t\t\t\t\t\tconst key = event.key || event.keyCode\n\t\t\t\t\t\tif ((event.ctrlKey || event.metaKey) && !event.shiftKey && (key === 'f' || key === 70)) {\n\t\t\t\t\t\t\t// We need to stop propagation and dispatch the event on the window\n\t\t\t\t\t\t\t// in order to force triggering the browser native search in the text editor\n\t\t\t\t\t\t\tevent.stopPropagation()\n\t\t\t\t\t\t\twindow.dispatchEvent(event)\n\t\t\t\t\t\t\treturn true\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (event.key === 'Delete' && event.ctrlKey === true) {\n\t\t\t\t\t\t\t// Prevent deleting the file, by core Viewer.vue\n\t\t\t\t\t\t\tevent.stopPropagation()\n\t\t\t\t\t\t\twindow.dispatchEvent(event)\n\t\t\t\t\t\t\treturn true\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t}),\n\t\t]\n\t},\n\n})\n\nexport default Keymap\n","/*\n * @copyright Copyright (c) 2020 Julius Hrtl <jus@bitgrid.net>\n *\n * @author Julius Hrtl <jus@bitgrid.net>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nexport class Span {\n\n\tconstructor(from, to, author) {\n\t\tthis.from = from\n\t\tthis.to = to\n\t\tthis.author = author\n\t}\n\n}\n","/*\n * @copyright Copyright (c) 2021 Julius Hrtl <jus@bitgrid.net>\n *\n * @author Julius Hrtl <jus@bitgrid.net>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport { Span } from './models.js'\n\n/*\n * This code is heavily inspired by the change tracking example of prosemirror\n * https://github.com/ProseMirror/website/blob/master/example/track/index.js\n */\n\n/**\n * @param {Array} map List of document ranges and corresponding authors\n * @param {object} transform ProseMirror transform object\n * @param {Array} clientIDs List of client IDs\n */\nfunction updateBlameMap(map, transform, clientIDs) {\n\tconst result = []\n\tconst mapping = transform.mapping\n\tfor (let i = 0; i < map.length; i++) {\n\t\tconst span = map[i]\n\t\tconst from = mapping.map(span.from, 1)\n\t\tconst to = mapping.map(span.to, -1)\n\t\tif (from < to) result.push(new Span(from, to, span.author))\n\t}\n\n\tfor (let i = 0; i < mapping.maps.length; i++) {\n\t\tconst map = mapping.maps[i]; const after = mapping.slice(i + 1)\n\t\tmap.forEach((_s, _e, start, end) => {\n\t\t\tinsertIntoBlameMap(result, after.map(start, 1), after.map(end, -1), clientIDs[i])\n\t\t})\n\t}\n\n\treturn result\n}\n\n/**\n * @param {Array} map List of document ranges and corresponding authors\n * @param {number} from The lower bound of the selection's main range\n * @param {number} to The upper bound of the selection's main range\n * @param {number} author ClientID of the author\n */\nfunction insertIntoBlameMap(map, from, to, author) {\n\tif (from >= to) {\n\t\treturn\n\t}\n\tlet pos = 0\n\tlet next\n\tfor (; pos < map.length; pos++) {\n\t\tnext = map[pos]\n\t\tif (next.author === author) {\n\t\t\tif (next.to >= from) break\n\t\t} else if (next.to > from) { // Different author, not before\n\t\t\tif (next.from < from) { // Sticks out to the left (loop below will handle right side)\n\t\t\t\tconst left = new Span(next.from, from, next.author)\n\t\t\t\tif (next.to > to) map.splice(pos++, 0, left)\n\t\t\t\telse map[pos++] = left\n\t\t\t}\n\t\t\tbreak\n\t\t}\n\t}\n\n\t// eslint-ignore\n\twhile ((next = map[pos])) {\n\t\tif (next.author === author) {\n\t\t\tif (next.from > to) break\n\t\t\tfrom = Math.min(from, next.from)\n\t\t\tto = Math.max(to, next.to)\n\t\t\tmap.splice(pos, 1)\n\t\t} else {\n\t\t\tif (next.from >= to) break\n\t\t\tif (next.to > to) {\n\t\t\t\tmap[pos] = new Span(to, next.to, next.author)\n\t\t\t\tbreak\n\t\t\t} else {\n\t\t\t\tmap.splice(pos, 1)\n\t\t\t}\n\t\t}\n\t}\n\n\tmap.splice(pos, 0, new Span(from, to, author))\n}\n\nexport default class TrackState {\n\n\tconstructor(blameMap) {\n\t\t// The blame map is a data structure that lists a sequence of\n\t\t// document ranges, along with the author that inserted them. This\n\t\t// can be used to, for example, highlight the part of the document\n\t\t// that was inserted by a author.\n\t\tthis.blameMap = blameMap\n\t}\n\n\t// Apply a transform to this state\n\tapplyTransform(transform) {\n\t\tconst clientID = transform.getMeta('clientID') ?? transform.steps.map(item => 'self')\n\t\tconst newBlame = updateBlameMap(this.blameMap, transform, clientID)\n\t\t// Create a new statesince these are part of the editor state, a\n\t\t// persistent data structure, they must not be mutated.\n\t\treturn new TrackState(newBlame)\n\t}\n\n}\n","/*\n * @copyright Copyright (c) 2020 Julius Hrtl <jus@bitgrid.net>\n *\n * @author Julius Hrtl <jus@bitgrid.net>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport { Extension } from '@tiptap/core'\nimport { Plugin } from '@tiptap/pm/state'\nimport { Decoration, DecorationSet } from '@tiptap/pm/view'\nimport TrackState from './tracking/TrackState.js'\nimport { Span } from './tracking/models.js'\n\nconst UserColor = Extension.create({\n\n\tname: 'users',\n\n\taddOptions() {\n\t\treturn {\n\t\t\tclientID: 0,\n\t\t\tcolor: (clientID) => {\n\t\t\t\treturn '#' + Math.floor((Math.abs(Math.sin(clientID) * 16777215)) % 16777215).toString(16) + 'aa'\n\t\t\t},\n\t\t\tname: (clientID) => {\n\t\t\t\treturn 'Unknown user ' + clientID\n\t\t\t},\n\t\t}\n\t},\n\n\taddProseMirrorPlugins() {\n\t\tlet viewReference = null\n\t\treturn [\n\t\t\tnew Plugin({\n\t\t\t\tclientID: this.options.clientID,\n\t\t\t\tcolor: this.options.color,\n\t\t\t\tname: this.options.name,\n\t\t\t\tview: (editorView) => {\n\t\t\t\t\tviewReference = editorView\n\t\t\t\t\treturn {}\n\t\t\t\t},\n\t\t\t\tstate: {\n\t\t\t\t\tinit(_, instance) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttracked: new TrackState([new Span(0, instance.doc.content.size, null)], [], [], []),\n\t\t\t\t\t\t\tdeco: DecorationSet.empty,\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tapply(tr, instance, oldState, state) {\n\t\t\t\t\t\tlet { tracked, decos } = instance\n\t\t\t\t\t\tlet tState = this.getState(oldState).tracked\n\t\t\t\t\t\tif (tr.docChanged) {\n\t\t\t\t\t\t\tif (!tr.getMeta('clientID')) {\n\t\t\t\t\t\t\t\t// we have an undefined client id for own transactions\n\t\t\t\t\t\t\t\ttr.setMeta('clientID', tr.steps.map(i => this.spec.clientID))\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// Don't apply transaction when in composition (Github issue #2871)\n\t\t\t\t\t\t\tif (!viewReference.composing) {\n\t\t\t\t\t\t\t\ttracked = tracked.applyTransform(tr)\n\t\t\t\t\t\t\t\ttState = tracked\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdecos = tState.blameMap\n\t\t\t\t\t\t\t.map(span => {\n\t\t\t\t\t\t\t\tconst clientID = span.author\n\t\t\t\t\t\t\t\treturn Decoration.inline(span.from, span.to, {\n\t\t\t\t\t\t\t\t\tclass: 'author-annotation',\n\t\t\t\t\t\t\t\t\tstyle: 'background-color: ' + this.spec.color(clientID) + '66;',\n\t\t\t\t\t\t\t\t\ttitle: this.spec.name(clientID),\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}).filter(dec => dec !== null)\n\t\t\t\t\t\treturn { tracked, deco: DecorationSet.create(state.doc, decos) }\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tprops: {\n\t\t\t\t\tdecorations(state) {\n\t\t\t\t\t\treturn this.getState(state).deco\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t}),\n\t\t]\n\t},\n\n})\n\nexport default UserColor\n","/*\n * @copyright Copyright (c) 2019 Julius Hrtl <jus@bitgrid.net>\n *\n * @author Julius Hrtl <jus@bitgrid.net>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport { Node } from '@tiptap/core'\n\nexport default Node.create({\n\tname: 'doc',\n\tcontent: 'block',\n\taddKeyboardShortcuts() {\n\t\treturn {\n\t\t\tTab: () => this.editor.commands.insertContent('\\t'),\n\t\t}\n\t},\n\n})\n","/*\n * @copyright Copyright (c) 2022 Max <max@nextcloud.com>\n *\n * @author Max <max@nextcloud.com>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n*/\n\nimport { Extension } from '@tiptap/core'\n\n/* eslint-disable import/no-named-as-default */\nimport Text from '@tiptap/extension-text'\nimport PlainTextDocument from './../nodes/PlainTextDocument.js'\n\nexport default Extension.create({\n\tname: 'PlainText',\n\n\taddExtensions() {\n\t\treturn [\n\t\t\tPlainTextDocument,\n\t\t\tText,\n\t\t]\n\t},\n\n})\n","/*\n * @copyright Copyright (c) 2020 Julius Hrtl <jus@bitgrid.net>\n *\n * @author Julius Hrtl <jus@bitgrid.net>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport TiptapBulletList from '@tiptap/extension-bullet-list'\nimport { listInputRule } from '../commands/index.js'\n\n/* We want to allow for `* [ ]` as an input rule for bullet lists.\n * Therefore the list input rules need to check the input\n * until the first char after the space.\n * Only there we know the user is not trying to create a task list.\n */\nconst BulletList = TiptapBulletList.extend({\n\tparseHTML() {\n\t\treturn this.parent().map(rule => Object.assign(rule, { preserveWhitespace: true }))\n\t},\n\n\taddAttributes() {\n\t\treturn {\n\t\t\t...this.parent?.(),\n\t\t\tbullet: {\n\t\t\t\tdefault: '-',\n\t\t\t\trendered: false,\n\t\t\t\tisRequired: true,\n\t\t\t\tparseHTML: (el) => el.getAttribute('data-bullet'),\n\t\t\t},\n\t\t}\n\t},\n\n\taddInputRules() {\n\t\treturn [\n\t\t\tlistInputRule(\n\t\t\t\t/^\\s*([-+*])\\s([^\\s[]+)$/,\n\t\t\t\tthis.type,\n\t\t\t),\n\t\t]\n\t},\n\n})\n\nexport default BulletList\n","/*\n * @copyright Copyright (c) 2021 Jonas Meurer <jonas@freesources.org>\n *\n * @author Jonas Meurer <jonas@freesources.org>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport { InputRule, wrappingInputRule } from '@tiptap/core'\n\n/**\n * Wrapping input handler that will append the content of the last match\n *\n * @param {RegExp} find find param for the wrapping input rule\n * @param {object} type Node Type object\n * @param {*} getAttributes handler to get the attributes\n */\nexport default function(find, type, getAttributes) {\n\tconst handler = ({ state, range, match }) => {\n\t\tconst wrap = wrappingInputRule({ find, type, getAttributes })\n\t\twrap.handler({ state, range, match })\n\t\t// Insert the first character after bullet if there is one\n\t\tif (match.length >= 3) {\n\t\t\tstate.tr.insertText(match[2])\n\t\t}\n\t}\n\treturn new InputRule({ find, handler })\n}\n","<!--\n  - @copyright Copyright (c) 2022 Vinicius Reis <vinicius@nextcloud.com>\n  -\n  - @author Vinicius Reis <vinicius@nextcloud.com>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\n  -\n  -->\n<template>\n\t<NodeViewWrapper data-text-el=\"callout\"\n\t\tclass=\"callout\"\n\t\t:class=\"`callout--${type}`\"\n\t\tas=\"div\">\n\t\t<component :is=\"icon\" class=\"callout__icon\" />\n\t\t<NodeViewContent class=\"callout__content\" />\n\t</NodeViewWrapper>\n</template>\n\n<script>\nimport { NodeViewWrapper, NodeViewContent } from '@tiptap/vue-2'\nimport { Positive, Warn, Danger, Info } from '../components/icons.js'\n\nconst ICONS_MAP = {\n\tinfo: Info,\n\tsuccess: Positive,\n\terror: Danger,\n\twarn: Warn,\n}\n\nexport default {\n\t// eslint-disable-next-line vue/match-component-file-name\n\tname: 'Callout',\n\tcomponents: {\n\t\tNodeViewWrapper,\n\t\tNodeViewContent,\n\t},\n\tprops: {\n\t\tnode: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\ticon() {\n\t\t\treturn ICONS_MAP[this.type] || Info\n\t\t},\n\t\ttype() {\n\t\t\treturn this.node?.attrs?.type || 'info'\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.callout {\n\tbackground-color: var(--callout-background, var(--color-background-hover));\n\tborder-left-color: var(--callout-border, var(--color-primary-element));\n\tborder-radius: var(--border-radius);\n\tpadding: 1em;\n\tpadding-left: 0.5em;\n\tborder-left-width: 0.3em;\n\tborder-left-style: solid;\n\tposition: relative;\n\tmargin-bottom: 0.5em;\n\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: flex-start;\n\n\t&+ * {\n\t\tmargin-top: 0.5em;\n\t}\n\n\t.callout__content {\n\t\tmargin-left: 1em;\n\t\t&:deep(p) {\n\t\t\t&:last-child {\n\t\t\t\tmargin-bottom: 0;\n\t\t\t}\n\t\t}\n\t}\n\n\t.callout__icon {\n\t\t&, :deep(svg) {\n\t\t\tcolor: var(--callout-border);\n\t\t}\n\t}\n\n\t// Info (default) variables\n\t&, &--info {\n\t\t--callout-border: var(--color-info, #006aa3);\n\t}\n\n\t// Warn variables\n\t&--warn {\n\t\t--callout-border: var(--color-warning);\n\t}\n\n\t// Error variables\n\t&--error {\n\t\t--callout-border: var(--color-error);\n\t}\n\n\t// Success variables\n\t&--success {\n\t\t--callout-border: var(--color-success);\n\t}\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Callout.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Callout.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Callout.vue?vue&type=style&index=0&id=4387ae9f&prod&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Callout.vue?vue&type=style&index=0&id=4387ae9f&prod&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./Callout.vue?vue&type=template&id=4387ae9f&scoped=true&\"\nimport script from \"./Callout.vue?vue&type=script&lang=js&\"\nexport * from \"./Callout.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Callout.vue?vue&type=style&index=0&id=4387ae9f&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4387ae9f\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('NodeViewWrapper',{staticClass:\"callout\",class:`callout--${_vm.type}`,attrs:{\"data-text-el\":\"callout\",\"as\":\"div\"}},[_c(_vm.icon,{tag:\"component\",staticClass:\"callout__icon\"}),_vm._v(\" \"),_c('NodeViewContent',{staticClass:\"callout__content\"})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/*\n * @copyright Copyright (c) 2022 Vinicius Reis <vinicius@nextcloud.com>\n *\n * @author Vinicius Reis <vinicius@nextcloud.com>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport { Node, isNodeActive, mergeAttributes } from '@tiptap/core'\nimport { VueNodeViewRenderer } from '@tiptap/vue-2'\nimport { typesAvailable } from './../markdownit/callouts.js'\n\nimport Callout from './Callout.vue'\n\nexport default Node.create({\n\n\tname: 'callout',\n\n\tcontent: 'paragraph+',\n\n\tgroup: 'block',\n\n\tdefining: true,\n\n\taddOptions() {\n\t\treturn {\n\t\t\ttypes: typesAvailable,\n\t\t\tHTMLAttributes: {\n\t\t\t\tclass: 'callout',\n\t\t\t},\n\t\t}\n\t},\n\n\taddAttributes() {\n\t\treturn {\n\t\t\ttype: {\n\t\t\t\tdefault: 'info',\n\t\t\t\trendered: false,\n\t\t\t\tparseHTML: element => {\n\t\t\t\t\treturn element.getAttribute('data-callout')\n\t\t\t\t\t\t|| typesAvailable.find((type) => element.classList.contains(type))\n\t\t\t\t\t\t|| (element.classList.contains('warning') && 'warn')\n\t\t\t\t},\n\t\t\t\trenderHTML: attributes => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t'data-callout': attributes.type,\n\t\t\t\t\t\tclass: `callout-${attributes.type}`,\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t}\n\t},\n\n\tparseHTML() {\n\t\treturn [\n\t\t\t{\n\t\t\t\ttag: 'div.callout',\n\t\t\t},\n\t\t\t{\n\t\t\t\ttag: 'p.callout',\n\t\t\t\tpriority: 1001,\n\t\t\t},\n\t\t]\n\t},\n\n\trenderHTML({ node, HTMLAttributes }) {\n\t\tconst { class: classy } = this.options.HTMLAttributes\n\n\t\tconst attributes = {\n\t\t\t...this.options.HTMLAttributes,\n\t\t\t'data-callout': node.attrs.type,\n\t\t\tclass: `${classy} ${classy}-${node.attrs.type}`,\n\t\t}\n\n\t\treturn ['div', mergeAttributes(attributes, HTMLAttributes), 0]\n\t},\n\n\ttoMarkdown: (state, node) => {\n\t\tstate.write('::: ' + (node.attrs.type || 'info') + '\\n')\n\t\tstate.renderContent(node)\n\t\tstate.ensureNewLine()\n\t\tstate.write(':::')\n\t\tstate.closeBlock(node)\n\t},\n\n\taddNodeView() {\n\t\treturn VueNodeViewRenderer(Callout)\n\t},\n\n\taddCommands() {\n\t\treturn {\n\t\t\tsetCallout: attributes => ({ commands }) => {\n\t\t\t\treturn commands.wrapIn(this.name, attributes)\n\t\t\t},\n\t\t\ttoggleCallout: attributes => ({ commands, state }) => {\n\t\t\t\tif (!isNodeActive(state, this.name)) {\n\t\t\t\t\treturn commands.setCallout(attributes)\n\t\t\t\t}\n\n\t\t\t\tif (!isNodeActive(state, this.name, attributes)) {\n\t\t\t\t\treturn commands.updateAttributes(this.name, attributes)\n\t\t\t\t}\n\n\t\t\t\treturn commands.unsetCallout()\n\t\t\t},\n\t\t\tunsetCallout: () => ({ commands }) => {\n\t\t\t\treturn commands.lift(this.name)\n\t\t\t},\n\t\t}\n\t},\n})\n","<template>\n\t<NodeViewWrapper as=\"div\" :data-mode=\"viewMode\" class=\"code-block\">\n\t\t<div v-if=\"isEditable\" class=\"code-block-header\">\n\t\t\t<div class=\"view-switch\">\n\t\t\t\t<NcActions :aria-label=\"t('text', 'Code block options')\">\n\t\t\t\t\t<NcActionInput :label=\"t('text', 'Code block language')\"\n\t\t\t\t\t\t:value=\"type\"\n\t\t\t\t\t\t:show-trailing-button=\"false\"\n\t\t\t\t\t\t:placeholder=\"t('text', 'e.g. php, javascript, json')\"\n\t\t\t\t\t\t@input=\"updateLanguage\">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<MarkerIcon :size=\"20\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</NcActionInput>\n\n\t\t\t\t\t<NcActionSeparator v-if=\"supportPreview\" />\n\n\t\t\t\t\t<NcActionButton v-if=\"supportPreview\" :close-after-click=\"true\" @click=\"viewMode = 'code'\">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<CodeBraces :size=\"20\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t{{ t('text', 'Source code') }}\n\t\t\t\t\t</NcActionButton>\n\t\t\t\t\t<NcActionButton v-if=\"supportPreview\" :close-after-click=\"true\" @click=\"viewMode = 'preview'\">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<Eye :size=\"20\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t{{ t('text', 'Diagram') }}\n\t\t\t\t\t</NcActionButton>\n\t\t\t\t\t<NcActionButton v-if=\"supportPreview\" :close-after-click=\"true\" @click=\"viewMode = 'side-by-side'\">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<ViewSplitVertical :size=\"20\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t{{ t('text', 'Both') }}\n\t\t\t\t\t</NcActionButton>\n\n\t\t\t\t\t<NcActionSeparator v-if=\"supportPreview\" />\n\n\t\t\t\t\t<NcActionLink v-if=\"supportPreview\" href=\"https://mermaid.js.org/intro/\" target=\"_blank\">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<Help :size=\"20\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t{{ t('text', 'Mermaid documentation') }}\n\t\t\t\t\t</NcActionLink>\n\t\t\t\t</NcActions>\n\t\t\t</div>\n\t\t</div>\n\t\t<div :class=\"{'split-view': showCode && showPreview }\">\n\t\t\t<pre v-show=\"showCode\" class=\"split-view__code\"><NodeViewContent as=\"code\" :contenteditable=\"isEditable\" /></pre>\n\t\t\t<div v-show=\"showPreview\"\n\t\t\t\tref=\"preview\"\n\t\t\t\tclass=\"split-view__preview\"\n\t\t\t\t:contenteditable=\"false\" />\n\t\t\t<div v-show=\"false\" :id=\"targetId\" :contenteditable=\"false\" />\n\t\t</div>\n\t</NodeViewWrapper>\n</template>\n\n<script>\nimport debounce from 'debounce'\nimport { NodeViewWrapper, NodeViewContent } from '@tiptap/vue-2'\nimport { NcActions, NcActionButton, NcActionInput, NcActionLink, NcActionSeparator } from '@nextcloud/vue'\nimport mermaid from 'mermaid'\nimport { v4 as uuidv4 } from 'uuid'\n\nimport ViewSplitVertical from 'vue-material-design-icons/ViewSplitVertical.vue'\nimport CodeBraces from 'vue-material-design-icons/CodeBraces.vue'\nimport Eye from 'vue-material-design-icons/Eye.vue'\nimport MarkerIcon from 'vue-material-design-icons/Marker.vue'\nimport Help from 'vue-material-design-icons/Help.vue'\n\nexport default {\n\t// eslint-disable-next-line vue/match-component-file-name\n\tname: 'CodeBlockView',\n\tcomponents: {\n\t\tMarkerIcon,\n\t\tHelp,\n\t\tEye,\n\t\tViewSplitVertical,\n\t\tCodeBraces,\n\t\tNcActions,\n\t\tNcActionButton,\n\t\tNcActionInput,\n\t\tNcActionLink,\n\t\tNcActionSeparator,\n\t\tNodeViewWrapper,\n\t\tNodeViewContent,\n\t},\n\tprops: {\n\t\tnode: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\teditor: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tisEditable: false,\n\t\t\tviewMode: 'preview',\n\t\t\ttargetId: 'mermaid-view-' + uuidv4(),\n\t\t}\n\t},\n\tcomputed: {\n\t\ttype() {\n\t\t\treturn this.node?.attrs?.language || ''\n\t\t},\n\t\tsupportPreview() {\n\t\t\treturn ['mermaid'].includes(this.type)\n\t\t},\n\t\tshowCode() {\n\t\t\treturn !this.supportPreview || this.viewMode === 'code' || this.viewMode === 'side-by-side'\n\t\t},\n\t\tshowPreview() {\n\t\t\treturn this.supportPreview && (this.viewMode === 'preview' || this.viewMode === 'side-by-side')\n\t\t},\n\t\tdefaultMode() {\n\t\t\tif (this.isEditable) {\n\t\t\t\treturn 'side-by-side'\n\t\t\t} else {\n\t\t\t\treturn this.supportPreview() ? 'code' : 'preview'\n\t\t\t}\n\t\t},\n\t},\n\twatch: {\n\t\t'node.textContent'() {\n\t\t\tthis.renderMermaid()\n\t\t},\n\t},\n\tbeforeMount() {\n\t\tthis.isEditable = this.editor.isEditable\n\t\tthis.editor.on('update', ({ editor }) => {\n\t\t\tthis.isEditable = editor.isEditable\n\t\t})\n\t\tthis.renderMermaidDebounced = debounce(async function() {\n\t\t\tif (!this.supportPreview) {\n\t\t\t\tthis.viewMode = 'code'\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst textContent = this.node?.textContent || ''\n\t\t\tif (textContent.trim() === '') {\n\t\t\t\tthis.viewMode = this.defaultMode\n\t\t\t\tthis.$refs.preview.innerHTML = ''\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tawait mermaid.parse(textContent)\n\n\t\t\t\tconst { svg } = await mermaid.render(this.targetId, textContent)\n\t\t\t\tconst targetElement = document.getElementById(this.targetId)\n\t\t\t\tif (targetElement) {\n\t\t\t\t\ttargetElement.style.display = 'none'\n\t\t\t\t}\n\t\t\t\tthis.$refs.preview.innerHTML = svg\n\t\t\t} catch (e) {\n\t\t\t\tconsole.debug('Invalid mermaid source', e)\n\t\t\t\tif (this.viewMode === 'preview') {\n\t\t\t\t\tthis.viewMode = this.isEditable ? 'side-by-side' : 'code'\n\t\t\t\t}\n\t\t\t}\n\t\t}, 250)\n\n\t\tmermaid.initialize({ startOnLoad: false })\n\t\tthis.$nextTick(() => {\n\t\t\tthis.renderMermaid()\n\t\t})\n\t},\n\tmethods: {\n\t\tupdateLanguage(event) {\n\t\t\tthis.updateAttributes({\n\t\t\t\tlanguage: event.target.value,\n\t\t\t})\n\t\t},\n\t\trenderMermaid() {\n\t\t\tthis.renderMermaidDebounced()\n\t\t},\n\t},\n}\n</script>\n<style lang=\"scss\" scoped>\n.code-block {\n\tbackground-color: var(--color-background-dark);\n}\n\n.code-block-header {\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: space-between;\n\talign-items: stretch;\n\tposition: absolute;\n\tright: 12px;\n\tmargin-top: 4px;\n}\n\n.split-view {\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: space-between;\n\talign-items: stretch;\n\tgap: 12px;\n\n\t& > * {\n\t\tflex: 1;\n\t}\n\n\t&__preview {\n\t\ttext-align: center;\n\t}\n}\n\n@media only screen and (max-width: 600px) {\n\t.split-view {\n\t\tflex-direction: column;\n\t}\n}\n\n.view-switch {\n\tdisplay: flex;\n\tflex-direction: row;\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeBlockView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeBlockView.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeBlockView.vue?vue&type=style&index=0&id=54c047fa&prod&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeBlockView.vue?vue&type=style&index=0&id=54c047fa&prod&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./CodeBlockView.vue?vue&type=template&id=54c047fa&scoped=true&\"\nimport script from \"./CodeBlockView.vue?vue&type=script&lang=js&\"\nexport * from \"./CodeBlockView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CodeBlockView.vue?vue&type=style&index=0&id=54c047fa&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"54c047fa\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('NodeViewWrapper',{staticClass:\"code-block\",attrs:{\"as\":\"div\",\"data-mode\":_vm.viewMode}},[(_vm.isEditable)?_c('div',{staticClass:\"code-block-header\"},[_c('div',{staticClass:\"view-switch\"},[_c('NcActions',{attrs:{\"aria-label\":_vm.t('text', 'Code block options')}},[_c('NcActionInput',{attrs:{\"label\":_vm.t('text', 'Code block language'),\"value\":_vm.type,\"show-trailing-button\":false,\"placeholder\":_vm.t('text', 'e.g. php, javascript, json')},on:{\"input\":_vm.updateLanguage},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('MarkerIcon',{attrs:{\"size\":20}})]},proxy:true}],null,false,3768505569)}),_vm._v(\" \"),(_vm.supportPreview)?_c('NcActionSeparator'):_vm._e(),_vm._v(\" \"),(_vm.supportPreview)?_c('NcActionButton',{attrs:{\"close-after-click\":true},on:{\"click\":function($event){_vm.viewMode = 'code'}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('CodeBraces',{attrs:{\"size\":20}})]},proxy:true}],null,false,2428748609)},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('text', 'Source code'))+\"\\n\\t\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.supportPreview)?_c('NcActionButton',{attrs:{\"close-after-click\":true},on:{\"click\":function($event){_vm.viewMode = 'preview'}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('Eye',{attrs:{\"size\":20}})]},proxy:true}],null,false,1151454737)},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('text', 'Diagram'))+\"\\n\\t\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.supportPreview)?_c('NcActionButton',{attrs:{\"close-after-click\":true},on:{\"click\":function($event){_vm.viewMode = 'side-by-side'}},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('ViewSplitVertical',{attrs:{\"size\":20}})]},proxy:true}],null,false,3354721413)},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('text', 'Both'))+\"\\n\\t\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),(_vm.supportPreview)?_c('NcActionSeparator'):_vm._e(),_vm._v(\" \"),(_vm.supportPreview)?_c('NcActionLink',{attrs:{\"href\":\"https://mermaid.js.org/intro/\",\"target\":\"_blank\"},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('Help',{attrs:{\"size\":20}})]},proxy:true}],null,false,802739225)},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('text', 'Mermaid documentation'))+\"\\n\\t\\t\\t\\t\")]):_vm._e()],1)],1)]):_vm._e(),_vm._v(\" \"),_c('div',{class:{'split-view': _vm.showCode && _vm.showPreview }},[_c('pre',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showCode),expression:\"showCode\"}],staticClass:\"split-view__code\"},[_c('NodeViewContent',{attrs:{\"as\":\"code\",\"contenteditable\":_vm.isEditable}})],1),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showPreview),expression:\"showPreview\"}],ref:\"preview\",staticClass:\"split-view__preview\",attrs:{\"contenteditable\":false}}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(false),expression:\"false\"}],attrs:{\"id\":_vm.targetId,\"contenteditable\":false}})])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import TiptapCodeBlockLowlight from '@tiptap/extension-code-block-lowlight'\nimport { defaultMarkdownSerializer } from '@tiptap/pm/markdown'\nimport { VueNodeViewRenderer } from '@tiptap/vue-2'\nimport CodeBlockView from './CodeBlockView.vue'\n\nconst CodeBlock = TiptapCodeBlockLowlight.extend({\n\n\tparseHTML() {\n\t\treturn [\n\t\t\t{\n\t\t\t\ttag: 'pre',\n\t\t\t\tpreserveWhitespace: 'full',\n\t\t\t\t// Remove trailing newline from code blocks (#2344)\n\t\t\t\tgetContent: (node, schema) => {\n\t\t\t\t\tconst textContent = node.textContent.replace(/\\n$/, '')\n\t\t\t\t\tconst inner = textContent\n\t\t\t\t\t\t? [schema.text(textContent)]\n\t\t\t\t\t\t: []\n\t\t\t\t\treturn schema.nodes.codeBlock.create(null, inner)\n\t\t\t\t},\n\t\t\t},\n\t\t]\n\t},\n\n\ttoMarkdown(state, node, parent, index) {\n\t\t// @tiptap/pm/markdown uses `params` instead of `language` attribute\n\t\tnode.attrs.params = node.attrs.language\n\t\treturn defaultMarkdownSerializer.nodes.code_block(state, node, parent, index)\n\t},\n\n\taddNodeView() {\n\t\treturn VueNodeViewRenderer(CodeBlockView)\n\t},\n\n\taddKeyboardShortcuts() {\n\t\treturn {\n\t\t\t'Mod-a': () => {\n\t\t\t\tif (!this.editor.isActive('codeBlock')) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tconst nodeSize = this.editor.state.selection.$from.node().nodeSize\n\t\t\t\tthis.editor.commands.selectParentNode()\n\t\t\t\tconst from = this.editor.state.selection.$from.pos\n\t\t\t\tconst to = from + nodeSize\n\t\t\t\tthis.editor.commands.setTextSelection({ from, to })\n\n\t\t\t\treturn true\n\t\t\t},\n\t\t}\n\t},\n\n})\n\nexport default CodeBlock\n","import { Node } from '@tiptap/core'\n\n/*\n * Markdown tables do not include captions.\n * We still need to parse them though\n * because otherwise tiptap will try to insert their text content\n * and put it in the top row of the table.\n */\nexport default Node.create({\n\tname: 'tableCaption',\n\tcontent: 'inline*',\n\taddAttributes() {\n\t\treturn {}\n\t},\n\n\trenderHTML() {\n\t\treturn ['caption']\n\t},\n\n\ttoMarkdown(state, node) {\n\t},\n\n\tparseHTML() {\n\t\treturn [\n\t\t\t{ tag: 'table caption', priority: 90 },\n\t\t]\n\t},\n\n})\n","import { TableCell } from '@tiptap/extension-table-cell'\nimport { Plugin } from '@tiptap/pm/state'\nimport { Fragment } from '@tiptap/pm/model'\n\nexport default TableCell.extend({\n\tcontent: 'inline*',\n\n\ttoMarkdown(state, node) {\n\t\tstate.write(' ')\n\t\tconst backup = state.options?.escapeExtraCharacters\n\t\tconst columnIndex = state.options.currentColumnIndex\n\t\tstate.options.escapeExtraCharacters = /\\|/\n\n\t\tlet cellRenderedContentLength = 0\n\t\tnode.content.forEach((childNode, offset, index) => {\n\t\t\tcellRenderedContentLength += (childNode.text?.length || 6)\n\t\t\tif (childNode.text?.includes('|')) cellRenderedContentLength += 1\n\t\t\tif (childNode.attrs.syntax === '  ') node.child(index).attrs.syntax = 'html'\n\t\t})\n\t\tconst columnWidth = state.options.columnWidths[columnIndex]\n\t\tconst align = node.attrs?.textAlign || 'left'\n\t\tconst space = columnWidth - cellRenderedContentLength\n\t\tconst leftPadding = Math.floor(space / 2)\n\t\tconst rightPadding = Math.ceil(space / 2)\n\n\t\tif (align === 'center') state.write(' '.repeat(leftPadding))\n\t\tif (align === 'right') state.write(' '.repeat(space))\n\t\tstate.renderInline(node)\n\t\tif (align === 'center') state.write(' '.repeat(rightPadding))\n\t\tif (align === 'left') state.write(' '.repeat(space))\n\n\t\tstate.options.escapeExtraCharacters = backup\n\t\tstate.write(' |')\n\t\tstate.options.currentColumnIndex++\n\t},\n\n\tparseHTML() {\n\t\treturn [\n\t\t\t{ tag: 'td', preserveWhitespace: true },\n\t\t\t{ tag: 'th', preserveWhitespace: true },\n\t\t\t{ tag: 'table thead ~ tbody th', priority: 70, preserveWhitespace: true },\n\t\t\t{ tag: 'table thead ~ tbody td', priority: 70, preserveWhitespace: true },\n\t\t]\n\t},\n\n\taddAttributes() {\n\t\treturn {\n\t\t\t...this.parent?.(),\n\t\t\ttextAlign: {\n\t\t\t\trendered: false,\n\t\t\t\tparseHTML: (element) => element.style.textAlign || null,\n\t\t\t},\n\t\t}\n\t},\n\n\taddProseMirrorPlugins() {\n\t\treturn [\n\t\t\tnew Plugin({\n\t\t\t\tprops: {\n\t\t\t\t\t// Only paste (marked) text into table cells to prevent jumping out of cell\n\t\t\t\t\thandlePaste: (view, event, slice) => {\n\t\t\t\t\t\tif (!this.editor.isActive(this.type.name)) {\n\t\t\t\t\t\t\treturn false\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst { state } = view\n\t\t\t\t\t\tconst childNodes = []\n\t\t\t\t\t\tlet newLineAdded = false\n\t\t\t\t\t\tslice.content.descendants((node, pos) => {\n\t\t\t\t\t\t\tif (node.isText) {\n\t\t\t\t\t\t\t\tchildNodes.push(state.schema.text(node.textContent, node.marks))\n\t\t\t\t\t\t\t\tnewLineAdded = false\n\t\t\t\t\t\t\t} else if (!newLineAdded) {\n\t\t\t\t\t\t\t\tchildNodes.push(state.schema.text('\\n'))\n\t\t\t\t\t\t\t\tnewLineAdded = true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\n\t\t\t\t\t\tconst newNode = state.schema.node('paragraph', [], childNodes)\n\t\t\t\t\t\tslice.content = Fragment.empty.addToStart(newNode)\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t}),\n\t\t]\n\t},\n})\n","import { TableHeader } from '@tiptap/extension-table-header'\n\nexport default TableHeader.extend({\n\tcontent: 'inline*',\n\n\ttoMarkdown(state, node) {\n\t\tconst headerIndex = state.options.currentHeaderIndex\n\t\tconst columnWidth = state.options.columnWidths[headerIndex]\n\t\tconst align = node.attrs?.textAlign || 'left'\n\t\tconst space = columnWidth - node.content.size\n\t\tconst leftPadding = Math.floor(space / 2)\n\t\tconst rightPadding = Math.ceil(space / 2)\n\n\t\tstate.write(' ')\n\t\tif (align === 'center') state.write(' '.repeat(leftPadding))\n\t\tif (align === 'right') state.write(' '.repeat(space))\n\t\tstate.renderInline(node)\n\t\tif (align === 'center') state.write(' '.repeat(rightPadding))\n\t\tif (align === 'left') state.write(' '.repeat(space))\n\t\tstate.write(' |')\n\t\tstate.options.currentHeaderIndex++\n\t},\n\n\tparseHTML() {\n\t\treturn [\n\t\t\t{ tag: 'table thead:empty ~ tbody :first-child th', priority: 80 },\n\t\t\t{ tag: 'table thead:empty ~ tbody :first-child td', priority: 80 },\n\t\t\t{ tag: 'table thead :first-child th', priority: 60 },\n\t\t\t{ tag: 'table thead :first-child td', priority: 60 },\n\t\t\t{ tag: 'table tbody :first-child th', priority: 60 },\n\t\t\t{ tag: 'table tbody :first-child td', priority: 60 },\n\t\t\t{ tag: 'table > :first-child > th', priority: 60 },\n\t\t\t{ tag: 'table > :first-child > td', priority: 60 },\n\t\t]\n\t},\n\n\taddAttributes() {\n\t\treturn {\n\t\t\t...this.parent?.(),\n\t\t\ttextAlign: {\n\t\t\t\trendered: false,\n\t\t\t\tparseHTML: (element) => element.style.textAlign || null,\n\t\t\t},\n\t\t}\n\t},\n})\n","import { TableRow } from '@tiptap/extension-table-row'\n\nexport default TableRow.extend({\n\tcontent: 'tableCell*',\n\n\ttoMarkdown(state, node) {\n\t\tstate.write('|')\n\t\tstate.options.currentColumnIndex = 0\n\t\tstate.renderInline(node)\n\t\tstate.ensureNewLine()\n\t},\n\n\tparseHTML() {\n\t\treturn [\n\t\t\t{ tag: 'tr', priority: 70 },\n\t\t]\n\t},\n})\n","import TableRow from './TableRow.js'\n\nexport default TableRow.extend({\n\tname: 'tableHeadRow',\n\tcontent: 'tableHeader*',\n\n\ttoMarkdown(state, node) {\n\t\tstate.write('|')\n\t\tstate.renderInline(node)\n\t\tstate.ensureNewLine()\n\t\tstate.write('|')\n\t\tnode.forEach((cell, offset, index) => {\n\t\t\tlet row = state.repeat('-', state.options.columnWidths[index] + 2)\n\t\t\tconst align = cell.attrs?.textAlign\n\t\t\tif (align === 'center' || align === 'left') row = ':' + row.slice(1)\n\t\t\tif (align === 'center' || align === 'right') row = row.slice(0, -1) + ':'\n\t\t\tstate.write(row)\n\t\t\tstate.write('|')\n\t\t})\n\t\tstate.ensureNewLine()\n\t},\n\n\tparseHTML() {\n\t\treturn [\n\t\t\t{ tag: 'tr:first-of-type', priority: 80 },\n\t\t]\n\t},\n})\n","import { mergeAttributes } from '@tiptap/core'\nimport { Table } from '@tiptap/extension-table'\nimport TableCaption from './TableCaption.js'\nimport TableCell from './TableCell.js'\nimport TableHeader from './TableHeader.js'\nimport TableHeadRow from './TableHeadRow.js'\nimport TableRow from './TableRow.js'\nimport { TextSelection } from '@tiptap/pm/state'\nimport {\n\taddRowAfter,\n\taddRowBefore,\n\tisInTable,\n\tmoveCellForward,\n\tselectedRect,\n\tselectionCell,\n} from '@tiptap/pm/tables'\nimport { Node } from '@tiptap/pm/model'\n\n/**\n *\n * @param {object} schema - schema of the editor\n * @param {number} rowsCount - number of rows in the table\n * @param {number} colsCount - number of cols in the table\n * @param {object} cellContent - currently unused\n */\nfunction createTable(schema, rowsCount, colsCount, cellContent) {\n\tconst headerCells = []\n\tconst cells = []\n\tfor (let index = 0; index < colsCount; index += 1) {\n\t\tconst cell = schema.nodes.tableCell.createAndFill()\n\t\tif (cell) {\n\t\t\tcells.push(cell)\n\t\t}\n\t\tconst headerCell = schema.nodes.tableHeader.createAndFill()\n\t\tif (headerCell) {\n\t\t\theaderCells.push(headerCell)\n\t\t}\n\t}\n\tconst headRow = schema.nodes.tableHeadRow.createChecked(null, headerCells)\n\tconst rows = []\n\tfor (let index = 1; index < rowsCount; index += 1) {\n\t\trows.push(schema.nodes.tableRow.createChecked(null, cells))\n\t}\n\treturn schema.nodes.table.createChecked(null, [headRow, ...rows])\n}\n\n/**\n *\n * @param {object} $cell - resolved position of the current cell\n */\nfunction findSameCellInNextRow($cell) {\n\tif ($cell.index(-1) === $cell.node(-1).childCount - 1) {\n\t\treturn null\n\t}\n\tlet cellStart = $cell.after()\n\tconst table = $cell.node(-1)\n\tfor (let row = $cell.indexAfter(-1); row < table.childCount; row++) {\n\t\tconst rowNode = table.child(row)\n\t\tif (rowNode.childCount >= $cell.index()) {\n\t\t\tfor (let cell = 0; cell < $cell.index(); cell++) {\n\t\t\t\tconst cellNode = rowNode.child(cell)\n\t\t\t\tcellStart += cellNode.nodeSize\n\t\t\t}\n\t\t\treturn cellStart + 1\n\t\t}\n\t\tcellStart += rowNode.nodeSize\n\t}\n}\n\n/**\n *\n * @param {Node} node - Table node\n */\nfunction getColumns(node) {\n\tconst columns = []\n\n\tnode.content.forEach((row) => {\n\t\trow.content.forEach((cell, offset, columnIndex) => {\n\t\t\tif (!columns[columnIndex]) {\n\t\t\t\tcolumns[columnIndex] = []\n\t\t\t}\n\t\t\tcolumns[columnIndex].push(cell)\n\t\t})\n\t})\n\n\treturn columns\n}\n\n/**\n *\n * @param {Array} columns - Columns of table\n */\nfunction calculateColumnWidths(columns) {\n\tconst widths = []\n\n\tcolumns.forEach((column) => {\n\t\tlet maxWidth = 0\n\n\t\tcolumn.forEach((cell) => {\n\t\t\tlet cellWidth = 0\n\t\t\tcell.content.forEach(node => {\n\t\t\t\tcellWidth += (node.text?.length || 6)\n\t\t\t\tif (node.text?.includes('|')) cellWidth += 1\n\t\t\t})\n\t\t\tmaxWidth = Math.max(maxWidth, cellWidth)\n\t\t})\n\n\t\twidths.push(maxWidth)\n\t})\n\n\treturn widths\n}\n\nexport default Table.extend({\n\tcontent: 'tableCaption? tableHeadRow tableRow*',\n\n\taddExtensions() {\n\t\treturn [\n\t\t\tTableCaption,\n\t\t\tTableCell,\n\t\t\tTableHeader,\n\t\t\tTableHeadRow,\n\t\t\tTableRow,\n\t\t]\n\t},\n\n\taddCommands() {\n\t\treturn {\n\t\t\t...this.parent(),\n\t\t\taddRowAfter: () => ({ chain, dispatch }) => {\n\t\t\t\treturn chain()\n\t\t\t\t\t.command(({ state }) => addRowAfter(state, dispatch))\n\t\t\t\t\t.command(({ state, tr }) => {\n\t\t\t\t\t\tconst { tableStart, table, bottom } = selectedRect(state)\n\n\t\t\t\t\t\tif (dispatch) {\n\t\t\t\t\t\t\tconst lastRow = table.child(bottom - 1)\n\t\t\t\t\t\t\tconst newRow = table.child(bottom)\n\t\t\t\t\t\t\tlet pos = tableStart + 1\n\t\t\t\t\t\t\tfor (let i = 0; i < bottom; i++) { pos += table.child(i).nodeSize }\n\n\t\t\t\t\t\t\tfor (let i = 0; i < lastRow.childCount; i++) {\n\t\t\t\t\t\t\t\ttr.setNodeAttribute(\n\t\t\t\t\t\t\t\t\tpos,\n\t\t\t\t\t\t\t\t\t'textAlign',\n\t\t\t\t\t\t\t\t\tlastRow.child(i).attrs.textAlign,\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\tpos += newRow.child(i).nodeSize\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true\n\t\t\t\t\t})\n\t\t\t\t\t.run()\n\t\t\t},\n\t\t\taddRowBefore: () => ({ chain, dispatch }) =>\n\t\t\t\tchain()\n\t\t\t\t\t.command(({ state }) => addRowBefore(state, dispatch))\n\t\t\t\t\t.command(({ state, tr }) => {\n\t\t\t\t\t\tconst { tableStart, table, top } = selectedRect(state)\n\t\t\t\t\t\tif (dispatch) {\n\t\t\t\t\t\t\tconst lastRow = table.child(top)\n\t\t\t\t\t\t\tconst newRow = table.child(top - 1)\n\t\t\t\t\t\t\tlet pos = tableStart + 1\n\t\t\t\t\t\t\tfor (let i = 0; i < (top - 1); i++) { pos += table.child(i).nodeSize }\n\n\t\t\t\t\t\t\tfor (let i = 0; i < lastRow.childCount; i++) {\n\t\t\t\t\t\t\t\ttr.setNodeAttribute(\n\t\t\t\t\t\t\t\t\tpos,\n\t\t\t\t\t\t\t\t\t'textAlign',\n\t\t\t\t\t\t\t\t\tlastRow.child(i).attrs.textAlign,\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\tpos += newRow.child(i).nodeSize\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true\n\t\t\t\t\t})\n\t\t\t\t\t.run(),\n\t\t\tinsertTable: () => ({ tr, dispatch, editor }) => {\n\t\t\t\tif (isInTable(tr)) return false\n\t\t\t\tconst node = createTable(editor.schema, 3, 3, true)\n\t\t\t\tif (dispatch) {\n\t\t\t\t\tconst offset = tr.selection.anchor + 1\n\t\t\t\t\ttr.replaceSelectionWith(node)\n\t\t\t\t\t\t.scrollIntoView()\n\t\t\t\t\t\t.setSelection(TextSelection.near(tr.doc.resolve(offset)))\n\t\t\t\t}\n\t\t\t\treturn true\n\t\t\t},\n\t\t\t// move to the next node after the table from the last cell\n\t\t\tleaveTable: () => ({ tr, dispatch, editor }) => {\n\t\t\t\tif (!isInTable(tr)) return false\n\t\t\t\tconst { $head, empty } = tr.selection\n\t\t\t\tif (!empty) return false\n\t\t\t\t// the selection can temporarily be inside the table but outside of cells.\n\t\t\t\tconst tableDepth = $head.depth < 3 ? 1 : $head.depth - 2\n\t\t\t\tif (dispatch) {\n\t\t\t\t\tconst $next = tr.doc.resolve($head.after(tableDepth) + 1)\n\t\t\t\t\tconst selection = TextSelection.near($next)\n\t\t\t\t\tdispatch(tr.setSelection(selection).scrollIntoView())\n\t\t\t\t}\n\t\t\t\treturn true\n\t\t\t},\n\t\t\tgoToNextRow: () => ({ tr, dispatch, editor }) => {\n\t\t\t\tif (!isInTable(tr)) return false\n\t\t\t\tconst cell = findSameCellInNextRow(selectionCell(tr))\n\t\t\t\tif (cell == null) return\n\t\t\t\tif (dispatch) {\n\t\t\t\t\tconst $cell = tr.doc.resolve(cell)\n\t\t\t\t\tconst selection = TextSelection.between($cell, moveCellForward($cell))\n\t\t\t\t\tdispatch(tr.setSelection(selection).scrollIntoView())\n\t\t\t\t}\n\t\t\t\treturn true\n\t\t\t},\n\t\t}\n\t},\n\n\trenderHTML({ HTMLAttributes }) {\n\t\treturn [\n\t\t\t'div',\n\t\t\t{ class: 'table-wrapper', style: 'overflow-x: auto;' },\n\t\t\t['table', mergeAttributes(this.options.HTMLAttributes, HTMLAttributes), 0],\n\t\t]\n\t},\n\n\ttoMarkdown(state, node) {\n\t\tconst columns = getColumns(node)\n\t\tstate.options.columnWidths = calculateColumnWidths(columns)\n\t\tstate.options.currentHeaderIndex = 0\n\t\tstate.renderContent(node)\n\t\tstate.closeBlock(node)\n\t},\n\n\taddKeyboardShortcuts() {\n\t\treturn {\n\t\t\t...this.parent(),\n\t\t\tTab: () => this.editor.commands.goToNextCell() || this.editor.commands.leaveTable(),\n\t\t\tEnter: ({ editor }) => {\n\t\t\t\tconst { selection } = editor.state\n\t\t\t\tif (!selection.$from.parent.type.name.startsWith('table')) return false\n\n\t\t\t\tif (selection.$from.nodeBefore?.type.name === 'hardBreak') {\n\t\t\t\t\tif (editor.can().goToNextRow() || editor.can().addRowAfter()) {\n\t\t\t\t\t\t// Remove previous hard break and move to next row instead\n\t\t\t\t\t\teditor.chain()\n\t\t\t\t\t\t\t.setTextSelection({ from: selection.from - 1, to: selection.from })\n\t\t\t\t\t\t\t.deleteSelection()\n\t\t\t\t\t\t\t.run()\n\t\t\t\t\t\tif (editor.commands.goToNextRow()) return true\n\t\t\t\t\t\treturn editor.chain().addRowAfter().goToNextRow().run()\n\t\t\t\t\t}\n\t\t\t\t\treturn false\n\t\t\t\t} else {\n\t\t\t\t\treturn editor.chain()\n\t\t\t\t\t\t.insertContent('<br data-syntax=\"html\" />')\n\t\t\t\t\t\t.focus()\n\t\t\t\t\t\t.run()\n\t\t\t\t}\n\t\t\t},\n\t\t}\n\t},\n\n})\n","<!--\n  - @copyright Copyright (c) 2022 Max <max@nextcloud.com>\n  -\n  - @author Max <max@nextcloud.com>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\n  -\n  -->\n\n<template>\n\t<NodeViewWrapper data-text-el=\"table-view\" class=\"table-wrapper\">\n\t\t<NcActions v-if=\"editor.isEditable\"\n\t\t\tforce-menu\n\t\t\tdata-text-table-actions=\"settings\"\n\t\t\tclass=\"table-settings\">\n\t\t\t<template #icon>\n\t\t\t\t<TableSettings />\n\t\t\t</template>\n\t\t\t<NcActionButton data-text-table-action=\"delete\"\n\t\t\t\tclose-after-click\n\t\t\t\t@click=\"deleteNode\">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<Delete />\n\t\t\t\t</template>\n\t\t\t\t{{ t('text', 'Delete this table') }}\n\t\t\t</NcActionButton>\n\t\t</NcActions>\n\t\t<NodeViewContent class=\"content\" as=\"table\" />\n\t\t<div class=\"clearfix\" />\n\t</NodeViewWrapper>\n</template>\n\n<script>\nimport { NodeViewWrapper, NodeViewContent } from '@tiptap/vue-2'\nimport { NcActions, NcActionButton } from '@nextcloud/vue'\nimport { TableSettings, Delete } from '../../components/icons.js'\n\nexport default {\n\tname: 'TableView',\n\tcomponents: {\n\t\tNcActionButton,\n\t\tNcActions,\n\t\tNodeViewWrapper,\n\t\tNodeViewContent,\n\t\tTableSettings,\n\t\tDelete,\n\t},\n\tprops: {\n\t\teditor: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tdeleteNode: {\n\t\t\ttype: Function,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tt: () => window.t,\n\t},\n}\n</script>\n\n<style scoped lang=\"scss\">\n.table-wrapper {\n\tposition: relative;\n\toverflow-x: auto;\n}\n\n.clearfix {\n\tclear: both;\n}\n\ntable {\n\tfloat: left;\n}\n\n.table-settings {\n\tpadding-left: 3px;\n\topacity: .5;\n\tposition: absolute;\n\ttop: 0;\n\tright: 3px;\n\n\t&:hover {\n\t\topacity: 1;\n\t}\n}\n</style>\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TableView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TableView.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TableView.vue?vue&type=style&index=0&id=261cbb42&prod&scoped=true&lang=scss&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TableView.vue?vue&type=style&index=0&id=261cbb42&prod&scoped=true&lang=scss&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./TableView.vue?vue&type=template&id=261cbb42&scoped=true&\"\nimport script from \"./TableView.vue?vue&type=script&lang=js&\"\nexport * from \"./TableView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TableView.vue?vue&type=style&index=0&id=261cbb42&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"261cbb42\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('NodeViewWrapper',{staticClass:\"table-wrapper\",attrs:{\"data-text-el\":\"table-view\"}},[(_vm.editor.isEditable)?_c('NcActions',{staticClass:\"table-settings\",attrs:{\"force-menu\":\"\",\"data-text-table-actions\":\"settings\"},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('TableSettings')]},proxy:true}],null,false,1699550424)},[_vm._v(\" \"),_c('NcActionButton',{attrs:{\"data-text-table-action\":\"delete\",\"close-after-click\":\"\"},on:{\"click\":_vm.deleteNode},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('Delete')]},proxy:true}],null,false,3429380666)},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('text', 'Delete this table'))+\"\\n\\t\\t\")])],1):_vm._e(),_vm._v(\" \"),_c('NodeViewContent',{staticClass:\"content\",attrs:{\"as\":\"table\"}}),_vm._v(\" \"),_c('div',{staticClass:\"clearfix\"})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\n  - @copyright Copyright (c) 2022 Max <max@nextcloud.com>\n  -\n  - @author Max <max@nextcloud.com>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\n  -\n  -->\n\n<template>\n\t<NodeViewWrapper data-text-el=\"table-cell\" as=\"td\" :style=\"textAlign\">\n\t\t<div class=\"container\">\n\t\t\t<NodeViewContent class=\"content\" />\n\t\t\t<NcActions v-if=\"editor.isEditable\"\n\t\t\t\tdata-text-table-actions=\"row\">\n\t\t\t\t<NcActionButton data-text-table-action=\"add-row-before\"\n\t\t\t\t\tclose-after-click\n\t\t\t\t\t@click=\"addRowBefore\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<TableAddRowBefore />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('text', 'Add row before') }}\n\t\t\t\t</NcActionButton>\n\t\t\t\t<NcActionButton data-text-table-action=\"add-row-after\"\n\t\t\t\t\tclose-after-click\n\t\t\t\t\t@click=\"addRowAfter\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<TableAddRowAfter />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('text', 'Add row after') }}\n\t\t\t\t</NcActionButton>\n\t\t\t\t<NcActionButton data-text-table-action=\"remove-row\"\n\t\t\t\t\tclose-after-click\n\t\t\t\t\t@click=\"deleteRow\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<Delete />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('text', 'Delete this row') }}\n\t\t\t\t</NcActionButton>\n\t\t\t</NcActions>\n\t\t</div>\n\t</NodeViewWrapper>\n</template>\n\n<script>\nimport { NodeViewWrapper, NodeViewContent } from '@tiptap/vue-2'\nimport { NcActions, NcActionButton } from '@nextcloud/vue'\nimport { TableAddRowBefore, TableAddRowAfter, Delete } from '../../components/icons.js'\n\nexport default {\n\tname: 'TableCellView',\n\tcomponents: {\n\t\tNcActionButton,\n\t\tNcActions,\n\t\tNodeViewWrapper,\n\t\tNodeViewContent,\n\t\tTableAddRowBefore,\n\t\tTableAddRowAfter,\n\t\tDelete,\n\t},\n\tprops: {\n\t\teditor: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tgetPos: {\n\t\t\ttype: Function,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tt: () => window.t,\n\t\ttextAlign() {\n\t\t\treturn { 'text-align': this.node.attrs.textAlign }\n\t\t},\n\t},\n\tmethods: {\n\t\tdeleteRow() {\n\t\t\tthis.editor.chain()\n\t\t\t\t.focus()\n\t\t\t\t.setTextSelection(this.getPos())\n\t\t\t\t.deleteRow()\n\t\t\t\t.run()\n\t\t},\n\t\taddRowBefore() {\n\t\t\tthis.editor.chain()\n\t\t\t\t.focus()\n\t\t\t\t.setTextSelection(this.getPos())\n\t\t\t\t.addRowBefore()\n\t\t\t\t.run()\n\t\t},\n\t\taddRowAfter() {\n\t\t\tthis.editor.chain()\n\t\t\t\t.focus()\n\t\t\t\t.setTextSelection(this.getPos())\n\t\t\t\t.addRowAfter()\n\t\t\t\t.run()\n\t\t},\n\t},\n}\n</script>\n\n<style scoped lang=\"scss\">\ntd {\n\tposition: relative;\n\n\t.container {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\tmin-height: 36px;\n\t}\n\n\t.content {\n\t\tflex: 1 1 0;\n\t\tmargin: 0;\n\t\tpadding-top: 0.6em;\n\t}\n\n\t.action-item {\n\t\tposition: absolute;\n\t\tright: -48px;\n\t\tflex: 0 1 auto;\n\t\tdisplay: none;\n\t\ttop: 2px;\n\t}\n\n\t&:last-child {\n\t\t.action-item {\n\t\t\tdisplay: block;\n\t\t\topacity: 50%;\n\t\t}\n\n\t\t&:hover, &:active, &:focus, &:focus-within {\n\t\t\t.action-item {\n\t\t\t\topacity: 100%;\n\t\t\t}\n\t\t}\n\t}\n\n}\n\n</style>\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TableCellView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TableCellView.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TableCellView.vue?vue&type=style&index=0&id=3543004d&prod&scoped=true&lang=scss&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TableCellView.vue?vue&type=style&index=0&id=3543004d&prod&scoped=true&lang=scss&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./TableCellView.vue?vue&type=template&id=3543004d&scoped=true&\"\nimport script from \"./TableCellView.vue?vue&type=script&lang=js&\"\nexport * from \"./TableCellView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TableCellView.vue?vue&type=style&index=0&id=3543004d&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3543004d\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('NodeViewWrapper',{style:(_vm.textAlign),attrs:{\"data-text-el\":\"table-cell\",\"as\":\"td\"}},[_c('div',{staticClass:\"container\"},[_c('NodeViewContent',{staticClass:\"content\"}),_vm._v(\" \"),(_vm.editor.isEditable)?_c('NcActions',{attrs:{\"data-text-table-actions\":\"row\"}},[_c('NcActionButton',{attrs:{\"data-text-table-action\":\"add-row-before\",\"close-after-click\":\"\"},on:{\"click\":_vm.addRowBefore},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('TableAddRowBefore')]},proxy:true}],null,false,1805502767)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('text', 'Add row before'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('NcActionButton',{attrs:{\"data-text-table-action\":\"add-row-after\",\"close-after-click\":\"\"},on:{\"click\":_vm.addRowAfter},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('TableAddRowAfter')]},proxy:true}],null,false,3179199218)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('text', 'Add row after'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('NcActionButton',{attrs:{\"data-text-table-action\":\"remove-row\",\"close-after-click\":\"\"},on:{\"click\":_vm.deleteRow},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('Delete')]},proxy:true}],null,false,3429380666)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('text', 'Delete this row'))+\"\\n\\t\\t\\t\")])],1):_vm._e()],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\n  - @copyright Copyright (c) 2022\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\n  -\n  -->\n<template>\n\t<li class=\"inline-container-base\">\n\t\t<ul class=\"inline-container-content\">\n\t\t\t<slot />\n\t\t</ul>\n\t</li>\n</template>\n\n<script>\nimport { defineComponent } from 'vue'\n\n/**\n * A wrapper for allowing inlining NcAction components\n * within the action menu (see TableHeaderView for a usage example)\n */\nexport default defineComponent({\n\tname: 'InlineActionsContainer',\n})\n</script>\n\n<style lang=\"scss\">\nul.inline-container-content {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\tli {\n\t\tflex: 1 1;\n\t}\n\n\t.action-button {\n\t\t// Fix action buttons beeing shifted to the left (right padding)\n\t\tpadding: 0 !important;\n\t\twidth: 100%;\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t}\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InlineActionsContainer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InlineActionsContainer.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InlineActionsContainer.vue?vue&type=style&index=0&id=40a23119&prod&lang=scss&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InlineActionsContainer.vue?vue&type=style&index=0&id=40a23119&prod&lang=scss&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./InlineActionsContainer.vue?vue&type=template&id=40a23119&\"\nimport script from \"./InlineActionsContainer.vue?vue&type=script&lang=js&\"\nexport * from \"./InlineActionsContainer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./InlineActionsContainer.vue?vue&type=style&index=0&id=40a23119&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('li',{staticClass:\"inline-container-base\"},[_c('ul',{staticClass:\"inline-container-content\"},[_vm._t(\"default\")],2)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TableHeaderView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TableHeaderView.vue?vue&type=script&lang=js&\"","<!--\n  - @copyright Copyright (c) 2022 Max <max@nextcloud.com>\n  -\n  - @author Max <max@nextcloud.com>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\n  -\n  -->\n\n<template>\n\t<NodeViewWrapper data-text-el=\"table-header\" as=\"th\" :style=\"textAlign\">\n\t\t<div>\n\t\t\t<NodeViewContent class=\"content\" />\n\t\t\t<NcActions v-if=\"editor.isEditable\"\n\t\t\t\tref=\"menu\"\n\t\t\t\tdata-text-table-actions=\"header\">\n\t\t\t\t<InlineActionsContainer>\n\t\t\t\t\t<NcActionButton data-text-table-action=\"align-column-left\"\n\t\t\t\t\t\t:aria-label=\"t('text', 'Left align column')\"\n\t\t\t\t\t\t@click=\"alignLeft\">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<AlignHorizontalLeft />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</NcActionButton>\n\t\t\t\t\t<NcActionButton data-text-table-action=\"align-column-center\"\n\t\t\t\t\t\t:aria-label=\"t('text', 'Center align column')\"\n\t\t\t\t\t\t@click=\"alignCenter\">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<AlignHorizontalCenter />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</NcActionButton>\n\t\t\t\t\t<NcActionButton data-text-table-action=\"align-column-right\"\n\t\t\t\t\t\t:aria-label=\"t('text', 'Right align column')\"\n\t\t\t\t\t\t@click=\"alignRight\">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<AlignHorizontalRight />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</NcActionButton>\n\t\t\t\t</InlineActionsContainer>\n\t\t\t\t<NcActionButton data-text-table-action=\"add-column-before\"\n\t\t\t\t\tclose-after-click\n\t\t\t\t\t@click=\"addColumnBefore\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<TableAddColumnBefore />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('text', 'Add column before') }}\n\t\t\t\t</NcActionButton>\n\t\t\t\t<NcActionButton data-text-table-action=\"add-column-after\"\n\t\t\t\t\tclose-after-click\n\t\t\t\t\t@click=\"addColumnAfter\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<TableAddColumnAfter />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('text', 'Add column after') }}\n\t\t\t\t</NcActionButton>\n\t\t\t\t<NcActionButton data-text-table-action=\"remove-column\"\n\t\t\t\t\tclose-after-click\n\t\t\t\t\t@click=\"deleteColumn\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<Delete />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('text', 'Delete this column') }}\n\t\t\t\t</NcActionButton>\n\t\t\t</NcActions>\n\t\t</div>\n\t</NodeViewWrapper>\n</template>\n\n<script>\nimport { NodeViewWrapper, NodeViewContent } from '@tiptap/vue-2'\nimport { NcActions, NcActionButton } from '@nextcloud/vue'\nimport InlineActionsContainer from '../../components/InlineActionsContainer.vue'\nimport {\n\tAlignHorizontalCenter,\n\tAlignHorizontalLeft,\n\tAlignHorizontalRight,\n\tDelete,\n\tTableAddColumnBefore,\n\tTableAddColumnAfter,\n} from '../../components/icons.js'\n\nexport default {\n\tname: 'TableHeaderView',\n\tcomponents: {\n\t\tAlignHorizontalCenter,\n\t\tAlignHorizontalLeft,\n\t\tAlignHorizontalRight,\n\t\tDelete,\n\t\tInlineActionsContainer,\n\t\tNcActionButton,\n\t\tNcActions,\n\t\tNodeViewWrapper,\n\t\tNodeViewContent,\n\t\tTableAddColumnBefore,\n\t\tTableAddColumnAfter,\n\t},\n\tprops: {\n\t\teditor: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tgetPos: {\n\t\t\ttype: Function,\n\t\t\trequired: true,\n\t\t},\n\t\tnode: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tt: () => window.t,\n\t\ttextAlign() {\n\t\t\treturn { 'text-align': this.node.attrs.textAlign }\n\t\t},\n\t},\n\tmethods: {\n\t\talignCenter() {\n\t\t\tthis.align('center')\n\t\t},\n\t\talignLeft() {\n\t\t\tthis.align('left')\n\t\t},\n\t\talignRight() {\n\t\t\tthis.align('right')\n\t\t},\n\t\talign(textAlign) {\n\t\t\tthis.editor.chain()\n\t\t\t\t.focus()\n\t\t\t\t.setTextSelection(this.getPos())\n\t\t\t\t.setCellAttribute('textAlign', textAlign)\n\t\t\t\t.run()\n\t\t\twhile (this.editor.commands.goToNextRow()) {\n\t\t\t\tthis.editor.commands.setCellAttribute('textAlign', textAlign)\n\t\t\t}\n\t\t\t// Set focus back to first row\n\t\t\tthis.editor.chain()\n\t\t\t\t.setTextSelection(this.getPos())\n\t\t\t\t.focus()\n\t\t\t\t.run()\n\t\t\tthis.$refs.menu.closeMenu(false)\n\t\t},\n\t\tdeleteColumn() {\n\t\t\tthis.editor.chain()\n\t\t\t\t.focus()\n\t\t\t\t.setTextSelection(this.getPos())\n\t\t\t\t.deleteColumn()\n\t\t\t\t.run()\n\t\t},\n\t\taddColumnBefore() {\n\t\t\tthis.editor.chain()\n\t\t\t\t.focus()\n\t\t\t\t.setTextSelection(this.getPos())\n\t\t\t\t.addColumnBefore()\n\t\t\t\t.run()\n\t\t},\n\t\taddColumnAfter() {\n\t\t\tthis.editor.chain()\n\t\t\t\t.focus()\n\t\t\t\t.setTextSelection(this.getPos())\n\t\t\t\t.addColumnAfter()\n\t\t\t\t.run()\n\t\t},\n\t},\n}\n</script>\n\n<style scoped lang=\"scss\">\nth {\n\n\t.content {\n\t\tmargin: 0;\n\t\tpadding-top: 0.75em;\n\t\tflex-grow: 1;\n\t}\n\t.action-item {\n\t\topacity: 50%;\n\t}\n\n\t&:hover, &:active, &:focus, &:focus-within {\n\t\t.action-item {\n\t\t\topacity: 100%;\n\t\t}\n\t}\n}\n</style>\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TableHeaderView.vue?vue&type=style&index=0&id=25a85f13&prod&scoped=true&lang=scss&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TableHeaderView.vue?vue&type=style&index=0&id=25a85f13&prod&scoped=true&lang=scss&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./TableHeaderView.vue?vue&type=template&id=25a85f13&scoped=true&\"\nimport script from \"./TableHeaderView.vue?vue&type=script&lang=js&\"\nexport * from \"./TableHeaderView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TableHeaderView.vue?vue&type=style&index=0&id=25a85f13&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"25a85f13\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('NodeViewWrapper',{style:(_vm.textAlign),attrs:{\"data-text-el\":\"table-header\",\"as\":\"th\"}},[_c('div',[_c('NodeViewContent',{staticClass:\"content\"}),_vm._v(\" \"),(_vm.editor.isEditable)?_c('NcActions',{ref:\"menu\",attrs:{\"data-text-table-actions\":\"header\"}},[_c('InlineActionsContainer',[_c('NcActionButton',{attrs:{\"data-text-table-action\":\"align-column-left\",\"aria-label\":_vm.t('text', 'Left align column')},on:{\"click\":_vm.alignLeft},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('AlignHorizontalLeft')]},proxy:true}],null,false,2968467243)}),_vm._v(\" \"),_c('NcActionButton',{attrs:{\"data-text-table-action\":\"align-column-center\",\"aria-label\":_vm.t('text', 'Center align column')},on:{\"click\":_vm.alignCenter},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('AlignHorizontalCenter')]},proxy:true}],null,false,536750267)}),_vm._v(\" \"),_c('NcActionButton',{attrs:{\"data-text-table-action\":\"align-column-right\",\"aria-label\":_vm.t('text', 'Right align column')},on:{\"click\":_vm.alignRight},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('AlignHorizontalRight')]},proxy:true}],null,false,3861151024)})],1),_vm._v(\" \"),_c('NcActionButton',{attrs:{\"data-text-table-action\":\"add-column-before\",\"close-after-click\":\"\"},on:{\"click\":_vm.addColumnBefore},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('TableAddColumnBefore')]},proxy:true}],null,false,3782681875)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('text', 'Add column before'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('NcActionButton',{attrs:{\"data-text-table-action\":\"add-column-after\",\"close-after-click\":\"\"},on:{\"click\":_vm.addColumnAfter},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('TableAddColumnAfter')]},proxy:true}],null,false,1608287598)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('text', 'Add column after'))+\"\\n\\t\\t\\t\")]),_vm._v(\" \"),_c('NcActionButton',{attrs:{\"data-text-table-action\":\"remove-column\",\"close-after-click\":\"\"},on:{\"click\":_vm.deleteColumn},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('Delete')]},proxy:true}],null,false,3429380666)},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('text', 'Delete this column'))+\"\\n\\t\\t\\t\")])],1):_vm._e()],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Table from './Table/Table.js'\nimport TableCaption from './Table/TableCaption.js'\nimport TableCell from './Table/TableCell.js'\nimport TableHeader from './Table/TableHeader.js'\nimport TableHeadRow from './Table/TableHeadRow.js'\nimport TableRow from './Table/TableRow.js'\nimport { VueNodeViewRenderer } from '@tiptap/vue-2'\nimport TableView from './Table/TableView.vue'\nimport TableCellView from './Table/TableCellView.vue'\nimport TableHeaderView from './Table/TableHeaderView.vue'\n\n/**\n * Add the node view to the node.\n * The node views include buttons to enable editing the table.\n *\n * @param {object} node - the node to add the view to.\n * @param {object} view - the node view to add to the node.\n */\nfunction extendNodeWithView(node, view) {\n\treturn node.extend({\n\t\taddNodeView() {\n\t\t\treturn VueNodeViewRenderer(view)\n\t\t},\n\t})\n}\n\nexport default Table.extend({\n\n\taddNodeView() {\n\t\treturn VueNodeViewRenderer(TableView)\n\t},\n\n\taddExtensions() {\n\t\treturn [\n\t\t\tTableCaption,\n\t\t\textendNodeWithView(TableCell, TableCellView),\n\t\t\textendNodeWithView(TableHeader, TableHeaderView),\n\t\t\tTableHeadRow,\n\t\t\tTableRow,\n\t\t]\n\t},\n})\n","<!--\n  - @copyright Copyright (c) 2021 Jonas <jonas@freesources.org>\n  -\n  - @author Jonas <jonas@freesources.org>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\n  -\n  -->\n\n<template>\n\t<div class=\"emoji-list\">\n\t\t<template v-if=\"hasResults\">\n\t\t\t<div v-for=\"(emojiObject, index) in items\"\n\t\t\t\t:key=\"index\"\n\t\t\t\tclass=\"emoji-list__item\"\n\t\t\t\t:class=\"{ 'is-selected': index === selectedIndex }\"\n\t\t\t\t@click=\"selectItem(index)\">\n\t\t\t\t<span class=\"emoji-list__item__emoji\">\n\t\t\t\t\t{{ emojiObject.native }}\n\t\t\t\t</span>\n\t\t\t\t:{{ emojiObject.short_name }}\n\t\t\t</div>\n\t\t</template>\n\t\t<div v-else class=\"emoji-list__item is-empty\">\n\t\t\t{{ t('text', 'No emoji found') }}\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport { translate as t } from '@nextcloud/l10n'\nimport { emojiAddRecent } from '@nextcloud/vue'\n\nexport default {\n\tname: 'EmojiList',\n\tprops: {\n\t\titems: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tcommand: {\n\t\t\ttype: Function,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tselectedIndex: 0,\n\t\t}\n\t},\n\tcomputed: {\n\t\thasResults() {\n\t\t\treturn this.items.length > 0\n\t\t},\n\t\titemHeight() {\n\t\t\treturn this.$el.scrollHeight / this.items.length\n\t\t},\n\t\titemInsideScrollView() {\n\t\t\t// If upper border of item is bigger or equal than scroll top\n\t\t\t// and lower end of item is smaller or equal than scroll bottom\n\t\t\treturn this.selectedIndex * this.itemHeight >= this.$el.scrollTop\n\t\t\t\t&& (this.selectedIndex + 1) * this.itemHeight <= this.$el.scrollTop + this.$el.clientHeight\n\t\t},\n\t},\n\twatch: {\n\t\titems() {\n\t\t\tthis.selectedIndex = 0\n\t\t\tthis.$el.scrollTop = 0\n\t\t},\n\t},\n\tmethods: {\n\t\tt,\n\t\tonKeyDown({ event }) {\n\t\t\t// Ignore any key modifier combinations\n\t\t\tif (event.ctrlKey || event.shiftKey || event.altKey || event.metaKey) {\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\tif (event.key === 'ArrowUp') {\n\t\t\t\tthis.selectedIndex = ((this.selectedIndex + this.items.length) - 1) % this.items.length\n\t\t\t\tif (!this.itemInsideScrollView) {\n\t\t\t\t\tthis.$el.scrollTop = this.selectedIndex * this.itemHeight\n\t\t\t\t}\n\t\t\t\treturn true\n\t\t\t}\n\n\t\t\tif (event.key === 'ArrowDown') {\n\t\t\t\tthis.selectedIndex = (this.selectedIndex + 1) % this.items.length\n\t\t\t\tif (!this.itemInsideScrollView) {\n\t\t\t\t\tthis.$el.scrollTop = (this.selectedIndex + 1) * this.itemHeight - this.$el.clientHeight\n\t\t\t\t}\n\t\t\t\treturn true\n\t\t\t}\n\n\t\t\tif (event.key === 'Enter' || event.key === 'Tab') {\n\t\t\t\tthis.selectItem(this.selectedIndex)\n\t\t\t\treturn true\n\t\t\t}\n\n\t\t\treturn false\n\t\t},\n\n\t\tselectItem(index) {\n\t\t\tconst emojiObject = this.items[index]\n\n\t\t\tif (emojiObject) {\n\t\t\t\tthis.command(emojiObject)\n\t\t\t\temojiAddRecent(emojiObject)\n\t\t\t}\n\t\t},\n\t},\n}\n</script>\n\n<style scoped lang=\"scss\">\n\t.emoji-list {\n\t\tborder-radius: var(--border-radius);\n\t\tbackground-color: var(--color-main-background);\n\t\tbox-shadow: 0 1px 5px var(--color-box-shadow);\n\t\toverflow: auto;\n\n\t\tmin-width: 200px;\n\t\tmax-width: 200px;\n\t\tpadding: 4px;\n\t\t// Show maximum 5 entries and a half to show scroll\n\t\tmax-height: 35.5px * 5 + 18px;\n\t\tmargin: 5px 0;\n\n\t\t&__item {\n\t\t\tborder-radius: 8px;\n\t\t\tpadding: 4px 8px;\n\t\t\tmargin-bottom: 4px;\n\t\t\topacity: 0.8;\n\t\t\tcursor: pointer;\n\n\t\t\t// Take care of long names\n\t\t\twhite-space: nowrap;\n\t\t\toverflow: hidden;\n\t\t\ttext-overflow: ellipsis;\n\n\t\t\t&:last-child {\n\t\t\t\tmargin-bottom: 0;\n\t\t\t}\n\n\t\t\t&__emoji {\n\t\t\t\tpadding-right: 8px;\n\t\t\t}\n\n\t\t\t&.is-selected,\n\t\t\t&:focus,\n\t\t\t&:hover {\n\t\t\t\topacity: 1;\n\t\t\t\tbackground-color: var(--color-primary-element-light);\n\t\t\t}\n\t\t}\n\t}\n</style>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EmojiList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EmojiList.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EmojiList.vue?vue&type=style&index=0&id=74f9a54a&prod&scoped=true&lang=scss&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EmojiList.vue?vue&type=style&index=0&id=74f9a54a&prod&scoped=true&lang=scss&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./EmojiList.vue?vue&type=template&id=74f9a54a&scoped=true&\"\nimport script from \"./EmojiList.vue?vue&type=script&lang=js&\"\nexport * from \"./EmojiList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EmojiList.vue?vue&type=style&index=0&id=74f9a54a&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"74f9a54a\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"emoji-list\"},[(_vm.hasResults)?_vm._l((_vm.items),function(emojiObject,index){return _c('div',{key:index,staticClass:\"emoji-list__item\",class:{ 'is-selected': index === _vm.selectedIndex },on:{\"click\":function($event){return _vm.selectItem(index)}}},[_c('span',{staticClass:\"emoji-list__item__emoji\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(emojiObject.native)+\"\\n\\t\\t\\t\")]),_vm._v(\"\\n\\t\\t\\t:\"+_vm._s(emojiObject.short_name)+\"\\n\\t\\t\")])}):_c('div',{staticClass:\"emoji-list__item is-empty\"},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('text', 'No emoji found'))+\"\\n\\t\")])],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { mergeAttributes } from '@tiptap/core'\nimport TiptapCodeBlock from '@tiptap/extension-code-block'\n\nconst FrontMatter = TiptapCodeBlock.extend({\n\tname: 'frontMatter',\n\t// FrontMatter are only valid at the begin of a document\n\tdraggable: false,\n\n\trenderHTML({ node, HTMLAttributes }) {\n\t\treturn this.parent({\n\t\t\tnode,\n\t\t\tHTMLAttributes:\n\t\t\tmergeAttributes(HTMLAttributes, { 'data-title': t('text', 'Front matter'), class: 'frontmatter' }),\n\t\t})\n\t},\n\tparseHTML() {\n\t\treturn [{\n\t\t\ttag: 'pre#frontmatter',\n\t\t\tpreserveWhitespace: 'full',\n\t\t\tpriority: 9001,\n\t\t\tattrs: {\n\t\t\t\tlanguage: 'yaml',\n\t\t\t},\n\t\t}]\n\t},\n\ttoMarkdown: (state, node) => {\n\t\tif (!state.out.match(/^\\s*/)) throw Error('FrontMatter must be the first node of the document!')\n\t\tconst text = node.textContent\n\t\t// Make sure the front matter fences are longer than any dash sequence within it\n\t\tconst dashes = text.match(/-{3,}/gm)\n\t\tconst separator = dashes ? (dashes.sort().slice(-1)[0] + '-') : '---'\n\n\t\tstate.write('')\n\t\tstate.out = ''\n\t\tstate.write(`${separator}\\n`)\n\t\tstate.text(text, false)\n\t\tstate.ensureNewLine()\n\t\tstate.write(separator)\n\t\tstate.closeBlock(node)\n\t},\n\n\t// Allow users to add a FrontMatter, but only at the beginning of the document\n\taddInputRules() {\n\t\treturn [\n\t\t\t{\n\t\t\t\tfind: /^---$/g,\n\t\t\t\thandler: ({ state, range, chain }) => {\n\t\t\t\t\tif (range.from === 1) {\n\t\t\t\t\t\tif (state.doc.resolve(1).parent.type.name === this.name) return false\n\t\t\t\t\t\tchain()\n\t\t\t\t\t\t\t.deleteRange(range)\n\t\t\t\t\t\t\t.insertContentAt(0, {\n\t\t\t\t\t\t\t\ttype: this.name,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\treturn true\n\t\t\t\t\t}\n\t\t\t\t\treturn false\n\t\t\t\t},\n\t\t\t},\n\t\t]\n\t},\n\n\t// Override rules from Codeblock\n\taddCommands() {\n\t\treturn {}\n\t},\n\taddPasteRules: () => [],\n\taddProseMirrorPlugins: () => [],\n})\n\nexport default FrontMatter\n","/*\n * @copyright Copyright (c) 2022 Julius Hrtl <jus@bitgrid.net>\n *\n * @author Julius Hrtl <jus@bitgrid.net>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n*/\n\nimport TipTapHardBreak from '@tiptap/extension-hard-break'\n\nconst HardBreak = TipTapHardBreak.extend({\n\taddAttributes() {\n\t\treturn {\n\t\t\tsyntax: {\n\t\t\t\tdefault: '  ',\n\t\t\t\trendered: false,\n\t\t\t\tkeepOnSplit: true,\n\t\t\t\tparseHTML: (el) => el.getAttribute('data-syntax') || '  ',\n\t\t\t},\n\t\t}\n\t},\n\n\taddCommands() {\n\t\treturn {\n\t\t\t...this?.parent(),\n\t\t\tsetHardBreak: () => (ctx) => {\n\t\t\t\t// Prevent hard breaks within headings\n\t\t\t\tfor (let d = ctx.state.selection.$from.depth; d >= 0; d--) {\n\t\t\t\t\tif (ctx.state.selection.$from.node(d).type.name === 'heading') return false\n\t\t\t\t}\n\t\t\t\treturn this.parent().setHardBreak()(ctx)\n\t\t\t},\n\t\t}\n\t},\n\n\ttoMarkdown(state, node, parent, index) {\n\t\tfor (let i = index + 1; i < parent.childCount; i++) {\n\t\t\tif (parent.child(i).type !== node.type) {\n\t\t\t\tif (node.attrs.syntax !== 'html') {\n\t\t\t\t\tstate.write(node.attrs.syntax)\n\t\t\t\t\tif (!parent.child(i).text?.startsWith('\\n')) state.write('\\n')\n\t\t\t\t} else {\n\t\t\t\t\tstate.write('<br />')\n\t\t\t\t}\n\t\t\t\treturn\n\t\t\t}\n\t\t}\n\t},\n})\n\nexport default HardBreak\n","import store from '../../store/index.js'\nimport { slugify } from './slug.js'\nimport { v4 as uuidv4 } from 'uuid'\n\nconst setHeadings = (val) => store.dispatch('text/setHeadings', val)\n\nconst extractHeadings = (editor) => {\n\tconst counter = new Map()\n\tconst headings = []\n\tconst tr = editor.state.tr\n\n\tconst getId = text => {\n\t\tconst id = slugify(text)\n\n\t\tif (counter.has(id)) {\n\t\t\tconst next = counter.get(id)\n\n\t\t\t// increment counter\n\t\t\tcounter.set(id, next + 1)\n\n\t\t\treturn `h-${id}--${next}`\n\t\t}\n\n\t\t// define counter\n\t\tcounter.set(id, 1)\n\n\t\treturn 'h-' + id\n\t}\n\n\teditor.state.doc.descendants((node, position) => {\n\t\tif (node.type.name === 'heading') {\n\t\t\tconst text = node.textContent\n\t\t\tconst id = getId(text)\n\t\t\tconst uuid = node.attrs.uuid ?? uuidv4()\n\n\t\t\tif (node.attrs.id !== id || !node.attrs.uuid) {\n\t\t\t\tconst attrs = {\n\t\t\t\t\t...node.attrs,\n\t\t\t\t\tuuid,\n\t\t\t\t\tid,\n\t\t\t\t}\n\n\t\t\t\ttr.setNodeMarkup(position, undefined, attrs)\n\t\t\t}\n\n\t\t\theadings.push(Object.freeze({\n\t\t\t\tlevel: node.attrs.level,\n\t\t\t\tposition,\n\t\t\t\ttext,\n\t\t\t\tid,\n\t\t\t\tuuid,\n\t\t\t}))\n\t\t}\n\t})\n\n\ttr.setMeta('addToHistory', false)\n\ttr.setMeta('preventUpdate', true)\n\n\teditor.view.dispatch(tr)\n\n\tsetHeadings(headings)\n}\n\nexport {\n\textractHeadings,\n\tsetHeadings,\n}\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('NodeViewWrapper',{ref:\"container\",attrs:{\"id\":_vm.node.attrs.id,\"as\":_vm.domElement}},[_c('a',{staticClass:\"heading-anchor\",attrs:{\"aria-hidden\":\"true\",\"href\":_vm.href,\"title\":_vm.t('text', 'Link to this section'),\"contenteditable\":false},on:{\"click\":function($event){$event.stopPropagation();return _vm.click.apply(null, arguments)}}},[_vm._v(_vm._s(_vm.linkSymbol))]),_vm._v(\" \"),_c('NodeViewContent',{attrs:{\"as\":\"span\"}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\n  - @copyright Copyright (c) 2022\n  -\n  - @license AGPL-3.0-or-later\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\n  -\n  -->\n\n<template>\n\t<NodeViewWrapper :id=\"node.attrs.id\"\n\t\tref=\"container\"\n\t\t:as=\"domElement\">\n\t\t<a aria-hidden=\"true\"\n\t\t\tclass=\"heading-anchor\"\n\t\t\t:href=\"href\"\n\t\t\t:title=\"t('text', 'Link to this section')\"\n\t\t\t:contenteditable=\"false\"\n\t\t\t@click.stop=\"click\">{{ linkSymbol }}</a>\n\t\t<NodeViewContent as=\"span\" />\n\t</NodeViewWrapper>\n</template>\n\n<script>\nimport { NodeViewWrapper, NodeViewContent } from '@tiptap/vue-2'\nimport { useEditorMixin } from '../../components/Editor.provider.js'\n\nexport default {\n\tname: 'HeadingView',\n\tcomponents: {\n\t\tNodeViewWrapper,\n\t\tNodeViewContent,\n\t},\n\tmixins: [useEditorMixin],\n\tprops: {\n\t\tnode: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\textension: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tcontent: null,\n\t\t}\n\t},\n\n\tcomputed: {\n\t\thref() {\n\t\t\treturn `#${this.node.attrs.id}`\n\t\t},\n\t\tdomElement() {\n\t\t\tconst hasLevel = this.extension.options.levels.includes(this.node.attrs.level)\n\t\t\tconst level = hasLevel ? this.node.attrs.level : this.extension.options.levels[0]\n\t\t\treturn `h${level}`\n\t\t},\n\t\tlinkSymbol() {\n\t\t\treturn this.extension.options.linkSymbol\n\t\t},\n\t},\n\n\tmethods: {\n\t\tclick() {\n\t\t\tthis.$refs.container.$el.scrollIntoView()\n\t\t\twindow.location.hash = this.href\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\">\ndiv.ProseMirror {\n\t/* Anchor links */\n\th1,h2,h3,h4,h5,h6 {\n\t\tposition: relative;\n\t\t.heading-anchor[contenteditable=\"false\"] {\n\t\t\t// Shrink clickable area of anchor permalinks to not overlay the heading\n\t\t\twidth: 1em;\n\t\t\topacity: 0;\n\t\t\tpadding: 0;\n\t\t\tleft: -1em;\n\t\t\tbottom: 0;\n\t\t\tfont-size: max(1em, 16px);\n\t\t\tposition: absolute;\n\t\t\ttext-decoration: none;\n\t\t\ttransition-duration: .15s;\n\t\t\ttransition-property: opacity;\n\t\t\ttransition-timing-function: cubic-bezier(.4,0,.2,1);\n\t\t}\n\n\t\t&:hover .heading-anchor {\n\t\t\topacity: 0.5!important;\n\t\t}\n\n\t\t&:focus-visible {\n\t\t\toutline: none;\n\t\t}\n\t}\n}\n</style>\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HeadingView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HeadingView.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HeadingView.vue?vue&type=style&index=0&id=4748dbe7&prod&lang=scss&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HeadingView.vue?vue&type=style&index=0&id=4748dbe7&prod&lang=scss&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./HeadingView.vue?vue&type=template&id=4748dbe7&\"\nimport script from \"./HeadingView.vue?vue&type=script&lang=js&\"\nexport * from \"./HeadingView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./HeadingView.vue?vue&type=style&index=0&id=4748dbe7&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import TipTapHeading from '@tiptap/extension-heading'\nimport { VueNodeViewRenderer } from '@tiptap/vue-2'\nimport debounce from 'debounce'\nimport { extractHeadings } from './extractor.js'\nimport HeaderViewVue from './HeadingView.vue'\n\nconst Heading = TipTapHeading.extend({\n\taddAttributes() {\n\t\treturn {\n\t\t\t...this.parent(),\n\t\t\tid: {\n\t\t\t\tdefault: undefined,\n\t\t\t\trendered: true,\n\t\t\t},\n\t\t\tuuid: {\n\t\t\t\tdefault: undefined,\n\t\t\t\trendered: false,\n\t\t\t},\n\t\t}\n\t},\n\n\taddOptions() {\n\t\treturn {\n\t\t\t...this.parent?.(),\n\t\t\tlinkSymbol: '#',\n\t\t}\n\t},\n\n\taddKeyboardShortcuts() {\n\t\treturn this.options.levels.reduce((items, level) => ({\n\t\t\t...items,\n\t\t\t[`Mod-Shift-${level}`]: () => this.editor.commands.toggleHeading({ level }),\n\t\t}), {})\n\t},\n\n\taddNodeView() {\n\t\treturn VueNodeViewRenderer(HeaderViewVue, {\n\t\t\tupdate: ({ oldNode, newNode, updateProps }) => {\n\t\t\t\tif (newNode.type.name !== this.name) return false\n\t\t\t\t// Make sure to redraw node as the vue renderer will not show the updated children\n\t\t\t\tif (newNode.attrs !== oldNode.attrs) return false\n\t\t\t\tupdateProps()\n\t\t\t\treturn true\n\t\t\t},\n\t\t})\n\t},\n\n\tonCreate() {\n\t\textractHeadings(this.editor)\n\n\t\tif (this.parent) {\n\t\t\tthis.parent()\n\t\t}\n\t},\n\n\tonUpdate: debounce(({ editor }) => {\n\t\tif (editor.view && editor.state && !editor.isDestroyed) {\n\t\t\t// Only run if editor still exists (prevent dangling debounced extractHeadings function)\n\t\t\textractHeadings(editor)\n\t\t}\n\t}, 900),\n\n})\n\nexport default Heading\n","<template>\n\t<NcModal v-if=\"show\"\n\t\tsize=\"large\"\n\t\t:name=\"currentImage.name\"\n\t\t:out-transition=\"true\"\n\t\t:has-next=\"true\"\n\t\t:has-previous=\"true\"\n\t\t:close-button-contained=\"false\"\n\t\t:dark=\"true\"\n\t\t@next=\"showNextImage\"\n\t\t@previous=\"showPreviousImage\"\n\t\t@close=\"$emit('close')\">\n\t\t<div class=\"modal__content\">\n\t\t\t<img :src=\"currentImage.previewUrl\">\n\t\t</div>\n\t</NcModal>\n</template>\n\n<script>\nimport { NcModal } from '@nextcloud/vue'\n\nexport default {\n\tname: 'ShowImageModal',\n\tcomponents: {\n\t\tNcModal,\n\t},\n\tprops: {\n\t\timages: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tstartIndex: {\n\t\t\ttype: Number,\n\t\t\tdefault: 0,\n\t\t},\n\t\tshow: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tcurrentImageIndex: 0,\n\t\t}\n\t},\n\tcomputed: {\n\t\tcurrentImage() {\n\t\t\treturn this.images[this.currentImageIndex]\n\t\t},\n\t},\n\twatch: {\n\t\t'startIndex'(val) {\n\t\t\tthis.currentImageIndex = val\n\t\t},\n\t},\n\tmethods: {\n\t\tshowNextImage() {\n\t\t\tthis.currentImageIndex = (this.currentImageIndex + 1) % this.images.length\n\t\t},\n\t\tshowPreviousImage() {\n\t\t\tthis.currentImageIndex = this.currentImageIndex <= 0\n\t\t\t\t? this.images.length - 1\n\t\t\t\t: this.currentImageIndex - 1\n\t\t},\n\t},\n}\n</script>\n\n<style scoped lang=\"scss\">\n.modal__content {\n\theight: 80vh;\n\tpadding: 0 50px;\n\tdisplay: flex;\n\tjustify-content: center;\n\timg {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tobject-fit: contain;\n\t}\n}\n</style>\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ShowImageModal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ShowImageModal.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ShowImageModal.vue?vue&type=style&index=0&id=403f8ff2&prod&scoped=true&lang=scss&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ShowImageModal.vue?vue&type=style&index=0&id=403f8ff2&prod&scoped=true&lang=scss&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./ShowImageModal.vue?vue&type=template&id=403f8ff2&scoped=true&\"\nimport script from \"./ShowImageModal.vue?vue&type=script&lang=js&\"\nexport * from \"./ShowImageModal.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ShowImageModal.vue?vue&type=style&index=0&id=403f8ff2&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"403f8ff2\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.show)?_c('NcModal',{attrs:{\"size\":\"large\",\"name\":_vm.currentImage.name,\"out-transition\":true,\"has-next\":true,\"has-previous\":true,\"close-button-contained\":false,\"dark\":true},on:{\"next\":_vm.showNextImage,\"previous\":_vm.showPreviousImage,\"close\":function($event){return _vm.$emit('close')}}},[_c('div',{staticClass:\"modal__content\"},[_c('img',{attrs:{\"src\":_vm.currentImage.previewUrl}})])]):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\n  - @copyright Copyright (c) 2019 Julius Hrtl <jus@bitgrid.net>\n  -\n  - @author Julius Hrtl <jus@bitgrid.net>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\n  -\n  -->\n\n<template>\n\t<NodeViewWrapper :contenteditable=\"isEditable\">\n\t\t<figure class=\"image image-view\"\n\t\t\tdata-component=\"image-view\"\n\t\t\t:data-attachment-type=\"attachmentType\"\n\t\t\t:class=\"{'icon-loading': !loaded, 'image-view--failed': failed}\"\n\t\t\t:data-src=\"src\">\n\t\t\t<div v-if=\"canDisplayImage\"\n\t\t\t\tv-click-outside=\"() => showIcons = false\"\n\t\t\t\tclass=\"image__view\"\n\t\t\t\t@mouseover=\"showIcons = true\"\n\t\t\t\t@mouseleave=\"showIcons = false\">\n\t\t\t\t<transition name=\"fade\">\n\t\t\t\t\t<template v-if=\"!failed\">\n\t\t\t\t\t\t<div v-if=\"isMediaAttachment\"\n\t\t\t\t\t\t\tcontenteditable=\"false\"\n\t\t\t\t\t\t\tclass=\"media\"\n\t\t\t\t\t\t\t@click=\"handleAttachmentClick\">\n\t\t\t\t\t\t\t<div class=\"media__wrapper\">\n\t\t\t\t\t\t\t\t<img v-show=\"loaded\"\n\t\t\t\t\t\t\t\t\t:src=\"imageUrl\"\n\t\t\t\t\t\t\t\t\tclass=\"image__main\"\n\t\t\t\t\t\t\t\t\t@load=\"onLoaded\">\n\t\t\t\t\t\t\t\t<div class=\"metadata\">\n\t\t\t\t\t\t\t\t\t<span class=\"name\">{{ alt }}</span>\n\t\t\t\t\t\t\t\t\t<span class=\"size\">{{ attachmentSize }}</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div v-if=\"showDeleteIcon\"\n\t\t\t\t\t\t\t\tclass=\"buttons\">\n\t\t\t\t\t\t\t\t<NcButton :aria-label=\"t('text', 'Delete this attachment')\"\n\t\t\t\t\t\t\t\t\t:title=\"t('text', 'Delete this attachment')\"\n\t\t\t\t\t\t\t\t\t@click=\"onDelete\">\n\t\t\t\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t\t\t\t<DeleteIcon />\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t</NcButton>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div v-else contenteditable=\"false\">\n\t\t\t\t\t\t\t<img v-show=\"loaded\"\n\t\t\t\t\t\t\t\t:src=\"imageUrl\"\n\t\t\t\t\t\t\t\tclass=\"image__main\"\n\t\t\t\t\t\t\t\t@click=\"handleImageClick\"\n\t\t\t\t\t\t\t\t@load=\"onLoaded\">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t<ImageIcon class=\"image__main image__main--broken-icon\" :size=\"100\" />\n\t\t\t\t\t</template>\n\t\t\t\t</transition>\n\t\t\t\t<transition name=\"fade\">\n\t\t\t\t\t<div v-if=\"!isMediaAttachment\"\n\t\t\t\t\t\tv-show=\"loaded\"\n\t\t\t\t\t\tclass=\"image__caption\"\n\t\t\t\t\t\t:title=\"alt\">\n\t\t\t\t\t\t<figcaption v-if=\"!isEditable\">\n\t\t\t\t\t\t\t{{ alt }}\n\t\t\t\t\t\t</figcaption>\n\t\t\t\t\t\t<div v-else class=\"image__caption__wrapper\">\n\t\t\t\t\t\t\t<input v-show=\"!isMediaAttachment\"\n\t\t\t\t\t\t\t\tref=\"altInput\"\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tclass=\"image__caption__input\"\n\t\t\t\t\t\t\t\t:value=\"alt\"\n\t\t\t\t\t\t\t\t@blur=\"updateAlt\"\n\t\t\t\t\t\t\t\t@keyup=\"updateAlt\">\n\t\t\t\t\t\t\t<div v-if=\"showImageDeleteIcon\"\n\t\t\t\t\t\t\t\tcontenteditable=\"false\"\n\t\t\t\t\t\t\t\tclass=\"image__caption__delete\">\n\t\t\t\t\t\t\t\t<NcButton :aria-label=\"t('text', 'Delete this image')\"\n\t\t\t\t\t\t\t\t\t:title=\"t('text', 'Delete this image')\"\n\t\t\t\t\t\t\t\t\t@click=\"onDelete\">\n\t\t\t\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t\t\t\t<DeleteIcon />\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t</NcButton>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</transition>\n\t\t\t\t<div class=\"image__modal\">\n\t\t\t\t\t<ShowImageModal :images=\"embeddedImageList\"\n\t\t\t\t\t\t:start-index=\"imageIndex\"\n\t\t\t\t\t\t:show=\"showImageModal\"\n\t\t\t\t\t\t@close=\"showImageModal=false\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div v-else class=\"image-view__cant_display\">\n\t\t\t\t<transition name=\"fade\">\n\t\t\t\t\t<div v-show=\"loaded\" class=\"image__caption\">\n\t\t\t\t\t\t<input ref=\"altInput\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t:value=\"alt\"\n\t\t\t\t\t\t\t:disabled=\"!isEditable\"\n\t\t\t\t\t\t\t@blur=\"updateAlt\"\n\t\t\t\t\t\t\t@keyup.enter=\"updateAlt\">\n\t\t\t\t\t</div>\n\t\t\t\t</transition>\n\t\t\t</div>\n\t\t\t<small v-if=\"errorMessage\" class=\"image__error-message\">\n\t\t\t\t{{ errorMessage }}\n\t\t\t</small>\n\t\t</figure>\n\t</NodeViewWrapper>\n</template>\n\n<script>\nimport ClickOutside from 'vue-click-outside'\nimport { mapGetters } from 'vuex'\nimport { NcButton } from '@nextcloud/vue'\nimport { showError } from '@nextcloud/dialogs'\nimport ShowImageModal from '../components/ImageView/ShowImageModal.vue'\nimport store from '../mixins/store.js'\nimport { useAttachmentResolver } from '../components/Editor.provider.js'\nimport { emit } from '@nextcloud/event-bus'\nimport { NodeViewWrapper } from '@tiptap/vue-2'\nimport { Image as ImageIcon, Delete as DeleteIcon } from '../components/icons.js'\n\nclass LoadImageError extends Error {\n\n\tconstructor(reason, imageUrl) {\n\t\tsuper(reason?.message || t('text', 'Failed to load'))\n\t\tthis.reason = reason\n\t\tthis.imageUrl = imageUrl\n\t}\n\n}\n\nexport default {\n\tname: 'ImageView',\n\tcomponents: {\n\t\tImageIcon,\n\t\tDeleteIcon,\n\t\tNcButton,\n\t\tShowImageModal,\n\t\tNodeViewWrapper,\n\t},\n\tdirectives: {\n\t\tClickOutside,\n\t},\n\tmixins: [\n\t\tstore,\n\t\tuseAttachmentResolver,\n\t],\n\tprops: ['editor', 'node', 'extension', 'updateAttributes', 'deleteNode'], // eslint-disable-line\n\tdata() {\n\t\treturn {\n\t\t\tattachment: null,\n\t\t\timageLoaded: false,\n\t\t\tloaded: false,\n\t\t\tfailed: false,\n\t\t\tshowIcons: false,\n\t\t\timageUrl: null,\n\t\t\terrorMessage: null,\n\t\t\tattachmentSize: null,\n\t\t\tshowImageModal: false,\n\t\t\timageIndex: null,\n\t\t\tisEditable: false,\n\t\t\tembeddedImageList: [],\n\t\t}\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\timageAttachments: 'text/imageAttachments',\n\t\t}),\n\t\tattachmentType() {\n\t\t\tif (this.attachment) {\n\t\t\t\treturn this.attachment.isImage ? 'image' : 'media'\n\t\t\t} else {\n\t\t\t\treturn null\n\t\t\t}\n\t\t},\n\t\tisMediaAttachment() {\n\t\t\treturn this.attachmentType === 'media'\n\t\t},\n\t\tshowDeleteIcon() {\n\t\t\treturn this.isEditable && this.showIcons\n\t\t},\n\t\tshowImageDeleteIcon() {\n\t\t\treturn this.showDeleteIcon && !this.isMediaAttachment\n\t\t},\n\t\tcanDisplayImage() {\n\t\t\tif (this.failed && this.loaded) {\n\t\t\t\treturn true\n\t\t\t}\n\n\t\t\treturn this.loaded && this.imageLoaded\n\t\t},\n\t\tsrc: {\n\t\t\tget() {\n\t\t\t\treturn this.node.attrs.src || ''\n\t\t\t},\n\t\t\tset(src) {\n\t\t\t\tthis.updateAttributes({\n\t\t\t\t\tsrc,\n\t\t\t\t})\n\t\t\t},\n\t\t},\n\t\talt: {\n\t\t\tget() {\n\t\t\t\treturn this.node.attrs.alt ? this.node.attrs.alt : ''\n\t\t\t},\n\t\t\tset(alt) {\n\t\t\t\tthis.updateAttributes({\n\t\t\t\t\talt,\n\t\t\t\t})\n\t\t\t},\n\t\t},\n\t},\n\tbeforeMount() {\n\t\tthis.isEditable = this.editor.isEditable\n\t\tthis.editor.on('update', ({ editor }) => {\n\t\t\tthis.isEditable = editor.isEditable\n\t\t})\n\t\tthis.loadPreview()\n\t\t\t.catch(this.onImageLoadFailure)\n\t},\n\tmethods: {\n\t\tasync loadPreview() {\n\t\t\tthis.attachment = await this.$attachmentResolver.resolve(this.src)\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tconst img = new Image()\n\t\t\t\timg.onload = async () => {\n\t\t\t\t\tthis.imageUrl = this.attachment.previewUrl\n\t\t\t\t\tthis.imageLoaded = true\n\t\t\t\t\tthis.loaded = true\n\t\t\t\t\tthis.attachmentSize = this.attachment.size\n\t\t\t\t}\n\t\t\t\timg.onerror = (e) => {\n\t\t\t\t\treject(new LoadImageError(e, this.attachment.previewUrl))\n\t\t\t\t}\n\t\t\t\timg.src = this.attachment.previewUrl\n\t\t\t})\n\t\t},\n\t\tonImageLoadFailure(err) {\n\t\t\tthis.failed = true\n\t\t\tthis.imageLoaded = false\n\t\t\tthis.loaded = true\n\t\t\tthis.errorMessage = err.message\n\n\t\t\tif (err instanceof LoadImageError) {\n\t\t\t\tthis.errorMessage = `${this.errorMessage} ${this.src}`\n\t\t\t}\n\n\t\t\tthis.$emit('error', { error: err, src: this.src })\n\t\t},\n\t\tupdateAlt(event) {\n\t\t\tthis.updateAttributes({\n\t\t\t\talt: event.target.value,\n\t\t\t})\n\t\t},\n\t\tonLoaded() {\n\t\t\tthis.loaded = true\n\t\t},\n\t\tasync updateEmbeddedImageList() {\n\t\t\tthis.embeddedImageList = []\n\t\t\t// Get all images that succeeded to load\n\t\t\tconst imageViews = Array.from(document.querySelectorAll('figure[data-component=\"image-view\"][data-attachment-type=\"image\"]:not(.image-view--failed).image-view'))\n\t\t\tfor (const imgv of imageViews) {\n\t\t\t\tconst src = imgv.getAttribute('data-src')\n\t\t\t\tif (!this.embeddedImageList.find(i => i.src === src)) {\n\t\t\t\t\t// Don't add duplicates (e.g. when several editors are loaded in HTML document)\n\t\t\t\t\tconst attachment = await this.$attachmentResolver.resolve(imgv.getAttribute('data-src'))\n\t\t\t\t\tthis.embeddedImageList.push({\n\t\t\t\t\t\tsrc,\n\t\t\t\t\t\t...attachment,\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\thandleAttachmentClick() {\n\t\t\t// Open in viewer if possible\n\t\t\tif (OCA.Viewer\n\t\t\t\t// Viewer is not in use\n\t\t\t\t&& !OCA.Viewer.file\n\t\t\t\t// Viewer supports mimetype\n\t\t\t\t&& OCA.Viewer.mimetypes.indexOf(this.attachment.mimetype) !== -1\n\t\t\t\t// Attachment has davPath, i.e. is native attachment and not in public share\n\t\t\t\t//  (in public share we probably don't have DAV access)\n\t\t\t\t&& this.attachment.davPath) {\n\t\t\t\t// Viewer exists, is not in use and supports mimetype\n\t\t\t\tOCA.Viewer.open({ path: this.attachment.davPath })\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t// Download file\n\t\t\twindow.location.assign(this.attachment.fullUrl)\n\t\t},\n\t\tasync handleImageClick() {\n\t\t\tawait this.updateEmbeddedImageList()\n\t\t\tthis.imageIndex = this.embeddedImageList.findIndex(i => (i.src === this.src))\n\t\t\tif (this.imageIndex !== -1) {\n\t\t\t\tthis.showImageModal = true\n\t\t\t} else {\n\t\t\t\tconsole.error('Could not find image in attachments list', this.attachment)\n\t\t\t\tshowError(t('text', 'Could not find image in attachments list.'))\n\t\t\t}\n\t\t},\n\t\tonDelete() {\n\t\t\temit('text:image-node:delete', this.imageUrl)\n\t\t\tthis.deleteNode()\n\t\t},\n\t},\n}\n</script>\n\n<style scoped lang=\"scss\">\n.image {\n\tmargin: 0;\n\tpadding: 0;\n\n\t&, * {\n\t\t-webkit-user-modify: read-only !important;\n\t}\n}\n\n.image__caption {\n\ttext-align: center;\n\tcolor: var(--color-text-lighter);\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\t&__wrapper {\n\t\tposition: relative;\n\t}\n\t&__delete {\n\t\tdisplay: flex;\n\t\tflex-basis: 20%;\n\t\talign-items: center;\n\t\twidth: 20px !important;\n\t\theight: 20px;\n\t\tposition: absolute;\n\t\tbottom: -1px;\n\t\tright: -3px;\n\t\t&, svg {\n\t\t\tcursor: pointer;\n\t\t}\n\t}\n\t.image__caption__wrapper {\n\t\tflex-basis: 80%;\n\t}\n\tinput[type='text'] {\n\t\twidth: 85%;\n\t\ttext-align: center;\n\t\tbackground-color: transparent;\n\t\tborder: none !important;\n\t\tcolor: var(--color-text-maxcontrast) !important;\n\n\t\t&:focus {\n\t\t\tborder: 2px solid var(--color-border-dark) !important;\n\t\t\tcolor: var(--color-main-text) !important;\n\t\t}\n\t}\n\tfigcaption {\n\t\tcolor: var(--color-text-maxcontrast) !important;\n\t\tmax-width: 80%;\n\t\ttext-align: center;\n\t\twidth: fit-content;\n\t}\n}\n\n.image__loading {\n\theight: 100px;\n}\n\n.image__main {\n\tmax-height: calc(100vh - 50px - 50px);\n}\n\n.image__main--broken-icon, .image__error-message {\n\tcolor: var(--color-text-maxcontrast);\n}\n\n.image__error-message {\n\tdisplay: block;\n\ttext-align: center;\n}\n\n.image__view {\n\ttext-align: center;\n\tposition: relative;\n\n\timg {\n\t\tmax-width: 100%;\n\t}\n\n\t&:hover {\n\t\tinput[type='text'] {\n\t\t\tborder: 2px solid var(--color-border-dark) !important;\n\t\t\tcolor: var(--color-main-text) !important;\n\t\t}\n\t}\n}\n\n.media {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: left;\n\t.media__wrapper {\n\t\tdisplay: flex;\n\t\tborder: 2px solid var(--color-border);\n\t\tborder-radius: var(--border-radius-large);\n\t\tpadding: 8px;\n\n\t\timg {\n\t\t\twidth: 44px;\n\t\t\theight: 44px;\n\t\t}\n\n\t\t.metadata {\n\t\t\tmargin-left: 8px;\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\talign-items: start;\n\n\t\t\tspan {\n\t\t\t\tline-height: 20px;\n\t\t\t\tfont-weight: normal;\n\n\t\t\t\t&.size {\n\t\t\t\t\tcolor: var(--color-text-maxcontrast);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t.buttons {\n\t\tmargin-left: 8px;\n\t}\n}\n\n.fade-enter-active {\n\ttransition: opacity .3s ease-in-out;\n}\n\n.fade-enter-to {\n\topacity: 1;\n}\n\n.fade-enter {\n\topacity: 0;\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImageView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImageView.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImageView.vue?vue&type=style&index=0&id=58f97ef1&prod&scoped=true&lang=scss&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImageView.vue?vue&type=style&index=0&id=58f97ef1&prod&scoped=true&lang=scss&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./ImageView.vue?vue&type=template&id=58f97ef1&scoped=true&\"\nimport script from \"./ImageView.vue?vue&type=script&lang=js&\"\nexport * from \"./ImageView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ImageView.vue?vue&type=style&index=0&id=58f97ef1&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"58f97ef1\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('NodeViewWrapper',{attrs:{\"contenteditable\":_vm.isEditable}},[_c('figure',{staticClass:\"image image-view\",class:{'icon-loading': !_vm.loaded, 'image-view--failed': _vm.failed},attrs:{\"data-component\":\"image-view\",\"data-attachment-type\":_vm.attachmentType,\"data-src\":_vm.src}},[(_vm.canDisplayImage)?_c('div',{directives:[{name:\"click-outside\",rawName:\"v-click-outside\",value:(() => _vm.showIcons = false),expression:\"() => showIcons = false\"}],staticClass:\"image__view\",on:{\"mouseover\":function($event){_vm.showIcons = true},\"mouseleave\":function($event){_vm.showIcons = false}}},[_c('transition',{attrs:{\"name\":\"fade\"}},[(!_vm.failed)?[(_vm.isMediaAttachment)?_c('div',{staticClass:\"media\",attrs:{\"contenteditable\":\"false\"},on:{\"click\":_vm.handleAttachmentClick}},[_c('div',{staticClass:\"media__wrapper\"},[_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loaded),expression:\"loaded\"}],staticClass:\"image__main\",attrs:{\"src\":_vm.imageUrl},on:{\"load\":_vm.onLoaded}}),_vm._v(\" \"),_c('div',{staticClass:\"metadata\"},[_c('span',{staticClass:\"name\"},[_vm._v(_vm._s(_vm.alt))]),_vm._v(\" \"),_c('span',{staticClass:\"size\"},[_vm._v(_vm._s(_vm.attachmentSize))])])]),_vm._v(\" \"),(_vm.showDeleteIcon)?_c('div',{staticClass:\"buttons\"},[_c('NcButton',{attrs:{\"aria-label\":_vm.t('text', 'Delete this attachment'),\"title\":_vm.t('text', 'Delete this attachment')},on:{\"click\":_vm.onDelete},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('DeleteIcon')]},proxy:true}],null,false,3930079857)})],1):_vm._e()]):_c('div',{attrs:{\"contenteditable\":\"false\"}},[_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loaded),expression:\"loaded\"}],staticClass:\"image__main\",attrs:{\"src\":_vm.imageUrl},on:{\"click\":_vm.handleImageClick,\"load\":_vm.onLoaded}})])]:[_c('ImageIcon',{staticClass:\"image__main image__main--broken-icon\",attrs:{\"size\":100}})]],2),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"fade\"}},[(!_vm.isMediaAttachment)?_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loaded),expression:\"loaded\"}],staticClass:\"image__caption\",attrs:{\"title\":_vm.alt}},[(!_vm.isEditable)?_c('figcaption',[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.alt)+\"\\n\\t\\t\\t\\t\\t\")]):_c('div',{staticClass:\"image__caption__wrapper\"},[_c('input',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isMediaAttachment),expression:\"!isMediaAttachment\"}],ref:\"altInput\",staticClass:\"image__caption__input\",attrs:{\"type\":\"text\"},domProps:{\"value\":_vm.alt},on:{\"blur\":_vm.updateAlt,\"keyup\":_vm.updateAlt}}),_vm._v(\" \"),(_vm.showImageDeleteIcon)?_c('div',{staticClass:\"image__caption__delete\",attrs:{\"contenteditable\":\"false\"}},[_c('NcButton',{attrs:{\"aria-label\":_vm.t('text', 'Delete this image'),\"title\":_vm.t('text', 'Delete this image')},on:{\"click\":_vm.onDelete},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('DeleteIcon')]},proxy:true}],null,false,3930079857)})],1):_vm._e()])]):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"image__modal\"},[_c('ShowImageModal',{attrs:{\"images\":_vm.embeddedImageList,\"start-index\":_vm.imageIndex,\"show\":_vm.showImageModal},on:{\"close\":function($event){_vm.showImageModal=false}}})],1)],1):_c('div',{staticClass:\"image-view__cant_display\"},[_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loaded),expression:\"loaded\"}],staticClass:\"image__caption\"},[_c('input',{ref:\"altInput\",attrs:{\"type\":\"text\",\"disabled\":!_vm.isEditable},domProps:{\"value\":_vm.alt},on:{\"blur\":_vm.updateAlt,\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.updateAlt.apply(null, arguments)}}})])])],1),_vm._v(\" \"),(_vm.errorMessage)?_c('small',{staticClass:\"image__error-message\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.errorMessage)+\"\\n\\t\\t\")]):_vm._e()])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/*\n * @copyright Copyright (c) 2019 Julius Hrtl <jus@bitgrid.net>\n *\n * @author Julius Hrtl <jus@bitgrid.net>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport TiptapImage from '@tiptap/extension-image'\nimport { Plugin } from '@tiptap/pm/state'\nimport ImageView from './ImageView.vue'\nimport { VueNodeViewRenderer } from '@tiptap/vue-2'\nimport { defaultMarkdownSerializer } from '@tiptap/pm/markdown'\n\nconst Image = TiptapImage.extend({\n\n\tselectable: false,\n\n\tparseHTML() {\n\t\treturn [\n\t\t\t{\n\t\t\t\ttag: this.options.allowBase64\n\t\t\t\t\t? 'figure img[src]'\n\t\t\t\t\t: 'figure img[src]:not([src^=\"data:\"])',\n\t\t\t},\n\t\t]\n\t},\n\n\trenderHTML() {\n\t\t// Avoid the prosemirror node creation to trigger image loading as we use a custom node view anyways\n\t\t// Otherwise it would attempt to load the image from the current location before the node view is even initialized\n\t\treturn ['img']\n\t},\n\n\taddOptions() {\n\t\treturn {\n\t\t\t...this.parent?.(),\n\t\t}\n\t},\n\n\taddNodeView() {\n\t\treturn VueNodeViewRenderer(ImageView)\n\t},\n\n\taddProseMirrorPlugins() {\n\t\treturn [\n\t\t\tnew Plugin({\n\t\t\t\tprops: {\n\t\t\t\t\thandleDrop: (view, event, slice) => {\n\t\t\t\t\t\t// only catch the drop if it contains files\n\t\t\t\t\t\tif (event.dataTransfer.files && event.dataTransfer.files.length > 0) {\n\t\t\t\t\t\t\tconst coordinates = view.posAtCoords({ left: event.clientX, top: event.clientY })\n\t\t\t\t\t\t\tconst customEvent = new CustomEvent('file-drop', {\n\t\t\t\t\t\t\t\tbubbles: true,\n\t\t\t\t\t\t\t\tdetail: {\n\t\t\t\t\t\t\t\t\tfiles: event.dataTransfer.files,\n\t\t\t\t\t\t\t\t\tposition: coordinates.pos,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\tevent.target.dispatchEvent(customEvent)\n\t\t\t\t\t\t\treturn true\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\thandlePaste: (view, event, slice) => {\n\t\t\t\t\t\t// only catch the paste if it contains files\n\t\t\t\t\t\tif (event.clipboardData.files && event.clipboardData.files.length > 0) {\n\t\t\t\t\t\t\t// let the editor wrapper catch this custom event\n\t\t\t\t\t\t\tconst customEvent = new CustomEvent('image-paste', {\n\t\t\t\t\t\t\t\tbubbles: true,\n\t\t\t\t\t\t\t\tdetail: {\n\t\t\t\t\t\t\t\t\tfiles: event.clipboardData.files,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\tevent.target.dispatchEvent(customEvent)\n\t\t\t\t\t\t\treturn true\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t}),\n\t\t]\n\t},\n\n\t/* Serializes an image node as a block image, so it ensures an image is always a block by itself */\n\ttoMarkdown(state, node, parent, index) {\n\t\tnode.attrs.alt = node.attrs.alt.toString()\n\t\tdefaultMarkdownSerializer.nodes.image(state, node, parent, index)\n\t\tstate.closeBlock(node)\n\t},\n})\n\nexport default Image\n","/*\n * @copyright Copyright (c) 2022 Jonas <jonas@freesources.org>\n *\n * @author Jonas <jonas@freesources.org>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport TiptapImage from '@tiptap/extension-image'\nimport ImageView from './ImageView.vue'\nimport { VueNodeViewRenderer } from '@tiptap/vue-2'\nimport { defaultMarkdownSerializer } from '@tiptap/pm/markdown'\n\n// Inline image extension. Needed if markdown contains inline images.\n// Not supported to be created from our UI (we default to block images).\nconst ImageInline = TiptapImage.extend({\n\tname: 'image-inline',\n\n\t// Lower priority than (block) Image extension\n\tpriority: 99,\n\n\tselectable: false,\n\n\tparseHTML() {\n\t\treturn [\n\t\t\t{\n\t\t\t\ttag: this.options.allowBase64\n\t\t\t\t\t? 'img[src]'\n\t\t\t\t\t: 'img[src]:not([src^=\"data:\"])',\n\t\t\t},\n\t\t]\n\t},\n\n\taddOptions() {\n\t\treturn {\n\t\t\t...this.parent?.(),\n\t\t\tinline: true,\n\t\t}\n\t},\n\n\t// Empty commands, we want only those from (block) Image extension\n\taddCommands() {\n\t\treturn {}\n\t},\n\n\t// Empty input rules, we want only those from (block) Image extension\n\taddInputRules() {\n\t\treturn []\n\t},\n\n\taddNodeView() {\n\t\treturn VueNodeViewRenderer(ImageView)\n\t},\n\n\ttoMarkdown(state, node, parent, index) {\n\t\treturn defaultMarkdownSerializer.nodes.image(state, node, parent, index)\n\t},\n})\n\nexport default ImageInline\n","import { Mark } from '@tiptap/core'\n\n/**\n * Keep markdown untouched\n */\nconst KeepSyntax = Mark.create({\n\tname: 'keep-syntax',\n\tparseHTML() {\n\t\treturn [\n\t\t\t{\n\t\t\t\ttag: 'span.keep-md',\n\t\t\t},\n\t\t]\n\t},\n\trenderHTML() {\n\t\treturn ['span', { class: 'keep-md' }, 0]\n\t},\n\ttoMarkdown: {\n\t\topen: '',\n\t\tclose: '',\n\t\tmixable: true,\n\t\tescape: false,\n\t\texpelEnclosingWhitespace: true,\n\t},\n\n\t/**\n\t * Remove mark if there were manual changes\n\t */\n\tonUpdate() {\n\t\tconst tr = this.editor.state.tr\n\n\t\tthis.editor.state.doc.descendants((node, pos, parent, index) => {\n\t\t\tif (node.marks.findIndex(mark => mark.type.name === this.name) !== -1) {\n\t\t\t\tif (node.type.name !== 'text' || node.text.length !== 1) {\n\t\t\t\t\ttr.removeMark(pos, pos + node.nodeSize, this.type)\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\tif (tr.docChanged) {\n\t\t\ttr.setMeta('addToHistory', false)\n\t\t\ttr.setMeta('preventUpdate', true)\n\t\t\tthis.editor.view.dispatch(tr)\n\t\t}\n\t},\n})\n\nexport default KeepSyntax\n","<!--\n  - @copyright Copyright (c) 2022 Julius Hrtl <jus@bitgrid.net>\n  -\n  - @author Julius Hrtl <jus@bitgrid.net>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\n  -->\n<template>\n\t<SuggestionListWrapper ref=\"suggestionList\"\n\t\t:command=\"command\"\n\t\t:items=\"items\"\n\t\t@select=\"(item) => $emit('select', item)\">\n\t\t<template #default=\"{ item }\">\n\t\t\t<div class=\"link-picker__item\" :data-key=\"item.key\">\n\t\t\t\t<compoent :is=\"item.icon\" v-if=\"typeof item.icon !== 'string'\" />\n\t\t\t\t<img v-else :src=\"item.icon\">\n\t\t\t\t<div>{{ item.label }}</div>\n\t\t\t</div>\n\t\t</template>\n\t\t<template #empty>\n\t\t\t{{ t('text', 'No command found') }}\n\t\t</template>\n\t</SuggestionListWrapper>\n</template>\n\n<script>\nimport SuggestionListWrapper from '../SuggestionListWrapper.vue'\n\nexport default {\n\tcomponents: {\n\t\tSuggestionListWrapper,\n\t},\n\tprops: {\n\t\titems: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tcommand: {\n\t\t\ttype: Function,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tmethods: {\n\t\tonKeyDown({ event }) {\n\t\t\t// Ignore any key modifier combinations\n\t\t\treturn this.$refs.suggestionList?.onKeyDown({ event })\n\t\t},\n\t},\n}\n</script>\n<style lang=\"scss\" scoped>\n.link-picker__item {\n\tdisplay: flex;\n\talign-items: center;\n\n\t& > div {\n\t\tpadding: 4px;\n\t\tpadding-left: 8px;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t}\n\n\timg {\n\t\twidth: 20px;\n\t\theight: 20px;\n\t\tfilter: var(--background-invert-if-dark);\n\t}\n}\n</style>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LinkPickerList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LinkPickerList.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LinkPickerList.vue?vue&type=style&index=0&id=11ad0ffc&prod&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LinkPickerList.vue?vue&type=style&index=0&id=11ad0ffc&prod&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./LinkPickerList.vue?vue&type=template&id=11ad0ffc&scoped=true&\"\nimport script from \"./LinkPickerList.vue?vue&type=script&lang=js&\"\nexport * from \"./LinkPickerList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./LinkPickerList.vue?vue&type=style&index=0&id=11ad0ffc&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"11ad0ffc\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('SuggestionListWrapper',{ref:\"suggestionList\",attrs:{\"command\":_vm.command,\"items\":_vm.items},on:{\"select\":(item) => _vm.$emit('select', item)},scopedSlots:_vm._u([{key:\"default\",fn:function({ item }){return [_c('div',{staticClass:\"link-picker__item\",attrs:{\"data-key\":item.key}},[(typeof item.icon !== 'string')?_c(item.icon,{tag:\"compoent\"}):_c('img',{attrs:{\"src\":item.icon}}),_vm._v(\" \"),_c('div',[_vm._v(_vm._s(item.label))])],1)]}},{key:\"empty\",fn:function(){return [_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('text', 'No command found'))+\"\\n\\t\")]},proxy:true}])})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/*\n * @copyright Copyright (c) 2022 Julius Hrtl <jus@bitgrid.net>\n *\n * @author Julius Hrtl <jus@bitgrid.net>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport createSuggestions from '../suggestions.js'\nimport LinkPickerList from './LinkPickerList.vue'\nimport { searchProvider, getLinkWithPicker } from '@nextcloud/vue/dist/Components/NcRichText.js'\nimport menuEntries from './../../Menu/entries.js'\nimport { getIsActive } from '../../Menu/utils.js'\n\nconst suggestGroupFormat = t('text', 'Formatting')\nconst suggestGroupPicker = t('text', 'Smart picker')\n\nconst filterOut = (e) => {\n\treturn ['undo', 'redo', 'outline', 'emoji-picker'].indexOf(e.key) > -1\n}\n\nconst important = ['task-list', 'table']\n\nconst sortImportantFirst = (list) => {\n\treturn [\n\t\t...list.filter(e => important.indexOf(e.key) > -1),\n\t\t...list.filter(e => important.indexOf(e.key) === -1),\n\t]\n}\n\nconst formattingSuggestions = (query) => {\n\treturn sortImportantFirst(\n\t\t[\n\t\t\t...menuEntries.find(e => e.key === 'headings').children,\n\t\t\t...menuEntries.filter(e => e.action && !filterOut(e)),\n\t\t\t...menuEntries.find(e => e.key === 'callouts').children,\n\t\t\t{\n\t\t\t\t...menuEntries.find(e => e.key === 'emoji-picker'),\n\t\t\t\taction: (command) => command.insertContent(':'),\n\t\t\t},\n\t\t].filter(e => e?.label?.toLowerCase?.()?.includes(query.toLowerCase()))\n\t\t\t.map(e => ({ ...e, suggestGroup: suggestGroupFormat })),\n\t)\n}\n\nexport default () => createSuggestions({\n\tlistComponent: LinkPickerList,\n\tcommand: ({ editor, range, props }) => {\n\t\tif (props.action) {\n\t\t\tconst commandChain = editor.chain().deleteRange(range)\n\t\t\tprops.action(commandChain)\n\t\t\tcommandChain.run()\n\t\t\treturn\n\t\t}\n\t\tgetLinkWithPicker(props.providerId, true)\n\t\t\t.then(link => {\n\t\t\t\teditor\n\t\t\t\t\t.chain()\n\t\t\t\t\t.focus()\n\t\t\t\t\t.insertContentAt(range, link + ' ')\n\t\t\t\t\t.run()\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tconsole.error('Smart picker promise rejected', error)\n\t\t\t})\n\t},\n\titems: ({ editor, query }) => {\n\t\treturn [\n\t\t\t...searchProvider(query)\n\t\t\t\t.map(p => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tsuggestGroup: suggestGroupPicker,\n\t\t\t\t\t\tlabel: p.title,\n\t\t\t\t\t\ticon: p.icon_url,\n\t\t\t\t\t\tproviderId: p.id,\n\t\t\t\t\t}\n\t\t\t\t}).filter(e => e?.label?.toLowerCase?.()?.includes(query.toLowerCase())),\n\t\t\t...formattingSuggestions(query)\n\t\t\t\t.filter(({ action, isActive }) => {\n\t\t\t\t\tconst canRunState = action(editor?.can())\n\t\t\t\t\tconst isActiveState = isActive && getIsActive({ isActive }, editor)\n\t\t\t\t\treturn canRunState && !isActiveState\n\t\t\t\t}),\n\t\t]\n\t},\n})\n","import { Extension } from '@tiptap/core'\nimport { Suggestion } from '@tiptap/suggestion'\nimport { PluginKey } from '@tiptap/pm/state'\nimport suggestions from '../components/Suggestion/LinkPicker/suggestions.js'\n\nexport const LinkPickerPluginKey = new PluginKey('linkPicker')\nexport default Extension.create({\n\n\tname: 'linkPicker',\n\n\taddOptions() {\n\t\treturn {\n\t\t\tsuggestion: {\n\t\t\t\tchar: '/',\n\t\t\t\tallowedPrefixes: [' '],\n\t\t\t\tpluginKey: LinkPickerPluginKey,\n\t\t\t\t...suggestions(),\n\t\t\t},\n\t\t}\n\t},\n\n\taddProseMirrorPlugins() {\n\t\treturn [\n\t\t\tSuggestion({\n\t\t\t\teditor: this.editor,\n\t\t\t\t...this.options.suggestion,\n\t\t\t}),\n\t\t]\n\t},\n})\n","<template>\n\t<NodeViewWrapper as=\"span\" class=\"mention\" contenteditable=\"false\">\n\t\t<NcUserBubble :user=\"node.attrs.id\"\n\t\t\t:display-name=\"username\"\n\t\t\t:primary=\"isCurrentUser\"\n\t\t\tclass=\"mention-user-bubble\">\n\t\t\t@{{ username }}\n\t\t</NcUserBubble>\n\t</NodeViewWrapper>\n</template>\n\n<script>\nimport { NcUserBubble } from '@nextcloud/vue'\nimport { NodeViewWrapper } from '@tiptap/vue-2'\nimport { getCurrentUser } from '@nextcloud/auth'\n\nexport default {\n\tname: 'Mention',\n\tcomponents: {\n\t\tNcUserBubble,\n\t\tNodeViewWrapper,\n\t},\n\tprops: {\n\t\tupdateAttributes: {\n\t\t\ttype: Function,\n\t\t\trequired: true,\n\t\t},\n\n\t\tnode: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tusername: this.node.attrs.label,\n\t\t}\n\t},\n\tcomputed: {\n\t\tisCurrentUser() {\n\t\t\treturn this.node.attrs.id === getCurrentUser()?.uid\n\t\t},\n\t},\n}\n</script>\n<style scoped>\n/* This is required to properly render the bubble text (which seems linke a browser bug) */\n.text-editor__wrapper div.ProseMirror .mention[contenteditable=false] :deep(*) {\n\t-webkit-user-modify: read-only !important;\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Mention.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Mention.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Mention.vue?vue&type=style&index=0&id=297bb5fa&prod&scoped=true&lang=css&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Mention.vue?vue&type=style&index=0&id=297bb5fa&prod&scoped=true&lang=css&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./Mention.vue?vue&type=template&id=297bb5fa&scoped=true&\"\nimport script from \"./Mention.vue?vue&type=script&lang=js&\"\nexport * from \"./Mention.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Mention.vue?vue&type=style&index=0&id=297bb5fa&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"297bb5fa\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('NodeViewWrapper',{staticClass:\"mention\",attrs:{\"as\":\"span\",\"contenteditable\":\"false\"}},[_c('NcUserBubble',{staticClass:\"mention-user-bubble\",attrs:{\"user\":_vm.node.attrs.id,\"display-name\":_vm.username,\"primary\":_vm.isCurrentUser}},[_vm._v(\"\\n\\t\\t@\"+_vm._s(_vm.username)+\"\\n\\t\")])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import TipTapMention from '@tiptap/extension-mention'\nimport Mention from './Mention.vue'\nimport { VueNodeViewRenderer } from '@tiptap/vue-2'\nimport { mergeAttributes } from '@tiptap/core'\n\nexport default TipTapMention.extend({\n\tparseHTML() {\n\t\treturn [\n\t\t\t{\n\t\t\t\ttag: 'span[data-type=\"user\"]',\n\t\t\t\tgetAttrs: element => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid: decodeURIComponent(element.getAttribute('data-id')),\n\t\t\t\t\t\tlabel: element.innerText || element.textContent || element.getAttribute('data-label'),\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tpriority: 100,\n\t\t\t},\n\t\t]\n\t},\n\n\trenderHTML({ node, HTMLAttributes }) {\n\t\treturn [\n\t\t\t'span',\n\t\t\tmergeAttributes({ 'data-type': 'user', class: 'mention' }, this.options.HTMLAttributes, HTMLAttributes),\n\t\t\tthis.options.renderLabel({\n\t\t\t\toptions: this.options,\n\t\t\t\tnode,\n\t\t\t}),\n\t\t]\n\t},\n\n\taddNodeView() {\n\t\treturn VueNodeViewRenderer(Mention)\n\t},\n\n\ttoMarkdown(state, node) {\n\t\tstate.write(' ')\n\t\tstate.write(`@[${node.attrs.label}](mention://user/${encodeURIComponent(node.attrs.id)})`)\n\t\tstate.write(' ')\n\t},\n})\n","<!--\n  - @copyright Copyright (c) 2019 Julius Hrtl <jus@bitgrid.net>\n  -\n  - @author Julius Hrtl <jus@bitgrid.net>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\n  -\n  -->\n\n<template>\n\t<NodeViewWrapper class=\"vue-component\" as=\"p\">\n\t\t<NodeViewContent class=\"paragraph-content\" />\n\t\t<NcReferenceList v-if=\"isLoggedIn && text\"\n\t\t\t:text=\"text\"\n\t\t\t:limit=\"1\"\n\t\t\tcontenteditable=\"false\" />\n\t</NodeViewWrapper>\n</template>\n\n<script>\nimport { NodeViewContent, nodeViewProps, NodeViewWrapper } from '@tiptap/vue-2'\nimport { getCurrentUser } from '@nextcloud/auth'\nimport { NcReferenceList } from '@nextcloud/vue/dist/Components/NcRichText.js'\nimport debounce from 'debounce'\n\nexport default {\n\tname: 'ParagraphView',\n\tcomponents: {\n\t\tNodeViewWrapper,\n\t\tNodeViewContent,\n\t\tNcReferenceList,\n\t},\n\tprops: nodeViewProps,\n\tdata() {\n\t\treturn {\n\t\t\ttext: null,\n\t\t\tisLoggedIn: getCurrentUser(),\n\t\t}\n\t},\n\twatch: {\n\t\tnode: {\n\t\t\thandler(newNode) {\n\t\t\t\tif (!newNode?.textContent) {\n\t\t\t\t\tthis.text = ''\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tthis.debouncedUpdateText(newNode)\n\t\t\t},\n\t\t},\n\t},\n\tbeforeCreate() {\n\t\tthis.debouncedUpdateText = debounce((newNode) => {\n\t\t\tthis.text = this.getTextReference(this.node)\n\t\t}, 500)\n\t},\n\tcreated() {\n\t\tthis.text = this.getTextReference(this.node)\n\t},\n\tbeforeUnmount() {\n\t\tthis.debouncedUpdateText?.cancel()\n\t},\n\tmethods: {\n\t\tgetTextReference(node) {\n\t\t\tif (!node?.childCount) {\n\t\t\t\treturn null\n\t\t\t}\n\n\t\t\t// Only regard paragraphs with exactly one text node (ignoring whitespace-only nodes)\n\t\t\tlet textNode\n\t\t\tfor (let i = 0; i < node.childCount; i++) {\n\t\t\t\tconst childNode = node.child(i)\n\n\t\t\t\t// Disregard paragraphs with non-text nodes\n\t\t\t\tif (childNode.type.name !== 'text') {\n\t\t\t\t\treturn null\n\t\t\t\t}\n\n\t\t\t\t// Ignore children with empty text\n\t\t\t\tif (!childNode.textContent.trim()) {\n\t\t\t\t\tcontinue\n\t\t\t\t}\n\n\t\t\t\t// Disregard paragraphs with more than one text nodes\n\t\t\t\tif (textNode) {\n\t\t\t\t\treturn null\n\t\t\t\t}\n\n\t\t\t\ttextNode = childNode\n\t\t\t}\n\n\t\t\t// Check if the text node is a link\n\t\t\tconst linkMark = textNode?.marks.find((m) => m.type.name === 'link')\n\t\t\tconst href = linkMark?.attrs?.href\n\n\t\t\tconst PATTERN = /(^)(https?:\\/\\/)((?:[-A-Z0-9+_]+\\.)+[-A-Z]+(?:\\/[-A-Z0-9+&@#%?=~_|!:,.;()]*)*)($)/ig\n\t\t\tif ((new RegExp(PATTERN)).test(href)) {\n\t\t\t\treturn href\n\t\t\t}\n\n\t\t\treturn null\n\t\t},\n\t},\n}\n</script>\n<style lang=\"scss\" scoped>\n:deep(div.widgets--list a.widget-default) {\n\tcolor: var(--color-main-text);\n\tpadding: 0;\n\ttext-decoration: none;\n\tmax-width: calc(100vw - 56px);\n}\n\n:deep(.widget-default--details) {\n\toverflow:hidden;\n\tp {\n\t\tmargin-bottom: 4px !important;\n\t}\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ParagraphView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ParagraphView.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ParagraphView.vue?vue&type=style&index=0&id=b95f24a4&prod&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ParagraphView.vue?vue&type=style&index=0&id=b95f24a4&prod&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./ParagraphView.vue?vue&type=template&id=b95f24a4&scoped=true&\"\nimport script from \"./ParagraphView.vue?vue&type=script&lang=js&\"\nexport * from \"./ParagraphView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ParagraphView.vue?vue&type=style&index=0&id=b95f24a4&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b95f24a4\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('NodeViewWrapper',{staticClass:\"vue-component\",attrs:{\"as\":\"p\"}},[_c('NodeViewContent',{staticClass:\"paragraph-content\"}),_vm._v(\" \"),(_vm.isLoggedIn && _vm.text)?_c('NcReferenceList',{attrs:{\"text\":_vm.text,\"limit\":1,\"contenteditable\":\"false\"}}):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import TiptapParagraph from '@tiptap/extension-paragraph'\nimport { VueNodeViewRenderer } from '@tiptap/vue-2'\nimport ParagraphView from './ParagraphView.vue'\n\nconst Paragraph = TiptapParagraph.extend({\n\n\taddNodeView() {\n\t\treturn VueNodeViewRenderer(ParagraphView)\n\t},\n\n\tparseHTML() {\n\t\treturn this.parent().map(rule => Object.assign(rule, { preserveWhitespace: 'full' }))\n\t},\n\n\taddKeyboardShortcuts() {\n\t\treturn {\n\t\t\tBackspace: () => {\n\t\t\t\t// Check that cursor is at beginning of text\n\t\t\t\tconst selection = this.editor.state.selection\n\t\t\t\tif (selection.$from.parentOffset !== 0) return false\n\n\t\t\t\tconst node = selection.$from.parent\n\t\t\t\tconst index = selection.$from.index(selection.$from.depth - 1)\n\t\t\t\t// Check there is a leading sibling\n\t\t\t\tif (index === 0) return false\n\n\t\t\t\tconst parent = selection.$from.node(selection.$from.depth - 1)\n\t\t\t\tconst previousNode = parent.child(index - 1)\n\t\t\t\t// Check this and the previous sibling are paragraphs\n\t\t\t\tif (node.type.name === this.name\n\t\t\t\t\t&& previousNode.type.name === this.name) {\n\t\t\t\t\treturn this.editor.chain().joinBackward().setHardBreak().run()\n\t\t\t\t}\n\t\t\t\treturn false\n\t\t\t},\n\t\t}\n\t},\n})\n\nexport default Paragraph\n","import Table from './Table/Table.js'\n\nexport default Table\n","// Copied from https://github.com/atlassian/prosemirror-utils/tree/1b97ff08f1bbaea781f205744588a3dfd228b0d1/src\n\n// Iterates over parent nodes starting from the given `$pos`, returning the closest node and its start position `predicate` returns truthy for. `start` points to the start position of the node, `pos` points directly before the node.\n//\n// ```javascript\n// const predicate = node => node.type === schema.nodes.blockquote;\n// const parent = findParentNodeClosestToPos(state.doc.resolve(5), predicate);\n// ```\nexport const findParentNodeClosestToPos = ($pos, predicate) => {\n\tfor (let i = $pos.depth; i > 0; i--) {\n\t\tconst node = $pos.node(i)\n\t\tif (predicate(node)) {\n\t\t\treturn {\n\t\t\t\tpos: i > 0 ? $pos.before(i) : 0,\n\t\t\t\tstart: $pos.start(i),\n\t\t\t\tdepth: i,\n\t\t\t\tnode,\n\t\t\t}\n\t\t}\n\t}\n}\n\n// Flattens descendants of a given `node`. It doesn't descend into a node when descend argument is `false` (defaults to `true`).\n//\n// ```javascript\n// const children = flatten(node);\n// ```\nexport const flatten = (node, descend = true) => {\n\tif (!node) {\n\t\tthrow new Error('Invalid \"node\" parameter')\n\t}\n\tconst result = []\n\tnode.descendants((child, pos) => {\n\t\tresult.push({ node: child, pos })\n\t\tif (!descend) {\n\t\t\treturn false\n\t\t}\n\t})\n\treturn result\n}\n\n// Iterates over descendants of a given `node`, returning child nodes predicate returns truthy for. It doesn't descend into a node when descend argument is `false` (defaults to `true`).\n//\n// ```javascript\n// const textNodes = findChildren(node, child => child.isText, false);\n// ```\nexport const findChildren = (node, predicate, descend) => {\n\tif (!node) {\n\t\tthrow new Error('Invalid \"node\" parameter')\n\t} else if (!predicate) {\n\t\tthrow new Error('Invalid \"predicate\" parameter')\n\t}\n\treturn flatten(node, descend).filter(child => predicate(child.node))\n}\n","/*\n * @copyright Copyright (c) 2019 Julius Hrtl <jus@bitgrid.net>\n *\n * @author Julius Hrtl <jus@bitgrid.net>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport TipTapTaskItem from '@tiptap/extension-task-item'\nimport { wrappingInputRule, mergeAttributes } from '@tiptap/core'\nimport { Plugin } from '@tiptap/pm/state'\nimport { findParentNodeClosestToPos } from './../helpers/prosemirrorUtils.js'\n\nconst TaskItem = TipTapTaskItem.extend({\n\n\taddOptions() {\n\t\treturn {\n\t\t\tnested: true,\n\t\t\tHTMLAttributes: {},\n\t\t}\n\t},\n\n\tdraggable: false,\n\n\tcontent: 'paragraph block*',\n\n\taddAttributes() {\n\t\tconst adjust = { ...this.parent() }\n\t\tadjust.checked.parseHTML = el => {\n\t\t\treturn el.querySelector('input[type=checkbox]')?.checked\n\t\t}\n\t\treturn adjust\n\t},\n\n\tparseHTML: [\n\t\t{\n\t\t\tpriority: 101,\n\t\t\ttag: 'li',\n\t\t\tgetAttrs: el => {\n\t\t\t\tconst checkbox = el.querySelector('input[type=checkbox]')\n\t\t\t\treturn checkbox\n\t\t\t},\n\t\t\tcontext: 'taskList/',\n\t\t},\n\t],\n\n\trenderHTML({ node, HTMLAttributes }) {\n\t\tconst listAttributes = { class: 'checkbox-item' }\n\t\tconst checkboxAttributes = { type: 'checkbox', class: '', contenteditable: false }\n\t\tif (node.attrs.checked) {\n\t\t\tcheckboxAttributes.checked = true\n\t\t\tlistAttributes.class += ' checked'\n\t\t}\n\t\treturn [\n\t\t\t'li',\n\t\t\tmergeAttributes(HTMLAttributes, listAttributes),\n\t\t\t[\n\t\t\t\t'input',\n\t\t\t\tcheckboxAttributes,\n\t\t\t],\n\t\t\t[\n\t\t\t\t'label',\n\t\t\t\t0,\n\t\t\t],\n\t\t]\n\t},\n\n\t// overwrite the parent node view so renderHTML gets used\n\taddNodeView: false,\n\n\ttoMarkdown: (state, node) => {\n\t\tstate.write(`[${node.attrs.checked ? 'x' : ' '}] `)\n\t\tstate.renderContent(node)\n\t},\n\n\t addInputRules() {\n\t\treturn [\n\t\t\t...this.parent(),\n\t\t\twrappingInputRule({\n\t\t\t\tfind: /^\\s*([-+*])\\s(\\[(x|X|\\s)?\\])\\s$/,\n\t\t\t\ttype: this.type,\n\t\t\t\tgetAttributes: match => ({\n\t\t\t\t\tchecked: 'xX'.includes(match[match.length - 1]),\n\t\t\t\t}),\n\t\t\t}),\n\t\t]\n\t},\n\n\taddProseMirrorPlugins() {\n\t\treturn [\n\t\t\tnew Plugin({\n\t\t\t\tprops: {\n\t\t\t\t\thandleClick: (view, pos, event) => {\n\t\t\t\t\t\tconst state = view.state\n\t\t\t\t\t\tconst schema = state.schema\n\n\t\t\t\t\t\tconst coordinates = view.posAtCoords({ left: event.clientX, top: event.clientY })\n\t\t\t\t\t\tconst position = state.doc.resolve(coordinates.pos)\n\t\t\t\t\t\tconst parentList = findParentNodeClosestToPos(position, function(node) {\n\t\t\t\t\t\t\treturn node.type === schema.nodes.taskItem\n\t\t\t\t\t\t\t\t|| node.type === schema.nodes.listItem\n\t\t\t\t\t\t})\n\t\t\t\t\t\tconst isListClicked = event.target.tagName.toLowerCase() === 'li'\n\t\t\t\t\t\tif (!isListClicked\n\t\t\t\t\t\t\t|| !parentList\n\t\t\t\t\t\t\t|| parentList.node.type !== schema.nodes.taskItem\n\t\t\t\t\t\t    || !view.editable) {\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst tr = state.tr\n\t\t\t\t\t\ttr.setNodeMarkup(parentList.pos, schema.nodes.taskItem, { checked: !parentList.node.attrs.checked })\n\t\t\t\t\t\tview.dispatch(tr)\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t}),\n\t\t]\n\t},\n\n})\n\nexport default TaskItem\n","/*\n * @copyright Copyright (c) 2020 Julius Hrtl <jus@bitgrid.net>\n *\n * @author Julius Hrtl <jus@bitgrid.net>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport TiptapTaskList from '@tiptap/extension-task-list'\n\nconst TaskList = TiptapTaskList.extend({\n\n\tparseHTML: [\n\t\t{\n\t\t\tpriority: 100,\n\t\t\ttag: 'ul.contains-task-list',\n\t\t},\n\t],\n\n\taddAttributes() {\n\t\treturn {\n\t\t\t...this.parent?.(),\n\t\t\tbullet: {\n\t\t\t\tdefault: '-',\n\t\t\t\trendered: false,\n\t\t\t\tisRequired: true,\n\t\t\t\tparseHTML: (el) => el.getAttribute('data-bullet'),\n\t\t\t},\n\t\t}\n\t},\n\n\ttoMarkdown: (state, node) => {\n\t\tstate.renderList(node, '  ', () => `${node.attrs.bullet} `)\n\t},\n\n})\n\nexport default TaskList\n","/*\n * @copyright Copyright (c) 2021, berdosis GbR\n *\n * @license MIT\n *\n */\n\nimport { Extension } from '@tiptap/core'\nimport { PluginKey, Plugin } from '@tiptap/pm/state'\n\n/**\n * @param {object} args Arguments as deconstructable object\n * @param {Array | object} args.types possible types\n * @param {object} args.node node to check\n */\nfunction nodeEqualsType({ types, node }) {\n\treturn (Array.isArray(types) && types.includes(node.type)) || node.type === types\n}\n\n/**\n * Extension based on:\n * - https://github.com/ueberdosis/tiptap/tree/main/demos/src/Experiments/TrailingNode\n * - https://github.com/ueberdosis/tiptap/blob/v1/packages/tiptap-extensions/src/extensions/TrailingNode.js\n * - https://github.com/remirror/remirror/blob/e0f1bec4a1e8073ce8f5500d62193e52321155b9/packages/prosemirror-trailing-node/src/trailing-node-plugin.ts\n */\n\nconst TrailingNode = Extension.create({\n\tname: 'trailingNode',\n\n\taddOptions() {\n\t\treturn {\n\t\t\tnode: 'paragraph',\n\t\t\tnotAfter: ['paragraph'],\n\t\t}\n\t},\n\n\taddProseMirrorPlugins() {\n\t\tconst plugin = new PluginKey(this.name)\n\t\tconst disabledNodes = Object.entries(this.editor.schema.nodes)\n\t\t\t.map(([, value]) => value)\n\t\t\t.filter(node => this.options.notAfter.includes(node.name))\n\n\t\treturn [\n\t\t\tnew Plugin({\n\t\t\t\tkey: plugin,\n\t\t\t\tappendTransaction: (_, __, state) => {\n\t\t\t\t\tconst { doc, tr, schema } = state\n\t\t\t\t\tconst shouldInsertNodeAtEnd = plugin.getState(state)\n\t\t\t\t\tconst endPosition = doc.content.size\n\t\t\t\t\tconst type = schema.nodes[this.options.node]\n\n\t\t\t\t\tif (!shouldInsertNodeAtEnd) {\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\treturn tr.insert(endPosition, type.create())\n\t\t\t\t},\n\t\t\t\tstate: {\n\t\t\t\t\tinit: (_, state) => {\n\t\t\t\t\t\tconst lastNode = state.tr.doc.lastChild\n\t\t\t\t\t\treturn !nodeEqualsType({ node: lastNode, types: disabledNodes })\n\t\t\t\t\t},\n\t\t\t\t\tapply: (tr, value) => {\n\t\t\t\t\t\tif (!tr.docChanged) {\n\t\t\t\t\t\t\treturn value\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst lastNode = tr.doc.lastChild\n\t\t\t\t\t\treturn !nodeEqualsType({ node: lastNode, types: disabledNodes })\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t}),\n\t\t]\n\t},\n})\n\nexport default TrailingNode\n","/**\n * @copyright Copyright (c) 2020 Azul <azul@riseup.net>\n *\n * @author Azul <azul@riseup.net>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport { generateUrl } from '@nextcloud/router'\n\nimport { logger } from '../helpers/logger.js'\nimport markdownit from './../markdownit/index.js'\n\nconst absolutePath = function(base, rel) {\n\tif (!rel) {\n\t\treturn base\n\t}\n\tif (rel[0] === '/') {\n\t\treturn rel\n\t}\n\tbase = base.split('/')\n\trel = rel.split('/')\n\twhile (rel[0] === '..' || rel[0] === '.') {\n\t\tif (rel[0] === '..') {\n\t\t\tbase.pop()\n\t\t}\n\t\trel.shift()\n\t}\n\treturn base.concat(rel).join('/')\n}\n\nconst basedir = function(file) {\n\tconst end = file.lastIndexOf('/')\n\treturn (end > 0)\n\t\t? file.slice(0, end)\n\t\t: file.slice(0, end + 1) // basedir('/toplevel') should return '/'\n}\n\nconst domHref = function(node, relativePath) {\n\tconst ref = node.attrs.href\n\tif (!ref) {\n\t\treturn ref\n\t}\n\tif (!OCA.Viewer) {\n\t\treturn ref\n\t}\n\tif (ref.match(/^[a-zA-Z]*:/)) {\n\t\treturn ref\n\t}\n\tif (ref.startsWith('#')) {\n\t\treturn ref\n\t}\n\n\tconst match = ref.match(/^([^?]*)\\?fileId=(\\d+)/)\n\tif (match) {\n\t\tconst [, relPath, id] = match\n\t\tconst currentDir = basedir(relativePath || OCA.Viewer?.file || '/')\n\t\tconst dir = absolutePath(currentDir, basedir(relPath))\n\t\tif (relPath.length > 1 && relPath.endsWith('/')) {\n\t\t\t// is directory\n\t\t\treturn generateUrl(`/apps/files/?dir=${dir}&fileId=${id}`)\n\t\t} else {\n\t\t\treturn generateUrl(`/apps/files/?dir=${dir}&openfile=${id}#relPath=${relPath}`)\n\t\t}\n\t}\n\treturn ref\n}\n\nconst parseHref = function(dom) {\n\tconst ref = dom.getAttribute('href')\n\tif (!ref) {\n\t\treturn ref\n\t}\n\tconst match = ref.match(/\\?dir=([^&]*)&openfile=([^&]*)#relPath=([^&]*)/)\n\tif (match) {\n\t\tconst [, , id, path] = match\n\t\treturn `${path}?fileId=${id}`\n\t}\n\treturn ref\n}\n\nconst openLink = function(event, _attrs) {\n\tconst linkElement = event.target.closest('a')\n\tconst htmlHref = linkElement.href\n\tconst query = OC.parseQueryString(htmlHref)\n\tconst fragment = htmlHref.split('#').pop()\n\tconst fragmentQuery = OC.parseQueryString(fragment)\n\tif (query?.dir && fragmentQuery?.relPath) {\n\t\tconst filename = fragmentQuery.relPath.split('/').pop()\n\t\tconst path = `${query.dir}/${filename}`\n\t\tdocument.title = `${filename} - ${OC.theme.title}`\n\t\tif (window.location.pathname.match(/apps\\/files\\/$/)) {\n\t\t\t// The files app still lacks a popState handler\n\t\t\t// to allow for using the back button\n\t\t\t// OC.Util.History.pushState('', htmlHref)\n\t\t}\n\t\tOCA.Viewer.open({ path })\n\t\treturn\n\t}\n\tif (htmlHref.match(/apps\\/files\\//) && query?.fileId) {\n\t\t// open the direct file link\n\t\twindow.open(generateUrl(`/f/${query.fileId}`), '_self')\n\t\treturn\n\t}\n\tif (!markdownit.validateLink(htmlHref)) {\n\t\tlogger.error('Invalid link', { htmlHref })\n\t\treturn false\n\t}\n\tif (fragment) {\n\t\tconst el = document.getElementById(fragment)\n\t\tif (el) {\n\t\t\tel.scrollIntoView()\n\t\t\twindow.location.hash = fragment\n\t\t\treturn\n\t\t}\n\t}\n\twindow.open(htmlHref)\n\treturn true\n}\n\nexport {\n\tdomHref,\n\tparseHref,\n\topenLink,\n}\n","import { Plugin, PluginKey } from '@tiptap/pm/state'\n\nimport { logger } from '../helpers/logger.js'\n\nconst clickHandler = ({ editor, type, onClick }) => {\n\treturn new Plugin({\n\t\tprops: {\n\t\t\tkey: new PluginKey('textLink'),\n\t\t\thandleClick: (view, pos, event) => {\n\t\t\t\tconst $clicked = view.state.doc.resolve(pos)\n\t\t\t\tconst link = $clicked.marks().find(m => m.type.name === type.name)\n\t\t\t\tif (!link) {\n\t\t\t\t\treturn false\n\t\t\t\t}\n\t\t\t\tif (!link.attrs.href) {\n\t\t\t\t\tlogger.warn('Could not determine href of link.')\n\t\t\t\t\tlogger.debug('Link', { link })\n\t\t\t\t\treturn false\n\t\t\t\t}\n\t\t\t\t// We use custom onClick handler only for left clicks\n\t\t\t\tif (event.button === 0 && !event.ctrlKey) {\n\t\t\t\t\tevent.stopPropagation()\n\t\t\t\t\treturn onClick?.(event, link.attrs)\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t})\n}\n\nconst clickPreventer = () => {\n\treturn new Plugin({\n\t\tprops: {\n\t\t\tkey: new PluginKey('textAvoidLinkClick'),\n\t\t\thandleDOMEvents: {\n\t\t\t\tclick: (view, event) => {\n\t\t\t\t\tif (!view.editable) {\n\t\t\t\t\t\tevent.preventDefault()\n\t\t\t\t\t\treturn false\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t})\n}\n\nexport { clickHandler, clickPreventer }\n","/*\n * @copyright Copyright (c) 2019 Azul <azul@riseup.net>\n *\n * @author Azul <azul@riseup.net>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport TipTapLink from '@tiptap/extension-link'\nimport { domHref, parseHref, openLink } from './../helpers/links.js'\nimport { clickHandler, clickPreventer } from '../plugins/link.js'\n\nconst Link = TipTapLink.extend({\n\n\taddOptions() {\n\t\treturn {\n\t\t\t...this.parent?.(),\n\t\t\tonClick: openLink,\n\t\t\trelativePath: null,\n\t\t}\n\t},\n\n\taddAttributes() {\n\t\treturn {\n\t\t\thref: {\n\t\t\t\tdefault: null,\n\t\t\t},\n\t\t\ttitle: {\n\t\t\t\tdefault: null,\n\t\t\t},\n\t\t}\n\t},\n\n\tinclusive: false,\n\n\tparseHTML: [\n\t\t{\n\t\t\ttag: 'a[href]',\n\t\t\tgetAttrs: dom => ({\n\t\t\t\thref: parseHref(dom),\n\t\t\t\ttitle: dom.getAttribute('title'),\n\t\t\t}),\n\t\t},\n\t],\n\n\trenderHTML(options) {\n\t\tconst { mark } = options\n\n\t\treturn ['a', {\n\t\t\t...mark.attrs,\n\t\t\thref: domHref(mark, this.options.relativePath),\n\t\t\trel: 'noopener noreferrer nofollow',\n\t\t}, 0]\n\t},\n\n\taddProseMirrorPlugins() {\n\t\tconst plugins = this.parent()\n\t\t\t// remove original handle click\n\t\t\t.filter(({ key }) => {\n\t\t\t\treturn !key.startsWith('handleClickLink')\n\t\t\t})\n\n\t\tif (!this.options.openOnClick) {\n\t\t\treturn plugins\n\t\t}\n\n\t\t// add custom click handler\n\t\treturn [\n\t\t\t...plugins,\n\t\t\tclickHandler({\n\t\t\t\teditor: this.editor,\n\t\t\t\ttype: this.type,\n\t\t\t\tonClick: this.options.onClick,\n\t\t\t}),\n\t\t\tclickPreventer(),\n\t\t]\n\t},\n})\n\nexport default Link\n","/*\n * @copyright Copyright (c) 2019 Julius Hrtl <jus@bitgrid.net>\n *\n * @author Julius Hrtl <jus@bitgrid.net>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport TipTapStrike from '@tiptap/extension-strike'\n\nexport default TipTapStrike.extend({\n\n\tparseHTML() {\n\t\treturn [\n\t\t\t{\n\t\t\t\ttag: 's',\n\t\t\t},\n\t\t\t{\n\t\t\t\ttag: 'del',\n\t\t\t},\n\t\t\t{\n\t\t\t\ttag: 'strike',\n\t\t\t},\n\t\t\t{\n\t\t\t\tstyle: 'text-decoration',\n\t\t\t\tgetAttrs: value => value === 'line-through',\n\t\t\t},\n\t\t]\n\t},\n\n\trenderHTML() {\n\t\treturn ['s', 0]\n\t},\n\n\t/** Strike is currently unsupported by prosemirror-markdown */\n\ttoMarkdown: {\n\t\topen: '~~',\n\t\tclose: '~~',\n\t\tmixable: true,\n\t\texpelEnclosingWhitespace: true,\n\t},\n})\n","/*\n * @copyright Copyright (c) 2019 Julius Hrtl <jus@bitgrid.net>\n *\n * @author Julius Hrtl <jus@bitgrid.net>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport { markInputRule, markPasteRule } from '@tiptap/core'\nimport { Bold, starInputRegex, starPasteRegex } from '@tiptap/extension-bold'\n\nconst Strong = Bold.extend({\n\tname: 'strong',\n\n\taddInputRules() {\n\t\treturn [\n\t\t\tmarkInputRule({\n\t\t\t\tfind: starInputRegex,\n\t\t\t\ttype: this.type,\n\t\t\t}),\n\t\t]\n\t},\n\n\taddPasteRules() {\n\t\treturn [\n\t\t\tmarkPasteRule({\n\t\t\t\tfind: starPasteRegex,\n\t\t\t\ttype: this.type,\n\t\t\t}),\n\t\t]\n\t},\n})\n\nexport default Strong\n","/*\n * @copyright Copyright (c) 2022 Max <max@nextcloud.com>\n *\n * @author Max <max@nextcloud.com>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport TipTapUnderline from '@tiptap/extension-underline'\nimport { markInputRule, markPasteRule } from '@tiptap/core'\nimport { underscoreInputRegex, underscorePasteRegex } from '@tiptap/extension-bold'\n\nconst Underline = TipTapUnderline.extend({\n\n\tparseHTML() {\n\t\treturn [\n\t\t\t{\n\t\t\t\ttag: 'u',\n\t\t\t},\n\t\t\t{\n\t\t\t\tstyle: 'text-decoration',\n\t\t\t\tgetAttrs: value => value === 'underline',\n\t\t\t},\n\t\t]\n\t},\n\n\trenderHTML() {\n\t\treturn ['u', 0]\n\t},\n\n\ttoMarkdown: {\n\t\topen: '__',\n\t\tclose: '__',\n\t\tmixable: true,\n\t\texpelEnclosingWhitespace: true,\n\t},\n\n\taddInputRules() {\n\t\treturn [\n\t\t\tmarkInputRule({\n\t\t\t\tfind: underscoreInputRegex,\n\t\t\t\ttype: this.type,\n\t\t\t}),\n\t\t]\n\t},\n\n\taddPasteRules() {\n\t\treturn [\n\t\t\tmarkPasteRule({\n\t\t\t\tfind: underscorePasteRegex,\n\t\t\t\ttype: this.type,\n\t\t\t}),\n\t\t]\n\t},\n\n})\n\nexport default Underline\n","/*\n * @copyright Copyright (c) 2019 Julius Hrtl <jus@bitgrid.net>\n *\n * @author Julius Hrtl <jus@bitgrid.net>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport TipTapItalic from '@tiptap/extension-italic'\nimport Link from './Link.js'\nimport Strike from './Strike.js'\nimport Strong from './Strong.js'\nimport Underline from './Underline.js'\n\nconst Italic = TipTapItalic.extend({\n\tname: 'em',\n})\n\nexport {\n\tStrong,\n\tItalic,\n\tStrike,\n\tLink,\n\tUnderline,\n}\n","/**\n * @copyright Copyright (c) 2022 Max <max@nextcloud.com>\n *\n * @author Max <max@nextcloud.com>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport { Extension } from '@tiptap/core'\nimport { lowlight } from 'lowlight'\n\n/* eslint-disable import/no-named-as-default */\nimport Blockquote from '@tiptap/extension-blockquote'\nimport BulletList from './../nodes/BulletList.js'\nimport Callout from './../nodes/Callouts.js'\nimport CharacterCount from '@tiptap/extension-character-count'\nimport Code from '@tiptap/extension-code'\nimport CodeBlock from './../nodes/CodeBlock.js'\nimport Document from '@tiptap/extension-document'\nimport Dropcursor from '@tiptap/extension-dropcursor'\nimport EditableTable from './../nodes/EditableTable.js'\nimport Emoji from './Emoji.js'\nimport EmojiSuggestion from './../components/Suggestion/Emoji/suggestions.js'\nimport FrontMatter from './../nodes/FrontMatter.js'\nimport Gapcursor from '@tiptap/extension-gapcursor'\nimport HardBreak from './../nodes/HardBreak.js'\nimport Heading from '../nodes/Heading/index.js'\nimport HorizontalRule from '@tiptap/extension-horizontal-rule'\nimport Image from './../nodes/Image.js'\nimport ImageInline from './../nodes/ImageInline.js'\nimport KeepSyntax from './KeepSyntax.js'\nimport LinkPicker from './../extensions/LinkPicker.js'\nimport ListItem from '@tiptap/extension-list-item'\nimport Markdown from './../extensions/Markdown.js'\nimport Mention from './../extensions/Mention.js'\nimport OrderedList from '@tiptap/extension-ordered-list'\nimport Paragraph from './../nodes/Paragraph.js'\nimport Placeholder from '@tiptap/extension-placeholder'\nimport Table from './../nodes/Table.js'\nimport TaskItem from './../nodes/TaskItem.js'\nimport TaskList from './../nodes/TaskList.js'\nimport Text from '@tiptap/extension-text'\nimport TrailingNode from './../nodes/TrailingNode.js'\n/* eslint-enable import/no-named-as-default */\n\nimport { Strong, Italic, Strike, Link, Underline } from './../marks/index.js'\nimport { translate as t } from '@nextcloud/l10n'\n\nlowlight.registerAlias('plaintext', 'mermaid')\n\nexport default Extension.create({\n\tname: 'RichText',\n\n\taddOptions() {\n\t\treturn {\n\t\t\tediting: true,\n\t\t\tlink: {},\n\t\t\textensions: [],\n\t\t\tcomponent: null,\n\t\t\trelativePath: null,\n\t\t}\n\t},\n\n\taddExtensions() {\n\t\tconst defaultExtensions = [\n\t\t\tthis.options.editing ? Markdown : null,\n\t\t\tDocument,\n\t\t\tText,\n\t\t\tParagraph,\n\t\t\tHardBreak,\n\t\t\tHeading,\n\t\t\tStrong,\n\t\t\tItalic,\n\t\t\tStrike,\n\t\t\tBlockquote,\n\t\t\tCharacterCount,\n\t\t\tCode,\n\t\t\tCodeBlock.configure({\n\t\t\t\tlowlight,\n\t\t\t\tdefaultLanguage: 'plaintext',\n\t\t\t}),\n\t\t\tBulletList,\n\t\t\tHorizontalRule,\n\t\t\tOrderedList,\n\t\t\tListItem,\n\t\t\tthis.options.editing ? EditableTable : Table,\n\t\t\tTaskList,\n\t\t\tTaskItem,\n\t\t\tCallout,\n\t\t\tUnderline,\n\t\t\tImage,\n\t\t\tImageInline,\n\t\t\tDropcursor,\n\t\t\tGapcursor,\n\t\t\tKeepSyntax,\n\t\t\tFrontMatter,\n\t\t\tMention,\n\t\t\tEmoji.configure({\n\t\t\t\tsuggestion: EmojiSuggestion(),\n\t\t\t}),\n\t\t\tLinkPicker,\n\t\t\tthis.options.editing\n\t\t\t\t? Placeholder.configure({\n\t\t\t\t\temptyNodeClass: 'is-empty',\n\t\t\t\t\tplaceholder: t('text', 'Add notes, lists or links '),\n\t\t\t\t\tshowOnlyWhenEditable: true,\n\t\t\t\t})\n\t\t\t\t: null,\n\t\t\tTrailingNode,\n\t\t]\n\t\tif (this.options.link !== false) {\n\t\t\tdefaultExtensions.push(Link.configure({\n\t\t\t\t...this.options.link,\n\t\t\t\topenOnClick: true,\n\t\t\t\tvalidate: href => /^https?:\\/\\//.test(href),\n\t\t\t\trelativePath: this.options.relativePath,\n\t\t\t}))\n\t\t}\n\t\tconst additionalExtensionNames = this.options.extensions.map(e => e.name)\n\t\treturn [\n\t\t\t...defaultExtensions.filter(e => e && !additionalExtensionNames.includes(e.name)),\n\t\t\t...this.options.extensions,\n\t\t]\n\t},\n\n})\n","/*\n * @copyright Copyright (c) 2022 Julius Hrtl <jus@bitgrid.net>\n *\n * @author Julius Hrtl <jus@bitgrid.net>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport { emojiSearch } from '@nextcloud/vue'\nimport createSuggestions from '../suggestions.js'\nimport EmojiList from './EmojiList.vue'\n\nexport default () => createSuggestions({\n\tlistComponent: EmojiList,\n\titems: ({ query }) => {\n\t\treturn emojiSearch(query)\n\t},\n\tcommand: ({ editor, range, props }) => {\n\t\teditor\n\t\t\t.chain()\n\t\t\t.focus()\n\t\t\t.insertContentAt(range, props.native + ' ')\n\t\t\t.run()\n\t},\n})\n","/*\n * @copyright Copyright (c) 2022 Vinicius Reis <vinicius@nextcloud.com>\n *\n * @author Vinicius Reis <vinicius@nextcloud.com>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport container from 'markdown-it-container'\n\nexport const typesAvailable = ['info', 'warn', 'error', 'success']\n\nconst buildRender = type => (tokens, idx, options, env, slf) => {\n\tconst tag = tokens[idx]\n\n\t// add attributes to the opening tag\n\tif (tag.nesting === 1) {\n\t\ttag.attrSet('data-callout', type)\n\t\ttag.attrJoin('class', `callout callout-${type}`)\n\t}\n\n\treturn slf.renderToken(tokens, idx, options, env, slf)\n}\n\n/**\n * @param {object} md Markdown object\n */\nexport default (md) => {\n\t// create a custom container to each callout type\n\ttypesAvailable.forEach(type => {\n\t\tmd.use(container, type, {\n\t\t\trender: buildRender(type),\n\t\t})\n\t})\n\n\treturn md\n}\n","/*\n * @copyright Copyright (c) 2022 Max <max@nextcloud.com>\n *\n * @author Max <max@nextcloud.com>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\n/**\n * @param {import('markdown-it')} md Markdown object\n */\nexport default function splitMixedLists(md) {\n\tmd.core.ruler.after('task-lists', 'split-mixed-task-lists', state => {\n\t\tconst tokens = state.tokens\n\n\t\tfor (let i = 0; i < tokens.length; i++) {\n\t\t\tconst token = tokens[i]\n\t\t\tif (!includesClass(token, 'contains-task-list')) {\n\t\t\t\tcontinue\n\t\t\t}\n\t\t\tconst firstChild = tokens[i + 1]\n\t\t\tconst startsWithTask = includesClass(firstChild, 'task-list-item')\n\t\t\tif (!startsWithTask) {\n\t\t\t\ttoken.attrs.splice(token.attrIndex('class'))\n\t\t\t\tif (token.attrs.length === 0) {\n\t\t\t\t\ttoken.attrs = null\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst splitBefore = findChildOf(tokens, i, child => {\n\t\t\t\treturn child.nesting === 1\n\t\t\t\t\t&& includesClass(child, 'task-list-item') !== startsWithTask\n\t\t\t})\n\t\t\tif (splitBefore > i) {\n\t\t\t\tsplitListAt(tokens, splitBefore, state.Token)\n\t\t\t}\n\t\t}\n\n\t\treturn false\n\t})\n}\n\n/**\n * @param {object} token MarkdownIT token\n * @param {string} cls Class name to query\n */\nfunction includesClass(token, cls) {\n\treturn token.attrGet('class')?.split(' ').includes(cls) || false\n}\n\n/**\n * @param {Array} tokens - all the tokens in the doc\n * @param {number} index - index into the tokens array where to split\n * @param {object} TokenConstructor - constructor provided by Markdown-it\n */\nfunction splitListAt(tokens, index, TokenConstructor) {\n\tconst closeList = new TokenConstructor('bullet_list_close', 'ul', -1)\n\tcloseList.block = true\n\tconst openList = new TokenConstructor('bullet_list_open', 'ul', 1)\n\topenList.attrSet('class', 'contains-task-list')\n\topenList.block = true\n\topenList.markup = tokens[index].markup\n\ttokens.splice(index, 0, closeList, openList)\n}\n\n/**\n * @param {Array} tokens - all the tokens in the doc\n * @param {number} parentIndex - index of the parent in the tokens array\n * @param {Function} predicate - test function returned child needs to pass\n */\nfunction findChildOf(tokens, parentIndex, predicate) {\n\tconst searchLevel = tokens[parentIndex].level + 1\n\tfor (let i = parentIndex + 1; i < tokens.length; i++) {\n\t\tconst token = tokens[i]\n\t\tif (token.level < searchLevel) {\n\t\t\treturn -1\n\t\t}\n\t\tif ((token.level === searchLevel) && predicate(tokens[i])) {\n\t\t\treturn i\n\t\t}\n\t}\n\treturn -1\n}\n","import MarkdownIt from 'markdown-it'\nimport taskLists from '@hedgedoc/markdown-it-task-lists'\nimport markdownitMentions from '@quartzy/markdown-it-mentions'\nimport underline from './underline.js'\nimport splitMixedLists from './splitMixedLists.js'\nimport callouts from './callouts.js'\nimport hardbreak from './hardbreak.js'\nimport keepSyntax from './keepSyntax.js'\nimport frontMatter from 'markdown-it-front-matter'\nimport implicitFigures from 'markdown-it-image-figures'\nimport { escapeHtml } from 'markdown-it/lib/common/utils.js'\n\nconst markdownit = MarkdownIt('commonmark', { html: false, breaks: false })\n\t.enable('strikethrough')\n\t.enable('table')\n\t.use(taskLists, { enable: true, labelAfter: true })\n\t.use(frontMatter, (fm) => {})\n\t.use(splitMixedLists)\n\t.use(underline)\n\t.use(hardbreak)\n\t.use(callouts)\n\t.use(keepSyntax)\n\t.use(markdownitMentions)\n\t.use(implicitFigures)\n\n// Render front matter tokens\nmarkdownit.renderer.rules.front_matter = (tokens, idx, options) => `<pre id=\"frontmatter\"><code>${escapeHtml(tokens[idx].meta)}</code></pre>`\n\n// Render lists with bullet attribute\nmarkdownit.renderer.rules.bullet_list_open = (tokens, idx, options) => {\n\ttokens[idx].attrs = [\n\t\t...(tokens[idx].attrs || []),\n\t\t['data-bullet', tokens[idx].markup],\n\t]\n\treturn markdownit.renderer.renderToken(tokens, idx, options)\n}\n\nexport default markdownit\n","/*\n * @copyright Copyright (c) 2022 Max <max@nextcloud.com>\n *\n * @author Max <max@nextcloud.com>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\n/**\n * @param {object} md Markdown object\n */\nexport default function markdownUnderlines(md) {\n\tmd.inline.ruler2.after('emphasis', 'underline', state => {\n\t\tconst tokens = state.tokens\n\n\t\tfor (let i = tokens.length - 1; i > 0; i--) {\n\t\t\tconst token = tokens[i]\n\n\t\t\tif (token.markup === '__') {\n\t\t\t\tif (token.type === 'strong_open') {\n\t\t\t\t\ttokens[i].tag = 'u'\n\t\t\t\t\ttokens[i].type = 'u_open'\n\t\t\t\t}\n\t\t\t\tif (token.type === 'strong_close') {\n\t\t\t\t\ttokens[i].tag = 'u'\n\t\t\t\t\ttokens[i].type = 'u_close'\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn false\n\t})\n}\n","/**\n * @copyright Copyright (c) 2022\n *\n * @author Ferdinand Thiessen <rpm@fthiessen.de>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport markdownitNewline from 'markdown-it/lib/rules_inline/newline.js'\nimport markdownitEscape from 'markdown-it/lib/rules_inline/escape.js'\n\n/**\n * Add information about used markdown syntax to HTML hard breaks\n *\n * @param {import('markdown-it')} md Markdown object\n */\nexport default function keepHardbreakSyntax(md) {\n\t// Add syntax information to hard line breaks using double spaces\n\tmd.inline.ruler.at('newline', (state, silent) => {\n\t\tconst rval = markdownitNewline(state, silent)\n\t\tif (rval && state.tokens.length && state.tokens[state.tokens.length - 1].type === 'hardbreak') state.tokens[state.tokens.length - 1].attrSet('syntax', '  ')\n\t\treturn rval\n\t})\n\n\t// Add syntax information to hard line breaks using a backslash\n\tmd.inline.ruler.at('escape', (state, silent) => {\n\t\tconst rval = markdownitEscape(state, silent)\n\t\tif (rval && state.tokens.length && state.tokens[state.tokens.length - 1].type === 'hardbreak') state.tokens[state.tokens.length - 1].attrSet('syntax', '\\\\')\n\t\treturn rval\n\t})\n\n\t// Add rule for parsing `<br>` tags (as we have HTML disabled)\n\tmd.inline.ruler.after('html_inline', 'html_breaks', (state) => {\n\t\tconst res = state.src.slice(state.pos).match(/^\\s*<br\\s*\\/?>/)\n\n\t\tif (res) {\n\t\t\tconst token = state.push('hardbreak', 'br', 0)\n\t\t\ttoken.attrPush(['syntax', 'html'])\n\t\t\tstate.pos += res[0].length\n\t\t\treturn true\n\t\t}\n\t\treturn false\n\t})\n\n\t// Adds syntax attribute to `<br>` and fixes issue #3370 (no additional newline after `<br>`)\n\tmd.renderer.rules.hardbreak = (tokens, idx, options) => `<br data-syntax=\"${tokens[idx].attrGet('syntax')}\" ${options.xhtmlOut ? '/' : ''}>`\n}\n","/**\n * @copyright Copyright (c) 2022\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\n/**\n * Add a mark for keeping special markdown syntax unescaped\n *\n * @param {object} md Markdown object\n */\nexport default function keepSyntax(md) {\n\t// Extracting named groups as positive lookbehind patterns are not supported by Safari\n\tconst escaped = /(\\n(?<linestart>[#\\-*+>])|(?<special>[`*\\\\~[\\]]+))/\n\n\tmd.core.ruler.before('text_join', 'tag-markdown-syntax', state => {\n\t\tconst open = new state.Token('keep_md_open', 'span', 1)\n\t\topen.attrSet('class', 'keep-md')\n\t\tconst close = new state.Token('keep_md_close', 'span', -1)\n\n\t\tfor (let i = 0; i < state.tokens.length; i++) {\n\t\t\tconst block = state.tokens[i]\n\t\t\tif (block.type !== 'inline') continue\n\n\t\t\tfor (let j = 0; j < block.children.length; j++) {\n\t\t\t\tconst token = block.children[j]\n\t\t\t\tif (token.type === 'text') {\n\t\t\t\t\tconst match = escaped.exec(token.content)\n\t\t\t\t\tif (match) {\n\t\t\t\t\t\tconst index = match.groups.linestart ? match.index + 1 : match.index\n\t\t\t\t\t\tconst matchChars = match.groups.linestart ?? match.groups.special\n\t\t\t\t\t\tconst contentNext = index + matchChars.length\n\t\t\t\t\t\tblock.children.splice(j, 1,\n\t\t\t\t\t\t\tObject.assign({}, token, { content: token.content.slice(0, index) }),\n\t\t\t\t\t\t\tObject.assign({}, open),\n\t\t\t\t\t\t\tObject.assign({}, token, { content: token.content.slice(index, contentNext) }),\n\t\t\t\t\t\t\tObject.assign({}, close),\n\t\t\t\t\t\t\tObject.assign({}, token, { content: token.content.slice(contentNext) }),\n\t\t\t\t\t\t)\n\t\t\t\t\t\tj += 3\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn false\n\t})\n}\n","/*\n * @copyright Copyright (c) 2021 Julius Hrtl <jus@bitgrid.net>\n *\n * @author Julius Hrtl <jus@bitgrid.net>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport store, { textModule } from '../store/index.js'\n\n/**\n * This mixin is required since we cannot be sure that the root Vue instance has\n * registered the global store. This might be the case if the text app components\n * are mounted in other apps e.g. viewer\n */\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\t$store: store,\n\t\t}\n\t},\n\tbeforeMount() {\n\t\tif (typeof this.$store === 'undefined') {\n\t\t\t// Store is undefined, e.g. when used through `viewer.js`\n\t\t\tthis.$store = store\n\t\t} else if (!this.$store.hasModule('text')) {\n\t\t\t// Store lacks text modul (another store exists), e.g. when used as component via NPM package\n\t\t\tthis.$store.registerModule('text', textModule)\n\t\t}\n\t},\n}\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.text-menubar .entry-action.is-active:not(.entry-action-item),.v-popper__inner .entry-action.is-active:not(.entry-action-item),.text-menubar button.entry-action__button.is-active,.v-popper__inner button.entry-action__button.is-active{opacity:1;background-color:var(--color-primary-element-light);border-radius:50%}.text-menubar .entry-action.is-active:not(.entry-action-item) .material-design-icon>svg,.v-popper__inner .entry-action.is-active:not(.entry-action-item) .material-design-icon>svg,.text-menubar button.entry-action__button.is-active .material-design-icon>svg,.v-popper__inner button.entry-action__button.is-active .material-design-icon>svg{fill:var(--color-primary-element)}.text-menubar button.entry-action__button,.v-popper__inner button.entry-action__button{height:44px;margin:0;border:0;position:relative;color:var(--color-main-text);background-color:rgba(0,0,0,0);vertical-align:top;box-shadow:none;padding:0}.text-menubar button.entry-action__button p,.v-popper__inner button.entry-action__button p{padding:0}.text-menubar button.entry-action__button:is(li.entry-action-item button),.v-popper__inner button.entry-action__button:is(li.entry-action-item button){padding:0 .5em 0 0}.text-menubar button.entry-action__button:not(li.entry-action-item button),.v-popper__inner button.entry-action__button:not(li.entry-action-item button){width:44px}.text-menubar button.entry-action__button:hover,.text-menubar button.entry-action__button:focus,.text-menubar button.entry-action__button:active,.v-popper__inner button.entry-action__button:hover,.v-popper__inner button.entry-action__button:focus,.v-popper__inner button.entry-action__button:active{background-color:var(--color-background-dark)}.text-menubar button.entry-action__button:hover:not(:disabled),.text-menubar button.entry-action__button:focus:not(:disabled),.text-menubar button.entry-action__button:active:not(:disabled),.v-popper__inner button.entry-action__button:hover:not(:disabled),.v-popper__inner button.entry-action__button:focus:not(:disabled),.v-popper__inner button.entry-action__button:active:not(:disabled){box-shadow:var(--color-primary-element)}.text-menubar button.entry-action__button:hover,.text-menubar button.entry-action__button:focus,.v-popper__inner button.entry-action__button:hover,.v-popper__inner button.entry-action__button:focus{opacity:1}.text-menubar button.entry-action__button:focus-visible,.v-popper__inner button.entry-action__button:focus-visible{box-shadow:var(--color-primary-element)}.text-menubar .entry-action.entry-action-item.is-active,.v-popper__inner .entry-action.entry-action-item.is-active{background-color:var(--color-primary-element-light);border-radius:var(--border-radius-large)}.text-menubar .button-vue svg,.v-popper__inner .button-vue svg{fill:var(--color-main-text)}.text-menubar .action-item__menutoggle.action-item__menutoggle--with-icon-slot,.v-popper__inner .action-item__menutoggle.action-item__menutoggle--with-icon-slot{opacity:1}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/Menu/ActionEntry.scss\"],\"names\":[],\"mappings\":\"AAAA,0OACC,SAAA,CACA,mDAAA,CACA,iBAAA,CACA,kVACC,iCAAA,CAKD,uFACC,WAAA,CACA,QAAA,CACA,QAAA,CAEA,iBAAA,CACA,4BAAA,CACA,8BAAA,CACA,kBAAA,CACA,eAAA,CACA,SAAA,CAEA,2FACC,SAAA,CAGD,uJACC,kBAAA,CAGD,yJACC,UAAA,CAGD,2SAGC,6CAAA,CACA,qYACC,uCAAA,CAIF,sMAEC,SAAA,CAED,mHACC,uCAAA,CAaD,mHACC,mDAAA,CACA,wCAAA,CAKD,+DACC,2BAAA,CAIF,iKACC,SAAA\",\"sourcesContent\":[\"%text__is-active-item-btn {\\n\\topacity: 1;\\n\\tbackground-color: var(--color-primary-element-light);\\n\\tborder-radius: 50%;\\n\\t.material-design-icon > svg {\\n\\t\\tfill: var(--color-primary-element);\\n\\t}\\n}\\n\\n.text-menubar, .v-popper__inner {\\n\\tbutton.entry-action__button {\\n\\t\\theight: 44px;\\n\\t\\tmargin: 0;\\n\\t\\tborder: 0;\\n\\t\\t// opacity: 0.5;\\n\\t\\tposition: relative;\\n\\t\\tcolor: var(--color-main-text);\\n\\t\\tbackground-color: transparent;\\n\\t\\tvertical-align: top;\\n\\t\\tbox-shadow: none;\\n\\t\\tpadding: 0;\\n\\n\\t\\tp {\\n\\t\\t\\tpadding: 0;\\n\\t\\t}\\n\\n\\t\\t&:is(li.entry-action-item button) {\\n\\t\\t\\tpadding: 0 0.5em 0 0;\\n\\t\\t}\\n\\n\\t\\t&:not(li.entry-action-item button) {\\n\\t\\t\\twidth: 44px;\\n\\t\\t}\\n\\n\\t\\t&:hover,\\n\\t\\t&:focus,\\n\\t\\t&:active {\\n\\t\\t\\tbackground-color: var(--color-background-dark);\\n\\t\\t\\t&:not(:disabled) {\\n\\t\\t\\t\\tbox-shadow: var(--color-primary-element);\\n\\t\\t\\t}\\n\\t\\t}\\n\\n\\t\\t&:hover,\\n\\t\\t&:focus {\\n\\t\\t\\topacity: 1;\\n\\t\\t}\\n\\t\\t&:focus-visible {\\n\\t\\t\\tbox-shadow: var(--color-primary-element);\\n\\t\\t}\\n\\n\\t\\t&.is-active {\\n\\t\\t\\t@extend %text__is-active-item-btn;\\n\\t\\t}\\n\\t}\\n\\n\\t.entry-action.is-active:not(.entry-action-item) {\\n\\t\\t@extend %text__is-active-item-btn;\\n\\t}\\n\\n\\t.entry-action.entry-action-item {\\n\\t\\t&.is-active {\\n\\t\\t\\tbackground-color: var(--color-primary-element-light);\\n\\t\\t\\tborder-radius: var(--border-radius-large);\\n\\t\\t}\\n\\t}\\n\\n\\t.button-vue {\\n\\t\\tsvg {\\n\\t\\t\\tfill: var(--color-main-text);\\n\\t\\t}\\n\\t}\\n\\n\\t.action-item__menutoggle.action-item__menutoggle--with-icon-slot {\\n\\t\\topacity: 1;\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.editor--outline[data-v-4a57d3b2]{width:300px;padding:0 10px 10px 10px;position:fixed;overflow:auto;max-height:calc(100% - 204px)}.editor--outline-mobile[data-v-4a57d3b2]{box-shadow:8px 0 17px -19px var(--color-box-shadow);background-color:var(--color-main-background-translucent);z-index:1}.editor--outline__header[data-v-4a57d3b2]{margin:0;position:sticky;top:0;z-index:1;background-color:var(--color-main-background);padding:.6em .6em .6em 0;display:flex;align-items:center}.editor--outline__header h2[data-v-4a57d3b2]{font-size:1rem;line-height:1.1rem;flex-grow:1;padding:0;margin:0}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/Editor/EditorOutline.vue\"],\"names\":[],\"mappings\":\"AACA,kCACC,WAAA,CACA,wBAAA,CACA,cAAA,CACA,aAAA,CAEA,6BAAA,CAEA,yCACC,mDAAA,CACA,yDAAA,CACA,SAAA,CAGD,0CACC,QAAA,CACA,eAAA,CACA,KAAA,CACA,SAAA,CACA,6CAAA,CACA,wBAAA,CACA,YAAA,CACA,kBAAA,CAEA,6CACC,cAAA,CACA,kBAAA,CACA,WAAA,CACA,SAAA,CACA,QAAA\",\"sourcesContent\":[\"\\n.editor--outline {\\n\\twidth:  300px;\\n\\tpadding: 0 10px 10px 10px;\\n\\tposition: fixed;\\n\\toverflow: auto;\\n\\t// 204px = 50px nc header + 60px collectives titlebar + 44px menubar + 50px bottom margin\\n\\tmax-height: calc(100% - 204px);\\n\\n\\t&-mobile {\\n\\t\\tbox-shadow: 8px 0 17px -19px var(--color-box-shadow);\\n\\t\\tbackground-color: var(--color-main-background-translucent);\\n\\t\\tz-index: 1;\\n\\t}\\n\\n\\t&__header {\\n\\t\\tmargin: 0;\\n\\t\\tposition: sticky;\\n\\t\\ttop: 0;\\n\\t\\tz-index: 1;\\n\\t\\tbackground-color: var(--color-main-background);\\n\\t\\tpadding: 0.6em 0.6em 0.6em 0;\\n\\t\\tdisplay: flex;\\n\\t\\talign-items: center;\\n\\n\\t\\th2 {\\n\\t\\t\\tfont-size: 1rem;\\n\\t\\t\\tline-height: 1.1rem;\\n\\t\\t\\tflex-grow: 1;\\n\\t\\t\\tpadding: 0;\\n\\t\\t\\tmargin: 0;\\n\\t\\t}\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.--initial-render .editor--toc__item{--initial-padding-left: 0;animation:initialPadding 1.5s}.editor--toc{padding:0 10px;color:var(--color-main-text-maxcontrast);--animation-duration: 0.8s}.editor--toc h3{padding-left:.75rem}.editor--toc__list{width:100%;list-style:none;font-size:.9rem;padding:0;animation-name:fadeInLeft;animation-duration:var(--animation-duration)}.editor--toc__item{transform:translateX(var(--padding-left, 0rem));text-overflow:ellipsis;overflow:hidden;white-space:nowrap;animation:initialPadding calc(var(--animation-duration)*2);width:calc(100% - var(--padding-left))}.editor--toc__item a:hover{color:var(--color-primary-element-hover)}.editor--toc__item--1{--padding-left: 0rem;font-weight:600}.editor--toc__item--1:not(:nth-child(1)){margin-top:.5rem}.editor--toc__item--2{--padding-left: 1rem}.editor--toc__item--3{--padding-left: 2rem}.editor--toc__item--4{--padding-left: 3rem}.editor--toc__item--5{--padding-left: 4rem}.editor--toc__item--6{--padding-left: 5rem}.editor--toc__item--previous-1{--initial-padding-left: 0rem }.editor--toc__item--previous-2{--initial-padding-left: 1rem }.editor--toc__item--previous-3{--initial-padding-left: 2rem }.editor--toc__item--previous-4{--initial-padding-left: 3rem }.editor--toc__item--previous-5{--initial-padding-left: 4rem }.editor--toc__item--previous-6{--initial-padding-left: 5rem }@keyframes initialPadding{from{transform:translateX(var(--initial-padding-left, initial))}to{transform:translateX(var(--padding-left, 0rem))}}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/Editor/TableOfContents.vue\"],\"names\":[],\"mappings\":\"AAGE,qCACC,yBAAA,CACA,6BAAA,CAKH,aACC,cAAA,CACA,wCAAA,CACA,0BAAA,CAEA,gBACC,mBAAA,CAGD,mBACC,UAAA,CACA,eAAA,CACA,eAAA,CACA,SAAA,CAEA,yBAAA,CACA,4CAAA,CAGD,mBACC,+CAAA,CACA,sBAAA,CACA,eAAA,CACA,kBAAA,CACA,0DAAA,CACA,sCAAA,CAEA,2BACC,wCAAA,CAGD,sBACC,oBAAA,CACA,eAAA,CACA,yCACC,gBAAA,CAIF,sBACC,oBAAA,CAGD,sBACC,oBAAA,CAGD,sBACC,oBAAA,CAGD,sBACC,oBAAA,CAGD,sBACC,oBAAA,CAGD,+BACC,6BAAA,CAGD,+BACC,6BAAA,CAGD,+BACC,6BAAA,CAGD,+BACC,6BAAA,CAGD,+BACC,6BAAA,CAGD,+BACC,6BAAA,CAKH,0BACE,KACD,0DAAA,CAGC,GACD,+CAAA,CAAA\",\"sourcesContent\":[\"\\n.--initial-render {\\n\\t.editor--toc {\\n\\t\\t&__item {\\n\\t\\t\\t--initial-padding-left: 0;\\n\\t\\t\\tanimation: initialPadding 1.5s;\\n\\t\\t}\\n\\t}\\n}\\n\\n.editor--toc {\\n\\tpadding: 0 10px;\\n\\tcolor: var(--color-main-text-maxcontrast);\\n\\t--animation-duration: 0.8s;\\n\\n\\th3 {\\n\\t\\tpadding-left: 0.75rem;\\n\\t}\\n\\n\\t&__list {\\n\\t\\twidth: 100%;\\n\\t\\tlist-style: none;\\n\\t\\tfont-size: 0.9rem;\\n\\t\\tpadding: 0;\\n\\n\\t\\tanimation-name: fadeInLeft;\\n\\t\\tanimation-duration: var(--animation-duration);\\n\\t}\\n\\n\\t&__item {\\n\\t\\ttransform: translateX(var(--padding-left, 0rem));\\n\\t\\ttext-overflow: ellipsis;\\n\\t\\toverflow: hidden;\\n\\t\\twhite-space: nowrap;\\n\\t\\tanimation: initialPadding calc(var(--animation-duration) * 2);\\n\\t\\twidth: calc(100% - var(--padding-left));\\n\\n\\t\\ta:hover {\\n\\t\\t\\tcolor: var(--color-primary-element-hover);\\n\\t\\t}\\n\\n\\t\\t&--1 {\\n\\t\\t\\t--padding-left: 0rem;\\n\\t\\t\\tfont-weight: 600;\\n\\t\\t\\t&:not(:nth-child(1)) {\\n\\t\\t\\t\\tmargin-top: 0.5rem;\\n\\t\\t\\t}\\n\\t\\t}\\n\\n\\t\\t&--2 {\\n\\t\\t\\t--padding-left: 1rem;\\n\\t\\t}\\n\\n\\t\\t&--3 {\\n\\t\\t\\t--padding-left: 2rem;\\n\\t\\t}\\n\\n\\t\\t&--4 {\\n\\t\\t\\t--padding-left: 3rem;\\n\\t\\t}\\n\\n\\t\\t&--5 {\\n\\t\\t\\t--padding-left: 4rem;\\n\\t\\t}\\n\\n\\t\\t&--6 {\\n\\t\\t\\t--padding-left: 5rem;\\n\\t\\t}\\n\\n\\t\\t&--previous-1 {\\n\\t\\t\\t--initial-padding-left: 0rem\\n\\t\\t}\\n\\n\\t\\t&--previous-2 {\\n\\t\\t\\t--initial-padding-left: 1rem\\n\\t\\t}\\n\\n\\t\\t&--previous-3 {\\n\\t\\t\\t--initial-padding-left: 2rem\\n\\t\\t}\\n\\n\\t\\t&--previous-4 {\\n\\t\\t\\t--initial-padding-left: 3rem\\n\\t\\t}\\n\\n\\t\\t&--previous-5 {\\n\\t\\t\\t--initial-padding-left: 4rem\\n\\t\\t}\\n\\n\\t\\t&--previous-6 {\\n\\t\\t\\t--initial-padding-left: 5rem\\n\\t\\t}\\n\\t}\\n}\\n\\n@keyframes initialPadding {\\n  from {\\n\\ttransform: translateX(var(--initial-padding-left, initial));\\n  }\\n\\n  to {\\n\\ttransform: translateX(var(--padding-left, 0rem));\\n  }\\n}\\n\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.modal__content[data-v-403f8ff2]{height:80vh;padding:0 50px;display:flex;justify-content:center}.modal__content img[data-v-403f8ff2]{width:100%;height:100%;object-fit:contain}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/ImageView/ShowImageModal.vue\"],\"names\":[],\"mappings\":\"AACA,iCACC,WAAA,CACA,cAAA,CACA,YAAA,CACA,sBAAA,CACA,qCACC,UAAA,CACA,WAAA,CACA,kBAAA\",\"sourcesContent\":[\"\\n.modal__content {\\n\\theight: 80vh;\\n\\tpadding: 0 50px;\\n\\tdisplay: flex;\\n\\tjustify-content: center;\\n\\timg {\\n\\t\\twidth: 100%;\\n\\t\\theight: 100%;\\n\\t\\tobject-fit: contain;\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `ul.inline-container-content{display:flex;justify-content:space-between}ul.inline-container-content li{flex:1 1}ul.inline-container-content .action-button{padding:0 !important;width:100%;display:flex;justify-content:center}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/InlineActionsContainer.vue\"],\"names\":[],\"mappings\":\"AACA,4BACC,YAAA,CACA,6BAAA,CACA,+BACC,QAAA,CAGD,2CAEC,oBAAA,CACA,UAAA,CACA,YAAA,CACA,sBAAA\",\"sourcesContent\":[\"\\nul.inline-container-content {\\n\\tdisplay: flex;\\n\\tjustify-content: space-between;\\n\\tli {\\n\\t\\tflex: 1 1;\\n\\t}\\n\\n\\t.action-button {\\n\\t\\t// Fix action buttons beeing shifted to the left (right padding)\\n\\t\\tpadding: 0 !important;\\n\\t\\twidth: 100%;\\n\\t\\tdisplay: flex;\\n\\t\\tjustify-content: center;\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.emoji-list[data-v-74f9a54a]{border-radius:var(--border-radius);background-color:var(--color-main-background);box-shadow:0 1px 5px var(--color-box-shadow);overflow:auto;min-width:200px;max-width:200px;padding:4px;max-height:195.5px;margin:5px 0}.emoji-list__item[data-v-74f9a54a]{border-radius:8px;padding:4px 8px;margin-bottom:4px;opacity:.8;cursor:pointer;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.emoji-list__item[data-v-74f9a54a]:last-child{margin-bottom:0}.emoji-list__item__emoji[data-v-74f9a54a]{padding-right:8px}.emoji-list__item.is-selected[data-v-74f9a54a],.emoji-list__item[data-v-74f9a54a]:focus,.emoji-list__item[data-v-74f9a54a]:hover{opacity:1;background-color:var(--color-primary-element-light)}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/Suggestion/Emoji/EmojiList.vue\"],\"names\":[],\"mappings\":\"AACA,6BACC,kCAAA,CACA,6CAAA,CACA,4CAAA,CACA,aAAA,CAEA,eAAA,CACA,eAAA,CACA,WAAA,CAEA,kBAAA,CACA,YAAA,CAEA,mCACC,iBAAA,CACA,eAAA,CACA,iBAAA,CACA,UAAA,CACA,cAAA,CAGA,kBAAA,CACA,eAAA,CACA,sBAAA,CAEA,8CACC,eAAA,CAGD,0CACC,iBAAA,CAGD,iIAGC,SAAA,CACA,mDAAA\",\"sourcesContent\":[\"\\n.emoji-list {\\n\\tborder-radius: var(--border-radius);\\n\\tbackground-color: var(--color-main-background);\\n\\tbox-shadow: 0 1px 5px var(--color-box-shadow);\\n\\toverflow: auto;\\n\\n\\tmin-width: 200px;\\n\\tmax-width: 200px;\\n\\tpadding: 4px;\\n\\t// Show maximum 5 entries and a half to show scroll\\n\\tmax-height: 35.5px * 5 + 18px;\\n\\tmargin: 5px 0;\\n\\n\\t&__item {\\n\\t\\tborder-radius: 8px;\\n\\t\\tpadding: 4px 8px;\\n\\t\\tmargin-bottom: 4px;\\n\\t\\topacity: 0.8;\\n\\t\\tcursor: pointer;\\n\\n\\t\\t// Take care of long names\\n\\t\\twhite-space: nowrap;\\n\\t\\toverflow: hidden;\\n\\t\\ttext-overflow: ellipsis;\\n\\n\\t\\t&:last-child {\\n\\t\\t\\tmargin-bottom: 0;\\n\\t\\t}\\n\\n\\t\\t&__emoji {\\n\\t\\t\\tpadding-right: 8px;\\n\\t\\t}\\n\\n\\t\\t&.is-selected,\\n\\t\\t&:focus,\\n\\t\\t&:hover {\\n\\t\\t\\topacity: 1;\\n\\t\\t\\tbackground-color: var(--color-primary-element-light);\\n\\t\\t}\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.link-picker__item[data-v-11ad0ffc]{display:flex;align-items:center}.link-picker__item>div[data-v-11ad0ffc]{padding:4px;padding-left:8px;overflow:hidden;text-overflow:ellipsis}.link-picker__item img[data-v-11ad0ffc]{width:20px;height:20px;filter:var(--background-invert-if-dark)}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/Suggestion/LinkPicker/LinkPickerList.vue\"],\"names\":[],\"mappings\":\"AACA,oCACC,YAAA,CACA,kBAAA,CAEA,wCACC,WAAA,CACA,gBAAA,CACA,eAAA,CACA,sBAAA,CAGD,wCACC,UAAA,CACA,WAAA,CACA,uCAAA\",\"sourcesContent\":[\"\\n.link-picker__item {\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\n\\t& > div {\\n\\t\\tpadding: 4px;\\n\\t\\tpadding-left: 8px;\\n\\t\\toverflow: hidden;\\n\\t\\ttext-overflow: ellipsis;\\n\\t}\\n\\n\\timg {\\n\\t\\twidth: 20px;\\n\\t\\theight: 20px;\\n\\t\\tfilter: var(--background-invert-if-dark);\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.suggestion-list[data-v-7d01400b]{border-radius:var(--border-radius);background-color:var(--color-main-background);box-shadow:0 1px 5px var(--color-box-shadow);overflow:auto;min-width:200px;max-width:400px;width:80vw;padding:4px;max-height:195.5px;margin:5px 0}.suggestion-list__group[data-v-7d01400b]{font-weight:bold;color:var(--color-primary-element);font-size:var(--default-font-size);line-height:44px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;opacity:.7;box-shadow:none !important;flex-shrink:0;padding-left:8px}.suggestion-list__item[data-v-7d01400b]{border-radius:8px;padding:4px 8px;margin-bottom:4px;opacity:.8;cursor:pointer;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.suggestion-list__item[data-v-7d01400b]:last-child{margin-bottom:0}.suggestion-list__item__emoji[data-v-7d01400b]{padding-right:8px}.suggestion-list__item.is-selected[data-v-7d01400b],.suggestion-list__item[data-v-7d01400b]:focus,.suggestion-list__item[data-v-7d01400b]:hover{opacity:1;background-color:var(--color-primary-element-light)}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/Suggestion/SuggestionListWrapper.vue\"],\"names\":[],\"mappings\":\"AACA,kCACC,kCAAA,CACA,6CAAA,CACA,4CAAA,CACA,aAAA,CAEA,eAAA,CACA,eAAA,CACA,UAAA,CACA,WAAA,CAEA,kBAAA,CACA,YAAA,CAEA,yCACC,gBAAA,CACA,kCAAA,CACA,kCAAA,CACA,gBAAA,CACA,kBAAA,CACA,eAAA,CACA,sBAAA,CACA,UAAA,CACA,0BAAA,CACA,aAAA,CACA,gBAAA,CAGD,wCACC,iBAAA,CACA,eAAA,CACA,iBAAA,CACA,UAAA,CACA,cAAA,CAGA,kBAAA,CACA,eAAA,CACA,sBAAA,CAEA,mDACC,eAAA,CAGD,+CACC,iBAAA,CAGD,gJAGC,SAAA,CACA,mDAAA\",\"sourcesContent\":[\"\\n.suggestion-list {\\n\\tborder-radius: var(--border-radius);\\n\\tbackground-color: var(--color-main-background);\\n\\tbox-shadow: 0 1px 5px var(--color-box-shadow);\\n\\toverflow: auto;\\n\\n\\tmin-width: 200px;\\n\\tmax-width: 400px;\\n\\twidth: 80vw;\\n\\tpadding: 4px;\\n\\t// Show maximum 5 entries and a half to show scroll\\n\\tmax-height: 35.5px * 5 + 18px;\\n\\tmargin: 5px 0;\\n\\n\\t&__group {\\n\\t\\tfont-weight: bold;\\n\\t\\tcolor: var(--color-primary-element);\\n\\t\\tfont-size: var(--default-font-size);\\n\\t\\tline-height: 44px;\\n\\t\\twhite-space: nowrap;\\n\\t\\toverflow: hidden;\\n\\t\\ttext-overflow: ellipsis;\\n\\t\\topacity: .7;\\n\\t\\tbox-shadow: none !important;\\n\\t\\tflex-shrink: 0;\\n\\t\\tpadding-left: 8px;\\n\\t}\\n\\n\\t&__item {\\n\\t\\tborder-radius: 8px;\\n\\t\\tpadding: 4px 8px;\\n\\t\\tmargin-bottom: 4px;\\n\\t\\topacity: 0.8;\\n\\t\\tcursor: pointer;\\n\\n\\t\\t// Take care of long names\\n\\t\\twhite-space: nowrap;\\n\\t\\toverflow: hidden;\\n\\t\\ttext-overflow: ellipsis;\\n\\n\\t\\t&:last-child {\\n\\t\\t\\tmargin-bottom: 0;\\n\\t\\t}\\n\\n\\t\\t&__emoji {\\n\\t\\t\\tpadding-right: 8px;\\n\\t\\t}\\n\\n\\t\\t&.is-selected,\\n\\t\\t&:focus,\\n\\t\\t&:hover {\\n\\t\\t\\topacity: 1;\\n\\t\\t\\tbackground-color: var(--color-primary-element-light);\\n\\t\\t}\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.callout[data-v-4387ae9f]{background-color:var(--callout-background, var(--color-background-hover));border-left-color:var(--callout-border, var(--color-primary-element));border-radius:var(--border-radius);padding:1em;padding-left:.5em;border-left-width:.3em;border-left-style:solid;position:relative;margin-bottom:.5em;display:flex;align-items:center;justify-content:flex-start}.callout+*[data-v-4387ae9f]{margin-top:.5em}.callout .callout__content[data-v-4387ae9f]{margin-left:1em}.callout .callout__content[data-v-4387ae9f] p:last-child{margin-bottom:0}.callout .callout__icon[data-v-4387ae9f],.callout .callout__icon[data-v-4387ae9f] svg{color:var(--callout-border)}.callout[data-v-4387ae9f],.callout--info[data-v-4387ae9f]{--callout-border: var(--color-info, #006aa3)}.callout--warn[data-v-4387ae9f]{--callout-border: var(--color-warning)}.callout--error[data-v-4387ae9f]{--callout-border: var(--color-error)}.callout--success[data-v-4387ae9f]{--callout-border: var(--color-success)}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/nodes/Callout.vue\"],\"names\":[],\"mappings\":\"AACA,0BACC,yEAAA,CACA,qEAAA,CACA,kCAAA,CACA,WAAA,CACA,iBAAA,CACA,sBAAA,CACA,uBAAA,CACA,iBAAA,CACA,kBAAA,CAEA,YAAA,CACA,kBAAA,CACA,0BAAA,CAEA,4BACC,eAAA,CAGD,4CACC,eAAA,CAEC,yDACC,eAAA,CAMF,sFACC,2BAAA,CAKF,0DACC,4CAAA,CAID,gCACC,sCAAA,CAID,iCACC,oCAAA,CAID,mCACC,sCAAA\",\"sourcesContent\":[\"\\n.callout {\\n\\tbackground-color: var(--callout-background, var(--color-background-hover));\\n\\tborder-left-color: var(--callout-border, var(--color-primary-element));\\n\\tborder-radius: var(--border-radius);\\n\\tpadding: 1em;\\n\\tpadding-left: 0.5em;\\n\\tborder-left-width: 0.3em;\\n\\tborder-left-style: solid;\\n\\tposition: relative;\\n\\tmargin-bottom: 0.5em;\\n\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tjustify-content: flex-start;\\n\\n\\t&+ * {\\n\\t\\tmargin-top: 0.5em;\\n\\t}\\n\\n\\t.callout__content {\\n\\t\\tmargin-left: 1em;\\n\\t\\t&:deep(p) {\\n\\t\\t\\t&:last-child {\\n\\t\\t\\t\\tmargin-bottom: 0;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n\\n\\t.callout__icon {\\n\\t\\t&, :deep(svg) {\\n\\t\\t\\tcolor: var(--callout-border);\\n\\t\\t}\\n\\t}\\n\\n\\t// Info (default) variables\\n\\t&, &--info {\\n\\t\\t--callout-border: var(--color-info, #006aa3);\\n\\t}\\n\\n\\t// Warn variables\\n\\t&--warn {\\n\\t\\t--callout-border: var(--color-warning);\\n\\t}\\n\\n\\t// Error variables\\n\\t&--error {\\n\\t\\t--callout-border: var(--color-error);\\n\\t}\\n\\n\\t// Success variables\\n\\t&--success {\\n\\t\\t--callout-border: var(--color-success);\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.code-block[data-v-54c047fa]{background-color:var(--color-background-dark)}.code-block-header[data-v-54c047fa]{display:flex;flex-direction:row;justify-content:space-between;align-items:stretch;position:absolute;right:12px;margin-top:4px}.split-view[data-v-54c047fa]{display:flex;flex-direction:row;justify-content:space-between;align-items:stretch;gap:12px}.split-view>*[data-v-54c047fa]{flex:1}.split-view__preview[data-v-54c047fa]{text-align:center}@media only screen and (max-width: 600px){.split-view[data-v-54c047fa]{flex-direction:column}}.view-switch[data-v-54c047fa]{display:flex;flex-direction:row}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/nodes/CodeBlockView.vue\"],\"names\":[],\"mappings\":\"AACA,6BACC,6CAAA,CAGD,oCACC,YAAA,CACA,kBAAA,CACA,6BAAA,CACA,mBAAA,CACA,iBAAA,CACA,UAAA,CACA,cAAA,CAGD,6BACC,YAAA,CACA,kBAAA,CACA,6BAAA,CACA,mBAAA,CACA,QAAA,CAEA,+BACC,MAAA,CAGD,sCACC,iBAAA,CAIF,0CACC,6BACC,qBAAA,CAAA,CAIF,8BACC,YAAA,CACA,kBAAA\",\"sourcesContent\":[\"\\n.code-block {\\n\\tbackground-color: var(--color-background-dark);\\n}\\n\\n.code-block-header {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\tjustify-content: space-between;\\n\\talign-items: stretch;\\n\\tposition: absolute;\\n\\tright: 12px;\\n\\tmargin-top: 4px;\\n}\\n\\n.split-view {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\tjustify-content: space-between;\\n\\talign-items: stretch;\\n\\tgap: 12px;\\n\\n\\t& > * {\\n\\t\\tflex: 1;\\n\\t}\\n\\n\\t&__preview {\\n\\t\\ttext-align: center;\\n\\t}\\n}\\n\\n@media only screen and (max-width: 600px) {\\n\\t.split-view {\\n\\t\\tflex-direction: column;\\n\\t}\\n}\\n\\n.view-switch {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `div.ProseMirror h1,div.ProseMirror h2,div.ProseMirror h3,div.ProseMirror h4,div.ProseMirror h5,div.ProseMirror h6{position:relative}div.ProseMirror h1 .heading-anchor[contenteditable=false],div.ProseMirror h2 .heading-anchor[contenteditable=false],div.ProseMirror h3 .heading-anchor[contenteditable=false],div.ProseMirror h4 .heading-anchor[contenteditable=false],div.ProseMirror h5 .heading-anchor[contenteditable=false],div.ProseMirror h6 .heading-anchor[contenteditable=false]{width:1em;opacity:0;padding:0;left:-1em;bottom:0;font-size:max(1em,16px);position:absolute;text-decoration:none;transition-duration:.15s;transition-property:opacity;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}div.ProseMirror h1:hover .heading-anchor,div.ProseMirror h2:hover .heading-anchor,div.ProseMirror h3:hover .heading-anchor,div.ProseMirror h4:hover .heading-anchor,div.ProseMirror h5:hover .heading-anchor,div.ProseMirror h6:hover .heading-anchor{opacity:.5 !important}div.ProseMirror h1:focus-visible,div.ProseMirror h2:focus-visible,div.ProseMirror h3:focus-visible,div.ProseMirror h4:focus-visible,div.ProseMirror h5:focus-visible,div.ProseMirror h6:focus-visible{outline:none}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/nodes/Heading/HeadingView.vue\"],\"names\":[],\"mappings\":\"AAGC,kHACC,iBAAA,CACA,4VAEC,SAAA,CACA,SAAA,CACA,SAAA,CACA,SAAA,CACA,QAAA,CACA,uBAAA,CACA,iBAAA,CACA,oBAAA,CACA,wBAAA,CACA,2BAAA,CACA,uDAAA,CAGD,sPACC,qBAAA,CAGD,sMACC,YAAA\",\"sourcesContent\":[\"\\ndiv.ProseMirror {\\n\\t/* Anchor links */\\n\\th1,h2,h3,h4,h5,h6 {\\n\\t\\tposition: relative;\\n\\t\\t.heading-anchor[contenteditable=\\\"false\\\"] {\\n\\t\\t\\t// Shrink clickable area of anchor permalinks to not overlay the heading\\n\\t\\t\\twidth: 1em;\\n\\t\\t\\topacity: 0;\\n\\t\\t\\tpadding: 0;\\n\\t\\t\\tleft: -1em;\\n\\t\\t\\tbottom: 0;\\n\\t\\t\\tfont-size: max(1em, 16px);\\n\\t\\t\\tposition: absolute;\\n\\t\\t\\ttext-decoration: none;\\n\\t\\t\\ttransition-duration: .15s;\\n\\t\\t\\ttransition-property: opacity;\\n\\t\\t\\ttransition-timing-function: cubic-bezier(.4,0,.2,1);\\n\\t\\t}\\n\\n\\t\\t&:hover .heading-anchor {\\n\\t\\t\\topacity: 0.5!important;\\n\\t\\t}\\n\\n\\t\\t&:focus-visible {\\n\\t\\t\\toutline: none;\\n\\t\\t}\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.image[data-v-58f97ef1]{margin:0;padding:0}.image[data-v-58f97ef1],.image *[data-v-58f97ef1]{-webkit-user-modify:read-only !important}.image__caption[data-v-58f97ef1]{text-align:center;color:var(--color-text-lighter);display:flex;align-items:center;justify-content:center}.image__caption__wrapper[data-v-58f97ef1]{position:relative}.image__caption__delete[data-v-58f97ef1]{display:flex;flex-basis:20%;align-items:center;width:20px !important;height:20px;position:absolute;bottom:-1px;right:-3px}.image__caption__delete[data-v-58f97ef1],.image__caption__delete svg[data-v-58f97ef1]{cursor:pointer}.image__caption .image__caption__wrapper[data-v-58f97ef1]{flex-basis:80%}.image__caption input[type=text][data-v-58f97ef1]{width:85%;text-align:center;background-color:rgba(0,0,0,0);border:none !important;color:var(--color-text-maxcontrast) !important}.image__caption input[type=text][data-v-58f97ef1]:focus{border:2px solid var(--color-border-dark) !important;color:var(--color-main-text) !important}.image__caption figcaption[data-v-58f97ef1]{color:var(--color-text-maxcontrast) !important;max-width:80%;text-align:center;width:fit-content}.image__loading[data-v-58f97ef1]{height:100px}.image__main[data-v-58f97ef1]{max-height:calc(100vh - 50px - 50px)}.image__main--broken-icon[data-v-58f97ef1],.image__error-message[data-v-58f97ef1]{color:var(--color-text-maxcontrast)}.image__error-message[data-v-58f97ef1]{display:block;text-align:center}.image__view[data-v-58f97ef1]{text-align:center;position:relative}.image__view img[data-v-58f97ef1]{max-width:100%}.image__view:hover input[type=text][data-v-58f97ef1]{border:2px solid var(--color-border-dark) !important;color:var(--color-main-text) !important}.media[data-v-58f97ef1]{display:flex;align-items:center;justify-content:left}.media .media__wrapper[data-v-58f97ef1]{display:flex;border:2px solid var(--color-border);border-radius:var(--border-radius-large);padding:8px}.media .media__wrapper img[data-v-58f97ef1]{width:44px;height:44px}.media .media__wrapper .metadata[data-v-58f97ef1]{margin-left:8px;display:flex;flex-direction:column;align-items:start}.media .media__wrapper .metadata span[data-v-58f97ef1]{line-height:20px;font-weight:normal}.media .media__wrapper .metadata span.size[data-v-58f97ef1]{color:var(--color-text-maxcontrast)}.media .buttons[data-v-58f97ef1]{margin-left:8px}.fade-enter-active[data-v-58f97ef1]{transition:opacity .3s ease-in-out}.fade-enter-to[data-v-58f97ef1]{opacity:1}.fade-enter[data-v-58f97ef1]{opacity:0}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/nodes/ImageView.vue\"],\"names\":[],\"mappings\":\"AACA,wBACC,QAAA,CACA,SAAA,CAEA,kDACC,wCAAA,CAIF,iCACC,iBAAA,CACA,+BAAA,CACA,YAAA,CACA,kBAAA,CACA,sBAAA,CACA,0CACC,iBAAA,CAED,yCACC,YAAA,CACA,cAAA,CACA,kBAAA,CACA,qBAAA,CACA,WAAA,CACA,iBAAA,CACA,WAAA,CACA,UAAA,CACA,sFACC,cAAA,CAGF,0DACC,cAAA,CAED,kDACC,SAAA,CACA,iBAAA,CACA,8BAAA,CACA,sBAAA,CACA,8CAAA,CAEA,wDACC,oDAAA,CACA,uCAAA,CAGF,4CACC,8CAAA,CACA,aAAA,CACA,iBAAA,CACA,iBAAA,CAIF,iCACC,YAAA,CAGD,8BACC,oCAAA,CAGD,kFACC,mCAAA,CAGD,uCACC,aAAA,CACA,iBAAA,CAGD,8BACC,iBAAA,CACA,iBAAA,CAEA,kCACC,cAAA,CAIA,qDACC,oDAAA,CACA,uCAAA,CAKH,wBACC,YAAA,CACA,kBAAA,CACA,oBAAA,CACA,wCACC,YAAA,CACA,oCAAA,CACA,wCAAA,CACA,WAAA,CAEA,4CACC,UAAA,CACA,WAAA,CAGD,kDACC,eAAA,CACA,YAAA,CACA,qBAAA,CACA,iBAAA,CAEA,uDACC,gBAAA,CACA,kBAAA,CAEA,4DACC,mCAAA,CAKJ,iCACC,eAAA,CAIF,oCACC,kCAAA,CAGD,gCACC,SAAA,CAGD,6BACC,SAAA\",\"sourcesContent\":[\"\\n.image {\\n\\tmargin: 0;\\n\\tpadding: 0;\\n\\n\\t&, * {\\n\\t\\t-webkit-user-modify: read-only !important;\\n\\t}\\n}\\n\\n.image__caption {\\n\\ttext-align: center;\\n\\tcolor: var(--color-text-lighter);\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tjustify-content: center;\\n\\t&__wrapper {\\n\\t\\tposition: relative;\\n\\t}\\n\\t&__delete {\\n\\t\\tdisplay: flex;\\n\\t\\tflex-basis: 20%;\\n\\t\\talign-items: center;\\n\\t\\twidth: 20px !important;\\n\\t\\theight: 20px;\\n\\t\\tposition: absolute;\\n\\t\\tbottom: -1px;\\n\\t\\tright: -3px;\\n\\t\\t&, svg {\\n\\t\\t\\tcursor: pointer;\\n\\t\\t}\\n\\t}\\n\\t.image__caption__wrapper {\\n\\t\\tflex-basis: 80%;\\n\\t}\\n\\tinput[type='text'] {\\n\\t\\twidth: 85%;\\n\\t\\ttext-align: center;\\n\\t\\tbackground-color: transparent;\\n\\t\\tborder: none !important;\\n\\t\\tcolor: var(--color-text-maxcontrast) !important;\\n\\n\\t\\t&:focus {\\n\\t\\t\\tborder: 2px solid var(--color-border-dark) !important;\\n\\t\\t\\tcolor: var(--color-main-text) !important;\\n\\t\\t}\\n\\t}\\n\\tfigcaption {\\n\\t\\tcolor: var(--color-text-maxcontrast) !important;\\n\\t\\tmax-width: 80%;\\n\\t\\ttext-align: center;\\n\\t\\twidth: fit-content;\\n\\t}\\n}\\n\\n.image__loading {\\n\\theight: 100px;\\n}\\n\\n.image__main {\\n\\tmax-height: calc(100vh - 50px - 50px);\\n}\\n\\n.image__main--broken-icon, .image__error-message {\\n\\tcolor: var(--color-text-maxcontrast);\\n}\\n\\n.image__error-message {\\n\\tdisplay: block;\\n\\ttext-align: center;\\n}\\n\\n.image__view {\\n\\ttext-align: center;\\n\\tposition: relative;\\n\\n\\timg {\\n\\t\\tmax-width: 100%;\\n\\t}\\n\\n\\t&:hover {\\n\\t\\tinput[type='text'] {\\n\\t\\t\\tborder: 2px solid var(--color-border-dark) !important;\\n\\t\\t\\tcolor: var(--color-main-text) !important;\\n\\t\\t}\\n\\t}\\n}\\n\\n.media {\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tjustify-content: left;\\n\\t.media__wrapper {\\n\\t\\tdisplay: flex;\\n\\t\\tborder: 2px solid var(--color-border);\\n\\t\\tborder-radius: var(--border-radius-large);\\n\\t\\tpadding: 8px;\\n\\n\\t\\timg {\\n\\t\\t\\twidth: 44px;\\n\\t\\t\\theight: 44px;\\n\\t\\t}\\n\\n\\t\\t.metadata {\\n\\t\\t\\tmargin-left: 8px;\\n\\t\\t\\tdisplay: flex;\\n\\t\\t\\tflex-direction: column;\\n\\t\\t\\talign-items: start;\\n\\n\\t\\t\\tspan {\\n\\t\\t\\t\\tline-height: 20px;\\n\\t\\t\\t\\tfont-weight: normal;\\n\\n\\t\\t\\t\\t&.size {\\n\\t\\t\\t\\t\\tcolor: var(--color-text-maxcontrast);\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n\\t.buttons {\\n\\t\\tmargin-left: 8px;\\n\\t}\\n}\\n\\n.fade-enter-active {\\n\\ttransition: opacity .3s ease-in-out;\\n}\\n\\n.fade-enter-to {\\n\\topacity: 1;\\n}\\n\\n.fade-enter {\\n\\topacity: 0;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `[data-v-b95f24a4] div.widgets--list a.widget-default{color:var(--color-main-text);padding:0;text-decoration:none;max-width:calc(100vw - 56px)}[data-v-b95f24a4] .widget-default--details{overflow:hidden}[data-v-b95f24a4] .widget-default--details p{margin-bottom:4px !important}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/nodes/ParagraphView.vue\"],\"names\":[],\"mappings\":\"AACA,qDACC,4BAAA,CACA,SAAA,CACA,oBAAA,CACA,4BAAA,CAGD,2CACC,eAAA,CACA,6CACC,4BAAA\",\"sourcesContent\":[\"\\n:deep(div.widgets--list a.widget-default) {\\n\\tcolor: var(--color-main-text);\\n\\tpadding: 0;\\n\\ttext-decoration: none;\\n\\tmax-width: calc(100vw - 56px);\\n}\\n\\n:deep(.widget-default--details) {\\n\\toverflow:hidden;\\n\\tp {\\n\\t\\tmargin-bottom: 4px !important;\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `td[data-v-3543004d]{position:relative}td .container[data-v-3543004d]{display:flex;flex-wrap:wrap;min-height:36px}td .content[data-v-3543004d]{flex:1 1 0;margin:0;padding-top:.6em}td .action-item[data-v-3543004d]{position:absolute;right:-48px;flex:0 1 auto;display:none;top:2px}td:last-child .action-item[data-v-3543004d]{display:block;opacity:50%}td:last-child:hover .action-item[data-v-3543004d],td:last-child:active .action-item[data-v-3543004d],td:last-child:focus .action-item[data-v-3543004d],td:last-child:focus-within .action-item[data-v-3543004d]{opacity:100%}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/nodes/Table/TableCellView.vue\"],\"names\":[],\"mappings\":\"AACA,oBACC,iBAAA,CAEA,+BACC,YAAA,CACA,cAAA,CACA,eAAA,CAGD,6BACC,UAAA,CACA,QAAA,CACA,gBAAA,CAGD,iCACC,iBAAA,CACA,WAAA,CACA,aAAA,CACA,YAAA,CACA,OAAA,CAIA,4CACC,aAAA,CACA,WAAA,CAIA,gNACC,YAAA\",\"sourcesContent\":[\"\\ntd {\\n\\tposition: relative;\\n\\n\\t.container {\\n\\t\\tdisplay: flex;\\n\\t\\tflex-wrap: wrap;\\n\\t\\tmin-height: 36px;\\n\\t}\\n\\n\\t.content {\\n\\t\\tflex: 1 1 0;\\n\\t\\tmargin: 0;\\n\\t\\tpadding-top: 0.6em;\\n\\t}\\n\\n\\t.action-item {\\n\\t\\tposition: absolute;\\n\\t\\tright: -48px;\\n\\t\\tflex: 0 1 auto;\\n\\t\\tdisplay: none;\\n\\t\\ttop: 2px;\\n\\t}\\n\\n\\t&:last-child {\\n\\t\\t.action-item {\\n\\t\\t\\tdisplay: block;\\n\\t\\t\\topacity: 50%;\\n\\t\\t}\\n\\n\\t\\t&:hover, &:active, &:focus, &:focus-within {\\n\\t\\t\\t.action-item {\\n\\t\\t\\t\\topacity: 100%;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n\\n}\\n\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `th .content[data-v-25a85f13]{margin:0;padding-top:.75em;flex-grow:1}th .action-item[data-v-25a85f13]{opacity:50%}th:hover .action-item[data-v-25a85f13],th:active .action-item[data-v-25a85f13],th:focus .action-item[data-v-25a85f13],th:focus-within .action-item[data-v-25a85f13]{opacity:100%}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/nodes/Table/TableHeaderView.vue\"],\"names\":[],\"mappings\":\"AAGC,6BACC,QAAA,CACA,iBAAA,CACA,WAAA,CAED,iCACC,WAAA,CAIA,oKACC,YAAA\",\"sourcesContent\":[\"\\nth {\\n\\n\\t.content {\\n\\t\\tmargin: 0;\\n\\t\\tpadding-top: 0.75em;\\n\\t\\tflex-grow: 1;\\n\\t}\\n\\t.action-item {\\n\\t\\topacity: 50%;\\n\\t}\\n\\n\\t&:hover, &:active, &:focus, &:focus-within {\\n\\t\\t.action-item {\\n\\t\\t\\topacity: 100%;\\n\\t\\t}\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.table-wrapper[data-v-261cbb42]{position:relative;overflow-x:auto}.clearfix[data-v-261cbb42]{clear:both}table[data-v-261cbb42]{float:left}.table-settings[data-v-261cbb42]{padding-left:3px;opacity:.5;position:absolute;top:0;right:3px}.table-settings[data-v-261cbb42]:hover{opacity:1}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/nodes/Table/TableView.vue\"],\"names\":[],\"mappings\":\"AACA,gCACC,iBAAA,CACA,eAAA,CAGD,2BACC,UAAA,CAGD,uBACC,UAAA,CAGD,iCACC,gBAAA,CACA,UAAA,CACA,iBAAA,CACA,KAAA,CACA,SAAA,CAEA,uCACC,SAAA\",\"sourcesContent\":[\"\\n.table-wrapper {\\n\\tposition: relative;\\n\\toverflow-x: auto;\\n}\\n\\n.clearfix {\\n\\tclear: both;\\n}\\n\\ntable {\\n\\tfloat: left;\\n}\\n\\n.table-settings {\\n\\tpadding-left: 3px;\\n\\topacity: .5;\\n\\tposition: absolute;\\n\\ttop: 0;\\n\\tright: 3px;\\n\\n\\t&:hover {\\n\\t\\topacity: 1;\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `\n.action[data-v-881e5fae] {\n\t/* to unify width of ActionInput and ActionButton */\n\tmin-width: 218px;\n}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/Menu/ActionInsertLink.vue\"],\"names\":[],\"mappings\":\";AAiQA;CACA,mDAAA;CACA,gBAAA;AACA\",\"sourcesContent\":[\"<!--\\n  - @copyright Copyright (c) 2022\\n  -\\n  - @license AGPL-3.0-or-later\\n  -\\n  - This program is free software: you can redistribute it and/or modify\\n  - it under the terms of the GNU Affero General Public License as\\n  - published by the Free Software Foundation, either version 3 of the\\n  - License, or (at your option) any later version.\\n  -\\n  - This program is distributed in the hope that it will be useful,\\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\\n  - GNU Affero General Public License for more details.\\n  -\\n  - You should have received a copy of the GNU Affero General Public License\\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\\n  -\\n  -->\\n<template>\\n\\t<NcActions class=\\\"entry-action entry-action__insert-link\\\"\\n\\t\\taria-haspopup\\n\\t\\t:aria-label=\\\"actionEntry.label\\\"\\n\\t\\t:class=\\\"activeClass\\\"\\n\\t\\t:container=\\\"menuIDSelector\\\"\\n\\t\\t:data-text-action-entry=\\\"actionEntry.key\\\"\\n\\t\\t:name=\\\"actionEntry.label\\\"\\n\\t\\t:open=\\\"menuOpen\\\"\\n\\t\\t@update:open=\\\"(open) => { menuOpen = menuOpen || open }\\\">\\n\\t\\t<template #icon>\\n\\t\\t\\t<component :is=\\\"icon\\\"\\n\\t\\t\\t\\t:name=\\\"actionEntry.label\\\"\\n\\t\\t\\t\\t:aria-label=\\\"actionEntry.label\\\"\\n\\t\\t\\t\\taria-haspopup />\\n\\t\\t</template>\\n\\t\\t<NcActionButton v-if=\\\"state.active\\\"\\n\\t\\t\\t:data-text-action-entry=\\\"`${actionEntry.key}-remove`\\\"\\n\\t\\t\\t@click=\\\"removeLink\\\">\\n\\t\\t\\t<template #icon>\\n\\t\\t\\t\\t<LinkOff />\\n\\t\\t\\t</template>\\n\\t\\t\\t{{ t('text', 'Remove link') }}\\n\\t\\t</NcActionButton>\\n\\t\\t<NcActionButton ref=\\\"buttonFile\\\"\\n\\t\\t\\t:data-text-action-entry=\\\"`${actionEntry.key}-file`\\\"\\n\\t\\t\\t@click=\\\"linkFile\\\">\\n\\t\\t\\t<template #icon>\\n\\t\\t\\t\\t<Document />\\n\\t\\t\\t</template>\\n\\t\\t\\t{{ t('text', 'Link to file or folder') }}\\n\\t\\t</NcActionButton>\\n\\t\\t<NcActionInput v-if=\\\"isInputMode\\\"\\n\\t\\t\\ttype=\\\"text\\\"\\n\\t\\t\\t:value=\\\"href\\\"\\n\\t\\t\\t:data-text-action-entry=\\\"`${actionEntry.key}-input`\\\"\\n\\t\\t\\t@submit=\\\"linkWebsite\\\">\\n\\t\\t\\t<template #icon>\\n\\t\\t\\t\\t<Web />\\n\\t\\t\\t</template>\\n\\t\\t\\t{{ t('text', 'Link to website') }}\\n\\t\\t</NcActionInput>\\n\\t\\t<NcActionButton v-else\\n\\t\\t\\t:data-text-action-entry=\\\"`${actionEntry.key}-website`\\\"\\n\\t\\t\\t@click=\\\"linkWebsite\\\">\\n\\t\\t\\t<template #icon>\\n\\t\\t\\t\\t<Web />\\n\\t\\t\\t</template>\\n\\t\\t\\t{{ state.active ? t('text', 'Update link') : t('text', 'Link to website') }}\\n\\t\\t</NcActionButton>\\n\\t\\t<NcActionButton :data-text-action-entry=\\\"`${actionEntry.key}-picker`\\\"\\n\\t\\t\\t@click=\\\"linkPicker\\\">\\n\\t\\t\\t<template #icon>\\n\\t\\t\\t\\t<Shape />\\n\\t\\t\\t</template>\\n\\t\\t\\t{{ t('text', 'Open the Smart Picker') }}\\n\\t\\t</NcActionButton>\\n\\t</NcActions>\\n</template>\\n\\n<script>\\nimport { NcActions, NcActionButton, NcActionInput } from '@nextcloud/vue'\\nimport { getLinkWithPicker } from '@nextcloud/vue/dist/Components/NcRichText.js'\\nimport { FilePickerType, getFilePickerBuilder } from '@nextcloud/dialogs'\\n\\nimport { getMarkAttributes, isActive } from '@tiptap/core'\\n\\nimport { Document, Loading, LinkOff, Web, Shape } from '../icons.js'\\nimport { BaseActionEntry } from './BaseActionEntry.js'\\nimport { optimalPath } from '../../helpers/files.js'\\nimport { useFileMixin } from '../Editor.provider.js'\\nimport { useMenuIDMixin } from './MenuBar.provider.js'\\n\\nexport default {\\n\\tname: 'ActionInsertLink',\\n\\tcomponents: {\\n\\t\\tNcActions,\\n\\t\\tNcActionButton,\\n\\t\\tNcActionInput,\\n\\t\\tDocument,\\n\\t\\tLoading,\\n\\t\\tLinkOff,\\n\\t\\tWeb,\\n\\t\\tShape,\\n\\t},\\n\\textends: BaseActionEntry,\\n\\tmixins: [\\n\\t\\tuseFileMixin,\\n\\t\\tuseMenuIDMixin,\\n\\t],\\n\\tdata: () => {\\n\\t\\treturn {\\n\\t\\t\\thref: null,\\n\\t\\t\\tisInputMode: false,\\n\\t\\t\\tstartPath: null,\\n\\t\\t\\t/** Open state of the actions menu */\\n\\t\\t\\tmenuOpen: false,\\n\\t\\t}\\n\\t},\\n\\tcomputed: {\\n\\t\\tactiveClass() {\\n\\t\\t\\treturn this.state.active ? 'is-active' : ''\\n\\t\\t},\\n\\t\\trelativePath() {\\n\\t\\t\\treturn this.$file?.relativePath ?? '/'\\n\\t\\t},\\n\\t},\\n\\tmethods: {\\n\\t\\t/**\\n\\t\\t * Open dialog and ask user which file to link to\\n\\t\\t * Triggered by the \\\"link file\\\" button\\n\\t\\t */\\n\\t\\tlinkFile() {\\n\\t\\t\\tif (this.startPath === null) {\\n\\t\\t\\t\\tthis.startPath = this.relativePath.split('/').slice(0, -1).join('/')\\n\\t\\t\\t}\\n\\n\\t\\t\\tconst filePicker = getFilePickerBuilder(t('text', 'Select file or folder to link to'))\\n\\t\\t\\t\\t.startAt(this.startPath)\\n\\t\\t\\t\\t.allowDirectories(true)\\n\\t\\t\\t\\t.setMultiSelect(false)\\n\\t\\t\\t\\t.setType(FilePickerType.Choose)\\n\\t\\t\\t\\t.build()\\n\\n\\t\\t\\tfilePicker.pick()\\n\\t\\t\\t\\t.then((file) => {\\n\\t\\t\\t\\t\\tconst client = OC.Files.getClient()\\n\\t\\t\\t\\t\\tclient.getFileInfo(file).then((_status, fileInfo) => {\\n\\t\\t\\t\\t\\t\\tconst path = optimalPath(this.relativePath, `${fileInfo.path}/${fileInfo.name}`)\\n\\t\\t\\t\\t\\t\\tconst encodedPath = path.split('/').map(encodeURIComponent).join('/') + (fileInfo.type === 'dir' ? '/' : '')\\n\\t\\t\\t\\t\\t\\tconst href = `${encodedPath}?fileId=${fileInfo.id}`\\n\\t\\t\\t\\t\\t\\tthis.setLink(href, fileInfo.name)\\n\\t\\t\\t\\t\\t\\tthis.startPath = fileInfo.path + (fileInfo.type === 'dir' ? `/${fileInfo.name}/` : '')\\n\\t\\t\\t\\t\\t})\\n\\t\\t\\t\\t\\tthis.menuOpen = false\\n\\t\\t\\t\\t})\\n\\t\\t\\t\\t.catch(() => {\\n\\t\\t\\t\\t\\t// do not close menu but keep focus\\n\\t\\t\\t\\t\\tthis.$refs.buttonFile.$el.focus()\\n\\t\\t\\t\\t})\\n\\t\\t},\\n\\t\\t/**\\n\\t\\t * Allow user to enter an URL manually\\n\\t\\t * Triggered when by the \\\"link url\\\" button\\n\\t\\t *\\n\\t\\t * @param {Event} event Triggering event\\n\\t\\t */\\n\\t\\tlinkWebsite(event) {\\n\\t\\t\\tif (event?.type === 'submit') {\\n\\t\\t\\t\\tconst href = [...event.target.elements].filter(e => e?.type === 'text')[0].value\\n\\t\\t\\t\\tthis.menuOpen = false\\n\\t\\t\\t\\tthis.isInputMode = false\\n\\t\\t\\t\\tthis.href = null\\n\\t\\t\\t\\treturn this.setLink(href, href)\\n\\t\\t\\t}\\n\\n\\t\\t\\tif (isActive(this.$editor.state, 'link')) {\\n\\t\\t\\t\\tconst attrs = getMarkAttributes(this.$editor.state, 'link')\\n\\t\\t\\t\\tthis.href = attrs.href\\n\\t\\t\\t}\\n\\t\\t\\tthis.isInputMode = true\\n\\t\\t},\\n\\t\\t/**\\n\\t\\t * Save user entered URL as a link markup\\n\\t\\t * Triggered when the user submits the ActionInput\\n\\t\\t *\\n\\t\\t * @param {string} url href attribute of the link\\n\\t\\t * @param {string} text Text part of the link\\n\\t\\t */\\n\\t\\tsetLink(url, text) {\\n\\t\\t\\t// Heuristics for determining if we need a https:// prefix.\\n\\t\\t\\tconst noPrefixes = [\\n\\t\\t\\t\\t/^[a-zA-Z]+:/, // url with protocol (\\\"mailTo:email@domain.tld\\\")\\n\\t\\t\\t\\t/^\\\\//, // absolute path\\n\\t\\t\\t\\t/\\\\?fileId=/, // relative link with fileId\\n\\t\\t\\t\\t/^\\\\.\\\\.?\\\\//, // relative link starting with ./ or ../\\n\\t\\t\\t\\t/^[^.]*[/$]/, // no dots before first '/' - not a domain name\\n\\t\\t\\t\\t/^#/, // url fragment\\n\\t\\t\\t]\\n\\t\\t\\tif (url && !noPrefixes.find(regex => url.match(regex))) {\\n\\t\\t\\t\\turl = 'https://' + url\\n\\t\\t\\t}\\n\\n\\t\\t\\t// Avoid issues when parsing urls later on in markdown that might be entered in an invalid format (e.g. \\\"mailto: example@example.com\\\")\\n\\t\\t\\tconst href = url.replaceAll(' ', '%20')\\n\\t\\t\\tconst chain = this.$editor.chain()\\n\\t\\t\\t// Check if any text is selected, if not insert the lunk using the given text property\\n\\t\\t\\tif (this.$editor.view.state?.selection.empty) {\\n\\t\\t\\t\\tchain.insertContent({\\n\\t\\t\\t\\t\\ttype: 'paragraph',\\n\\t\\t\\t\\t\\tcontent: [{\\n\\t\\t\\t\\t\\t\\ttype: 'text',\\n\\t\\t\\t\\t\\t\\tmarks: [{\\n\\t\\t\\t\\t\\t\\t\\ttype: 'link',\\n\\t\\t\\t\\t\\t\\t\\tattrs: {\\n\\t\\t\\t\\t\\t\\t\\t\\thref,\\n\\t\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\t}],\\n\\t\\t\\t\\t\\t\\ttext,\\n\\t\\t\\t\\t\\t}],\\n\\t\\t\\t\\t})\\n\\t\\t\\t} else {\\n\\t\\t\\t\\tchain.setLink({ href })\\n\\t\\t\\t}\\n\\t\\t\\tchain.focus().run()\\n\\t\\t},\\n\\t\\t/**\\n\\t\\t * Remove link markup at current position\\n\\t\\t * Triggered by the \\\"remove link\\\" button\\n\\t\\t */\\n\\t\\tremoveLink() {\\n\\t\\t\\tthis.$editor.chain().unsetLink().focus().run()\\n\\t\\t\\tthis.menuOpen = false\\n\\t\\t},\\n\\t\\tlinkPicker() {\\n\\t\\t\\tgetLinkWithPicker(null, true)\\n\\t\\t\\t\\t.then(link => {\\n\\t\\t\\t\\t\\tthis.$editor\\n\\t\\t\\t\\t\\t\\t.chain()\\n\\t\\t\\t\\t\\t\\t.focus()\\n\\t\\t\\t\\t\\t\\t.insertContent(link + ' ')\\n\\t\\t\\t\\t\\t\\t.run()\\n\\t\\t\\t\\t})\\n\\t\\t\\t\\t.catch(error => {\\n\\t\\t\\t\\t\\tconsole.error('Smart picker promise rejected', error)\\n\\t\\t\\t\\t})\\n\\t\\t},\\n\\t},\\n}\\n</script>\\n\\n<style scoped>\\n\\t.action {\\n\\t\\t/* to unify width of ActionInput and ActionButton */\\n\\t\\tmin-width: 218px;\\n\\t}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `\n/* This is required to properly render the bubble text (which seems linke a browser bug) */\n.text-editor__wrapper div.ProseMirror .mention[contenteditable=false][data-v-297bb5fa] * {\n\t-webkit-user-modify: read-only !important;\n}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/extensions/Mention.vue\"],\"names\":[],\"mappings\":\";AA8CA,0FAAA;AACA;CACA,yCAAA;AACA\",\"sourcesContent\":[\"<template>\\n\\t<NodeViewWrapper as=\\\"span\\\" class=\\\"mention\\\" contenteditable=\\\"false\\\">\\n\\t\\t<NcUserBubble :user=\\\"node.attrs.id\\\"\\n\\t\\t\\t:display-name=\\\"username\\\"\\n\\t\\t\\t:primary=\\\"isCurrentUser\\\"\\n\\t\\t\\tclass=\\\"mention-user-bubble\\\">\\n\\t\\t\\t@{{ username }}\\n\\t\\t</NcUserBubble>\\n\\t</NodeViewWrapper>\\n</template>\\n\\n<script>\\nimport { NcUserBubble } from '@nextcloud/vue'\\nimport { NodeViewWrapper } from '@tiptap/vue-2'\\nimport { getCurrentUser } from '@nextcloud/auth'\\n\\nexport default {\\n\\tname: 'Mention',\\n\\tcomponents: {\\n\\t\\tNcUserBubble,\\n\\t\\tNodeViewWrapper,\\n\\t},\\n\\tprops: {\\n\\t\\tupdateAttributes: {\\n\\t\\t\\ttype: Function,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\n\\t\\tnode: {\\n\\t\\t\\ttype: Object,\\n\\t\\t\\trequired: true,\\n\\t\\t},\\n\\t},\\n\\tdata() {\\n\\t\\treturn {\\n\\t\\t\\tusername: this.node.attrs.label,\\n\\t\\t}\\n\\t},\\n\\tcomputed: {\\n\\t\\tisCurrentUser() {\\n\\t\\t\\treturn this.node.attrs.id === getCurrentUser()?.uid\\n\\t\\t},\\n\\t},\\n}\\n</script>\\n<style scoped>\\n/* This is required to properly render the bubble text (which seems linke a browser bug) */\\n.text-editor__wrapper div.ProseMirror .mention[contenteditable=false] :deep(*) {\\n\\t-webkit-user-modify: read-only !important;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"editor--outline\",class:{ 'editor--outline-mobile': _vm.mobile },attrs:{\"data-text-el\":\"editor-outline\"}},[_c('header',{staticClass:\"editor--outline__header\"},[_c('NcButton',{staticClass:\"editor--outline__btn-close\",attrs:{\"type\":\"tertiary\",\"aria-label\":_vm.t('text', 'Close outline view')},on:{\"click\":_vm.$outlineActions.toggle},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('Close')]},proxy:true}])}),_vm._v(\" \"),_c('h2',[_vm._v(_vm._s(_vm.t('text', 'Outline')))])],1),_vm._v(\" \"),_c('TableOfContents')],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div data-text-el=\"editor-table-of-contents\" :class=\"{ '--initial-render': initialRender }\" class=\"editor--toc\">\n\t\t<ul class=\"editor--toc__list\">\n\t\t\t<li v-for=\"(heading) in headings\"\n\t\t\t\t:key=\"heading.uuid\"\n\t\t\t\t:data-toc-level=\"heading.level\"\n\t\t\t\tclass=\"editor--toc__item\"\n\t\t\t\t:class=\"{\n\t\t\t\t\t[`editor--toc__item--${heading.level}`]: true,\n\t\t\t\t\t[`editor--toc__item--previous-${heading.previous}`]: heading.previous > 0,\n\t\t\t\t}\">\n\t\t\t\t<a :href=\"`#${heading.id}`\" @click.prevent=\"goto(heading)\">\n\t\t\t\t\t{{ heading.text }}\n\t\t\t\t</a>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\nimport { useEditorMixin } from '../Editor.provider.js'\nimport useStore from '../../mixins/store.js'\n\nexport default {\n\tname: 'TableOfContents',\n\tmixins: [useStore, useEditorMixin],\n\tdata: () => ({\n\t\tinitialRender: true,\n\t}),\n\tcomputed: {\n\t\t...mapState({\n\t\t\theadings: (state) => state.text.headings,\n\t\t}),\n\t},\n\tmounted() {\n\t\tsetTimeout(() => {\n\t\t\tthis.initialRender = false\n\t\t}, 1000)\n\t},\n\tmethods: {\n\t\tgoto(heading) {\n\t\t\tthis.$editor\n\t\t\t\t.chain()\n\t\t\t\t.focus()\n\t\t\t\t.setTextSelection(heading.position)\n\t\t\t\t.scrollIntoView()\n\t\t\t\t.run()\n\n\t\t\tthis.$nextTick(() => {\n\t\t\t\twindow.location.hash = heading.id\n\t\t\t})\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\">\n.--initial-render {\n\t.editor--toc {\n\t\t&__item {\n\t\t\t--initial-padding-left: 0;\n\t\t\tanimation: initialPadding 1.5s;\n\t\t}\n\t}\n}\n\n.editor--toc {\n\tpadding: 0 10px;\n\tcolor: var(--color-main-text-maxcontrast);\n\t--animation-duration: 0.8s;\n\n\th3 {\n\t\tpadding-left: 0.75rem;\n\t}\n\n\t&__list {\n\t\twidth: 100%;\n\t\tlist-style: none;\n\t\tfont-size: 0.9rem;\n\t\tpadding: 0;\n\n\t\tanimation-name: fadeInLeft;\n\t\tanimation-duration: var(--animation-duration);\n\t}\n\n\t&__item {\n\t\ttransform: translateX(var(--padding-left, 0rem));\n\t\ttext-overflow: ellipsis;\n\t\toverflow: hidden;\n\t\twhite-space: nowrap;\n\t\tanimation: initialPadding calc(var(--animation-duration) * 2);\n\t\twidth: calc(100% - var(--padding-left));\n\n\t\ta:hover {\n\t\t\tcolor: var(--color-primary-element-hover);\n\t\t}\n\n\t\t&--1 {\n\t\t\t--padding-left: 0rem;\n\t\t\tfont-weight: 600;\n\t\t\t&:not(:nth-child(1)) {\n\t\t\t\tmargin-top: 0.5rem;\n\t\t\t}\n\t\t}\n\n\t\t&--2 {\n\t\t\t--padding-left: 1rem;\n\t\t}\n\n\t\t&--3 {\n\t\t\t--padding-left: 2rem;\n\t\t}\n\n\t\t&--4 {\n\t\t\t--padding-left: 3rem;\n\t\t}\n\n\t\t&--5 {\n\t\t\t--padding-left: 4rem;\n\t\t}\n\n\t\t&--6 {\n\t\t\t--padding-left: 5rem;\n\t\t}\n\n\t\t&--previous-1 {\n\t\t\t--initial-padding-left: 0rem\n\t\t}\n\n\t\t&--previous-2 {\n\t\t\t--initial-padding-left: 1rem\n\t\t}\n\n\t\t&--previous-3 {\n\t\t\t--initial-padding-left: 2rem\n\t\t}\n\n\t\t&--previous-4 {\n\t\t\t--initial-padding-left: 3rem\n\t\t}\n\n\t\t&--previous-5 {\n\t\t\t--initial-padding-left: 4rem\n\t\t}\n\n\t\t&--previous-6 {\n\t\t\t--initial-padding-left: 5rem\n\t\t}\n\t}\n}\n\n@keyframes initialPadding {\n  from {\n\ttransform: translateX(var(--initial-padding-left, initial));\n  }\n\n  to {\n\ttransform: translateX(var(--padding-left, 0rem));\n  }\n}\n\n</style>\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TableOfContents.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TableOfContents.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TableOfContents.vue?vue&type=style&index=0&id=b2a2fa9e&prod&lang=scss&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TableOfContents.vue?vue&type=style&index=0&id=b2a2fa9e&prod&lang=scss&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./TableOfContents.vue?vue&type=template&id=b2a2fa9e&\"\nimport script from \"./TableOfContents.vue?vue&type=script&lang=js&\"\nexport * from \"./TableOfContents.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TableOfContents.vue?vue&type=style&index=0&id=b2a2fa9e&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"editor--toc\",class:{ '--initial-render': _vm.initialRender },attrs:{\"data-text-el\":\"editor-table-of-contents\"}},[_c('ul',{staticClass:\"editor--toc__list\"},_vm._l((_vm.headings),function(heading){return _c('li',{key:heading.uuid,staticClass:\"editor--toc__item\",class:{\n\t\t\t\t[`editor--toc__item--${heading.level}`]: true,\n\t\t\t\t[`editor--toc__item--previous-${heading.previous}`]: heading.previous > 0,\n\t\t\t},attrs:{\"data-toc-level\":heading.level}},[_c('a',{attrs:{\"href\":`#${heading.id}`},on:{\"click\":function($event){$event.preventDefault();return _vm.goto(heading)}}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(heading.text)+\"\\n\\t\\t\\t\")])])}),0)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div data-text-el=\"editor-outline\" class=\"editor--outline\" :class=\"{ 'editor--outline-mobile': mobile }\">\n\t\t<header class=\"editor--outline__header\">\n\t\t\t<NcButton class=\"editor--outline__btn-close\"\n\t\t\t\ttype=\"tertiary\"\n\t\t\t\t:aria-label=\"t('text', 'Close outline view')\"\n\t\t\t\t@click=\"$outlineActions.toggle\">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<Close />\n\t\t\t\t</template>\n\t\t\t</NcButton>\n\t\t\t<h2>{{ t('text', 'Outline') }}</h2>\n\t\t</header>\n\t\t<TableOfContents />\n\t</div>\n</template>\n\n<script>\nimport debounce from 'debounce'\nimport { NcButton } from '@nextcloud/vue'\nimport TableOfContents from './TableOfContents.vue'\nimport { useOutlineStateMixin, useOutlineActions } from './Wrapper.provider.js'\nimport { Close } from './../icons.js'\nimport useStore from '../../mixins/store.js'\n\nexport default {\n\tname: 'EditorOutline',\n\tcomponents: {\n\t\tClose,\n\t\tNcButton,\n\t\tTableOfContents,\n\t},\n\tmixins: [useStore, useOutlineStateMixin, useOutlineActions],\n\tdata: () => ({\n\t\tmobile: false,\n\t}),\n\tmounted() {\n\t\tthis.$onResize = debounce(() => {\n\t\t\tthis.mobile = this.$el.parentElement.clientWidth < 320\n\t\t}, 10)\n\n\t\tthis.$resizeObserver = new ResizeObserver(this.$onResize)\n\t\tthis.$resizeObserver.observe(this.$el.parentElement)\n\n\t\tthis.$onResize()\n\t},\n\tbeforeDestroy() {\n\t\tthis.$resizeObserver.unobserve(this.$el.parentElement)\n\t\tthis.$resizeObserver = null\n\t\tthis.$onResize = null\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.editor--outline {\n\twidth:  300px;\n\tpadding: 0 10px 10px 10px;\n\tposition: fixed;\n\toverflow: auto;\n\t// 204px = 50px nc header + 60px collectives titlebar + 44px menubar + 50px bottom margin\n\tmax-height: calc(100% - 204px);\n\n\t&-mobile {\n\t\tbox-shadow: 8px 0 17px -19px var(--color-box-shadow);\n\t\tbackground-color: var(--color-main-background-translucent);\n\t\tz-index: 1;\n\t}\n\n\t&__header {\n\t\tmargin: 0;\n\t\tposition: sticky;\n\t\ttop: 0;\n\t\tz-index: 1;\n\t\tbackground-color: var(--color-main-background);\n\t\tpadding: 0.6em 0.6em 0.6em 0;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\n\t\th2 {\n\t\t\tfont-size: 1rem;\n\t\t\tline-height: 1.1rem;\n\t\t\tflex-grow: 1;\n\t\t\tpadding: 0;\n\t\t\tmargin: 0;\n\t\t}\n\t}\n}\n</style>\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditorOutline.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditorOutline.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditorOutline.vue?vue&type=style&index=0&id=4a57d3b2&prod&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditorOutline.vue?vue&type=style&index=0&id=4a57d3b2&prod&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./EditorOutline.vue?vue&type=template&id=4a57d3b2&scoped=true&\"\nimport script from \"./EditorOutline.vue?vue&type=script&lang=js&\"\nexport * from \"./EditorOutline.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EditorOutline.vue?vue&type=style&index=0&id=4a57d3b2&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4a57d3b2\",\n  null\n  \n)\n\nexport default component.exports","<!--\n  - @copyright Copyright (c) 2021 Jonas <jonas@freesources.org>\n  -\n  - @author Jonas <jonas@freesources.org>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\n  -\n  -->\n\n<template>\n\t<div class=\"suggestion-list\">\n\t\t<template v-if=\"hasResults\">\n\t\t\t<div v-for=\"(groupItems, key, groupIndex) in itemGroups\" :key=\"key\">\n\t\t\t\t<div v-if=\"hasGroups\" class=\"suggestion-list__group\">\n\t\t\t\t\t{{ key }}\n\t\t\t\t</div>\n\t\t\t\t<div v-for=\"(item, index) in groupItems\"\n\t\t\t\t\t:key=\"combineIndex(groupIndex, index)\"\n\t\t\t\t\tclass=\"suggestion-list__item\"\n\t\t\t\t\t:class=\"{ 'is-selected': combineIndex(groupIndex, index) === selectedIndex }\"\n\t\t\t\t\t@click=\"selectItem(combineIndex(groupIndex, index))\">\n\t\t\t\t\t<slot :item=\"item\" :active=\"combineIndex(groupIndex, index) === selectedIndex\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</template>\n\t\t<div v-else class=\"suggestion-list__item is-empty\">\n\t\t\t{{ t('text', 'No suggestion found') }}\n\t\t</div>\n\t</div>\n</template>\n<script>\nexport default {\n\tname: 'SuggestionListWrapper',\n\n\tprops: {\n\t\titems: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tcommand: {\n\t\t\ttype: Function,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tselectedIndex: 0,\n\t\t}\n\t},\n\tcomputed: {\n\t\thasGroups() {\n\t\t\treturn Object.keys(this.itemGroups).includes(undefined)\n\t\t},\n\t\thasResults() {\n\t\t\treturn this.items.length > 0\n\t\t},\n\t\titemHeight() {\n\t\t\treturn this.$el.scrollHeight / this.items.length\n\t\t},\n\t\titemInsideScrollView() {\n\t\t\t// If upper border of item is bigger or equal than scroll top\n\t\t\t// and lower end of item is smaller or equal than scroll bottom\n\t\t\treturn this.selectedIndex * this.itemHeight >= this.$el.scrollTop\n\t\t\t\t&& (this.selectedIndex + 1) * this.itemHeight <= this.$el.scrollTop + this.$el.clientHeight\n\t\t},\n\t\titemGroups() {\n\t\t\tconst groups = {}\n\t\t\tthis.items.forEach((item) => {\n\t\t\t\tif (!groups[item.suggestGroup]) {\n\t\t\t\t\tgroups[item.suggestGroup] = []\n\t\t\t\t}\n\t\t\t\tgroups[item.suggestGroup].push(item)\n\t\t\t})\n\t\t\treturn groups\n\t\t},\n\t\tcombineIndex() {\n\t\t\treturn (groupIndex, index) => {\n\t\t\t\tconst previousItemCount = Object.values(this.itemGroups)\n\t\t\t\t\t.slice(0, groupIndex)\n\t\t\t\t\t.reduce((sum, items) => {\n\t\t\t\t\t\treturn sum + items.length\n\t\t\t\t\t}, 0)\n\t\t\t\treturn previousItemCount + index\n\t\t\t}\n\t\t},\n\t},\n\twatch: {\n\t\titems() {\n\t\t\tthis.selectedIndex = 0\n\t\t\tthis.$el.scrollTop = 0\n\t\t},\n\t},\n\tmethods: {\n\t\tt,\n\t\tonKeyDown({ event }) {\n\t\t\t// Ignore any key modifier combinations\n\t\t\tif (event.ctrlKey || event.shiftKey || event.altKey || event.metaKey) {\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\tif (event.key === 'ArrowUp') {\n\t\t\t\tthis.selectedIndex = ((this.selectedIndex + this.items.length) - 1) % this.items.length\n\t\t\t\tif (!this.itemInsideScrollView) {\n\t\t\t\t\tthis.$el.scrollTop = this.selectedIndex * this.itemHeight\n\t\t\t\t}\n\t\t\t\treturn true\n\t\t\t}\n\n\t\t\tif (event.key === 'ArrowDown') {\n\t\t\t\tthis.selectedIndex = (this.selectedIndex + 1) % this.items.length\n\t\t\t\tif (!this.itemInsideScrollView) {\n\t\t\t\t\tthis.$el.scrollTop = (this.selectedIndex + 1) * this.itemHeight - this.$el.clientHeight\n\t\t\t\t}\n\t\t\t\treturn true\n\t\t\t}\n\n\t\t\tif (event.key === 'Enter' || event.key === 'Tab') {\n\t\t\t\tthis.selectItem(this.selectedIndex)\n\t\t\t\treturn true\n\t\t\t}\n\n\t\t\treturn false\n\t\t},\n\n\t\tselectItem(index) {\n\t\t\tconst item = this.items[index]\n\n\t\t\tif (item) {\n\t\t\t\tthis.$emit('select', item)\n\t\t\t\tthis.command(item)\n\t\t\t}\n\t\t},\n\t},\n}\n</script>\n\n<style scoped lang=\"scss\">\n.suggestion-list {\n\tborder-radius: var(--border-radius);\n\tbackground-color: var(--color-main-background);\n\tbox-shadow: 0 1px 5px var(--color-box-shadow);\n\toverflow: auto;\n\n\tmin-width: 200px;\n\tmax-width: 400px;\n\twidth: 80vw;\n\tpadding: 4px;\n\t// Show maximum 5 entries and a half to show scroll\n\tmax-height: 35.5px * 5 + 18px;\n\tmargin: 5px 0;\n\n\t&__group {\n\t\tfont-weight: bold;\n\t\tcolor: var(--color-primary-element);\n\t\tfont-size: var(--default-font-size);\n\t\tline-height: 44px;\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\topacity: .7;\n\t\tbox-shadow: none !important;\n\t\tflex-shrink: 0;\n\t\tpadding-left: 8px;\n\t}\n\n\t&__item {\n\t\tborder-radius: 8px;\n\t\tpadding: 4px 8px;\n\t\tmargin-bottom: 4px;\n\t\topacity: 0.8;\n\t\tcursor: pointer;\n\n\t\t// Take care of long names\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\n\t\t&:last-child {\n\t\t\tmargin-bottom: 0;\n\t\t}\n\n\t\t&__emoji {\n\t\t\tpadding-right: 8px;\n\t\t}\n\n\t\t&.is-selected,\n\t\t&:focus,\n\t\t&:hover {\n\t\t\topacity: 1;\n\t\t\tbackground-color: var(--color-primary-element-light);\n\t\t}\n\t}\n}\n</style>\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SuggestionListWrapper.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SuggestionListWrapper.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SuggestionListWrapper.vue?vue&type=style&index=0&id=7d01400b&prod&scoped=true&lang=scss&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SuggestionListWrapper.vue?vue&type=style&index=0&id=7d01400b&prod&scoped=true&lang=scss&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./SuggestionListWrapper.vue?vue&type=template&id=7d01400b&scoped=true&\"\nimport script from \"./SuggestionListWrapper.vue?vue&type=script&lang=js&\"\nexport * from \"./SuggestionListWrapper.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SuggestionListWrapper.vue?vue&type=style&index=0&id=7d01400b&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7d01400b\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"suggestion-list\"},[(_vm.hasResults)?_vm._l((_vm.itemGroups),function(groupItems,key,groupIndex){return _c('div',{key:key},[(_vm.hasGroups)?_c('div',{staticClass:\"suggestion-list__group\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(key)+\"\\n\\t\\t\\t\")]):_vm._e(),_vm._v(\" \"),_vm._l((groupItems),function(item,index){return _c('div',{key:_vm.combineIndex(groupIndex, index),staticClass:\"suggestion-list__item\",class:{ 'is-selected': _vm.combineIndex(groupIndex, index) === _vm.selectedIndex },on:{\"click\":function($event){_vm.selectItem(_vm.combineIndex(groupIndex, index))}}},[_vm._t(\"default\",null,{\"item\":item,\"active\":_vm.combineIndex(groupIndex, index) === _vm.selectedIndex})],2)})],2)}):_c('div',{staticClass:\"suggestion-list__item is-empty\"},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.t('text', 'No suggestion found'))+\"\\n\\t\")])],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }"],"names":["STATE_UPLOADING","Symbol","ACTION_ATTACHMENT_PROMPT","ACTION_CHOOSE_LOCAL_ATTACHMENT","useUploadingStateMixin","inject","$uploadingState","from","default","isUploadingAttachments","useActionAttachmentPromptMixin","$callAttachmentPrompt","useActionChooseLocalAttachmentMixin","$callChooseLocalAttachment","OUTLINE_STATE","OUTLINE_ACTIONS","useOutlineStateMixin","$outlineState","visible","enable","useOutlineActions","$outlineActions","toggle","options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","locals","BaseActionEntry","directives","Tooltip","mixins","useEditorMixin","useIsMobileMixin","useStore","props","actionEntry","type","Object","required","canBeFocussed","Boolean","data","state","getActionState","this","$editor","computed","label","icon","keyshortcuts","getKeyshortcuts","tooltip","getKeys","$isMobile","join","watch","setTabIndexOnButton","mounted","$_updateState","debounce","updateState","bind","on","$emit","disabled","beforeDestroy","off","methods","button","$el","tagName","toLowerCase","querySelector","removeAttribute","setAttribute","focusButton","focus","MENU_ID","useMenuIDMixin","$menuID","menuIDSelector","concat","name","components","NcEmojiPicker","NcButton","extends","addEmoji","_ref","id","native","action","chain","run","_vm","_c","_self","staticClass","attrs","key","rawName","value","expression","scopedSlots","_u","fn","tag","proxy","NcActions","NcActionButton","Loading","Folder","Upload","useIsPublicMixin","useEditorUpload","_v","$editorUpload","_s","t","_e","$isPublic","NcActionInput","Document","LinkOff","Web","Shape","useFileMixin","href","isInputMode","startPath","menuOpen","activeClass","active","relativePath","_this$$file$relativeP","_this$$file","$file","linkFile","split","slice","getFilePickerBuilder","startAt","allowDirectories","setMultiSelect","setType","FilePickerType","Choose","build","pick","then","file","OC","Files","getClient","getFileInfo","_status","fileInfo","encodedPath","optimalPath","path","map","encodeURIComponent","setLink","catch","$refs","buttonFile","linkWebsite","event","target","elements","filter","e","isActive","getMarkAttributes","url","text","_this$$editor$view$st","find","regex","match","replaceAll","view","selection","empty","insertContent","content","marks","removeLink","unsetLink","linkPicker","getLinkWithPicker","link","error","console","class","open","ref","ReadonlyEntries","forceLabel","FormatListBulleted","click","_ref2","keyChar","keyModifiers","MODIFIERS","Mod","Undo","command","undo","priority","Redo","redo","FormatBold","toggleBold","FormatItalic","toggleItalic","FormatUnderline","toggleUnderline","Shift","FormatStrikethrough","toggleStrike","FormatHeader1","children","level","toggleHeading","FormatHeader2","FormatHeader3","FormatHeader4","FormatHeader5","FormatHeader6","_ref3","_ref4","_ref5","toggleBulletList","FormatListNumbered","toggleOrderedList","FormatListCheckbox","toggleTaskList","LinkIcon","component","ActionInsertLink","FormatQuote","toggleBlockquote","Info","toggleCallout","Positive","Warn","Danger","Alt","CodeTags","toggleCodeBlock","Table","insertTable","Emoticon","EmojiPickerAction","emojiObject","arguments","length","undefined","emoji","Images","ActionAttachmentUpload","isMac","navigator","userAgent","includes","Control","TRANSLATIONS","getEntryClasses","mod","isMobile","toUpperCase","keysString","isDisabled","can","getIsActive","args","Array","isArray","listComponent","items","editor","range","render","popup","onStart","VueRenderer","parent","propsData","clientRect","tippy","getReferenceClientRect","appendTo","document","body","element","showOnCreate","interactive","trigger","placement","$on","hide","onUpdate","updateProps","setProps","onKeyDown","_component$ref","_component$ref$onKeyD","destroy","call","onExit","makeIcon","original","functional","h","size","MDI_Loading","AlphabeticalVariant","MDI_AlphabeticalVariant","AlignHorizontalCenter","MDI_AlignHorizontalCenter","AlignHorizontalLeft","MDI_AlignHorizontalLeft","AlignHorizontalRight","MDI_AlignHorizontalRight","Close","MDI_Close","MDI_Check","MDI_CodeTags","MDI_CircleMedium","MDI_Danger","Delete","MDI_Delete","MDI_Document","DotsHorizontal","MDI_DotsHorizontal","MDI_Emoticon","MDI_Folder","MDI_FormatBold","MDI_FormatHeader1","MDI_FormatHeader2","MDI_FormatHeader3","MDI_FormatHeader4","MDI_FormatHeader5","MDI_FormatHeader6","MDI_FormatItalic","MDI_FormatListBulleted","MDI_FormatListCheckbox","MDI_FormatListNumbered","MDI_FormatQuote","MDI_FormatStrikethrough","MDI_FormatUnderline","Help","MDI_Help","Image","MDI_Image","MDI_Images","MDI_Info","MDI_Link","MDI_LinkOff","MDI_LinkVariantPlus","MDI_Lock","MDI_Positive","MDI_Redo","MDI_Shape","MDI_Table","TableAddColumnAfter","MDI_TableAddColumnAfter","TableAddColumnBefore","MDI_TableAddColumnBefore","TableAddRowAfter","MDI_TableAddRowAfter","TableAddRowBefore","MDI_TableAddRowBefore","TableSettings","MDI_TableSettings","TranslateVariant","MDI_TrashCan","MDI_TranslateVariant","MDI_Undo","MDI_Upload","MDI_Warn","MDI_Web","html","doc","DOMParser","parseFromString","nodeIterator","createNodeIterator","NodeFilter","SHOW_TEXT","currentNode","nextNode","forAllTextNodes","textNode","COLLAPSING_WHITE_SPACE_VALUES","ancestor","parentElement","style","getComputedStyle","whiteSpace","getPropertyValue","collapseWhiteSpace","textContent","innerHTML","Markdown","Extension","create","extendMarkSchema","extension","context","storage","toMarkdown","getExtensionField","extendNodeSchema","addProseMirrorPlugins","shiftKey","Plugin","PluginKey","handleDOMEvents","mouseup","_","handleKeyDown","clipboardTextParser","str","$context","parser","fromSchema","schema","cloneNode","dom","createElement","part","para","innerText","append","markdownit","parseSlice","preserveWhitespace","transformPastedHTML","createMarkdownSerializer","nodes","defaultNodes","convertNames","defaultMarkdownSerializer","defaultMarks","serializer","MarkdownSerializer","extractToMarkdown","serialize","tightLists","nodesOrMarks","entries","nodeOrMark","spec","reduce","object","convert","replace","_m","letter","fromEntries","showCursorLabel","clientId","setTimeout","el","getElementById","classList","add","remove","getTimestamp","Math","floor","Date","now","TiptapCollaborationCursor","extend","addOptions","provider","user","color","lastUpdate","cursor","insertBefore","createTextNode","onCreate","awareness","origin","added","removed","updated","onTransaction","_meta$addToHistory","transaction","meta","addToHistory","pointer","setLocalStateField","EmojiPluginKey","Node","HTMLAttributes","suggestion","char","allowedPrefixes","pluginKey","addCommands","commands","Suggestion","addKeyboardShortcuts","keyCode","ctrlKey","metaKey","stopPropagation","window","dispatchEvent","Span","constructor","to","author","insertIntoBlameMap","next","pos","left","splice","min","max","TrackState","blameMap","applyTransform","transform","_transform$getMeta","clientID","getMeta","steps","item","newBlame","clientIDs","result","mapping","i","span","push","maps","after","forEach","start","end","updateBlameMap","abs","sin","toString","viewReference","editorView","init","instance","tracked","deco","DecorationSet","apply","tr","oldState","decos","tState","getState","docChanged","setMeta","composing","Decoration","inline","title","dec","decorations","Tab","addExtensions","PlainTextDocument","Text","TiptapBulletList","parseHTML","rule","assign","addAttributes","_this$parent","bullet","rendered","isRequired","getAttribute","addInputRules","InputRule","handler","wrappingInputRule","getAttributes","insertText","ICONS_MAP","info","success","warn","NodeViewWrapper","NodeViewContent","node","_this$node","group","defining","types","typesAvailable","contains","renderHTML","attributes","classy","mergeAttributes","write","renderContent","ensureNewLine","closeBlock","addNodeView","VueNodeViewRenderer","Callout","setCallout","wrapIn","isNodeActive","unsetCallout","updateAttributes","lift","MarkerIcon","Eye","ViewSplitVertical","CodeBraces","NcActionLink","NcActionSeparator","isEditable","viewMode","targetId","uuidv4","language","supportPreview","showCode","showPreview","defaultMode","renderMermaid","beforeMount","renderMermaidDebounced","_this$node2","trim","preview","mermaid","parse","svg","targetElement","display","debug","initialize","startOnLoad","$nextTick","updateLanguage","$event","TiptapCodeBlockLowlight","getContent","inner","codeBlock","index","params","code_block","CodeBlockView","Mod-a","nodeSize","$from","selectParentNode","setTextSelection","TableCell","_state$options","_node$attrs","backup","escapeExtraCharacters","columnIndex","currentColumnIndex","cellRenderedContentLength","childNode","offset","_childNode$text","_childNode$text2","syntax","child","columnWidth","columnWidths","align","textAlign","space","leftPadding","rightPadding","ceil","repeat","renderInline","handlePaste","childNodes","newLineAdded","descendants","isText","newNode","Fragment","addToStart","TableHeader","headerIndex","currentHeaderIndex","TableRow","cell","_cell$attrs","row","TableCaption","TableHeadRow","addRowAfter","dispatch","tableStart","table","bottom","selectedRect","lastRow","newRow","childCount","setNodeAttribute","addRowBefore","_ref6","top","_ref7","isInTable","rowsCount","colsCount","cellContent","headerCells","cells","tableCell","createAndFill","headerCell","tableHeader","headRow","tableHeadRow","createChecked","rows","tableRow","createTable","anchor","replaceSelectionWith","scrollIntoView","setSelection","TextSelection","near","resolve","leaveTable","_ref8","$head","tableDepth","depth","$next","goToNextRow","_ref9","$cell","cellStart","indexAfter","rowNode","findSameCellInNextRow","selectionCell","between","moveCellForward","_ref10","columns","getColumns","widths","column","maxWidth","cellWidth","_node$text","_node$text2","calculateColumnWidths","goToNextCell","Enter","_ref11","_selection$$from$node","startsWith","nodeBefore","deleteSelection","deleteNode","Function","getPos","deleteRow","defineComponent","_setupProxy","_t","InlineActionsContainer","alignCenter","alignLeft","alignRight","setCellAttribute","menu","closeMenu","deleteColumn","addColumnBefore","addColumnAfter","extendNodeWithView","TableView","TableCellView","TableHeaderView","selectedIndex","hasResults","itemHeight","scrollHeight","itemInsideScrollView","scrollTop","clientHeight","altKey","selectItem","emojiAddRecent","_l","short_name","TiptapCodeBlock","draggable","out","Error","dashes","separator","sort","deleteRange","insertContentAt","addPasteRules","TipTapHardBreak","keepOnSplit","setHardBreak","ctx","d","_parent$child$text","extractHeadings","counter","Map","headings","val","position","_node$attrs$uuid","slugify","has","get","set","getId","uuid","setNodeMarkup","freeze","store","domElement","levels","linkSymbol","container","location","hash","TipTapHeading","HeaderViewVue","update","oldNode","isDestroyed","NcModal","images","startIndex","Number","show","currentImageIndex","currentImage","showNextImage","showPreviousImage","previewUrl","LoadImageError","reason","imageUrl","message","ImageIcon","DeleteIcon","ShowImageModal","ClickOutside","useAttachmentResolver","attachment","imageLoaded","loaded","failed","showIcons","errorMessage","attachmentSize","showImageModal","imageIndex","embeddedImageList","mapGetters","imageAttachments","attachmentType","isImage","isMediaAttachment","showDeleteIcon","showImageDeleteIcon","canDisplayImage","src","alt","loadPreview","onImageLoadFailure","$attachmentResolver","Promise","reject","img","onload","onerror","err","updateAlt","onLoaded","updateEmbeddedImageList","imageViews","querySelectorAll","imgv","handleAttachmentClick","OCA","Viewer","mimetypes","indexOf","mimetype","davPath","fullUrl","handleImageClick","findIndex","showError","onDelete","emit","domProps","_k","TiptapImage","selectable","allowBase64","ImageView","handleDrop","dataTransfer","files","coordinates","posAtCoords","clientX","clientY","customEvent","CustomEvent","bubbles","detail","clipboardData","image","Mark","close","mixable","escape","expelEnclosingWhitespace","mark","removeMark","SuggestionListWrapper","_this$$refs$suggestio","suggestionList","suggestGroupFormat","suggestGroupPicker","important","formattingSuggestions","query","list","menuEntries","filterOut","_e$label","_e$label$toLowerCase","suggestGroup","LinkPickerPluginKey","createSuggestions","LinkPickerList","commandChain","providerId","searchProvider","p","icon_url","_e$label2","_e$label2$toLowerCase","canRunState","isActiveState","NcUserBubble","username","isCurrentUser","_getCurrentUser","getCurrentUser","uid","TipTapMention","getAttrs","decodeURIComponent","renderLabel","Mention","NcReferenceList","nodeViewProps","isLoggedIn","debouncedUpdateText","beforeCreate","getTextReference","created","beforeUnmount","_this$debouncedUpdate","cancel","_textNode","_linkMark$attrs","linkMark","m","RegExp","test","TiptapParagraph","ParagraphView","Backspace","parentOffset","previousNode","joinBackward","TipTapTaskItem","nested","adjust","checked","_el$querySelector","listAttributes","checkboxAttributes","contenteditable","handleClick","parentList","findParentNodeClosestToPos","$pos","predicate","before","taskItem","listItem","editable","TiptapTaskList","renderList","nodeEqualsType","notAfter","plugin","disabledNodes","appendTransaction","__","shouldInsertNodeAtEnd","endPosition","lastChild","basedir","lastIndexOf","domHref","_OCA$Viewer","relPath","dir","base","rel","pop","shift","absolutePath","endsWith","generateUrl","parseHref","openLink","_attrs","htmlHref","closest","parseQueryString","fragment","fragmentQuery","filename","theme","pathname","fileId","validateLink","logger","clickHandler","onClick","Link","TipTapLink","inclusive","plugins","openOnClick","preventDefault","TipTapStrike","Bold","markInputRule","starInputRegex","markPasteRule","starPasteRegex","TipTapUnderline","underscoreInputRegex","underscorePasteRegex","Italic","TipTapItalic","lowlight","registerAlias","editing","extensions","defaultExtensions","Paragraph","HardBreak","Heading","Strong","Strike","Blockquote","CharacterCount","Code","CodeBlock","configure","defaultLanguage","BulletList","HorizontalRule","OrderedList","ListItem","EditableTable","TaskList","TaskItem","Underline","ImageInline","Dropcursor","Gapcursor","KeepSyntax","FrontMatter","Emoji","EmojiList","emojiSearch","LinkPicker","Placeholder","emptyNodeClass","placeholder","showOnlyWhenEditable","TrailingNode","validate","additionalExtensionNames","buildRender","tokens","idx","env","slf","nesting","attrSet","attrJoin","renderToken","md","use","includesClass","token","cls","_token$attrGet","attrGet","splitListAt","TokenConstructor","closeList","block","openList","markup","findChildOf","parentIndex","searchLevel","MarkdownIt","breaks","taskLists","labelAfter","frontMatter","fm","core","ruler","startsWithTask","attrIndex","splitBefore","Token","ruler2","at","silent","rval","markdownitNewline","markdownitEscape","res","attrPush","renderer","rules","hardbreak","xhtmlOut","callouts","escaped","j","exec","_match$groups$linesta","groups","linestart","contentNext","special","markdownitMentions","implicitFigures","front_matter","escapeHtml","bullet_list_open","$store","hasModule","registerModule","textModule","___CSS_LOADER_EXPORT___","module","initialRender","mapState","goto","heading","previous","TableOfContents","mobile","$onResize","clientWidth","$resizeObserver","ResizeObserver","observe","unobserve","hasGroups","keys","itemGroups","combineIndex","groupIndex","values","sum","groupItems"],"sourceRoot":""}