{"version":3,"file":"index-2mjY3Y47.chunk.mjs","sources":["../node_modules/@nextcloud/logger/dist/index.mjs"],"sourcesContent":["import { getCurrentUser } from \"@nextcloud/auth\";\nvar LogLevel = /* @__PURE__ */ ((LogLevel2) => {\n  LogLevel2[LogLevel2[\"Debug\"] = 0] = \"Debug\";\n  LogLevel2[LogLevel2[\"Info\"] = 1] = \"Info\";\n  LogLevel2[LogLevel2[\"Warn\"] = 2] = \"Warn\";\n  LogLevel2[LogLevel2[\"Error\"] = 3] = \"Error\";\n  LogLevel2[LogLevel2[\"Fatal\"] = 4] = \"Fatal\";\n  return LogLevel2;\n})(LogLevel || {});\nvar __defProp$1 = Object.defineProperty;\nvar __defNormalProp$1 = (obj, key, value) => key in obj ? __defProp$1(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$1 = (obj, key, value) => {\n  __defNormalProp$1(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass ConsoleLogger {\n  constructor(context) {\n    __publicField$1(this, \"context\");\n    this.context = context || {};\n  }\n  formatMessage(message, level, context) {\n    let msg = \"[\" + LogLevel[level].toUpperCase() + \"] \";\n    if (context && context.app) {\n      msg += context.app + \": \";\n    }\n    if (typeof message === \"string\")\n      return msg + message;\n    msg += \"Unexpected \".concat(message.name);\n    if (message.message)\n      msg += ' \"'.concat(message.message, '\"');\n    if (level === LogLevel.Debug && message.stack)\n      msg += \"\\n\\nStack trace:\\n\".concat(message.stack);\n    return msg;\n  }\n  log(level, message, context) {\n    var _a, _b;\n    if (typeof ((_a = this.context) == null ? void 0 : _a.level) === \"number\" && level < ((_b = this.context) == null ? void 0 : _b.level)) {\n      return;\n    }\n    if (typeof message === \"object\" && (context == null ? void 0 : context.error) === void 0) {\n      context.error = message;\n    }\n    switch (level) {\n      case LogLevel.Debug:\n        console.debug(this.formatMessage(message, LogLevel.Debug, context), context);\n        break;\n      case LogLevel.Info:\n        console.info(this.formatMessage(message, LogLevel.Info, context), context);\n        break;\n      case LogLevel.Warn:\n        console.warn(this.formatMessage(message, LogLevel.Warn, context), context);\n        break;\n      case LogLevel.Error:\n        console.error(this.formatMessage(message, LogLevel.Error, context), context);\n        break;\n      case LogLevel.Fatal:\n      default:\n        console.error(this.formatMessage(message, LogLevel.Fatal, context), context);\n        break;\n    }\n  }\n  debug(message, context) {\n    this.log(LogLevel.Debug, message, Object.assign({}, this.context, context));\n  }\n  info(message, context) {\n    this.log(LogLevel.Info, message, Object.assign({}, this.context, context));\n  }\n  warn(message, context) {\n    this.log(LogLevel.Warn, message, Object.assign({}, this.context, context));\n  }\n  error(message, context) {\n    this.log(LogLevel.Error, message, Object.assign({}, this.context, context));\n  }\n  fatal(message, context) {\n    this.log(LogLevel.Fatal, message, Object.assign({}, this.context, context));\n  }\n}\nfunction buildConsoleLogger(context) {\n  return new ConsoleLogger(context);\n}\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass LoggerBuilder {\n  constructor(factory) {\n    __publicField(this, \"context\");\n    __publicField(this, \"factory\");\n    this.context = {};\n    this.factory = factory;\n  }\n  /**\n   * Set the app name within the logging context\n   *\n   * @param appId App name\n   */\n  setApp(appId) {\n    this.context.app = appId;\n    return this;\n  }\n  /**\n   * Set the logging level within the logging context\n   *\n   * @param level Logging level\n   */\n  setLogLevel(level) {\n    this.context.level = level;\n    return this;\n  }\n  /* eslint-disable jsdoc/no-undefined-types */\n  /**\n   * Set the user id within the logging context\n   * @param uid User ID\n   * @see {@link detectUser}\n   */\n  /* eslint-enable jsdoc/no-undefined-types */\n  setUid(uid) {\n    this.context.uid = uid;\n    return this;\n  }\n  /**\n   * Detect the currently logged in user and set the user id within the logging context\n   */\n  detectUser() {\n    const user = getCurrentUser();\n    if (user !== null) {\n      this.context.uid = user.uid;\n    }\n    return this;\n  }\n  /**\n   * Detect and use logging level configured in nextcloud config\n   */\n  detectLogLevel() {\n    const self = this;\n    const onLoaded = () => {\n      var _a, _b;\n      if (document.readyState === \"complete\" || document.readyState === \"interactive\") {\n        self.context.level = (_b = (_a = window._oc_config) == null ? void 0 : _a.loglevel) != null ? _b : LogLevel.Warn;\n        if (window._oc_debug) {\n          self.context.level = LogLevel.Debug;\n        }\n        document.removeEventListener(\"readystatechange\", onLoaded);\n      } else {\n        document.addEventListener(\"readystatechange\", onLoaded);\n      }\n    };\n    onLoaded();\n    return this;\n  }\n  /** Build a logger using the logging context and factory */\n  build() {\n    if (this.context.level === void 0) {\n      this.detectLogLevel();\n    }\n    return this.factory(this.context);\n  }\n}\nfunction getLoggerBuilder() {\n  return new LoggerBuilder(buildConsoleLogger);\n}\nfunction getLogger() {\n  return getLoggerBuilder().build();\n}\nexport {\n  LogLevel,\n  getLogger,\n  getLoggerBuilder\n};\n"],"names":[],"mappings":"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","x_google_ignoreList":[0]}