/*! For license information please see src_helpers_files_js-src_components_ViewerComponent_vue.js.LICENSE.txt */
"use strict";(self.webpackChunk_nextcloud_text=self.webpackChunk_nextcloud_text||[]).push([["src_helpers_files_js-src_components_ViewerComponent_vue"],{73590:(e,r,t)=>{t.d(r,{CB:()=>p,GH:()=>C,HE:()=>f,PW:()=>i,_S:()=>g,bk:()=>b,c9:()=>u,f_:()=>n,ir:()=>h,l5:()=>m,lV:()=>s,o:()=>l,pN:()=>_,qS:()=>A,wn:()=>d,yS:()=>a,yu:()=>v});var o=t(79843);const A=Symbol("tiptap:editor"),i=Symbol("editor:file"),n=Symbol("attachment:resolver"),a=Symbol("editor:is-mobile"),s=Symbol("editor:is-public"),d=Symbol("editor:is-rich-editor"),l=Symbol("editor:is-rich-woskapace"),C=Symbol("sync:service"),c=Symbol("editor:upload"),p=(Symbol("hook:link-click"),Symbol("hook:mention-search"),Symbol("hook:mention-insert"),{inject:{$editor:{from:A,default:null}}}),m={inject:{$syncService:{from:C,default:null}}},h={inject:{$isPublic:{from:s,default:!1}}},u={inject:{$isRichWorkspace:{from:l,default:!1}}},v={inject:{$isRichEditor:{from:d,default:!1}}},b={inject:{$isMobile:{from:a,default:!1}}},_={inject:{$file:{from:i,default:()=>({fileId:0,relativePath:null,document:null})}}},f={inject:{$attachmentResolver:{from:n,default:{resolve:e=>(o.v.warn("No attachment resolver provided. Some attachment sources cannot be resolved."),[e])}}}},g={inject:{$editorUpload:{from:c,default:!0}}}},48242:(e,r,t)=>{async function o(){if(!window._nc_text_editor_instance){if(window._nc_text_editor_importing)return await new Promise((e=>{const r=setInterval((()=>{window._nc_text_editor_instance&&(e(window._nc_text_editor_instance),clearInterval(r))}),200)}));window._nc_text_editor_importing=!0;const e=await Promise.all([t.e("mermaid"),t.e("vendors-node_modules_nextcloud_vue_dist_index_mjs"),t.e("vendors-node_modules_braintree_sanitize-url_dist_index_js-node_modules_quartzy_markdown-it-me-f3a852"),t.e("vendors-node_modules_cancelable-promise_umd_CancelablePromise_js-node_modules_nextcloud_dialo-efa37a"),t.e("vendors-node_modules_nextcloud_logger_dist_index_js-node_modules_nextcloud_vue_dist_chunks_em-4fb725"),t.e("vendors-node_modules_path-normalize_lib_index_js-node_modules_proxy-polyfill_src_index_js-nod-eda160"),t.e("src_extensions_index_js-src_components_Editor_EditorOutline_vue-data_image_svg_xml_3c_21--_20-ee52b2"),t.e("editor")]).then(t.bind(t,57419));window._nc_text_editor_instance=e.default}return window._nc_text_editor_instance}t.d(r,{A:()=>o})},79180:(e,r,t)=>{t.d(r,{E:()=>n});t(61338);var o=t(35810),A=(t(99498),t(98407),t(72150)),i=(t(21777),t(75289),t(91458),t(41421));t(54755);const n=function(e,r){const t=e.split("/"),o=r.split("/");for(t.pop();t[0]===o[0];)if(t.shift(),o.shift(),0===t.length&&0===o.length)return".";const A=t.fill("..").concat(o),i=r.split("/");return A.length<i.length?A.join("/"):r};let a=!1;let s=null;new o.Y9({id:"workspace",order:10,enabled:(e,r)=>"files"===r.id||"favorites"===r.id,async render(e,r,o){s&&(s.$destroy(),s=null);const n=!!r.attributes["rich-workspace-file"]||!!a,d=a?(0,i.dirname)(a.path):r.path,l=a?"":r.attributes["rich-workspace"];a=!1;const{default:C}=await Promise.all([t.e("mermaid"),t.e("vendors-node_modules_nextcloud_vue_dist_index_mjs"),t.e("vendors-node_modules_braintree_sanitize-url_dist_index_js-node_modules_quartzy_markdown-it-me-f3a852"),t.e("vendors-node_modules_nextcloud_logger_dist_index_js-node_modules_nextcloud_vue_dist_chunks_em-4fb725"),t.e("src_extensions_index_js-src_components_Editor_EditorOutline_vue-data_image_svg_xml_3c_21--_20-ee52b2"),t.e("src_views_RichWorkspace_vue")]).then(t.bind(t,86394));Promise.resolve().then(t.bind(t,85471)).then((r=>{e.id="files-workspace-wrapper";const t=r.default;t.prototype.t=window.t,t.prototype.n=window.n,t.prototype.OCA=window.OCA;const o=t.extend(C);s=new o({propsData:{path:d,hasRichWorkspace:n,content:l},store:A.default}).$mount(e)}))},updated(e,r){a=!1;const t=!!e.attributes["rich-workspace-file"];s.path=e.path,s.hasRichWorkspace=t,s.content=e.attributes["rich-workspace"]}})},72150:(e,r,t)=>{t.d(r,{default:()=>_,M:()=>b});var o=t(85471),A=t(95353),i=t(59097),n=t(99498),a=t(91458);const s="SET_VIEW_WIDTH",d="SET_SHOW_AUTHOR_ANNOTATIONS",l="SET_CURRENT_SESSION",C="SET_HEADINGS",c="SET_ATTACHMENT_LIST";var p=t(17334),m=t.n(p);const h=()=>document.documentElement.clientWidth,u=e=>{let{commit:r}=e;const t=m()((()=>{r(`text/${s}`,h())}),100);window.addEventListener("resize",t)},v=(0,i.getBuilder)("text").persist().build();o.default.use(A.Ay);const b={state:{showAuthorAnnotations:"true"===v.getItem("showAuthorAnnotations"),currentSession:v.getItem("currentSession"),viewWidth:h(),headings:Object.freeze([]),attachmentList:[]},getters:{imageAttachments:e=>e.attachmentList.filter((e=>e.isImage)),findAttachment:e=>r=>e.attachmentList.find((e=>e.name===r))},mutations:{[s](e,r){e.viewWidth=r},[d](e,r){e.showAuthorAnnotations=r,v.setItem("showAuthorAnnotations",""+r)},[l](e,r){e.currentSession=r,v.setItem("currentSession",r)},[C](e,r){if(e.headings.length!==r.length)return void(e.headings=Object.freeze(r));const t=e.headings,o=r.map(((e,r)=>{const o=t[r].level;return Object.freeze({...e,previous:o})}));e.headings=Object.freeze(o)},[c](e,r){e.attachmentList=r}},actions:{setShowAuthorAnnotations(e,r){let{commit:t}=e;t(d,r)},setCurrentSession(e,r){let{commit:t}=e;t(l,r)},setHeadings(e,r){let{commit:t}=e;t(C,r)},async setAttachmentList(e,r){let{commit:t}=e,{documentId:o,session:A,shareToken:i}=r;const s=await a.Ay.post((0,n.Jv)("/apps/text/attachments"),{documentId:A?.documentId??o,sessionId:A?.id,sessionToken:A?.token,shareToken:i});t(c,s.data)}}},_=new A.il({plugins:[u],modules:{text:{namespaced:!0,...b}}})},33909:(e,r,t)=>{t.d(r,{A:()=>a});var o=t(71354),A=t.n(o),i=t(76314),n=t.n(i)()(A());n.push([e.id,".editor__content[data-v-151c6c0d]{max-width:var(--text-editor-max-width);margin:auto;position:relative;width:100%}.text-editor__content-wrapper[data-v-151c6c0d]{--side-width: calc((100% - var(--text-editor-max-width)) / 2);display:grid;grid-template-columns:1fr auto}.text-editor__content-wrapper.--show-outline[data-v-151c6c0d]{grid-template-columns:var(--side-width) auto var(--side-width)}.text-editor__content-wrapper .text-editor__content-wrapper__left[data-v-151c6c0d],.text-editor__content-wrapper .text-editor__content-wrapper__right[data-v-151c6c0d]{height:100%;position:relative}","",{version:3,sources:["webpack://./src/components/BaseReader.vue"],names:[],mappings:"AACA,kCACC,sCAAA,CACA,WAAA,CACA,iBAAA,CACA,UAAA,CAGD,+CACC,6DAAA,CACA,YAAA,CACA,8BAAA,CACA,8DACC,8DAAA,CAED,uKAEC,WAAA,CACA,iBAAA",sourceRoot:""}]);const a=n},55521:(e,r,t)=>{t.d(r,{A:()=>c});var o=t(71354),A=t.n(o),i=t(76314),n=t.n(i),a=t(4417),s=t.n(a),d=new URL(t(19756),t.b),l=n()(A()),C=s()(d);l.push([e.id,`div.ProseMirror{height:100%;position:relative;word-wrap:break-word;white-space:pre-wrap;-webkit-font-variant-ligatures:none;font-variant-ligatures:none;padding:4px 8px 200px 14px;line-height:150%;font-size:var(--default-font-size);outline:none;--table-color-border: var(--color-border);--table-color-heading: var(--color-text-maxcontrast);--table-color-heading-border: var(--color-border-dark);--table-color-background: var(--color-main-background);--table-color-background-hover: var(--color-primary-element-light);--table-border-radius: var(--border-radius)}div.ProseMirror :target{scroll-margin-top:50px}div.ProseMirror[contenteditable=true],div.ProseMirror[contenteditable=false],div.ProseMirror [contenteditable=true],div.ProseMirror [contenteditable=false]{width:100%;background-color:rgba(0,0,0,0);color:var(--color-main-text);opacity:1;-webkit-user-select:text;user-select:text;font-size:var(--default-font-size)}div.ProseMirror[contenteditable=true]:not(.collaboration-cursor__caret),div.ProseMirror[contenteditable=false]:not(.collaboration-cursor__caret),div.ProseMirror [contenteditable=true]:not(.collaboration-cursor__caret),div.ProseMirror [contenteditable=false]:not(.collaboration-cursor__caret){border:none !important}div.ProseMirror[contenteditable=true]:focus,div.ProseMirror[contenteditable=true]:focus-visible,div.ProseMirror[contenteditable=false]:focus,div.ProseMirror[contenteditable=false]:focus-visible,div.ProseMirror [contenteditable=true]:focus,div.ProseMirror [contenteditable=true]:focus-visible,div.ProseMirror [contenteditable=false]:focus,div.ProseMirror [contenteditable=false]:focus-visible{box-shadow:none !important}div.ProseMirror ul[data-type=taskList]{margin-left:1px}div.ProseMirror .checkbox-item{display:flex;align-items:start}div.ProseMirror .checkbox-item input[type=checkbox]{display:none}div.ProseMirror .checkbox-item:before{content:"";vertical-align:middle;margin:3px 6px 3px 2px;border:1px solid var(--color-text-maxcontrast);display:block;border-radius:var(--border-radius);height:14px;width:14px;box-shadow:none !important;background-position:center;cursor:pointer;left:9px}div.ProseMirror .checkbox-item.checked:before{background-image:url(${C});background-color:var(--color-primary-element);border-color:var(--color-primary-element)}div.ProseMirror .checkbox-item.checked>label>p{color:var(--color-text-maxcontrast);text-decoration:line-through}div.ProseMirror .checkbox-item label{display:block;flex-grow:1;max-width:calc(100% - 28px)}div.ProseMirror>*:first-child{margin-top:10px}div.ProseMirror>h1,div.ProseMirror h2,div.ProseMirror h3,div.ProseMirror h4,div.ProseMirror h5,div.ProseMirror h6{position:relative}div.ProseMirror>h1:first-child,div.ProseMirror h2:first-child,div.ProseMirror h3:first-child,div.ProseMirror h4:first-child,div.ProseMirror h5:first-child,div.ProseMirror h6:first-child{margin-top:0}div.ProseMirror>h1 .heading-anchor[contenteditable=false],div.ProseMirror h2 .heading-anchor[contenteditable=false],div.ProseMirror h3 .heading-anchor[contenteditable=false],div.ProseMirror h4 .heading-anchor[contenteditable=false],div.ProseMirror h5 .heading-anchor[contenteditable=false],div.ProseMirror h6 .heading-anchor[contenteditable=false]{width:1em;opacity:0;padding:0;left:-1em;top:0;font-size:max(1em,16px);position:absolute;text-decoration:none;transition-duration:.15s;transition-property:opacity;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}div.ProseMirror>h1:hover .heading-anchor,div.ProseMirror h2:hover .heading-anchor,div.ProseMirror h3:hover .heading-anchor,div.ProseMirror h4:hover .heading-anchor,div.ProseMirror h5:hover .heading-anchor,div.ProseMirror h6:hover .heading-anchor{opacity:.5 !important}div.ProseMirror>h1:focus-visible,div.ProseMirror h2:focus-visible,div.ProseMirror h3:focus-visible,div.ProseMirror h4:focus-visible,div.ProseMirror h5:focus-visible,div.ProseMirror h6:focus-visible{outline:none}div.ProseMirror a{color:var(--color-primary-element);text-decoration:underline;padding:.5em 0}div.ProseMirror p .paragraph-content{margin-bottom:1em;line-height:150%}div.ProseMirror em{font-style:italic}div.ProseMirror h1,div.ProseMirror h2,div.ProseMirror h3,div.ProseMirror h4,div.ProseMirror h5,div.ProseMirror h6{font-weight:600;line-height:1.1em;margin-top:24px;margin-bottom:12px;color:var(--color-main-text)}div.ProseMirror h1{font-size:36px}div.ProseMirror h2{font-size:30px}div.ProseMirror h3{font-size:24px}div.ProseMirror h4{font-size:21px}div.ProseMirror h5{font-size:17px}div.ProseMirror h6{font-size:var(--default-font-size)}div.ProseMirror img{cursor:default;max-width:100%}div.ProseMirror hr{padding:2px 0;border:none;margin:2em 0;width:100%}div.ProseMirror hr:after{content:"";display:block;height:1px;background-color:var(--color-border-dark);line-height:2px}div.ProseMirror pre{white-space:pre-wrap;background-color:var(--color-background-dark);border-radius:var(--border-radius);padding:1em 1.3em;margin-bottom:1em}div.ProseMirror pre::before{content:attr(data-language);text-transform:uppercase;display:block;text-align:right;font-weight:bold;font-size:.6rem}div.ProseMirror pre code .hljs-comment,div.ProseMirror pre code .hljs-quote{color:#999}div.ProseMirror pre code .hljs-variable,div.ProseMirror pre code .hljs-template-variable,div.ProseMirror pre code .hljs-attribute,div.ProseMirror pre code .hljs-tag,div.ProseMirror pre code .hljs-name,div.ProseMirror pre code .hljs-regexp,div.ProseMirror pre code .hljs-link,div.ProseMirror pre code .hljs-selector-id,div.ProseMirror pre code .hljs-selector-class{color:#f2777a}div.ProseMirror pre code .hljs-number,div.ProseMirror pre code .hljs-meta,div.ProseMirror pre code .hljs-built_in,div.ProseMirror pre code .hljs-builtin-name,div.ProseMirror pre code .hljs-literal,div.ProseMirror pre code .hljs-type,div.ProseMirror pre code .hljs-params{color:#f99157}div.ProseMirror pre code .hljs-string,div.ProseMirror pre code .hljs-symbol,div.ProseMirror pre code .hljs-bullet{color:#9c9}div.ProseMirror pre code .hljs-title,div.ProseMirror pre code .hljs-section{color:#fc6}div.ProseMirror pre code .hljs-keyword,div.ProseMirror pre code .hljs-selector-tag{color:#69c}div.ProseMirror pre code .hljs-emphasis{font-style:italic}div.ProseMirror pre code .hljs-strong{font-weight:700}div.ProseMirror pre.frontmatter{margin-bottom:2em;border-left:4px solid var(--color-primary-element)}div.ProseMirror pre.frontmatter::before{display:block;content:attr(data-title);color:var(--color-text-maxcontrast);padding-bottom:.5em}div.ProseMirror p code{background-color:var(--color-background-dark);border-radius:var(--border-radius);padding:.1em .3em}div.ProseMirror li{position:relative;padding-left:3px}div.ProseMirror li p .paragraph-content{margin-bottom:.5em}div.ProseMirror ul,div.ProseMirror ol{padding-left:10px;margin-left:10px;margin-bottom:1em}div.ProseMirror ul>li{list-style-type:disc}div.ProseMirror li ul>li{list-style-type:circle}div.ProseMirror li li ul>li{list-style-type:square}div.ProseMirror blockquote{padding-left:1em;border-left:4px solid var(--color-primary-element);color:var(--color-text-maxcontrast);margin-left:0;margin-right:0}div.ProseMirror table{border-spacing:0;width:calc(100% - 50px);table-layout:auto;white-space:normal;margin-bottom:1em}div.ProseMirror table+*{margin-top:1em}div.ProseMirror table td,div.ProseMirror table th{border:1px solid var(--table-color-border);border-left:0;vertical-align:top;max-width:100%}div.ProseMirror table td:first-child,div.ProseMirror table th:first-child{border-left:1px solid var(--table-color-border)}div.ProseMirror table td{padding:.5em .75em;border-top:0;color:var(--color-main-text)}div.ProseMirror table th{padding:0 0 0 .75em;font-weight:normal;border-bottom-color:var(--table-color-heading-border);color:var(--table-color-heading)}div.ProseMirror table th>div{display:flex}div.ProseMirror table tr{background-color:var(--table-color-background)}div.ProseMirror table tr:hover,div.ProseMirror table tr:active,div.ProseMirror table tr:focus{background-color:var(--table-color-background-hover)}div.ProseMirror table tr:first-child th:first-child{border-top-left-radius:var(--table-border-radius)}div.ProseMirror table tr:first-child th:last-child{border-top-right-radius:var(--table-border-radius)}div.ProseMirror table tr:last-child td:first-child{border-bottom-left-radius:var(--table-border-radius)}div.ProseMirror table tr:last-child td:last-child{border-bottom-right-radius:var(--table-border-radius)}.ProseMirror-focused .ProseMirror-gapcursor{display:block}.editor__content p.is-empty:first-child::before{content:attr(data-placeholder);float:left;color:var(--color-text-maxcontrast);pointer-events:none;height:0}.editor__content{tab-size:4}@media print{@page{size:A4;margin:2.5cm 2cm 2cm 2.5cm}body{position:absolute;overflow:visible !important}#header{display:none !important}#content{display:block !important;position:relative !important;border-radius:0;margin:0;width:100%;height:fit-content}footer{display:none !important}#viewer[data-handler=text]{border:none;width:100% !important;position:absolute !important}#viewer[data-handler=text] .modal-header{display:none !important}#viewer[data-handler=text] .modal-container{top:0px;height:fit-content}.text-editor{height:fit-content !important}.text-editor .text-menubar{display:none !important}.text-editor .action-item{display:none !important}.text-editor .editor__content{max-width:100%}.text-editor .text-editor__wrapper{height:fit-content;position:unset}.text-editor .text-editor__wrapper div.ProseMirror{margin-top:0;margin-bottom:0;padding-top:0;padding-bottom:0}.text-editor .text-editor__wrapper div.ProseMirror h1,.text-editor .text-editor__wrapper div.ProseMirror h2,.text-editor .text-editor__wrapper div.ProseMirror h3,.text-editor .text-editor__wrapper div.ProseMirror h4,.text-editor .text-editor__wrapper div.ProseMirror h5{break-after:avoid;page-break-after:avoid}.text-editor .text-editor__wrapper div.ProseMirror .image,.text-editor .text-editor__wrapper div.ProseMirror img,.text-editor .text-editor__wrapper div.ProseMirror table{break-inside:avoid-page;page-break-inside:avoid;max-width:90% !important;margin:5vw auto 5vw 5% !important}.text-editor .text-editor__wrapper div.ProseMirror th{color:#000 !important;font-weight:bold !important;border-width:0 1px 2px 0 !important;border-color:gray !important;border-style:none solid solid none !important}.text-editor .text-editor__wrapper div.ProseMirror th:last-of-type{border-width:0 0 2px 0 !important}.text-editor .text-editor__wrapper div.ProseMirror td{border-style:none solid none none !important;border-width:1px !important;border-color:gray !important}.text-editor .text-editor__wrapper div.ProseMirror td:last-of-type{border:none !important}.menubar-placeholder,.text-editor--readonly-bar{display:none}.text-editor__content-wrapper.--show-outline{display:block}.text-editor__content-wrapper .editor--outline{width:auto;height:auto;overflow:unset;position:relative}.text-editor__content-wrapper .editor--outline__btn-close{display:none}.collaboration-cursor__caret,.collaboration-cursor__label{display:none}}`,"",{version:3,sources:["webpack://./src/css/prosemirror.scss","webpack://./src/css/print.scss"],names:[],mappings:"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",sourceRoot:""}]);const c=l},93320:(e,r,t)=>{t.d(r,{A:()=>a});var o=t(71354),A=t.n(o),i=t(76314),n=t.n(i)()(A());n.push([e.id,".text-editor[data-v-aee4f6d0]:not(.viewer__file--hidden){overflow:scroll;top:0;width:100%;max-width:100%;height:100%;left:0;margin:0 auto;position:relative;background-color:var(--color-main-background)}.text-editor:not(.viewer__file--hidden).source-viewer .text-editor__content-wrapper[data-v-aee4f6d0]{margin-top:var(--header-height)}","",{version:3,sources:["webpack://./src/components/ViewerComponent.vue"],names:[],mappings:"AACA,yDACC,eAAA,CACA,KAAA,CACA,UAAA,CACA,cAAA,CACA,WAAA,CACA,MAAA,CACA,aAAA,CACA,iBAAA,CACA,6CAAA,CAGC,qGACC,+BAAA",sourceRoot:""}]);const a=n},59872:(e,r,t)=>{t.d(r,{A:()=>a});var o=t(71354),A=t.n(o),i=t(76314),n=t.n(i)()(A());n.push([e.id,":root{--text-editor-max-width: 670px }@media only screen and (max-width: 512px){.text-editor{top:auto}}.viewer[data-handler=text] .modal-wrapper .modal-container{bottom:0}","",{version:3,sources:["webpack://./src/css/variables.scss","webpack://./src/components/ViewerComponent.vue"],names:[],mappings:"AAAA,MACC,+BAAA,CCCD,0CAEC,aACC,QAAA,CAAA,CAIF,2DACC,QAAA",sourceRoot:""}]);const a=n},61395:(e,r,t)=>{t.d(r,{A:()=>w});var o=t(52781),A=t(58294),i=t(73590),n=t(51594),a=t(28592);const s={name:"BaseReader",components:{EditorContent:A.$Z,EditorOutline:a.A},mixins:[n.yc,n.xU],provide(){const e={};return Object.defineProperties(e,{[i.qS]:{get:()=>this.$editor}}),e},inject:["renderHtml","extensions"],props:{content:{type:String,required:!0}},computed:{htmlContent(){return this.renderHtml(this.content)},showOutline(){return this.$outlineState.visible}},watch:{content(){this.updateContent()}},created(){this.$editor=this.createEditor(),this.$editor.setEditable(!1)},beforeDestroy(){this.$editor.destroy()},methods:{createEditor(){return new o.KE({content:this.htmlContent,extensions:this.extensions()})},updateContent(){this.$editor.commands.setContent(this.htmlContent,!0)}}};var d=t(85072),l=t.n(d),C=t(97825),c=t.n(C),p=t(77659),m=t.n(p),h=t(55056),u=t.n(h),v=t(10540),b=t.n(v),_=t(41113),f=t.n(_),g=t(33909),x={};x.styleTagTransform=f(),x.setAttributes=u(),x.insert=m().bind(null,"head"),x.domAPI=c(),x.insertStyleElement=b();l()(g.A,x);g.A&&g.A.locals&&g.A.locals;const w=(0,t(14486).A)(s,(function(){var e=this,r=e._self._c;return r("div",{staticClass:"content-wrapper text-editor__content-wrapper",class:{"--show-outline":e.showOutline},attrs:{"data-text-el":"editor-content-wrapper"}},[e.showOutline?r("div",{staticClass:"text-editor__content-wrapper__left"},[r("EditorOutline")],1):e._e(),e._v(" "),e.$editor?r("EditorContent",{staticClass:"editor__content text-editor__content",attrs:{id:"read-only-editor",editor:e.$editor}}):e._e(),e._v(" "),r("div",{staticClass:"text-editor__content-wrapper__right"})],1)}),[],!1,null,"151c6c0d",null).exports},57847:(e,r,t)=>{t.d(r,{A:()=>d});var o=t(75111),A=t(70580),i=t.n(A),n=t(61395),a=t(217);const s={name:"PlainTextReader",components:{BaseReader:n.A},provide:{renderHtml:e=>"<pre>"+i()(e)+"</pre>",extensions:()=>[a.Ks,o.Ay]},props:{content:{type:String,required:!0}}};const d=(0,t(14486).A)(s,(function(){return(0,this._self._c)("BaseReader",{attrs:{content:this.content}})}),[],!1,null,null,null).exports},71408:(e,r,t)=>{t.d(r,{A:()=>g});var o=t(61395),A=t(217),i=t(44170);const n={name:"RichTextReader",components:{BaseReader:o.A},provide:{renderHtml:e=>i.A.render(e),extensions(){return[A.sD.configure({editing:!1,link:{onClick:(e,r)=>(this.$emit("click-link",e,r),!0)}})]}},props:{content:{type:String,required:!0}},mounted(){this.$el.addEventListener("click",this.preventOpeningLinks,!0)},unmounted(){this.$el.removeEventListener("click",this.preventOpeningLinks,!0)},methods:{preventOpeningLinks(e){e.target.closest("a")&&0===e.button&&!e.ctrlKey&&e.preventDefault()}}};var a=t(85072),s=t.n(a),d=t(97825),l=t.n(d),C=t(77659),c=t.n(C),p=t(55056),m=t.n(p),h=t(10540),u=t.n(h),v=t(41113),b=t.n(v),_=t(55521),f={};f.styleTagTransform=b(),f.setAttributes=m(),f.insert=c().bind(null,"head"),f.domAPI=l(),f.insertStyleElement=u();s()(_.A,f);_.A&&_.A.locals&&_.A.locals;const g=(0,t(14486).A)(n,(function(){var e=this;return(0,e._self._c)("BaseReader",{attrs:{content:e.content},on:{"click-link":(r,t)=>e.$emit("click-link",r,t)}})}),[],!1,null,null,null).exports},19058:(e,r,t)=>{t.r(r),t.d(r,{default:()=>P});var o=t(91458),A=t(57847),i=t(71408);var n=t(48242);const a={name:"ViewerComponent",components:{RichTextReader:i.A,PlainTextReader:A.A,Editor:n.A},props:{filename:{type:String,default:null},fileid:{type:Number,default:null},active:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!0},shareToken:{type:String,default:()=>document.getElementById("sharingToken")?document.getElementById("sharingToken").value:null},mime:{type:String,default:null},showOutlineOutside:{type:Boolean,default:!1},permissions:{type:String,default:""},source:{type:String,default:void 0}},data:()=>({content:""}),computed:{useSourceView(){return this.source&&(this.fileVersion||!this.fileid)},readerComponent(){return"text/markdown"===this.mime?i.A:A.A}},watch:{source(){this.loadFileContent()}},mounted(){this.loadFileContent()},methods:{async loadFileContent(){if(this.useSourceView){const e=await o.Ay.get(this.source);this.content=e.data,this.contentLoaded=!0}this.$emit("update:loaded",!0)}}};var s=t(85072),d=t.n(s),l=t(97825),C=t.n(l),c=t(77659),p=t.n(c),m=t(55056),h=t.n(m),u=t(10540),v=t.n(u),b=t(41113),_=t.n(b),f=t(93320),g={};g.styleTagTransform=_(),g.setAttributes=h(),g.insert=p().bind(null,"head"),g.domAPI=C(),g.insertStyleElement=v();d()(f.A,g);f.A&&f.A.locals&&f.A.locals;var x=t(59872),w={};w.styleTagTransform=_(),w.setAttributes=h(),w.insert=p().bind(null,"head"),w.domAPI=C(),w.insertStyleElement=v();d()(x.A,w);x.A&&x.A.locals&&x.A.locals;const P=(0,t(14486).A)(a,(function(){var e=this,r=e._self._c;return e.useSourceView?r("div",{staticClass:"text-editor source-viewer",attrs:{id:"editor-container","data-text-el":"editor-container"}},[r(e.readerComponent,{tag:"Component",attrs:{content:e.content}})],1):r("Editor",{attrs:{"file-id":e.fileid,"relative-path":e.filename,active:e.active,autofocus:e.autofocus,"share-token":e.shareToken,mime:e.mime,"show-outline-outside":e.showOutlineOutside}})}),[],!1,null,"aee4f6d0",null).exports}}]);
//# sourceMappingURL=src_helpers_files_js-src_components_ViewerComponent_vue.js.map?v=62b547bf0defbcf88ab3