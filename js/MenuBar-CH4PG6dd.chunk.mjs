import{f as k,r as g,c as m}from"./vue.runtime.esm-CU0zJ5AL.chunk.mjs";import{ab as A,A as I,b as j,ac as U,ad as B,ae as V,B as q,af as z,ag as J,ah as S,w as O,ai as Q,aj as G,ak as Y,al as Z,am as X,an as tt,o as T,ao as et,ap as it,aq as E,ar as st,as as nt}from"./EditorOutline-vNOxctFf.chunk.mjs";import{n as R,G as K,t as f,c as at,e as N}from"./NcLoadingIcon-B1Im7aog.chunk.mjs";import{f as L}from"./MediaHandler.provider-CxKbS2cm.chunk.mjs";import{n as v}from"./_plugin-vue2_normalizer-wd1ZAbRr.chunk.mjs";import{g as w,b as ot}from"./index-DxwFe63_.chunk.mjs";import{g as rt}from"./emoji-picker-MDCGxHB0.chunk.mjs";import{N as lt,j as ct,u as W,e as dt,b as ut}from"./NcNoteCard-CwNXZ4vV-Dq8OU3M6.chunk.mjs";import{u as ht}from"./NcCheckboxRadioSwitch-CX3HXCEk-C0RoW2-E.chunk.mjs";import{u as pt}from"./Wrapper-3aeSYhaS.chunk.mjs";const _t=k({name:"NcDialog",components:{NcDialogButton:ct,NcModal:lt},props:{name:{type:String,required:!0},message:{type:String,default:""},additionalTrapElements:{type:Array,validator:t=>Array.isArray(t)&&t.every(e=>typeof e=="string"||e instanceof HTMLElement),default:()=>[]},container:{type:String,required:!1,default:"body"},open:{type:Boolean,default:!0},size:{type:String,required:!1,default:"small",validator:t=>typeof t=="string"&&["small","normal","large","full"].includes(t)},buttons:{type:Array,required:!1,default:()=>[],validator:t=>Array.isArray(t)&&t.every(e=>typeof e=="object")},noClose:{type:Boolean,default:!1},canClose:{type:Boolean,default:!0},closeOnClickOutside:{type:Boolean,default:!1},isForm:{type:Boolean,default:!1},outTransition:{type:Boolean,default:!1},navigationClasses:{type:[String,Array,Object],required:!1,default:""},navigationAriaLabel:{type:String,required:!1,default:""},navigationAriaLabelledby:{type:String,required:!1,default:""},contentClasses:{type:[String,Array,Object],required:!1,default:""},dialogClasses:{type:[String,Array,Object],required:!1,default:""}},emits:["closing","update:open","submit"],setup(t,{emit:e,slots:i}){const s=g(),{width:o}=W(s,{width:900}),r=m(()=>o.value<876),p=m(()=>i?.navigation!==void 0),b=K(),x=m(()=>t.navigationAriaLabel||void 0),C=m(()=>{if(!t.navigationAriaLabel)return t.navigationAriaLabelledby||b}),l=g(),n=m(()=>t.isForm&&!p.value?"form":"div"),a=m(()=>n.value==="form"?{submit(d){d.preventDefault(),e("submit",d)},reset(d){d.preventDefault(),e("reset",d)}}:{}),u=g(!0);function _(d,D){(d.type==="submit"||d.nativeType==="submit")&&n.value==="form"&&!l.value.reportValidity()||(h(D),window.setTimeout(()=>y(),300))}function h(d){u.value=!1,e("closing",d)}function y(){u.value=!0,e("update:open",!1)}const c=m(()=>({noClose:t.noClose||!t.canClose,container:t.container===void 0?"body":t.container,labelId:b,size:t.size,show:t.open&&u.value,outTransition:t.outTransition,closeOnClickOutside:t.closeOnClickOutside,additionalTrapElements:t.additionalTrapElements}));return{dialogElement:l,dialogListeners:a,dialogTagName:n,handleButtonClose:_,handleClosing:h,handleClosed:y,hasNavigation:p,navigationId:b,navigationAriaLabelAttr:x,navigationAriaLabelledbyAttr:C,isNavigationCollapsed:r,modalProps:c,wrapper:s}}});var bt=function(){var t=this,e=t._self._c;return t._self._setupProxy,t.open?e("NcModal",t._b({staticClass:"dialog__modal",attrs:{"enable-slideshow":!1,"enable-swipe":!1},on:{close:t.handleClosed,"update:show":function(i){return t.handleClosing()}}},"NcModal",t.modalProps,!1),[e("h2",{staticClass:"dialog__name",attrs:{id:t.navigationId},domProps:{textContent:t._s(t.name)}}),e(t.dialogTagName,t._g({ref:"dialogElement",tag:"component",staticClass:"dialog",class:t.dialogClasses},t.dialogListeners),[e("div",{ref:"wrapper",staticClass:"dialog__wrapper",class:{"dialog__wrapper--collapsed":t.isNavigationCollapsed}},[t.hasNavigation?e("nav",{staticClass:"dialog__navigation",class:t.navigationClasses,attrs:{"aria-label":t.navigationAriaLabelAttr,"aria-labelledby":t.navigationAriaLabelledbyAttr}},[t._t("navigation",null,{isCollapsed:t.isNavigationCollapsed})],2):t._e(),e("div",{staticClass:"dialog__content",class:t.contentClasses},[t._t("default",function(){return[e("p",{staticClass:"dialog__text"},[t._v(" "+t._s(t.message)+" ")])]})],2)]),e("div",{staticClass:"dialog__actions"},[t._t("actions",function(){return t._l(t.buttons,function(i,s){return e("NcDialogButton",t._b({key:s,on:{click:(o,r)=>t.handleButtonClose(i,r)}},"NcDialogButton",i,!1))})})],2)])],1):t._e()},vt=[],yt=R(_t,bt,vt,!1,null,"66c29e13");const mt=yt.exports,ft={name:"NcActionButton",components:{NextcloudVueNcActionButton:I},extends:A,mounted(){this.editor?.on("transaction",()=>this.updateState())},methods:{runAction(){const{actionEntry:t}=this;t.click?t.click(this):t.action(this.editor?.chain().focus(),this.editor)?.run(),this.$nextTick(()=>{this.$emit("trigged",{...t})})}}};var gt=function(){var t=this,e=t._self._c;return e("NextcloudVueNcActionButton",t._g({staticClass:"entry-single-action entry-action entry-action-item",class:t.state.class,attrs:{title:t.listItemTooltip||void 0,disabled:t.state.disabled,"aria-keyshortcuts":t.keyshortcuts||void 0,"data-text-action-entry":t.actionEntry.key,type:t.state.type,"model-value":t.state.type!=="button"?t.state.active:void 0,"close-after-click":""},on:{click:t.runAction},scopedSlots:t._u([{key:"icon",fn:function(){return[e(t.icon,{tag:"component"})]},proxy:!0}])},t.$listeners),[t._v(" "+t._s(t.label)+" ")])},kt=[],xt=v(ft,gt,kt,!1,null,null);const Ct=xt.exports,Et={name:"ActionList",components:{NcActions:dt,NcActionSeparator:B,ActionListItem:Ct},extends:A,mixins:[j,U],props:{forceEnabled:{type:Boolean,default:!1}},data:()=>({visible:!1,hasEnabledChild:!0}),computed:{currentChild(){const{state:t,editor:e,actionEntry:{children:i}}=this;return t.active?i.find(s=>z(s,e)):null},icon(){return this.currentChild?this.currentChild.icon:this.actionEntry.icon},iconKey(){return`${this.actionEntry.key}/${this.activeKey}`},activeKey(){return this.currentChild?.key},children(){return this.actionEntry.children.filter(({visible:t})=>t===void 0?!0:typeof t=="function"?t(this):t)},labelWithSelected(){return this.currentChild?f("text",'{menuItemName}, "{selectedSubMenuItemName}" is selected',{menuItemName:this.actionEntry.label,selectedSubMenuItemName:this.currentChild.label}):this.actionEntry.label},isEnabled(){return this.forceEnabled||this.hasEnabledChild}},mounted(){this.$_updateState=q(this.checkStateOfChildren.bind(this),50),this.editor?.on("update",this.$_updateState),this.editor?.on("selectionUpdate",this.$_updateState)},beforeDestroy(){this.editor?.off("update",this.$_updateState),this.editor?.off("selectionUpdate",this.$_updateState)},methods:{onOpenChange(t){this.visible=t},runAction(){},onTrigger(t){t?.click||(this.editor?.chain().focus().run(),this.$emit("trigged",t))},checkStateOfChildren(){this.hasEnabledChild=this.children.some(t=>this.isChildEnabled(t))},isChildEnabled(t){return!t.isSeparator&&!V(t,this.editor).disabled}}};var Mt=function(){var t=this,e=t._self._c;return e("NcActions",t._b({staticClass:"entry-list-action entry-action",attrs:{title:t.tooltip,container:t.menuIDSelector,"aria-label":t.labelWithSelected,type:t.state.active?"primary":"tertiary","force-menu":!0,"data-text-action-entry":t.actionEntry.key,"data-text-action-active":t.activeKey,disabled:!t.isEnabled},on:{"update:open":t.onOpenChange},scopedSlots:t._u([{key:"icon",fn:function(){return[e(t.icon,{key:t.iconKey,tag:"component"})]},proxy:!0}])},"NcActions",t.state,!1),[t._l(t.children,function(i){return[i.isSeparator?e("NcActionSeparator",{key:`child-${i.key}`}):e("ActionListItem",t._g({key:`child-${i.key}`,attrs:{active:t.currentChild?.key===i.key,"is-item":"","action-entry":i},on:{trigged:t.onTrigger}},t.$listeners))]}),t._t("lastAction",null,null,{visible:t.visible})],2)},At=[],St=v(Et,Mt,At,!1,null,null);const H=St.exports,Nt={name:"ActionSingle",components:{NcButton:ut},extends:A,props:{isItem:{type:Boolean,default:!1}},mounted(){this.editor?.on("transaction",()=>this.updateState())},methods:{runAction(){const{actionEntry:t}=this;t.click?t.click(this):t.action(this.editor?.chain().focus(),this.editor)?.run(),this.$nextTick(()=>{this.$emit("trigged",{...t})})}}};var wt=function(){var t=this,e=t._self._c;return e("NcButton",t._g({staticClass:"entry-single-action entry-action",class:t.state.class,attrs:{disabled:t.state.disabled,"aria-keyshortcuts":t.keyshortcuts||void 0,"data-text-action-entry":t.actionEntry.key,"aria-label":t.label,title:t.tooltip,type:"tertiary",pressed:t.state.type!=="button"?t.state.active:void 0},on:{click:t.runAction},scopedSlots:t._u([{key:"icon",fn:function(){return[e(t.icon,{tag:"component"})]},proxy:!0},t.actionEntry.forceLabel?{key:"default",fn:function(){return[t._v(" "+t._s(t.label)+" ")]},proxy:!0}:null],null,!0)},t.$listeners))},$t=[],It=v(Nt,wt,$t,!1,null,null);const P=It.exports,F=k({data(){return{activeMenuEntry:0,entries:[]}},computed:{visibleEntries(){return this.entries}},watch:{visibleEntries(){this.$nextTick(()=>{(this.activeMenuEntry>this.visibleEntries.length||this.visibleEntries[this.activeMenuEntry]?.disabled)&&this.setNextMenuEntry()})}},methods:{disableMenuEntry(t,e){const i=this.visibleEntries.findIndex(({key:s})=>s===t);this.visibleEntries[i].disabled=e,e===!1&&this.activeMenuEntry===i&&this.$nextTick(()=>this.setNextMenuEntry())},setNextMenuEntry(){const t=this.visibleEntries.length+(this.$refs.remainingEntries?1:0);do this.activeMenuEntry=(this.activeMenuEntry+1)%t;while(this.activeMenuEntry<this.visibleEntries.length&&this.visibleEntries[this.activeMenuEntry].disabled)},setPreviousMenuEntry(){const t=this.visibleEntries.length+(this.$refs.remainingEntries?1:0);do{const e=this.activeMenuEntry-1;this.activeMenuEntry=(e%t+t)%t}while(this.activeMenuEntry<this.visibleEntries.length&&this.visibleEntries[this.activeMenuEntry].disabled)},handleToolbarNavigation(t){t.key==="ArrowRight"?this.setNextMenuEntry():t.key==="ArrowLeft"&&this.setPreviousMenuEntry(),this.activeMenuEntry===this.visibleEntries.length?this.$refs.remainingEntries?.focusButton?.():[...this.$refs.menuEntries].sort((e,i)=>this.visibleEntries.findIndex(({key:s})=>s===e.$vnode.data.key)-this.visibleEntries.findIndex(({key:s})=>s===i.$vnode.data.key))[this.activeMenuEntry].focusButton()}}}),Bt=k({name:"ReadonlyBar",components:{ActionList:H,ActionSingle:P},extends:F,mixins:[L],props:{isHidden:{type:Boolean,default:!1},openReadOnly:{type:Boolean,default:!1}},emits:["update:loaded"],setup(){const{isRichWorkspace:t}=O();return{isRichWorkspace:t}},data(){return{entries:this.openReadOnly?[...J,...S]:[...S],isReady:!1}},mounted(){this.$nextTick(()=>{this.isReady=!0,this.$emit("update:loaded",!0)})},methods:{t:f}});var Ot=function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"text-readonly-bar",class:{"text-readonly-bar--ready":t.isReady,"text-readonly-bar--is-workspace":t.isRichWorkspace,"text-readonly-bar--hide":t.isHidden,"is-mobile":t.$isMobile},attrs:{"data-text-el":"readonly-bar"}},[e("div",{ref:"menubar",staticClass:"text-readonly-bar__entries",attrs:{role:"toolbar","aria-label":t.t("text","Editor actions")}},t._l(t.visibleEntries,function(i,s){return e(i.component?i.component:i.children?"ActionList":"ActionSingle",{key:i.key,ref:"menuEntries",refInFor:!0,tag:"component",attrs:{"action-entry":i,"can-be-focussed":t.activeMenuEntry===s},on:{disabled:function(o){return t.disableMenuEntry(i.key,o)}}})}),1),e("div",{staticClass:"text-readonly-bar__slot"},[t._t("default")],2)])},Tt=[],Rt=v(Bt,Ot,Tt,!1,null,"988a9965");const Ae=Rt.exports,Kt={name:"NcActionCheckbox",mixins:[Q],inject:{isInSemanticMenu:{from:"NcActions:isSemanticMenu",default:!1}},model:{prop:"modelValue",event:"update:modelValue"},props:{id:{type:String,default:()=>"action-"+K(),validator:t=>t.trim()!==""},checked:{type:Boolean,default:void 0},modelValue:{type:Boolean,default:!1},value:{type:[String,Number],default:""},disabled:{type:Boolean,default:!1}},emits:["change","check","uncheck","update:checked","update:modelValue","update:model-value"],setup(){return{model:ht("checked","update:checked")}},computed:{isFocusable(){return!this.disabled},ariaChecked(){if(this.isInSemanticMenu)return this.model?"true":"false"}},methods:{checkInput(){this.$refs.label.click()},onChange(t){this.model=this.$refs.checkbox.checked,this.$emit("change",t),this.$refs.checkbox.checked?this.$emit("check"):this.$emit("uncheck")}}};var Lt=function(){var t=this,e=t._self._c;return e("li",{staticClass:"action",class:{"action--disabled":t.disabled},attrs:{role:t.isInSemanticMenu&&"presentation"}},[e("span",{staticClass:"action-checkbox",attrs:{role:t.isInSemanticMenu&&"menuitemcheckbox","aria-checked":t.ariaChecked}},[e("input",{ref:"checkbox",staticClass:"checkbox action-checkbox__checkbox",class:{focusable:t.isFocusable},attrs:{id:t.id,disabled:t.disabled,type:"checkbox"},domProps:{checked:t.model,value:t.value},on:{keydown:function(i){return!i.type.indexOf("key")&&t._k(i.keyCode,"enter",13,i.key,"Enter")||i.ctrlKey||i.shiftKey||i.altKey||i.metaKey?null:(i.preventDefault(),t.checkInput.apply(null,arguments))},change:t.onChange}}),e("label",{ref:"label",staticClass:"action-checkbox__label",attrs:{for:t.id}},[t._v(t._s(t.text))]),t._e()],2)])},Wt=[],Ht=R(Kt,Lt,Wt,!1,null,"73edcb0b");const Pt=Ht.exports;var M={exports:{}},$;function Ft(){return $||($=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;function i(l){"@babel/helpers - typeof";return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},i(l)}var s=47,o=46,r=function(l){var n=i(l);if(n!=="string")throw new TypeError("Expected a string, got a ".concat(n))},p=function(l,n){for(var a="",u=0,_=-1,h=0,y,c=0;c<=l.length;++c){if(c<l.length)y=l.charCodeAt(c);else{if(y===s)break;y=s}if(y===s){if(!(_===c-1||h===1))if(_!==c-1&&h===2){if(a.length<2||u!==2||a.charCodeAt(a.length-1)!==o||a.charCodeAt(a.length-2)!==o){if(a.length>2){var d=a.lastIndexOf("/");if(d!==a.length-1){d===-1?(a="",u=0):(a=a.slice(0,d),u=a.length-1-a.lastIndexOf("/")),_=c,h=0;continue}}else if(a.length===2||a.length===1){a="",u=0,_=c,h=0;continue}}n&&(a.length>0?a+="/..":a="..",u=2)}else a.length>0?a+="/"+l.slice(_+1,c):a=l.slice(_+1,c),u=c-_-1;_=c,h=0}else y===o&&h!==-1?++h:h=-1}return a},b=function(l){try{return decodeURIComponent(l)}catch{return l}},x=function(l){r(l);var n=l;if(n.length===0)return".";var a=n.charCodeAt(0)===s,u=n.charCodeAt(n.length-1)===s;return n=b(n),n=p(n,!a),n.length===0&&!a&&(n="."),n.length>0&&u&&(n+="/"),a?"/"+n:n},C=x;e.default=C,t.exports=e.default}(M,M.exports)),M.exports}var Dt=Ft();const jt=rt(Dt);class Se{#t;#e;#i;#s;#n;#a;#o=[];constructor({session:e,user:i,shareToken:s,currentDirectory:o,fileId:r}){this.#t=e,this.#e=i,this.#i=s,this.#s=o,this.#n=r??e.documentId,this.#a=this.#r()}async#r(){const e=await at.post(w("/apps/text/attachments"),{documentId:this.#t?.documentId??this.#n,sessionId:this.#t?.id,sessionToken:this.#t?.token,shareToken:this.#i});this.#o=e.data}#l(e){return this.#o.find(i=>i.name===e)}async resolve(e,i=!0){let s;const o=/^\.attachments\.\d+\//;if(e.match(o)){const r=decodeURIComponent(e.replace(o,"").split("?")[0]);if(await this.#a,s=this.#l(r),i&&!s&&(await this.#r(),s=this.#l(r)),s)return s}return Ut(e)?{isImage:!0,name:this.#c(e),previewUrl:e,fullUrl:e}:{isImage:!0,name:this.#c(e),previewUrl:this.#d(e),fullUrl:this.#d(e)}}#c(e){return e.split("/").pop()}#d(e){if(this.#e){const r=this.#e.uid,p=this.#u(e).split("/").map(encodeURIComponent).join("/");return ot(`dav/files/${r}${p}`)}const i=this.#u(e).split("/"),s=i.pop(),o=i.join("/");return w("/s/{token}/download?path={dirname}&files={basename}",{token:this.#i,basename:s,dirname:o})}#h(e){return decodeURI(e.split("?")[0])}#u(e){const i=[this.#s,this.#h(e)].join("/");return jt(i)}}function Ut(t){return t.startsWith("http://")||t.startsWith("https://")||t.startsWith("data:")}function Vt(){return navigator?.userAgentData?.mobile!==void 0?navigator.userAgentData.mobile:[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/playbook/i,/silk/i,/BlackBerry/i,/Windows Phone/i].some(t=>navigator.userAgent.match(t))}const qt={name:"HelpModal",components:{NcDialog:mt},data(){return{formatted:{bold:!0,italic:!0,strikethrough:!0,heading1:!0,heading6:!0,unorderdList:!0,orderedList:!0,checkList:!0,blockQuote:!0,codeBlock:!0},ctrlOrModKey:G[Y.Mod]}},computed:{isFormatted(){return t=>this.formatted[t]},isMobileCached(){return this.isMobilePlatform()}},methods:{t:f,toggleFormatted(t){this.formatted[t]=!this.formatted[t]},isMobilePlatform:Vt}};var zt=function(){var t=this,e=t._self._c;return e("NcDialog",{attrs:{size:"large","data-text-el":"formatting-help",name:t.t("text","Formatting and shortcuts"),"close-on-click-outside":!0},on:{closing:function(i){return t.$emit("close")}}},[e("h2",[t._v(t._s(t.t("text","Formatting and shortcuts")))]),e("p",[t._v(t._s(t.t("text","Speed up your writing with simple shortcuts.")))]),t.isMobileCached?e("p",[t._v(" "+t._s(t.t("text","Just type the Markdown syntax from below."))+" ")]):e("p",[t._v(" "+t._s(t.t("text","Just type the Markdown syntax or use keyboard shortcuts from below."))+" ")]),e("table",[e("thead",[e("tr",[e("th",[t._v(t._s(t.t("text","Style")))]),e("th",[t._v(t._s(t.t("text","Syntax")))]),t.isMobileCached?t._e():e("th",[t._v(" "+t._s(t.t("text","Keyboard shortcuts"))+" ")])])]),e("tbody",[e("tr",[e("td",[t._v(t._s(t.t("text","New paragraph")))]),e("td",[e("kbd",[t._v(t._s(t.t("text","Enter")))])]),t.isMobileCached?t._e():e("td")]),e("tr",[e("td",[t._v(t._s(t.t("text","Hard line break")))]),e("td",[e("kbd",[t._v(t._s(t.t("text","Enter")))]),t._v(" "+t._s(t.t("text","followed by"))+" "),e("kbd",[t._v(t._s(t.t("text","Backspace")))])]),t.isMobileCached?t._e():e("td",[e("kbd",[t._v(t._s(t.t("text","Shift")))]),t._v(" + "),e("kbd",[t._v(t._s(t.t("text","Enter")))])])]),e("tr",[e("td",[t._v(t._s(t.t("text","Bold")))]),e("td",[e("code",[t._v("**"+t._s(t.t("text","Bold text"))+"**")])]),t.isMobileCached?t._e():e("td",[e("kbd",[t._v(t._s(t.ctrlOrModKey))]),t._v(" + "),e("kbd",[t._v("B")])])]),e("tr",[e("td",[t._v(t._s(t.t("text","Italic")))]),e("td",[e("code",[t._v("*"+t._s(t.t("text","Italicized text"))+"*")])]),t.isMobileCached?t._e():e("td",[e("kbd",[t._v(t._s(t.ctrlOrModKey))]),t._v(" + "),e("kbd",[t._v("I")])])]),e("tr",[e("td",[t._v(t._s(t.t("text","Strikethrough")))]),e("td",[e("code",[t._v("~~"+t._s(t.t("text","Mistaken text"))+"~~")])]),t.isMobileCached?t._e():e("td",[e("kbd",[t._v(t._s(t.ctrlOrModKey))]),t._v(" + "),e("kbd",[t._v(t._s(t.t("text","Shift")))]),t._v(" + "),e("kbd",[t._v("S")])])]),e("tr",[e("td",[t._v(t._s(t.t("text","Underline")))]),e("td",[e("code",[t._v("__"+t._s(t.t("text","Underlined text"))+"__")])]),t.isMobileCached?t._e():e("td",[e("kbd",[t._v(t._s(t.ctrlOrModKey))]),t._v(" + "),e("kbd",[t._v("U")])])]),e("tr",[e("td",{staticClass:"ellipsis_top"},[t._v(" "+t._s(t.t("text","Heading 1"))+" ")]),e("td",{staticClass:"ellipsis_top"},[e("code",[t._v("# "+t._s(t.t("text","Heading level 1")))])]),t.isMobileCached?t._e():e("td",{staticClass:"ellipsis_top"},[e("kbd",[t._v(t._s(t.ctrlOrModKey))]),t._v(" + "),e("kbd",[t._v(t._s(t.t("text","Shift")))]),t._v(" + "),e("kbd",[t._v("1")])])]),e("tr",[e("td",{staticClass:"noborder ellipsis"},[t._v("…")]),e("td",{staticClass:"noborder ellipsis"},[t._v("…")]),t.isMobileCached?t._e():e("td",{staticClass:"ellipsis noborder"},[t._v("…")])]),e("tr",[e("td",{staticClass:"noborder ellipsis_bottom"},[t._v(" "+t._s(t.t("text","Heading 6"))+" ")]),e("td",{staticClass:"noborder ellipsis_bottom"},[e("code",[t._v("###### "+t._s(t.t("text","Heading level 6")))])]),t.isMobileCached?t._e():e("td",{staticClass:"noborder ellipsis_bottom"},[e("kbd",[t._v(t._s(t.ctrlOrModKey))]),t._v(" + "),e("kbd",[t._v(t._s(t.t("text","Shift")))]),t._v(" + "),e("kbd",[t._v("6")])])]),e("tr",[e("td",[t._v(t._s(t.t("text","Unordered list")))]),e("td",[e("code",[t._v("* "+t._s(t.t("text","An item")))])]),t.isMobileCached?t._e():e("td",[e("kbd",[t._v(t._s(t.ctrlOrModKey))]),t._v(" + "),e("kbd",[t._v(t._s(t.t("text","Shift")))]),t._v(" + "),e("kbd",[t._v("8")])])]),e("tr",[e("td",[t._v(t._s(t.t("text","Ordered list")))]),e("td",[e("code",[t._v("1. "+t._s(t.t("text","First item")))])]),t.isMobileCached?t._e():e("td",[e("kbd",[t._v(t._s(t.ctrlOrModKey))]),t._v(" + "),e("kbd",[t._v(t._s(t.t("text","Shift")))]),t._v(" + "),e("kbd",[t._v("7")])])]),e("tr",[e("td",[t._v(t._s(t.t("text","Checklist")))]),e("td",[e("code",[t._v("* [] "+t._s(t.t("text","To-Do item")))])]),t.isMobileCached?t._e():e("td",[e("kbd",[t._v(t._s(t.ctrlOrModKey))]),t._v(" + "),e("kbd",[t._v(t._s(t.t("text","Shift")))]),t._v(" + "),e("kbd",[t._v("9")])])]),e("tr",[e("td",[t._v(t._s(t.t("text","Blockquote")))]),e("td",[e("code",[t._v("> "+t._s(t.t("text","Quoted text")))])]),t.isMobileCached?t._e():e("td",[e("kbd",[t._v(t._s(t.ctrlOrModKey))]),t._v(" + "),e("kbd",[t._v(">")])])]),e("tr",[e("td",[t._v(t._s(t.t("text","Code block")))]),e("td",[e("code",[t._v("``` "+t._s(t.t("text","Some code")))])]),t.isMobileCached?t._e():e("td")]),e("tr",[e("td",[t._v(t._s(t.t("text","Link")))]),e("td",[e("code",[t._v("[Title](https://example.org)")])]),t.isMobileCached?t._e():e("td",[e("kbd",[t._v(t._s(t.ctrlOrModKey))]),t._v(" + "),e("kbd",[t._v("K")])])]),e("tr",[e("td",[t._v(t._s(t.t("text","Insert emoji")))]),e("td",[e("code",[t._v(":"+t._s(t.t("text","emoji")))])]),t.isMobileCached?t._e():e("td")]),e("tr",[e("td",[t._v(t._s(t.t("text","Mention someone")))]),e("td",[e("code",[t._v("@"+t._s(t.t("text","name")))])]),t.isMobileCached?t._e():e("td")]),e("tr",[e("td",[t._v(t._s(t.t("text","Smart picker")))]),e("td",[e("code",[t._v("/"+t._s(t.t("text","something")))])]),t.isMobileCached?t._e():e("td")])])]),e("table",{attrs:{vif:"!isMobileCached"}},[e("thead",[e("tr",[e("th",[t._v(t._s(t.t("text","Action")))]),e("th",[t._v(t._s(t.t("text","Keyboard shortcuts")))])])]),e("tbody",[e("tr",[e("td",[t._v(t._s(t.t("text","Undo")))]),e("td",[e("kbd",[t._v(t._s(t.ctrlOrModKey))]),t._v(" + "),e("kbd",[t._v("Z")])])]),e("tr",[e("td",[t._v(t._s(t.t("text","Redo")))]),e("td",[e("kbd",[t._v(t._s(t.ctrlOrModKey))]),t._v(" + "),e("kbd",[t._v("Y")])])]),e("tr",[e("td",[t._v(t._s(t.t("text","Toggle outline")))]),e("td",[e("kbd",[t._v(t._s(t.ctrlOrModKey))]),t._v(" + "),e("kbd",[t._v(t._s(t.t("text","Alt")))]),t._v(" + "),e("kbd",[t._v("H")])])])])])])},Jt=[],Qt=v(qt,zt,Jt,!1,null,"5bb25ea4");const Gt=Qt.exports,Yt=k({name:"NcActionButton",components:{NextcloudVueNcActionButton:I,Help:Z},methods:{t:f}});var Zt=function(){var t=this,e=t._self._c;return t._self._setupProxy,e("NextcloudVueNcActionButton",t._g({attrs:{"close-after-click":"","data-text-action-entry":"formatting-help"},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Help")]},proxy:!0}])},t.$listeners),[t._v(" "+t._s(t.t("text","Formatting help"))+" ")])},Xt=[],te=v(Yt,Zt,Xt,!1,null,null);const ee=te.exports,ie=k({name:"CharacterCount",components:{AlphabeticalVariant:tt,NcActionText:X},props:{visible:Boolean},setup(){const{editor:t}=T(),e=g("");return{countString:e,refresh:()=>{const{storage:i,state:s}=t,o=i.characterCount.words({node:s.doc}),r=i.characterCount.characters({node:s.doc}),p=N("text","%n word","%n words",o),b=N("text","%n char","%n chars",r);e.value=[p,b].join(", "),console.debug({wordCount:o,charCount:r,countString:e.value})}}},watch:{visible:"refresh"},created(){this.refresh()}});var se=function(){var t=this,e=t._self._c;return t._self._setupProxy,e("NcActionText",{attrs:{"data-text-action-entry":"character-count",name:t.countString},scopedSlots:t._u([{key:"icon",fn:function(){return[e("AlphabeticalVariant")]},proxy:!0}])})},ne=[],ae=v(ie,se,ne,!1,null,null);const oe=ae.exports,re={__name:"WidthToggle",setup(t){const{canToggleWidth:e,isFullWidth:i,setFullWidth:s}=pt();return{__sfc:!0,canToggleWidth:e,isFullWidth:i,setFullWidth:s,t:f,NcActionCheckbox:Pt}}};var le=function(){var t=this,e=t._self._c,i=t._self._setupProxy;return i.canToggleWidth?e(i.NcActionCheckbox,{attrs:{checked:i.isFullWidth},on:{"update:checked":i.setFullWidth}},[t._v(" "+t._s(i.t("text","Full width editor"))+" ")]):t._e()},ce=[],de=v(re,le,ce,!1,null,null);const ue=de.exports,he={name:"MenuBar",components:{ActionFormattingHelp:ee,ActionList:H,ActionSingle:P,HelpModal:Gt,NcActionSeparator:B,CharacterCount:oe,WidthToggle:ue},extends:F,mixins:[L],provide(){const t={};return Object.defineProperties(t,{[nt]:{get:()=>this.randomID}}),t},props:{isHidden:{type:Boolean,default:!1},openReadOnly:{type:Boolean,default:!1}},setup(){const t=T(),{isPublic:e,isRichEditor:i,isRichWorkspace:s}=O(),o=g(),{width:r}=W(o);return{editor:t,isPublic:e,isRichEditor:i,isRichWorkspace:s,menubar:o,width:r}},data(){return{entries:(this.openReadOnly?[...it,...E]:this.isPublic||this.isRichWorkSpace?[...E]:[...E,...st]).filter(t=>!!t),randomID:`menu-bar-${Math.ceil(Math.random()*1e4+500).toString(16)}`,displayHelp:!1,isReady:!1,resize:null}},computed:{visibleEntryKeys(){return this.entries.toSorted((t,e)=>(t.priority??0)-(e.priority??0)).map(t=>t.key).slice(0,this.iconsLimit)},visibleEntries(){return this.entries.filter(t=>this.visibleEntryKeys.includes(t.key))},hiddenEntries(){const t=this.entries.filter(i=>!this.visibleEntryKeys.includes(i.key)),e=t.reduce((i,s,o)=>{const r=s.children??[s];if(r.length>1){const p=i.length&&!i.at(-1).isSeparator?[{key:`separator-before-${s.id}`,isSeparator:!0}]:[],b=o!==t.length-1?[{key:`separator-after-${s.id}`,isSeparator:!0}]:[];return[...i,...p,...r,...b]}return[...i,...r]},[]);return{key:"remain",label:this.t("text","Remaining actions"),icon:et,children:e}},iconWidth(){const t=(this.menubar&&getComputedStyle(this.menubar))?.getPropertyValue("--default-clickable-area");return parseInt(t)||34},iconsLimit(){const t=this.width-4,e=this.$isMobile?this.iconWidth:this.iconWidth+2;return Math.floor(t/e)-1}},mounted(){this.$nextTick(()=>{this.isReady=!0,this.$emit("update:loaded",!0)})},methods:{showHelp(){this.displayHelp=!0},hideHelp(){this.displayHelp=!1},t:f}};var pe=function(){var t=this,e=t._self._c;return e("div",{staticClass:"text-menubar",class:{"text-menubar--ready":t.isReady,"text-menubar--hide":t.isHidden,"text-menubar--is-workspace":t.isRichWorkspace,"is-mobile":t.$isMobile},attrs:{id:t.randomID,"data-text-el":"menubar",role:"region","aria-label":t.t("text","Editor actions")}},[t.displayHelp?e("HelpModal",{on:{close:t.hideHelp}}):t._e(),t.isRichEditor?e("div",{ref:"menubar",staticClass:"text-menubar__entries",attrs:{role:"toolbar","aria-label":t.t("text","Formatting menu bar")},on:{keyup:[function(i){return!i.type.indexOf("key")&&t._k(i.keyCode,"left",37,i.key,["Left","ArrowLeft"])||"button"in i&&i.button!==0?null:(i.stopPropagation(),t.handleToolbarNavigation.apply(null,arguments))},function(i){return!i.type.indexOf("key")&&t._k(i.keyCode,"right",39,i.key,["Right","ArrowRight"])||"button"in i&&i.button!==2?null:(i.stopPropagation(),t.handleToolbarNavigation.apply(null,arguments))}]}},[t._l(t.visibleEntries,function(i,s){return e(i.component?i.component:i.children?"ActionList":"ActionSingle",{key:i.key,ref:"menuEntries",refInFor:!0,tag:"component",attrs:{"action-entry":i,"can-be-focussed":t.activeMenuEntry===s},on:{disabled:function(o){return t.disableMenuEntry(i.key,o)},click:function(o){t.activeMenuEntry=s}}})}),e("ActionList",{ref:"remainingEntries",attrs:{"action-entry":t.hiddenEntries,"can-be-focussed":t.activeMenuEntry===t.visibleEntries.length,"force-enabled":!0},on:{click:function(i){t.activeMenuEntry="remain"}},scopedSlots:t._u([{key:"lastAction",fn:function({visible:i}){return[e("WidthToggle"),e("ActionFormattingHelp",{on:{click:t.showHelp}}),e("NcActionSeparator"),e("CharacterCount",t._b({},"CharacterCount",{visible:i},!1))]}}],null,!1,4216951189)})],2):t._e(),e("div",{staticClass:"text-menubar__slot"},[t._t("default")],2)],1)},_e=[],be=v(he,pe,_e,!1,null,"6704c502");const Ne=be.exports;export{Se as A,Ne as M,mt as N,Ae as R};
//# sourceMappingURL=MenuBar-CH4PG6dd.chunk.mjs.map
