/*! For license information please see src_extensions_index_js-src_components_Editor_EditorOutline_vue-data_image_svg_xml_3c_21--_20-ee52b2.js.LICENSE.txt */
"use strict";(self.webpackChunk_nextcloud_text=self.webpackChunk_nextcloud_text||[]).push([["src_extensions_index_js-src_components_Editor_EditorOutline_vue-data_image_svg_xml_3c_21--_20-ee52b2","data_image_svg_xml_3c_21--_20-_20SPDX-FileCopyrightText_202020_20Google_20Inc_20-_20SPDX-Lice-cc29b1"],{3601:(t,e,n)=>{n.d(e,{Os:()=>o,Vf:()=>r,kk:()=>i,lk:()=>a,qS:()=>l,u1:()=>s});const i=Symbol("state:uploading-state"),o=Symbol("editor:action:attachment-prompt"),r=Symbol("editor:action:upload-attachment"),a={inject:{$uploadingState:{from:i,default:{isUploadingAttachments:!1}}}},s={inject:{$callAttachmentPrompt:{from:o,default:()=>{}}}},l={inject:{$callChooseLocalAttachment:{from:r,default:()=>{}}}}},51594:(t,e,n)=>{n.d(e,{N:()=>o,tD:()=>i,xU:()=>a,yc:()=>r});const i=Symbol("wrapper:outline-state"),o=Symbol("wrapper:outline-actions"),r={inject:{$outlineState:{from:i,default:{visible:!1,enable:!1}}}},a={inject:{$outlineActions:{from:o,default:{toggle:()=>{}}}}}},58655:(t,e,n)=>{n.d(e,{A:()=>w});var i=n(17334),o=n.n(i),r=n(73590),a=n(51594),s=n(1357),l=n(11441),c=n(85072),d=n.n(c),A=n(97825),u=n.n(A),p=n(77659),m=n.n(p),h=n(55056),f=n.n(h),g=n(10540),C=n.n(g),v=n(41113),b=n.n(v),y=n(36841),x={};x.styleTagTransform=b(),x.setAttributes=f(),x.insert=m().bind(null,"head"),x.domAPI=u(),x.insertStyleElement=C();d()(y.A,x);y.A&&y.A.locals&&y.A.locals;const w={mixins:[r.CB,r.bk,l.A,a.xU,a.yc],props:{actionEntry:{type:Object,required:!0},canBeFocussed:{type:Boolean,default:null}},data(){return{state:(0,s.yd)(this.actionEntry,this.$editor)}},computed:{label(){const{label:t}=this.actionEntry;return"function"==typeof t?t(this):t},icon(){return this.actionEntry.icon},keyshortcuts(){return(0,s.dG)(this.actionEntry)},tooltip(){return[this.label,(0,s.xD)(this.$isMobile,this.actionEntry)].join(" ")}},watch:{canBeFocussed(){this.setTabIndexOnButton()}},mounted(){this.$_updateState=o()(this.updateState.bind(this),50),this.$editor.on("update",this.$_updateState),this.$editor.on("selectionUpdate",this.$_updateState),this.$emit("disabled",this.state.disabled),this.setTabIndexOnButton()},beforeDestroy(){this.$editor.off("update",this.$_updateState),this.$editor.off("selectionUpdate",this.$_updateState)},methods:{updateState(){this.state=(0,s.yd)(this.actionEntry,this.$editor),this.$emit("disabled",this.state.disabled)},setTabIndexOnButton(){const t="button"===this.$el.tagName.toLowerCase()?this.$el:this.$el.querySelector("button");null===this.canBeFocussed?t.removeAttribute("tabindex"):t.setAttribute("tabindex",this.canBeFocussed?"0":"-1")},focusButton(){("button"===this.$el.tagName.toLowerCase()?this.$el:this.$el.querySelector("button")).focus()}}}},30109:(t,e,n)=>{n.d(e,{B:()=>o,Y:()=>i});const i=Symbol("menu::id"),o={inject:{$menuID:{from:i,default:null}},computed:{menuIDSelector(){return`#${this.$menuID}`}}}},54789:(e,n,i)=>{i.d(n,{n:()=>R,A:()=>H});var o=i(59488),r=i(58655),a=i(28317),s=i(30109);const l={name:"EmojiPickerAction",components:{NcEmojiPicker:a.in,NcButton:a.x1},extends:r.A,mixins:[s.B],methods:{addEmoji(t){let{id:e,native:n}=t;this.actionEntry.action(this.$editor.chain(),{id:e,native:n}).focus().run()}}};var c=i(14486);const d=(0,c.A)(l,(function(){var t=this,e=t._self._c;return e("NcEmojiPicker",{staticClass:"entry-action entry-action__emoji",attrs:{"data-text-action-entry":t.actionEntry.key,container:t.menuIDSelector},on:{"select-data":t.addEmoji}},[e("div",[e("NcButton",{staticClass:"entry-action__button",attrs:{role:"menu",title:t.actionEntry.label,"aria-label":t.actionEntry.label},scopedSlots:t._u([{key:"icon",fn:function(){return[e(t.icon,{tag:"component"})]},proxy:!0}])})],1)])}),[],!1,null,null,null).exports;var A=i(73590),u=i(3601);const p={name:"ActionAttachmentUpload",components:{NcActions:a.B6,NcActionButton:a.Ko,Loading:o.Rh,Folder:o.vd,Upload:o._O},extends:r.A,mixins:[A.ir,A._S,u.u1,u.lk,u.qS,s.B],computed:{icon(){return this.isUploadingAttachments?o.Rh:this.actionEntry.icon},isUploadingAttachments(){return this.$uploadingState.isUploadingAttachments}}};const m=(0,c.A)(p,(function(){var t=this,e=t._self._c;return e("NcActions",{staticClass:"entry-action entry-action__image-upload",attrs:{"data-text-action-entry":t.actionEntry.key,name:t.actionEntry.label,title:t.actionEntry.label,"aria-label":t.actionEntry.label,container:t.menuIDSelector},scopedSlots:t._u([{key:"icon",fn:function(){return[e(t.icon,{tag:"component",attrs:{name:t.actionEntry.label,"aria-label":t.actionEntry.label}})]},proxy:!0}])},[t._v(" "),t.$editorUpload?e("NcActionButton",{attrs:{"close-after-click":"",disabled:t.isUploadingAttachments,"data-text-action-entry":`${t.actionEntry.key}-upload`},on:{click:t.$callChooseLocalAttachment},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Upload")]},proxy:!0}],null,!1,933298848)},[t._v("\n\t\t"+t._s(t.t("text","Upload from computer"))+"\n\t")]):t._e(),t._v(" "),t.$isPublic?t._e():e("NcActionButton",{attrs:{"close-after-click":"",disabled:t.isUploadingAttachments,"data-text-action-entry":`${t.actionEntry.key}-insert`},on:{click:t.$callAttachmentPrompt},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Folder")]},proxy:!0}],null,!1,2750733237)},[t._v("\n\t\t"+t._s(t.t("text","Insert from Files"))+"\n\t")])],1)}),[],!1,null,null,null).exports;var h=i(64508),f=i(85168),g=i(63814),C=i(32981),v=i(52781);const b={name:"ActionInsertLink",components:{NcActions:a.B6,NcActionButton:a.Ko,NcActionInput:a.Az,Document:o.yo,Loading:o.Rh,LinkOff:o.eb,Web:o.Nc,Shape:o.yp},extends:r.A,mixins:[A.pN,s.B],data:()=>({href:"",isInputMode:!1,startPath:null,menuOpen:!1,isUsingDirectEditing:null!==(0,C.C)("text","directEditingToken",null)}),computed:{activeClass(){return this.state.active?"is-active":""},relativePath(){return this.$file?.relativePath??"/"}},methods:{linkFile(){null===this.startPath&&(this.startPath=this.relativePath.split("/").slice(0,-1).join("/"));(0,f.a1)(t("text","Select file or folder to link to")).startAt(this.startPath).allowDirectories(!0).setMultiSelect(!1).setType(f.bh.Choose).build().pick().then((t=>{OC.Files.getClient().getFileInfo(t).then(((t,e)=>{const n=new URL((0,g.Jv)(`/f/${e.id}`),window.origin);this.setLink(n.href,e.name),this.startPath=e.path+("dir"===e.type?`/${e.name}/`:"")})),this.menuOpen=!1})).catch((()=>{this.$refs.buttonFile.$el.focus()}))},linkWebsite(t){if("submit"===t?.type){const e=[...t.target.elements].filter((t=>"text"===t?.type))[0].value;return this.menuOpen=!1,this.isInputMode=!1,this.href="",this.setLink(e,e)}if((0,v.$m)(this.$editor.state,"link")){const t=(0,v.z6)(this.$editor.state,"link");this.href=t.href}this.isInputMode=!0},setLink(t,e){t&&![/^[a-zA-Z]+:/,/^\//,/\?fileId=/,/^\.\.?\//,/^[^.]*[/$]/,/^#/].find((e=>t.match(e)))&&(t="https://"+t);const n=t.replaceAll(" ","%20"),i=this.$editor.chain();this.$editor.view.state?.selection.empty?i.insertContent({type:"paragraph",content:[{type:"text",marks:[{type:"link",attrs:{href:n}}],text:e}]}):i.setLink({href:n}),i.focus().run()},removeLink(){this.$editor.chain().unsetLink().focus().run(),this.menuOpen=!1},linkPicker(){(0,h.J4)(null,!0).then((t=>{const e=this.$editor.chain();this.$editor.view.state?.selection.empty?e.focus().insertPreview(t).run():e.setLink({href:t}).focus().run()})).catch((t=>{console.error("Smart picker promise rejected",t)}))}}};var y=i(85072),x=i.n(y),w=i(97825),k=i.n(w),_=i(77659),I=i.n(_),B=i(55056),E=i.n(B),S=i(10540),T=i.n(S),M=i(41113),L=i.n(M),N=i(42389),P={};P.styleTagTransform=L(),P.setAttributes=E(),P.insert=I().bind(null,"head"),P.domAPI=k(),P.insertStyleElement=T();x()(N.A,P);N.A&&N.A.locals&&N.A.locals;const $=(0,c.A)(b,(function(){var t=this,e=t._self._c;return e("NcActions",{staticClass:"entry-action entry-action__insert-link",class:t.activeClass,attrs:{title:t.actionEntry.label,"aria-label":t.actionEntry.label,container:t.menuIDSelector,"data-text-action-entry":t.actionEntry.key,name:t.actionEntry.label,open:t.menuOpen},on:{"update:open":e=>{t.menuOpen=t.menuOpen||e}},scopedSlots:t._u([{key:"icon",fn:function(){return[e(t.icon,{tag:"component",attrs:{name:t.actionEntry.label,"aria-label":t.actionEntry.label}})]},proxy:!0}])},[t._v(" "),t.state.active?e("NcActionButton",{attrs:{"data-text-action-entry":`${t.actionEntry.key}-remove`},on:{click:t.removeLink},scopedSlots:t._u([{key:"icon",fn:function(){return[e("LinkOff")]},proxy:!0}],null,!1,3589828876)},[t._v("\n\t\t"+t._s(t.t("text","Remove link"))+"\n\t")]):t._e(),t._v(" "),t.isUsingDirectEditing?t._e():e("NcActionButton",{ref:"buttonFile",attrs:{"data-text-action-entry":`${t.actionEntry.key}-file`},on:{click:t.linkFile},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Document")]},proxy:!0}],null,!1,1149029676)},[t._v("\n\t\t"+t._s(t.t("text","Link to file or folder"))+"\n\t")]),t._v(" "),t.isInputMode?e("NcActionInput",{attrs:{type:"text",value:t.href,"data-text-action-entry":`${t.actionEntry.key}-input`},on:{"update:value":function(e){t.href=e},submit:t.linkWebsite},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Web")]},proxy:!0}],null,!1,1844845715)},[t._v("\n\t\t"+t._s(t.t("text","Link to website"))+"\n\t")]):e("NcActionButton",{attrs:{"data-text-action-entry":`${t.actionEntry.key}-website`},on:{click:t.linkWebsite},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Web")]},proxy:!0}])},[t._v("\n\t\t"+t._s(t.state.active?t.t("text","Update link"):t.t("text","Link to website"))+"\n\t")]),t._v(" "),e("NcActionButton",{attrs:{"data-text-action-entry":`${t.actionEntry.key}-picker`},on:{click:t.linkPicker},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Shape")]},proxy:!0}])},[t._v("\n\t\t"+t._s(t.t("text","Open the Smart Picker"))+"\n\t")])],1)}),[],!1,null,"7dd7ca7d",null).exports;var D=i(18386);const R=[{key:"outline",forceLabel:!0,icon:o.Jz,click:t=>{let{$outlineActions:e}=t;return e.toggle()},label:e=>{let{$outlineState:n}=e;return n.visible?t("text","Hide outline"):t("text","Show outline")}}],H=[{key:"undo",label:t("text","Undo"),keyChar:"z",keyModifiers:[D.R.Mod],icon:o.Vn,action:t=>t.undo(),priority:6},{key:"redo",label:t("text","Redo"),keyChar:"y",keyModifiers:[D.R.Mod],icon:o.B,action:t=>t.redo(),priority:12},{key:"bold",label:t("text","Bold"),keyChar:"b",keyModifiers:[D.R.Mod],icon:o.V4,isActive:"strong",action:t=>t.toggleBold(),priority:7},{key:"italic",label:t("text","Italic"),keyChar:"i",keyModifiers:[D.R.Mod],icon:o.Cj,isActive:"em",action:t=>t.toggleItalic(),priority:8},{key:"underline",label:t("text","Underline"),keyChar:"u",keyModifiers:[D.R.Mod],icon:o._D,isActive:"underline",action:t=>t.toggleUnderline(),priority:15},{key:"strikethrough",label:t("text","Strikethrough"),keyChar:"s",keyModifiers:[D.R.Mod,D.R.Shift],icon:o.jN,isActive:"strike",action:t=>t.toggleStrike(),priority:16},{key:"headings",label:t("text","Headings"),keyChar:"1…6",keyModifiers:[D.R.Mod,D.R.Shift],icon:o.OB,isActive:"heading",children:[{key:"headings-h1",label:t("text","Heading 1"),icon:o.OB,isActive:["heading",{level:1}],action:t=>t.toggleHeading({level:1})},{key:"headings-h2",label:t("text","Heading 2"),icon:o.Hi,isActive:["heading",{level:2}],action:t=>t.toggleHeading({level:2})},{key:"headings-h3",label:t("text","Heading 3"),icon:o.OW,isActive:["heading",{level:3}],action:t=>t.toggleHeading({level:3})},{key:"headings-h4",label:t("text","Heading 4"),isActive:["heading",{level:4}],icon:o.H5,action:t=>t.toggleHeading({level:4})},{key:"headings-h5",label:t("text","Heading 5"),isActive:["heading",{level:5}],icon:o.OH,action:t=>t.toggleHeading({level:5})},{key:"headings-h6",label:t("text","Heading 6"),isActive:["heading",{level:6}],icon:o.Vj,action:t=>t.toggleHeading({level:6})},{key:"headings-separator",isSeparator:!0,visible:t=>{let{$outlineState:e}=t;return e.enable}},{key:"outline",icon:o.Jz,click:t=>{let{$outlineActions:e}=t;return e.toggle()},visible:t=>{let{$outlineState:e}=t;return e.enable},label:e=>{let{$outlineState:n}=e;return n.visible?t("text","Hide outline"):t("text","Show outline")}}],priority:1},{key:"unordered-list",label:t("text","Unordered list"),keyChar:"8",keyModifiers:[D.R.Mod,D.R.Shift],isActive:"bulletList",icon:o.Jz,action:t=>t.toggleBulletList(),priority:9},{key:"ordered-list",label:t("text","Ordered list"),keyChar:"7",keyModifiers:[D.R.Mod,D.R.Shift],isActive:"orderedList",icon:o.MK,action:t=>t.toggleOrderedList(),priority:10},{key:"task-list",label:t("text","To-Do list"),keyChar:"9",keyModifiers:[D.R.Mod,D.R.Shift],isActive:"taskList",icon:o.DU,action:t=>t.toggleTaskList(),priority:11},{key:"insert-link",label:t("text","Insert link"),isActive:"link",icon:o.qY,component:$,priority:2},{key:"blockquote",label:t("text","Blockquote"),keyChar:"b",keyModifiers:[D.R.Mod,D.R.Shift],isActive:"blockquote",icon:o.AG,action:t=>t.toggleBlockquote(),priority:13},{key:"callouts",label:t("text","Callouts"),visible:!1,icon:o.R2,isActive:"callout",children:[{key:"callout-info",label:t("text","Info"),isActive:["callout",{type:"info"}],icon:o.R2,action:t=>t.toggleCallout({type:"info"})},{key:"callout-success",label:t("text","Success"),isActive:["callout",{type:"success"}],icon:o.GT,action:t=>t.toggleCallout({type:"success"})},{key:"callout-warn",label:t("text","Warning"),isActive:["callout",{type:"warn"}],icon:o.P$,action:t=>t.toggleCallout({type:"warn"})},{key:"callout-error",label:t("text","Danger"),isActive:["callout",{type:"error"}],icon:o.UI,action:t=>t.toggleCallout({type:"error"})}],priority:6},{key:"code-block",label:t("text","Code block"),keyChar:"c",keyModifiers:[D.R.Mod,D.R.Alt],isActive:"codeBlock",icon:o.n$,action:t=>t.toggleCodeBlock(),priority:14},{key:"table",label:t("text","Table"),isActive:"table",icon:o.XI,action:t=>t.insertTable(),priority:17},{key:"emoji-picker",label:t("text","Insert emoji"),icon:o.nl,component:d,action:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.emoji(e)},priority:3},{key:"insert-attachment",label:t("text","Insert attachment"),icon:o.To,component:m,priority:1}]},18386:(e,n,i)=>{i.d(n,{R:()=>r,b:()=>a});const o=navigator.userAgent.includes("Mac"),r={Mod:o?"Meta":"Control",Alt:"Alt",Control:"Control",Shift:"Shift"},a={[r.Mod]:o?t("text","Command"):t("text","Control"),[r.Control]:t("text","Ctrl"),[r.Alt]:t("text",o?"Option":"Alt"),[r.Shift]:t("text","Shift")}},1357:(t,e,n)=>{n.d(e,{Hf:()=>l,dG:()=>r,xD:()=>a,yd:()=>d});var i=n(18386);const o=(t,e)=>({"is-active":e,[`action-menu-${t.key}`]:!0}),r=t=>{let{keyChar:e,keyModifiers:n=[]}=t;return n.map((t=>i.R[t])).concat(e).join("+")},a=(t,e)=>{let{keyChar:n,keyModifiers:o}=e;return!t&&n?`(${function(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).map((t=>i.b[t])).concat(t.toUpperCase()).join("+")}(n,o)})`:""},s=(t,e)=>t.action&&!t.action(e.can()),l=(t,e)=>{let{isActive:n}=t;if(!n)return!1;const i=Array.isArray(n)?n:[n];return e.isActive(...i)},c=t=>Array.isArray(t.isActive)?"radio":"string"==typeof t.isActive?"checkbox":"button",d=(t,e)=>{const n=l(t,e);return{disabled:s(t,e),class:o(t,n),active:n,type:c(t)}}},92210:(t,e,n)=>{n.d(e,{A:()=>r});var i=n(24490),o=n(58294);const r=t=>{let{listComponent:e,items:n=()=>{},command:r=t=>{let{editor:e,range:n,props:i}=t}}=t;return{items:n,command:r,render:()=>{let t,n;return{onStart:r=>{t=new o.CS(e,{parent:void 0,propsData:r}),r.clientRect&&(n=(0,i.Ay)("body",{getReferenceClientRect:r.clientRect,appendTo:()=>document.body,content:t.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"bottom-start"}),t.ref.$on("select",(()=>{n.length>0&&n[0].hide()})))},onUpdate(e){t.updateProps(e),e.clientRect&&n&&n[0].setProps({getReferenceClientRect:e.clientRect})},onKeyDown(e){if(n)return"Escape"===e.event.key?(n[0].hide(),n[0].destroy(),t.destroy(),n=null,!0):t.ref?.onKeyDown?.(e)},onExit(){n&&(n[0].destroy(),t.destroy())}}}}}},59488:(t,e,n)=>{n.d(e,{AG:()=>It,B:()=>Dt,Cj:()=>xt,DU:()=>kt,EB:()=>at,FO:()=>ut,GT:()=>$t,H5:()=>vt,Hi:()=>gt,Hy:()=>Tt,Jz:()=>wt,MK:()=>_t,Nc:()=>qt,OB:()=>ft,OH:()=>bt,OW:()=>Ct,P$:()=>Kt,Pg:()=>rt,QA:()=>Vt,R2:()=>Lt,Rh:()=>nt,SN:()=>Ot,To:()=>Mt,UI:()=>ct,V4:()=>ht,Vj:()=>yt,Vn:()=>Wt,XI:()=>Ht,_D:()=>Et,_O:()=>Ft,_V:()=>St,bm:()=>st,eb:()=>Pt,ep:()=>dt,i$:()=>Gt,jN:()=>Bt,ji:()=>jt,kV:()=>Ut,n$:()=>lt,nP:()=>zt,nl:()=>pt,qY:()=>Nt,uS:()=>it,vd:()=>mt,xn:()=>ot,yo:()=>At,yp:()=>Rt});var i=n(68661),o=n(66001),r=n(54373),a=n(11360),s=n(46950),l=n(31616),c=n(79759),d=n(332),A=n(26690),u=n(86758),p=n(25866),m=n(30858),h=n(22420),f=n(2452),g=n(26547),C=n(12434),v=n(34154),b=n(31177),y=n(46693),x=n(61966),w=n(50521),k=n(66578),_=n(74941),I=n(79712),B=n(55780),E=n(82912),S=n(41556),T=n(83356),M=n(13849),L=n(63876),N=n(42826),P=n(83241),$=n(36600),D=n(92919),R=n(93375),H=n(87446),O=n(68403),j=n(93393),U=n(77409),z=n(56215),V=n(82974),G=n(62822),W=n(25186),F=n(44758),K=n(97461),q=n(48128),Y=n(64811),X=n(65723),Q=n(65422),J=n(93315),Z=n(94285),tt=n(12773);const et=t=>({functional:!0,render(e,n){let{data:i,props:o}=n;return e(t,{data:i,key:i.key,staticClass:i.staticClass,props:{size:20,...o}})}}),nt={functional:!0,render(t,e){let{data:n,props:i}=e;return t(H.A,{data:n,staticClass:"animation-rotate",props:{size:20,...i}})}},it=et(i.A),ot=et(h.A),rt=et(f.A),at=et(g.A),st=et(o.A),lt=(et(r.A),et(s.A)),ct=(et(a.A),et(l.A)),dt=et(c.A),At=et(d.A),ut=et(A.A),pt=et(u.A),mt=et(p.A),ht=et(m.A),ft=et(C.A),gt=et(v.A),Ct=et(b.A),vt=et(y.A),bt=et(x.A),yt=et(w.A),xt=et(k.A),wt=et(_.A),kt=et(I.A),_t=et(B.A),It=et(E.A),Bt=et(S.A),Et=et(T.A),St=et(M.A),Tt=et(L.A),Mt=et(N.A),Lt=et(P.A),Nt=et($.A),Pt=et(D.A),$t=(et(R.A),et(O.A),et(j.A)),Dt=et(U.A),Rt=et(z.A),Ht=et(V.A),Ot=et(G.A),jt=et(W.A),Ut=et(F.A),zt=et(K.A),Vt=et(q.A),Gt=(et(Y.A),et(tt.A)),Wt=et(X.A),Ft=et(Q.A),Kt=et(J.A),qt=et(Z.A)},94361:(t,e,n)=>{n.d(e,{I:()=>d,A:()=>g});var i=n(52781),o=n(42845),r=n(79396),a=n(58903),s=n(32931);function l(t){const e=(new DOMParser).parseFromString(t,"text/html");return function(t,e){const n=t.createNodeIterator(t.body,NodeFilter.SHOW_TEXT);let i=n.nextNode();for(;i;)e(i),i=n.nextNode()}(e,(t=>{(function(t){const e=["normal","nowrap"];let n=t.parentElement;for(;n;){const t=getComputedStyle(n),i=t?.getPropertyValue("white-space");if(i)return e.includes(i);if("PRE"===n.tagName)return!1;n=n.parentElement}return!0})(t)&&(t.textContent=t.textContent.replaceAll("\n"," "))})),e.body.innerHTML}const c=i.YY.create({name:"markdown",extendMarkSchema(t){const e={name:t.name,options:t.options,storage:t.storage};return{toMarkdown:(0,i.iI)(t,"toMarkdown",e)}},extendNodeSchema(t){const e={name:t.name,options:t.options,storage:t.storage};return{toMarkdown:(0,i.iI)(t,"toMarkdown",e)}},addProseMirrorPlugins(){let t=!1;return[new o.k_({key:new o.hs("pasteEventHandler"),props:{handleDOMEvents:{mouseup:(e,n)=>(t=n.shiftKey,!1)},handleKeyDown:(e,n)=>(t=n.shiftKey,!1),clipboardTextParser(e,n,i,o){const r=a.S4.fromSchema(o.state.schema),l=document.cloneNode(!1),c=l.createElement("div");if(t)for(const t of e.split("\n\n")){const e=l.createElement("p");e.innerText=t,c.append(e)}else c.innerHTML=s.A.render(e);return r.parseSlice(c,{preserveWhitespace:!0,context:n})},clipboardTextSerializer:t=>{const e=t=>t.content.childCount>1?A(this.editor.schema).serialize(t.content):t.isLeaf?t.textContent:e(t.content.firstChild);return e(t)},transformPastedHTML:l}})]}}),d=t=>{let{nodes:e,marks:n}=t;return{serializer:new r.K6(m(e),h(n)),serialize(t,e){return this.serializer.serialize(t,{...e,tightLists:!0})}}},A=t=>{let{nodes:e,marks:n}=t;return{serializer:new r.K6(m(e),u(n)),serialize(t,e){return this.serializer.serialize(t,{...e,tightLists:!0})}}},u=t=>{const e={open:"",close:"",mixable:!0,expelEnclosingWhitespace:!0},n=f(r.lR.marks),i=Object.entries({...n,...t}).map((t=>{let[n,i]=t;return[n,e]}));return Object.fromEntries(i)},p=t=>{const e=Object.entries(t).map((t=>{let[e,n]=t;return[e,n.spec.toMarkdown]})).filter((t=>{let[,e]=t;return e}));return Object.fromEntries(e)},m=t=>({...f(r.lR.nodes),...p(t)}),h=t=>({...f(r.lR.marks),...p(t)}),f=t=>{const e=t=>t.replace(/_(\w)/g,((t,e)=>e.toUpperCase()));return Object.fromEntries(Object.entries(t).map((t=>{let[n,i]=t;return[e(n),i]})))},g=c},78841:(e,n,i)=>{function o(t){setTimeout((()=>{const e=document.getElementById(`collaboration-cursor__label__${t}`);e&&(e.classList.add("collaboration-cursor__label__active"),setTimeout((()=>{e?.classList.remove("collaboration-cursor__label__active")}),50))}),50)}function r(){return Math.floor(Date.now()/1e3)}i.d(n,{AZ:()=>a,sp:()=>m,PX:()=>bn,Ks:()=>x,sD:()=>ri});const a=i(77534).A.extend({addOptions:()=>({provider:null,user:{name:null,clientId:null,color:null,lastUpdate:r()},render:t=>{const e=document.createElement("span");e.classList.add("collaboration-cursor__caret"),e.setAttribute("style",`border-color: ${t.color}`);const n=document.createElement("div");return n.classList.add("collaboration-cursor__label"),n.id=`collaboration-cursor__label__${t.clientId}`,n.setAttribute("style",`background-color: ${t.color}`),n.insertBefore(document.createTextNode(t.name),null),e.insertBefore(n,null),e}}),onCreate(){this.options.provider.awareness.on("change",((t,e)=>{let{added:n,removed:i,updated:r}=t;if("local"!==e)for(const t of[...n,...r])t!==this.options.user.clientId&&o(t)}))},onTransaction(t){let{transaction:e}=t;const{updated:n,meta:i}=e;n&&(i.addToHistory??1)&&!i.pointer&&(this.options.user.lastUpdate=r(),this.options.provider.awareness.setLocalStateField("user",this.options.user))}});var s=i(52781),l=i(42845),c=i(47616);const d=new l.hs("emoji"),A=s.bP.create({name:"emoji",addOptions:()=>({HTMLAttributes:{},suggestion:{char:":",allowedPrefixes:[" "],pluginKey:d}}),content:"text*",addCommands:()=>({emoji:t=>e=>{let{commands:n}=e;return n.insertContent(t.native+" ")}}),addProseMirrorPlugins(){return[(0,c.Ay)({editor:this.editor,...this.options.suggestion})]}});let u=!1;const p=t=>{let{editor:e}=t;const n=window._nc_focus_trap??[],i=n[n.length-1];e.can().sinkListItem("listItem")||e.can().goToNextCell()||e.can().goToPreviousCell()?(i?.pause(),u=!0):u&&(u=!1,i?.unpause())},m=s.YY.create({name:"focustrap",onFocus:p,onBlur:t=>{let{editor:e}=t;const n=window._nc_focus_trap??[],i=n[n.length-1];i?.unpause()},onSelectionUpdate:p,onTransaction:p,onUpdate:p});s.YY.create({name:"customkeymap",addKeyboardShortcuts(){return this.options},addProseMirrorPlugins:()=>[new l.k_({props:{handleKeyDown(t,e){const n=e.key||e.keyCode;return!e.ctrlKey&&!e.metaKey||e.shiftKey||"f"!==n&&70!==n?"Delete"===e.key&&!0===e.ctrlKey?(e.stopPropagation(),window.dispatchEvent(e),!0):void 0:(e.stopPropagation(),window.dispatchEvent(e),!0)}}})]});var h=i(1575);class f{constructor(t,e,n){this.from=t,this.to=e,this.author=n}}function g(t,e,n,i){if(e>=n)return;let o,r=0;for(;r<t.length;r++)if(o=t[r],o.author===i){if(o.to>=e)break}else if(o.to>e){if(o.from<e){const i=new f(o.from,e,o.author);o.to>n?t.splice(r++,0,i):t[r++]=i}break}for(;o=t[r];)if(o.author===i){if(o.from>n)break;e=Math.min(e,o.from),n=Math.max(n,o.to),t.splice(r,1)}else{if(o.from>=n)break;if(o.to>n){t[r]=new f(n,o.to,o.author);break}t.splice(r,1)}t.splice(r,0,new f(e,n,i))}class C{constructor(t){this.blameMap=t}applyTransform(t){const e=t.getMeta("clientID")??t.steps.map((t=>"self")),n=function(t,e,n){const i=[],o=e.mapping;for(let e=0;e<t.length;e++){const n=t[e],r=o.map(n.from,1),a=o.map(n.to,-1);r<a&&i.push(new f(r,a,n.author))}for(let t=0;t<o.maps.length;t++){const e=o.maps[t],r=o.slice(t+1);e.forEach(((e,o,a,s)=>{g(i,r.map(a,1),r.map(s,-1),n[t])}))}return i}(this.blameMap,t,e);return new C(n)}}s.YY.create({name:"users",addOptions:()=>({clientID:0,color:t=>"#"+Math.floor(Math.abs(16777215*Math.sin(t))%16777215).toString(16)+"aa",name:t=>"Unknown user "+t}),addProseMirrorPlugins(){let t=null;return[new l.k_({clientID:this.options.clientID,color:this.options.color,name:this.options.name,view:e=>(t=e,{}),state:{init:(t,e)=>({tracked:new C([new f(0,e.doc.content.size,null)],[],[],[]),deco:h.zF.empty}),apply(e,n,i,o){let{tracked:r,decos:a}=n,s=this.getState(i).tracked;return e.docChanged&&(e.getMeta("clientID")||e.setMeta("clientID",e.steps.map((t=>this.spec.clientID))),t.composing||(r=r.applyTransform(e),s=r)),a=s.blameMap.map((t=>{const e=t.author;return h.NZ.inline(t.from,t.to,{class:"author-annotation",style:"background-color: "+this.spec.color(e)+"66;",title:this.spec.name(e)})})).filter((t=>null!==t)),{tracked:r,deco:h.zF.create(o.doc,a)}}},props:{decorations(t){return this.getState(t).deco}}})]}});var v=i(94361),b=i(53953);const y=s.bP.create({name:"doc",content:"block",addKeyboardShortcuts(){return{Tab:()=>this.editor.commands.insertContent("\t")}}}),x=s.YY.create({name:"PlainText",addExtensions:()=>[y,b.A]});var w=i(62947),k=i(63165);const _=i(21459).Ay.extend({parseHTML(){return this.parent().map((t=>Object.assign(t,{preserveWhitespace:!0})))},addAttributes(){return{...this.parent?.(),bullet:{default:"-",rendered:!1,isRequired:!0,parseHTML:t=>t.getAttribute("data-bullet")}}},addInputRules(){return[(t=/^\s*([-+*])\s([^\s[]+)$/,e=this.type,new s.fV({find:t,handler:i=>{let{state:o,range:r,match:a}=i;(0,s.tG)({find:t,type:e,getAttributes:n}).handler({state:o,range:r,match:a}),a.length>=3&&o.tr.insertText(a[2])}}))];var t,e,n}});var I=i(58294),B=i(87305),E=i(59488);const S={info:E.R2,success:E.GT,error:E.UI,warn:E.P$},T={name:"Callout",components:{NodeViewWrapper:I.VR,NodeViewContent:I.$p},props:{node:{type:Object,required:!0}},computed:{icon(){return S[this.type]||E.R2},type(){return this.node?.attrs?.type||"info"}}};var M=i(85072),L=i.n(M),N=i(97825),P=i.n(N),$=i(77659),D=i.n($),R=i(55056),H=i.n(R),O=i(10540),j=i.n(O),U=i(41113),z=i.n(U),V=i(1798),G={};G.styleTagTransform=z(),G.setAttributes=H(),G.insert=D().bind(null,"head"),G.domAPI=P(),G.insertStyleElement=j();L()(V.A,G);V.A&&V.A.locals&&V.A.locals;var W=i(14486);const F=(0,W.A)(T,(function(){var t=this,e=t._self._c;return e("NodeViewWrapper",{staticClass:"callout",class:`callout--${t.type}`,attrs:{"data-text-el":"callout",as:"div"}},[e(t.icon,{tag:"component",staticClass:"callout__icon"}),t._v(" "),e("NodeViewContent",{staticClass:"callout__content"})],1)}),[],!1,null,"4387ae9f",null).exports,K=s.bP.create({name:"callout",content:"paragraph+",group:"block",defining:!0,addOptions:()=>({types:B.H,HTMLAttributes:{class:"callout"}}),addAttributes:()=>({type:{default:"info",rendered:!1,parseHTML:t=>t.getAttribute("data-callout")||B.H.find((e=>t.classList.contains(e)))||t.classList.contains("warning")&&"warn",renderHTML:t=>({"data-callout":t.type,class:`callout-${t.type}`})}}),parseHTML:()=>[{tag:"div.callout"},{tag:"p.callout",priority:1001}],renderHTML(t){let{node:e,HTMLAttributes:n}=t;const{class:i}=this.options.HTMLAttributes,o={...this.options.HTMLAttributes,"data-callout":e.attrs.type,class:`${i} ${i}-${e.attrs.type}`};return["div",(0,s.KV)(o,n),0]},toMarkdown:(t,e)=>{t.write("::: "+(e.attrs.type||"info")+"\n"),t.renderContent(e),t.ensureNewLine(),t.write(":::"),t.closeBlock(e)},addNodeView:()=>(0,I.$7)(F),addCommands(){return{setCallout:t=>e=>{let{commands:n}=e;return n.wrapIn(this.name,t)},toggleCallout:t=>e=>{let{commands:n,state:i}=e;return(0,s.rU)(i,this.name)?(0,s.rU)(i,this.name,t)?n.unsetCallout():n.updateAttributes(this.name,t):n.setCallout(t)},unsetCallout:()=>t=>{let{commands:e}=t;return e.lift(this.name)}}}});var q=i(97993),Y=i(1567),X=i(28707),Q=i(17334),J=i.n(Q),Z=i(28317),tt=i(36212),et=i(62938),nt=i(26535),it=i(65718),ot=i(67589),rt=i(60015),at=i(81082),st=i(31773),lt=i(54373),ct=i(85168);const dt={data:()=>({copied:!1,copyLoading:!1,copySuccess:!1}),methods:{async copyToClipboard(e){this.copyLoading=!0;try{await navigator.clipboard.writeText(e),this.copySuccess=!0,this.copied=!0,(0,ct.Te)(t("text","Copied to the clipboard"))}catch(e){this.copySuccess=!1,this.copied=!0,(0,ct.Qg)(`<div>${t("text","Could not copy to the clipboard")}</div>`,{isHTML:!0})}finally{this.copyLoading=!1,setTimeout((()=>{this.copySuccess=!1,this.copied=!1}),4e3)}}}},At={name:"CodeBlockView",components:{MarkerIcon:rt.A,ContentCopy:st.A,Help:at.A,Check:lt.A,Eye:ot.A,ViewSplitVertical:nt.A,CodeBraces:it.A,NcActions:Z.B6,NcActionButton:Z.Ko,NcActionInput:Z.Az,NcActionLink:Z.Ki,NcActionSeparator:Z.z,NcLoadingIcon:Z.ne,NodeViewWrapper:I.VR,NodeViewContent:I.$p},mixins:[dt],props:{node:{type:Object,required:!0},editor:{type:Object,required:!0}},data:()=>({isEditable:!1,viewMode:"preview",targetId:"mermaid-view-"+(0,et.A)()}),computed:{hasCode(){return this.node?.textContent},type(){return this.node?.attrs?.language||""},supportPreview(){return["mermaid"].includes(this.type)},showCode(){return!this.supportPreview||"code"===this.viewMode||"side-by-side"===this.viewMode},showPreview(){return this.supportPreview&&("preview"===this.viewMode||"side-by-side"===this.viewMode)},defaultMode(){return this.isEditable?"side-by-side":this.supportPreview()?"code":"preview"}},watch:{"node.textContent"(){this.renderMermaid()}},beforeMount(){this.isEditable=this.editor.isEditable,this.editor.on("update",(t=>{let{editor:e}=t;this.isEditable=e.isEditable})),this.renderMermaidDebounced=J()((async function(){if(!this.supportPreview)return void(this.viewMode="code");const t=this.node?.textContent||"";""===t.trim()&&(this.viewMode=this.defaultMode,this.$refs.preview.innerHTML="");try{await tt.N.parse(t);const{svg:e}=await tt.N.render(this.targetId,t),n=document.getElementById(this.targetId);n&&(n.style.display="none"),this.$refs.preview.innerHTML=e}catch(t){console.debug("Invalid mermaid source",t),"preview"===this.viewMode&&(this.viewMode=this.isEditable?"side-by-side":"code")}}),250),tt.N.initialize({startOnLoad:!1}),this.$nextTick((()=>{this.renderMermaid()}))},methods:{async copyCode(){await this.copyToClipboard(this.node?.textContent)},updateLanguage(t){this.updateAttributes({language:t.target.value})},renderMermaid(){this.renderMermaidDebounced()}}};var ut=i(87716),pt={};pt.styleTagTransform=z(),pt.setAttributes=H(),pt.insert=D().bind(null,"head"),pt.domAPI=P(),pt.insertStyleElement=j();L()(ut.A,pt);ut.A&&ut.A.locals&&ut.A.locals;const mt=(0,W.A)(At,(function(){var t=this,e=t._self._c;return e("NodeViewWrapper",{staticClass:"code-block",attrs:{as:"div","data-mode":t.viewMode}},[e("div",{staticClass:"code-block-header"},[e("div",{staticClass:"view-switch"},[e("NcActions",{attrs:{"aria-label":t.t("text","Copy code block")}},[t.hasCode?e("NcActionButton",{attrs:{"data-cy":"copy-code","aria-label":t.t("text","Copy code"),"close-after-click":!1},on:{click:t.copyCode},scopedSlots:t._u([{key:"icon",fn:function(){return[t.copySuccess?e("Check",{attrs:{size:20}}):t.copyLoading?e("NcLoadingIcon",{attrs:{size:20}}):e("ContentCopy",{attrs:{size:20}})]},proxy:!0}],null,!1,2104404999)}):t._e()],1),t._v(" "),t.isEditable?e("NcActions",{attrs:{"data-cy":"code-action-group","aria-label":t.t("text","Code block options")}},[e("NcActionInput",{attrs:{label:t.t("text","Code block language"),value:t.type,"show-trailing-button":!1,placeholder:t.t("text","e.g. php, javascript, json…")},on:{input:t.updateLanguage},scopedSlots:t._u([{key:"icon",fn:function(){return[e("MarkerIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,3768505569)}),t._v(" "),t.supportPreview?e("NcActionSeparator"):t._e(),t._v(" "),t.supportPreview?e("NcActionButton",{attrs:{"close-after-click":!0},on:{click:function(e){t.viewMode="code"}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("CodeBraces",{attrs:{size:20}})]},proxy:!0}],null,!1,2428748609)},[t._v("\n\t\t\t\t\t"+t._s(t.t("text","Source code"))+"\n\t\t\t\t")]):t._e(),t._v(" "),t.supportPreview?e("NcActionButton",{attrs:{"close-after-click":!0},on:{click:function(e){t.viewMode="preview"}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Eye",{attrs:{size:20}})]},proxy:!0}],null,!1,1151454737)},[t._v("\n\t\t\t\t\t"+t._s(t.t("text","Diagram"))+"\n\t\t\t\t")]):t._e(),t._v(" "),t.supportPreview?e("NcActionButton",{attrs:{"close-after-click":!0},on:{click:function(e){t.viewMode="side-by-side"}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ViewSplitVertical",{attrs:{size:20}})]},proxy:!0}],null,!1,3354721413)},[t._v("\n\t\t\t\t\t"+t._s(t.t("text","Both"))+"\n\t\t\t\t")]):t._e(),t._v(" "),t.supportPreview?e("NcActionSeparator"):t._e(),t._v(" "),t.supportPreview?e("NcActionLink",{attrs:{href:"https://mermaid.js.org/intro/",target:"_blank"},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Help",{attrs:{size:20}})]},proxy:!0}],null,!1,802739225)},[t._v("\n\t\t\t\t\t"+t._s(t.t("text","Mermaid documentation"))+"\n\t\t\t\t")]):t._e()],1):t._e()],1)]),t._v(" "),e("div",{class:{"split-view":t.showCode&&t.showPreview}},[e("pre",{directives:[{name:"show",rawName:"v-show",value:t.showCode,expression:"showCode"}],staticClass:"split-view__code"},[e("NodeViewContent",{attrs:{spellcheck:"false",as:"code",contenteditable:t.isEditable}})],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showPreview,expression:"showPreview"}],ref:"preview",staticClass:"split-view__preview",attrs:{contenteditable:!1}}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{id:t.targetId,contenteditable:!1}})])])}),[],!1,null,"3451a47c",null).exports,ht=X.A.extend({parseHTML:()=>[{tag:"pre",preserveWhitespace:"full",getContent:(t,e)=>{const n=t.textContent.replace(/\n$/,""),i=n?[e.text(n)]:[];return e.nodes.codeBlock.create(null,i)}}],toMarkdown(t,e,n,i){e.attrs.params=e.attrs.language;const o=e.textContent.match(/`{3,}/gm),r=o?o.sort().slice(-1)[0]+"`":"```";t.write(r+(e.attrs.params||"")+"\n"),t.text(e.textContent,!1),t.ensureNewLine(),t.write(r),t.closeBlock(e)},addNodeView:()=>(0,I.$7)(mt),addKeyboardShortcuts(){return{"Mod-a":()=>{if(!this.editor.isActive("codeBlock"))return;const t=this.editor.state.selection.$from.node().nodeSize;this.editor.commands.selectParentNode();const e=this.editor.state.selection.$from.pos,n=e+t;return this.editor.commands.setTextSelection({from:e,to:n}),!0}}}});var ft=i(515),gt=i(64809),Ct=i(73018);const vt=s.bP.create({name:"tableCaption",content:"inline*",allowGapCursor:!1,addAttributes:()=>({}),renderHTML:()=>["caption"],toMarkdown(t,e){},parseHTML:()=>[{tag:"table caption",priority:90}]});var bt=i(57409),yt=i(58903);const xt=bt.n.extend({content:"inline*",toMarkdown(t,e){t.write(" ");const n=t.options?.escapeExtraCharacters,i=t.options.currentColumnIndex;t.options.escapeExtraCharacters=/\|/;let o=0;e.content.forEach(((t,n,i)=>{o+=t.text?.length||6,t.text?.includes("|")&&(o+=1),"  "===t.attrs.syntax&&(e.child(i).attrs.syntax="html")}));const r=t.options.columnWidths[i],a=e.attrs?.textAlign||"left",s=r-o,l=Math.floor(s/2),c=Math.ceil(s/2);"center"===a&&t.write(" ".repeat(l)),"right"===a&&t.write(" ".repeat(s)),t.renderInline(e),"center"===a&&t.write(" ".repeat(c)),"left"===a&&t.write(" ".repeat(s)),t.options.escapeExtraCharacters=n,t.write(" |"),t.options.currentColumnIndex++},parseHTML:()=>[{tag:"td",preserveWhitespace:!0},{tag:"th",preserveWhitespace:!0},{tag:"table thead ~ tbody th",priority:70,preserveWhitespace:!0},{tag:"table thead ~ tbody td",priority:70,preserveWhitespace:!0}],addAttributes(){return{...this.parent?.(),textAlign:{rendered:!1,parseHTML:t=>t.style.textAlign||null}}},addProseMirrorPlugins(){return[new l.k_({props:{handlePaste:(t,e,n)=>{if(!this.editor.isActive(this.type.name))return!1;const{state:i}=t,{schema:o}=i,r=[];n.content.descendants(((t,e)=>{t.isText?r.push(o.text(t.textContent,t.marks)):0!==r.length&&t.type===o.nodes.hardBreak&&r.push(t)}));const a=o.node("paragraph",[],r);n.content=yt.FK.empty.addToStart(a)}}})]}});const wt=i(5986).A.extend({content:"inline*",toMarkdown(t,e){const n=t.options.currentHeaderIndex,i=t.options.columnWidths[n],o=e.attrs?.textAlign||"left",r=i-e.content.size,a=Math.floor(r/2),s=Math.ceil(r/2);t.write(" "),"center"===o&&t.write(" ".repeat(a)),"right"===o&&t.write(" ".repeat(r)),t.renderInline(e),"center"===o&&t.write(" ".repeat(s)),"left"===o&&t.write(" ".repeat(r)),t.write(" |"),t.options.currentHeaderIndex++},parseHTML:()=>[{tag:"table thead:empty ~ tbody :first-child th",priority:80},{tag:"table thead:empty ~ tbody :first-child td",priority:80},{tag:"table thead :first-child th",priority:60},{tag:"table thead :first-child td",priority:60},{tag:"table tbody :first-child th",priority:60},{tag:"table tbody :first-child td",priority:60},{tag:"table > :first-child > th",priority:60},{tag:"table > :first-child > td",priority:60}],addAttributes(){return{...this.parent?.(),textAlign:{rendered:!1,parseHTML:t=>t.style.textAlign||null}}}});const kt=i(1865).H.extend({content:"tableCell*",allowGapCursor:!1,toMarkdown(t,e){t.write("|"),t.options.currentColumnIndex=0,t.renderInline(e),t.ensureNewLine()},parseHTML:()=>[{tag:"tr",priority:70}]}),_t=kt.extend({name:"tableHeadRow",content:"tableHeader+",allowGapCursor:!1,toMarkdown(t,e){t.write("|"),t.renderInline(e),t.ensureNewLine(),t.write("|"),e.forEach(((e,n,i)=>{let o=t.repeat("-",t.options.columnWidths[i]+2);const r=e.attrs?.textAlign;"center"!==r&&"left"!==r||(o=":"+o.slice(1)),"center"!==r&&"right"!==r||(o=o.slice(0,-1)+":"),t.write(o),t.write("|")})),t.ensureNewLine()},parseHTML:()=>[{tag:"tr:first-of-type",priority:80}]});var It=i(10668);const Bt=Ct.XI.extend({content:"tableCaption? tableHeadRow tableRow*",addExtensions:()=>[vt,xt,wt,_t,kt],addCommands(){return{...this.parent(),addRowAfter:()=>t=>{let{chain:e,dispatch:n}=t;return e().command((t=>{let{state:e}=t;return(0,It.gC)(e,n)})).command((t=>{let{state:e,tr:i}=t;const{tableStart:o,table:r,bottom:a}=(0,It._t)(e);if(n){const t=r.child(a-1),e=r.child(a);let n=o+1;for(let t=0;t<a;t++)n+=r.child(t).nodeSize;for(let o=0;o<t.childCount;o++)i.setNodeAttribute(n,"textAlign",t.child(o).attrs.textAlign),n+=e.child(o).nodeSize}return!0})).run()},addRowBefore:()=>t=>{let{chain:e,dispatch:n}=t;return e().command((t=>{let{state:e}=t;return(0,It.JD)(e,n)})).command((t=>{let{state:e,tr:i}=t;const{tableStart:o,table:r,top:a}=(0,It._t)(e);if(n){const t=r.child(a),e=r.child(a-1);let n=o+1;for(let t=0;t<a-1;t++)n+=r.child(t).nodeSize;for(let o=0;o<t.childCount;o++)i.setNodeAttribute(n,"textAlign",t.child(o).attrs.textAlign),n+=e.child(o).nodeSize}return!0})).run()},insertTable:()=>t=>{let{tr:e,dispatch:n,editor:i}=t;if((0,It.aH)(e))return!1;const o=function(t,e,n){const i=[],o=[];for(let e=0;e<n;e+=1){const e=t.nodes.tableCell.createAndFill();e&&o.push(e);const n=t.nodes.tableHeader.createAndFill();n&&i.push(n)}const r=t.nodes.tableHeadRow.createChecked(null,i),a=[];for(let n=1;n<e;n+=1)a.push(t.nodes.tableRow.createChecked(null,o));return t.nodes.table.createChecked(null,[r,...a])}(i.schema,3,3);if(n){const t=e.selection.anchor+1;e.replaceSelectionWith(o).scrollIntoView().setSelection(l.U3.near(e.doc.resolve(t)))}return!0},leaveTable:()=>t=>{let{tr:e,dispatch:n,editor:i}=t;if(!(0,It.aH)(e))return!1;const{$head:o,empty:r}=e.selection;if(!r)return!1;const a=o.depth<3?1:o.depth-2;if(n){const t=e.doc.resolve(o.after(a)+1),i=l.U3.near(t);n(e.setSelection(i).scrollIntoView())}return!0},goToNextRow:()=>t=>{let{tr:e,dispatch:n,editor:i}=t;if(!(0,It.aH)(e))return!1;const o=function(t){if(t.index(-1)===t.node(-1).childCount-1)return null;let e=t.after();const n=t.node(-1);for(let i=t.indexAfter(-1);i<n.childCount;i++){const o=n.child(i);if(o.childCount>=t.index()){for(let n=0;n<t.index();n++)e+=o.child(n).nodeSize;return e+1}e+=o.nodeSize}}((0,It.t6)(e));if(null!=o){if(n){const t=e.doc.resolve(o),i=l.U3.between(t,(0,It.fx)(t));n(e.setSelection(i).scrollIntoView())}return!0}}}},renderHTML(t){let{HTMLAttributes:e}=t;return["div",{class:"table-wrapper",style:"overflow-x: auto;"},["table",(0,s.KV)(this.options.HTMLAttributes,e),0]]},toMarkdown(t,e){const n=function(t){const e=[];return t.content.forEach((t=>{t.content.forEach(((t,n,i)=>{e[i]||(e[i]=[]),e[i].push(t)}))})),e}(e);t.options.columnWidths=function(t){const e=[];return t.forEach((t=>{let n=0;t.forEach((t=>{let e=0;t.content.forEach((t=>{e+=t.text?.length||6,t.text?.includes("|")&&(e+=1)})),n=Math.max(n,e)})),e.push(n)})),e}(n),t.options.currentHeaderIndex=0,t.renderContent(e),t.closeBlock(e)},addKeyboardShortcuts(){return{...this.parent(),Tab:()=>this.editor.commands.goToNextCell()||this.editor.commands.leaveTable(),Enter:t=>{let{editor:e}=t;const{selection:n}=e.state;return!!n.$from.parent.type.name.startsWith("table")&&("hardBreak"===n.$from.nodeBefore?.type.name?!(!e.can().goToNextRow()&&!e.can().addRowAfter())&&(e.chain().setTextSelection({from:n.from-1,to:n.from}).deleteSelection().run(),!!e.commands.goToNextRow()||e.chain().addRowAfter().goToNextRow().run()):e.chain().insertContent('<br data-syntax="html" />').focus().run())}}}});const Et={name:"TableView",components:{NcActionButton:Z.Ko,NcActions:Z.B6,NodeViewWrapper:I.VR,NodeViewContent:I.$p,TableSettings:E.QA,Delete:E.ep},props:{editor:{type:Object,required:!0},deleteNode:{type:Function,required:!0}},data:()=>({isEditable:!1}),beforeMount(){this.isEditable=this.editor.isEditable,this.editor.on("update",(t=>{let{editor:e}=t;this.isEditable=e.isEditable}))}};var St=i(96526),Tt={};Tt.styleTagTransform=z(),Tt.setAttributes=H(),Tt.insert=D().bind(null,"head"),Tt.domAPI=P(),Tt.insertStyleElement=j();L()(St.A,Tt);St.A&&St.A.locals&&St.A.locals;const Mt=(0,W.A)(Et,(function(){var t=this,e=t._self._c;return e("NodeViewWrapper",{staticClass:"table-wrapper",attrs:{"data-text-el":"table-view"}},[t.isEditable?e("NcActions",{staticClass:"table-settings",attrs:{"force-menu":"","data-text-table-actions":"settings"},scopedSlots:t._u([{key:"icon",fn:function(){return[e("TableSettings")]},proxy:!0}],null,!1,1699550424)},[t._v(" "),e("NcActionButton",{attrs:{"data-text-table-action":"delete","close-after-click":""},on:{click:t.deleteNode},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Delete")]},proxy:!0}],null,!1,3429380666)},[t._v("\n\t\t\t"+t._s(t.t("text","Delete this table"))+"\n\t\t")])],1):t._e(),t._v(" "),e("NodeViewContent",{staticClass:"content",attrs:{as:"table"}}),t._v(" "),e("div",{staticClass:"clearfix"})],1)}),[],!1,null,"048279dc",null).exports;const Lt={name:"TableCellView",components:{NcActionButton:Z.Ko,NcActions:Z.B6,NodeViewWrapper:I.VR,NodeViewContent:I.$p,TableAddRowBefore:E.nP,TableAddRowAfter:E.kV,Delete:E.ep},props:{editor:{type:Object,required:!0},getPos:{type:Function,required:!0}},data:()=>({isEditable:!1}),computed:{textAlign(){return{"text-align":this.node.attrs.textAlign}}},beforeMount(){this.isEditable=this.editor.isEditable,this.editor.on("update",(t=>{let{editor:e}=t;this.isEditable=e.isEditable}))},methods:{deleteRow(){this.editor.chain().focus().setTextSelection(this.getPos()).deleteRow().run()},addRowBefore(){this.editor.chain().focus().setTextSelection(this.getPos()).addRowBefore().run()},addRowAfter(){this.editor.chain().focus().setTextSelection(this.getPos()).addRowAfter().run()}}};var Nt=i(50580),Pt={};Pt.styleTagTransform=z(),Pt.setAttributes=H(),Pt.insert=D().bind(null,"head"),Pt.domAPI=P(),Pt.insertStyleElement=j();L()(Nt.A,Pt);Nt.A&&Nt.A.locals&&Nt.A.locals;const $t=(0,W.A)(Lt,(function(){var t=this,e=t._self._c;return e("NodeViewWrapper",{style:t.textAlign,attrs:{"data-text-el":"table-cell",as:"td"}},[e("div",{staticClass:"container"},[e("NodeViewContent",{staticClass:"content"}),t._v(" "),t.isEditable?e("NcActions",{attrs:{"data-text-table-actions":"row"}},[e("NcActionButton",{attrs:{"data-text-table-action":"add-row-before","close-after-click":""},on:{click:t.addRowBefore},scopedSlots:t._u([{key:"icon",fn:function(){return[e("TableAddRowBefore")]},proxy:!0}],null,!1,1805502767)},[t._v("\n\t\t\t\t"+t._s(t.t("text","Add row before"))+"\n\t\t\t")]),t._v(" "),e("NcActionButton",{attrs:{"data-text-table-action":"add-row-after","close-after-click":""},on:{click:t.addRowAfter},scopedSlots:t._u([{key:"icon",fn:function(){return[e("TableAddRowAfter")]},proxy:!0}],null,!1,3179199218)},[t._v("\n\t\t\t\t"+t._s(t.t("text","Add row after"))+"\n\t\t\t")]),t._v(" "),e("NcActionButton",{attrs:{"data-text-table-action":"remove-row","close-after-click":""},on:{click:t.deleteRow},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Delete")]},proxy:!0}],null,!1,3429380666)},[t._v("\n\t\t\t\t"+t._s(t.t("text","Delete this row"))+"\n\t\t\t")])],1):t._e()],1)])}),[],!1,null,"2f56cd8c",null).exports;const Dt={name:"TableHeaderView",components:{AlignHorizontalCenter:E.xn,AlignHorizontalLeft:E.Pg,AlignHorizontalRight:E.EB,Delete:E.ep,NcActionButton:Z.Ko,NcActionButtonGroup:Z.F7,NcActions:Z.B6,NodeViewWrapper:I.VR,NodeViewContent:I.$p,TableAddColumnBefore:E.ji,TableAddColumnAfter:E.SN},props:{editor:{type:Object,required:!0},getPos:{type:Function,required:!0},node:{type:Object,required:!0}},data:()=>({isEditable:!1}),computed:{textAlign(){return{"text-align":this.node.attrs.textAlign}}},beforeMount(){this.isEditable=this.editor.isEditable,this.editor.on("update",(t=>{let{editor:e}=t;this.isEditable=e.isEditable}))},methods:{alignCenter(){this.align("center")},alignLeft(){this.align("left")},alignRight(){this.align("right")},align(t){for(this.editor.chain().focus().setTextSelection(this.getPos()).setCellAttribute("textAlign",t).run();this.editor.commands.goToNextRow();)this.editor.commands.setCellAttribute("textAlign",t);this.editor.chain().setTextSelection(this.getPos()).focus().run(),this.$refs.menu.closeMenu(!1)},deleteColumn(){this.editor.chain().focus().setTextSelection(this.getPos()).deleteColumn().run()},addColumnBefore(){this.editor.chain().focus().setTextSelection(this.getPos()).addColumnBefore().run()},addColumnAfter(){this.editor.chain().focus().setTextSelection(this.getPos()).addColumnAfter().run()}}};var Rt=i(89045),Ht={};Ht.styleTagTransform=z(),Ht.setAttributes=H(),Ht.insert=D().bind(null,"head"),Ht.domAPI=P(),Ht.insertStyleElement=j();L()(Rt.A,Ht);Rt.A&&Rt.A.locals&&Rt.A.locals;const Ot=(0,W.A)(Dt,(function(){var t=this,e=t._self._c;return e("NodeViewWrapper",{style:t.textAlign,attrs:{"data-text-el":"table-header",as:"th"}},[e("div",[e("NodeViewContent",{staticClass:"content"}),t._v(" "),t.isEditable?e("NcActions",{ref:"menu",attrs:{"data-text-table-actions":"header"}},[e("NcActionButtonGroup",[e("NcActionButton",{attrs:{"data-text-table-action":"align-column-left","aria-label":t.t("text","Left align column"),type:"radio",value:"left","model-value":t.node.attrs.textAlign},on:{click:t.alignLeft},scopedSlots:t._u([{key:"icon",fn:function(){return[e("AlignHorizontalLeft")]},proxy:!0}],null,!1,2968467243)}),t._v(" "),e("NcActionButton",{attrs:{"data-text-table-action":"align-column-center","aria-label":t.t("text","Center align column"),type:"radio",value:"center","model-value":t.node.attrs.textAlign},on:{click:t.alignCenter},scopedSlots:t._u([{key:"icon",fn:function(){return[e("AlignHorizontalCenter")]},proxy:!0}],null,!1,536750267)}),t._v(" "),e("NcActionButton",{attrs:{"data-text-table-action":"align-column-right","aria-label":t.t("text","Right align column"),type:"radio",value:"right","model-value":t.node.attrs.textAlign},on:{click:t.alignRight},scopedSlots:t._u([{key:"icon",fn:function(){return[e("AlignHorizontalRight")]},proxy:!0}],null,!1,3861151024)})],1),t._v(" "),e("NcActionButton",{attrs:{"data-text-table-action":"add-column-before","close-after-click":""},on:{click:t.addColumnBefore},scopedSlots:t._u([{key:"icon",fn:function(){return[e("TableAddColumnBefore")]},proxy:!0}],null,!1,3782681875)},[t._v("\n\t\t\t\t"+t._s(t.t("text","Add column before"))+"\n\t\t\t")]),t._v(" "),e("NcActionButton",{attrs:{"data-text-table-action":"add-column-after","close-after-click":""},on:{click:t.addColumnAfter},scopedSlots:t._u([{key:"icon",fn:function(){return[e("TableAddColumnAfter")]},proxy:!0}],null,!1,1608287598)},[t._v("\n\t\t\t\t"+t._s(t.t("text","Add column after"))+"\n\t\t\t")]),t._v(" "),e("NcActionButton",{attrs:{"data-text-table-action":"remove-column","close-after-click":""},on:{click:t.deleteColumn},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Delete")]},proxy:!0}],null,!1,3429380666)},[t._v("\n\t\t\t\t"+t._s(t.t("text","Delete this column"))+"\n\t\t\t")])],1):t._e()],1)])}),[],!1,null,"a456a642",null).exports;function jt(t,e){return t.extend({addNodeView:()=>(0,I.$7)(e)})}const Ut=Bt.extend({addNodeView:()=>(0,I.$7)(Mt),addExtensions:()=>[vt,jt(xt,$t),jt(wt,Ot),_t,kt]});var zt=i(92210),Vt=i(53334);const Gt={name:"EmojiList",props:{items:{type:Array,required:!0},command:{type:Function,required:!0}},data:()=>({selectedIndex:0}),computed:{hasResults(){return this.items.length>0},itemHeight(){return this.$el.scrollHeight/this.items.length},itemInsideScrollView(){return this.selectedIndex*this.itemHeight>=this.$el.scrollTop&&(this.selectedIndex+1)*this.itemHeight<=this.$el.scrollTop+this.$el.clientHeight}},watch:{items(){this.selectedIndex=0,this.$el.scrollTop=0}},methods:{t:Vt.Tl,onKeyDown(t){let{event:e}=t;return!(e.ctrlKey||e.shiftKey||e.altKey||e.metaKey)&&("ArrowUp"===e.key?(this.selectedIndex=(this.selectedIndex+this.items.length-1)%this.items.length,this.itemInsideScrollView||(this.$el.scrollTop=this.selectedIndex*this.itemHeight),!0):"ArrowDown"===e.key?(this.selectedIndex=(this.selectedIndex+1)%this.items.length,this.itemInsideScrollView||(this.$el.scrollTop=(this.selectedIndex+1)*this.itemHeight-this.$el.clientHeight),!0):("Enter"===e.key||"Tab"===e.key)&&(this.selectItem(this.selectedIndex),!0))},selectItem(t){const e=this.items[t];e&&(this.command(e),(0,Z.ZR)(e))}}};var Wt=i(13201),Ft={};Ft.styleTagTransform=z(),Ft.setAttributes=H(),Ft.insert=D().bind(null,"head"),Ft.domAPI=P(),Ft.insertStyleElement=j();L()(Wt.A,Ft);Wt.A&&Wt.A.locals&&Wt.A.locals;const Kt=(0,W.A)(Gt,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"emoji-list"},[t.hasResults?t._l(t.items,(function(n,i){return e("div",{key:i,staticClass:"emoji-list__item",class:{"is-selected":i===t.selectedIndex},on:{click:function(e){return t.selectItem(i)}}},[e("span",{staticClass:"emoji-list__item__emoji"},[t._v("\n\t\t\t\t"+t._s(n.native)+"\n\t\t\t")]),t._v("\n\t\t\t:"+t._s(n.short_name)+"\n\t\t")])})):e("div",{staticClass:"emoji-list__item is-empty"},[t._v("\n\t\t"+t._s(t.t("text","No emoji found"))+"\n\t")])],2)}),[],!1,null,"74f9a54a",null).exports;const qt=i(75111).Ay.extend({name:"frontMatter",draggable:!1,renderHTML(e){let{node:n,HTMLAttributes:i}=e;return this.parent({node:n,HTMLAttributes:(0,s.KV)(i,{"data-title":t("text","Front matter"),class:"frontmatter"})})},parseHTML:()=>[{tag:"pre#frontmatter",preserveWhitespace:"full",priority:9001,attrs:{language:"yaml"}}],toMarkdown:(t,e)=>{if(!t.out.match(/^\s*/))throw Error("FrontMatter must be the first node of the document!");const n=e.textContent,i=n.match(/-{3,}/gm),o=i?i.sort().slice(-1)[0]+"-":"---";t.write(""),t.out="",t.write(`${o}\n`),t.text(n,!1),t.ensureNewLine(),t.write(o),t.closeBlock(e)},addInputRules(){return[{find:/^---$/g,handler:t=>{let{state:e,range:n,chain:i}=t;return 1===n.from&&(e.doc.resolve(1).parent.type.name!==this.name&&(i().deleteRange(n).insertContentAt(0,{type:this.name}),!0))}}]},addCommands:()=>({}),addPasteRules:()=>[],addProseMirrorPlugins:()=>[]});var Yt=i(734);const Xt=i(1073).A.extend({addAttributes:()=>({syntax:{default:"  ",rendered:!1,keepOnSplit:!0,parseHTML:t=>t.getAttribute("data-syntax")||"  "}}),addCommands(){return{...this?.parent(),setHardBreak:()=>t=>{for(let e=t.state.selection.$from.depth;e>=0;e--)if("heading"===t.state.selection.$from.node(e).type.name)return!1;return this.parent().setHardBreak()(t)}}},toMarkdown(t,e,n,i){for(let o=i+1;o<n.childCount;o++)if(n.child(o).type!==e.type)return void("html"!==e.attrs.syntax?(t.write(e.attrs.syntax),n.child(o).text?.startsWith("\n")||t.write("\n")):t.write("<br />"))}});var Qt=i(81036),Jt=i(73099),Zt=i.n(Jt);function te(t){const e=new Map,n=[];return t.descendants(((t,i)=>{if("heading"!==t.type.name)return;const o=t.textContent;if(!o)return;const r=(t=>{const n=Zt()(t);if(e.has(n)){const t=e.get(n);return e.set(n,t+1),`h-${n}--${t}`}return e.set(n,1),"h-"+n})(o);n.push(Object.freeze({level:t.attrs.level,text:o,id:r,offset:i}))})),n}const ee=new l.hs("headingAnchor");function ne(){return new l.k_({key:ee,state:{init(t,e){let{doc:n}=e;const i=te(n);return{headings:i,decorations:oe(n,i)}},apply(t,e,n,i){if(!t.docChanged)return e;const o=te(i.doc),r=function(t,e,n){if(i=n,o=t.headings,i.length!==o.length||i.some(ie(o)))return!1;var i,o;let r=!1;const a=t.decorations.map(e.mapping,e.doc,{onRemove:()=>{r=!0}});return!r&&a}(e,t,o)||oe(i.doc,o);return{headings:o,decorations:r}}},props:{decorations(t){return this.getState(t).decorations}}})}const ie=t=>(e,n)=>e.id!==t[n].id||e.level!==t[n].level;function oe(t,e){const n=e.map(re);return h.zF.create(t,n)}function re(t){return h.NZ.widget(t.offset+1,function(t){const e=document.createElement("a"),n=document.createTextNode("#");return e.appendChild(n),e.setAttribute("id",t.id),e.setAttribute("aria-hidden","true"),e.className="heading-anchor",e.setAttribute("href",`#${t.id}`),e.setAttribute("title",window.t("text","Link to this section")),e.setAttribute("contenteditable","false"),e.addEventListener("click",ae),e}(t),{side:-1})}function ae(t){t.stopPropagation(),t.target.scrollIntoView(),window.location.hash=t.target.getAttribute("href")}var se=i(72150);const le=Qt.A.extend({addKeyboardShortcuts(){return this.options.levels.reduce(((t,e)=>({...t,[`Mod-Shift-${e}`]:()=>this.editor.commands.toggleHeading({level:e})})),{})},onUpdate(t){let{editor:e}=t;const n=ee.getState(e.state)?.headings??[];var i;i=n,se.default.dispatch("text/setHeadings",i)},addProseMirrorPlugins:()=>[ne()]});var ce=i(59345),de=i(94589),Ae=i(25276),ue=i.n(Ae),pe=i(95353);const me={name:"ShowImageModal",components:{NcModal:Z.FH},props:{images:{type:Array,required:!0},startIndex:{type:Number,default:0},show:{type:Boolean,default:!1}},data:()=>({currentImageIndex:0}),computed:{currentImage(){return this.images[this.currentImageIndex]}},watch:{startIndex(t){this.currentImageIndex=t}},methods:{showNextImage(){this.currentImageIndex=(this.currentImageIndex+1)%this.images.length},showPreviousImage(){this.currentImageIndex=this.currentImageIndex<=0?this.images.length-1:this.currentImageIndex-1}}};var he=i(54887),fe={};fe.styleTagTransform=z(),fe.setAttributes=H(),fe.insert=D().bind(null,"head"),fe.domAPI=P(),fe.insertStyleElement=j();L()(he.A,fe);he.A&&he.A.locals&&he.A.locals;const ge=(0,W.A)(me,(function(){var t=this,e=t._self._c;return t.show?e("NcModal",{attrs:{size:"large",name:t.currentImage.name,"out-transition":!0,"has-next":!0,"has-previous":!0,"close-button-contained":!1,dark:!0},on:{next:t.showNextImage,previous:t.showPreviousImage,close:function(e){return t.$emit("close")}}},[e("div",{staticClass:"modal__content"},[e("img",{attrs:{src:t.currentImage.previewUrl}})])]):t._e()}),[],!1,null,"403f8ff2",null).exports;var Ce=i(11441),ve=i(73590),be=i(61338);class ye extends Error{constructor(e,n){super(e?.message||t("text","Failed to load")),this.reason=e,this.imageUrl=n}}const xe={name:"ImageView",components:{ImageIcon:E.Hy,DeleteIcon:E.ep,NcButton:Z.x1,ShowImageModal:ge,NodeViewWrapper:I.VR},directives:{ClickOutside:ue()},mixins:[Ce.A,ve.HE],props:["editor","node","extension","updateAttributes","deleteNode"],data:()=>({attachment:null,imageLoaded:!1,loaded:!1,failed:!1,showIcons:!1,imageUrl:null,errorMessage:null,attachmentSize:null,showImageModal:!1,imageIndex:null,isEditable:!1,embeddedImageList:[]}),computed:{...(0,pe.L8)({imageAttachments:"text/imageAttachments"}),attachmentType(){return this.attachment?this.attachment.isImage?"image":"media":null},isMediaAttachment(){return"media"===this.attachmentType},showDeleteIcon(){return this.isEditable&&this.showIcons},showImageDeleteIcon(){return this.showDeleteIcon&&!this.isMediaAttachment},canDisplayImage(){return!(!this.failed||!this.loaded)||this.loaded&&this.imageLoaded},src:{get(){return this.node.attrs.src||""},set(t){this.updateAttributes({src:t})}},alt:{get(){return this.node.attrs.alt?this.node.attrs.alt:""},set(t){this.updateAttributes({alt:t})}}},beforeMount(){this.isEditable=this.editor.isEditable,this.editor.on("update",(t=>{let{editor:e}=t;this.isEditable=e.isEditable})),this.loadPreview().catch(this.onImageLoadFailure)},methods:{async loadPreview(){if(this.attachment=await this.$attachmentResolver.resolve(this.src),!this.attachment.previewUrl)throw new Error("Attachment source was not resolved");return new Promise(((t,e)=>{const n=new Image;n.onload=async()=>{this.imageUrl=this.attachment.previewUrl,this.imageLoaded=!0,this.loaded=!0,this.attachmentSize=this.attachment.size},n.onerror=t=>{e(new ye(t,this.attachment.previewUrl))},n.src=this.attachment.previewUrl}))},onImageLoadFailure(t){this.failed=!0,this.imageLoaded=!1,this.loaded=!0,this.errorMessage=t.message,t instanceof ye&&(this.errorMessage=`${this.errorMessage} ${this.src}`),this.$emit("error",{error:t,src:this.src})},updateAlt(t){this.updateAttributes({alt:t.target.value})},onLoaded(){this.loaded=!0,this.$nextTick((()=>{this.$refs.altInput?.focus()}))},async updateEmbeddedImageList(){this.embeddedImageList=[];const t=Array.from(document.querySelectorAll('figure[data-component="image-view"][data-attachment-type="image"]:not(.image-view--failed).image-view'));for(const e of t){const t=e.getAttribute("data-src");if(!this.embeddedImageList.find((e=>e.src===t))){const n=await this.$attachmentResolver.resolve(e.getAttribute("data-src"));this.embeddedImageList.push({src:t,...n})}}},handleAttachmentClick(){OCA.Viewer&&!OCA.Viewer.file&&-1!==OCA.Viewer.mimetypes.indexOf(this.attachment.mimetype)&&this.attachment.davPath?OCA.Viewer.open({path:this.attachment.davPath}):window.location.assign(this.attachment.fullUrl)},async handleImageClick(){await this.updateEmbeddedImageList(),this.imageIndex=this.embeddedImageList.findIndex((t=>t.src===this.src)),-1!==this.imageIndex?this.showImageModal=!0:(console.error("Could not find image in attachments list",this.attachment),(0,ct.Qg)(t("text","Could not find image in attachments list.")))},onDelete(){(0,be.Ic)("text:image-node:delete",this.imageUrl),this.deleteNode()}}};var we=i(5755),ke={};ke.styleTagTransform=z(),ke.setAttributes=H(),ke.insert=D().bind(null,"head"),ke.domAPI=P(),ke.insertStyleElement=j();L()(we.A,ke);we.A&&we.A.locals&&we.A.locals;const _e=(0,W.A)(xe,(function(){var t=this,e=t._self._c;return e("NodeViewWrapper",{attrs:{contenteditable:t.isEditable}},[e("figure",{staticClass:"image image-view",class:{"icon-loading":!t.loaded,"image-view--failed":t.failed},attrs:{"data-component":"image-view","data-attachment-type":t.attachmentType,"data-src":t.src}},[t.canDisplayImage?e("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:()=>t.showIcons=!1,expression:"() => showIcons = false"}],staticClass:"image__view",on:{mouseover:function(e){t.showIcons=!0},mouseleave:function(e){t.showIcons=!1}}},[e("transition",{attrs:{name:"fade"}},[t.failed?[e("ImageIcon",{staticClass:"image__main image__main--broken-icon",attrs:{size:100}})]:[t.isMediaAttachment?e("div",{staticClass:"media",attrs:{contenteditable:"false"},on:{click:t.handleAttachmentClick}},[e("div",{staticClass:"media__wrapper"},[e("img",{directives:[{name:"show",rawName:"v-show",value:t.loaded,expression:"loaded"}],staticClass:"image__main",attrs:{src:t.imageUrl,alt:t.alt},on:{load:t.onLoaded}}),t._v(" "),e("div",{staticClass:"metadata"},[e("span",{staticClass:"name"},[t._v(t._s(t.alt))]),t._v(" "),e("span",{staticClass:"size"},[t._v(t._s(t.attachmentSize))])])]),t._v(" "),t.showDeleteIcon?e("div",{staticClass:"buttons"},[e("NcButton",{attrs:{"aria-label":t.t("text","Delete this attachment"),title:t.t("text","Delete this attachment")},on:{click:t.onDelete},scopedSlots:t._u([{key:"icon",fn:function(){return[e("DeleteIcon")]},proxy:!0}],null,!1,3930079857)})],1):t._e()]):e("div",{staticClass:"media",attrs:{contenteditable:"false"}},[e("img",{directives:[{name:"show",rawName:"v-show",value:t.loaded,expression:"loaded"}],staticClass:"image__main",attrs:{src:t.imageUrl,alt:t.alt},on:{click:t.handleImageClick,load:t.onLoaded}})])]],2),t._v(" "),e("transition",{attrs:{name:"fade"}},[t.isMediaAttachment?t._e():e("div",{directives:[{name:"show",rawName:"v-show",value:t.loaded,expression:"loaded"}],staticClass:"image__caption",attrs:{title:t.alt}},[t.isEditable?e("div",{staticClass:"image__caption__wrapper"},[e("input",{directives:[{name:"show",rawName:"v-show",value:!t.isMediaAttachment,expression:"!isMediaAttachment"}],ref:"altInput",staticClass:"image__caption__input",attrs:{type:"text"},domProps:{value:t.alt},on:{blur:t.updateAlt,keyup:t.updateAlt}}),t._v(" "),t.showImageDeleteIcon?e("div",{staticClass:"image__caption__delete",attrs:{contenteditable:"false"}},[e("NcButton",{attrs:{"aria-label":t.t("text","Delete this image"),title:t.t("text","Delete this image")},on:{click:t.onDelete},scopedSlots:t._u([{key:"icon",fn:function(){return[e("DeleteIcon")]},proxy:!0}],null,!1,3930079857)})],1):t._e()]):e("figcaption",[t._v("\n\t\t\t\t\t\t"+t._s(t.alt)+"\n\t\t\t\t\t")])])]),t._v(" "),e("div",{staticClass:"image__modal"},[e("ShowImageModal",{attrs:{images:t.embeddedImageList,"start-index":t.imageIndex,show:t.showImageModal},on:{close:function(e){t.showImageModal=!1}}})],1)],1):e("div",{staticClass:"image-view__cant_display"},[e("transition",{attrs:{name:"fade"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.loaded,expression:"loaded"}],staticClass:"image__caption"},[e("input",{ref:"altInput",attrs:{type:"text",disabled:!t.isEditable},domProps:{value:t.alt},on:{blur:t.updateAlt,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.updateAlt.apply(null,arguments)}}})])])],1),t._v(" "),t.errorMessage?e("small",{staticClass:"image__error-message"},[t._v("\n\t\t\t"+t._s(t.errorMessage)+"\n\t\t")]):t._e()])])}),[],!1,null,"bcf16ce4",null).exports;var Ie=i(79396);const Be=de.Ay.extend({selectable:!1,parseHTML(){return[{tag:this.options.allowBase64?"figure img[src]":'figure img[src]:not([src^="data:"])'}]},renderHTML:()=>["img"],addOptions(){return{...this.parent?.()}},addNodeView:()=>(0,I.$7)(_e),addProseMirrorPlugins:()=>[new l.k_({props:{handleDrop:(t,e,n)=>{if(e.dataTransfer.files&&e.dataTransfer.files.length>0){const n=t.posAtCoords({left:e.clientX,top:e.clientY}),i=new CustomEvent("file-drop",{bubbles:!0,detail:{files:e.dataTransfer.files,position:n.pos}});return e.target.dispatchEvent(i),!0}},handlePaste:(t,e,n)=>{if(e.clipboardData.files&&e.clipboardData.files.length>0){const t=new CustomEvent("image-paste",{bubbles:!0,detail:{files:e.clipboardData.files}});return e.target.dispatchEvent(t),!0}}}})],toMarkdown(t,e,n,i){e.attrs.alt=e.attrs.alt.toString(),Ie.lR.nodes.image(t,e,n,i),t.closeBlock(e)}}),Ee=de.Ay.extend({name:"image-inline",priority:99,selectable:!1,parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},addOptions(){return{...this.parent?.(),inline:!0}},addCommands:()=>({}),addInputRules:()=>[],addNodeView:()=>(0,I.$7)(_e),toMarkdown:(t,e,n,i)=>Ie.lR.nodes.image(t,e,n,i)}),Se=s.CU.create({name:"keep-syntax",parseHTML:()=>[{tag:"span.keep-md"}],renderHTML:()=>["span",{class:"keep-md"},0],toMarkdown:{open:"",close:"",mixable:!0,escape:!1,expelEnclosingWhitespace:!0},onUpdate(){const t=this.editor.state.tr;this.editor.state.doc.descendants(((e,n,i,o)=>{-1!==e.marks.findIndex((t=>t.type.name===this.name))&&("text"===e.type.name&&1===e.text.length||t.removeMark(n,n+e.nodeSize,this.type))})),t.docChanged&&(t.setMeta("addToHistory",!1),t.setMeta("preventUpdate",!0),this.editor.view.dispatch(t))}});const Te={components:{SuggestionListWrapper:i(3315).A},props:{items:{type:Array,required:!0},command:{type:Function,required:!0}},methods:{onKeyDown(t){let{event:e}=t;return this.$refs.suggestionList?.onKeyDown({event:e})}}};var Me=i(1778),Le={};Le.styleTagTransform=z(),Le.setAttributes=H(),Le.insert=D().bind(null,"head"),Le.domAPI=P(),Le.insertStyleElement=j();L()(Me.A,Le);Me.A&&Me.A.locals&&Me.A.locals;const Ne=(0,W.A)(Te,(function(){var t=this,e=t._self._c;return e("SuggestionListWrapper",{ref:"suggestionList",attrs:{command:t.command,items:t.items},on:{select:e=>t.$emit("select",e)},scopedSlots:t._u([{key:"default",fn:function(n){let{item:i}=n;return[e("div",{staticClass:"link-picker__item",attrs:{"data-key":i.key}},["string"!=typeof i.icon?e(i.icon,{tag:"compoent"}):e("img",{attrs:{src:i.icon}}),t._v(" "),e("div",[t._v(t._s(i.label))])],1)]}},{key:"empty",fn:function(){return[t._v("\n\t\t"+t._s(t.t("text","No command found"))+"\n\t")]},proxy:!0}])})}),[],!1,null,"11ad0ffc",null).exports;var Pe=i(64508),$e=i(54789),De=i(1357),Re=i(32931);const He=t("text","Formatting"),Oe=t("text","Smart picker"),je=["task-list","table"],Ue=t=>{return[...(e=[...$e.A.find((t=>"headings"===t.key)).children,...$e.A.filter((t=>t.action&&!(t=>["undo","redo","outline","emoji-picker"].indexOf(t.key)>-1)(t))),...$e.A.find((t=>"callouts"===t.key)).children,{...$e.A.find((t=>"emoji-picker"===t.key)),action:t=>t.insertContent(":")}].filter((e=>e?.label?.toLowerCase?.()?.includes(t.toLowerCase()))).map((t=>({...t,suggestGroup:He})))).filter((t=>je.indexOf(t.key)>-1)),...e.filter((t=>-1===je.indexOf(t.key)))];var e},ze=()=>(0,zt.A)({listComponent:Ne,command:t=>{let{editor:e,range:n,props:i}=t;if(i.action){const t=e.chain().deleteRange(n);return i.action(t),void t.run()}(0,Pe.J4)(i.providerId,!0).then((t=>{if(i=t,[/\*\*.*?\*\*/,/\*.*?\*/,/\[.*?\(.*?\)/,/^#{1,6}\s.*$/,/^\s*[-+*]\s.*/m,/^\s\d\..*/m,/^>+\s.*/,/`.*?`/].some((t=>t.test(i)))&&(t=>{try{return Re.A.parse(t),!0}catch(t){return!1}})(t)){const i=Re.A.render(t);e.chain().focus().insertContentAt(n,i+" ").run()}else{var i;e.chain().focus().deleteRange(n).insertPreview(t).run()}})).catch((t=>{console.error("Smart picker promise rejected",t)}))},items:t=>{let{editor:e,query:n}=t;return[...(0,Pe.kr)(n).map((t=>({suggestGroup:Oe,label:t.title,icon:t.icon_url,providerId:t.id}))).filter((t=>t?.label?.toLowerCase?.()?.includes(n.toLowerCase()))),...Ue(n).filter((t=>{let{action:n,isActive:i}=t;const o=n(e?.can()),r=i&&(0,De.Hf)({isActive:i},e);return o&&!r}))]}}),Ve=new l.hs("linkPicker"),Ge=s.YY.create({name:"linkPicker",addOptions:()=>({suggestion:{char:"/",allowedPrefixes:[" "],pluginKey:Ve,allow:t=>{let{state:e,range:n}=t;return"codeBlock"!==e.doc.resolve(n.from).parent.type.name},...ze()}}),addProseMirrorPlugins(){return[(0,c.V0)({editor:this.editor,...this.options.suggestion})]}});var We=i(24490),Fe=i(32981),Ke=i(63814);const qe=function(t,e){const n=t.attrs.href;if(!n)return n;if(!window.OCA?.Viewer)return n;if(n.match(/^[a-zA-Z]*:/))return n;if(n.startsWith("#"))return n;if("collectives"===(0,Fe.C)("core","active-app",""))return n;if(n.includes("/apps/collectives/"))return n;const i=n.match(/^([^?]*)\?fileId=(\d+)/);if(i){const[,,t]=i;return new URL((0,Ke.Jv)(`/f/${t}`),window.origin).href}return n},Ye=function(t){const e=t.getAttribute("href");if(!e)return e;const n=e.match(/\?dir=([^&]*)&openfile=([^&]*)#relPath=([^&]*)/);if(n){const[,,t]=n;return new URL((0,Ke.Jv)(`/f/${t}`),window.origin).href}return e},Xe=function(t){const e=window.location.origin+window.location.pathname+window.location.search;return t?.startsWith("#")||t?.startsWith(e+"#")};var Qe=i(66001),Je=i(92919),Ze=i(2413);const tn=["http:","https:"],en={name:"LinkBubbleView",components:{CheckIcon:lt.A,CloseIcon:Qe.A,ContentCopyIcon:st.A,NcButton:Z.x1,NcLoadingIcon:Z.ne,NcReferenceList:Pe.j0,NcTextField:Z.v,LinkOffIcon:Je.A,PencilIcon:Ze.A},mixins:[dt],props:{editor:{type:Object,required:!0},href:{type:String,default:null}},data:()=>({isEditable:!1,edit:!1,newHref:null,referenceTitle:null}),computed:{key(){return this.href||"no-href"},copyLinkTooltip(){return this.copied?this.copySuccess?"":(0,Vt.Tl)("text","Cannot copy, please copy the link manually"):(0,Vt.Tl)("text","Copy link to clipboard")},sanitizedHref(){return new URL(this.href,window.location).href},title(){return this.referenceTitle?this.referenceTitle:this.sanitizedHref},showPreview(){const t=new URL(this.href,window.location);return this.href&&tn.includes(t.protocol)}},watch:{key(){this.resetBubble()}},beforeMount(){this.isEditable=this.editor.isEditable,this.editor.on("update",(t=>{let{editor:e}=t;this.isEditable=e.isEditable}))},methods:{t:Vt.Tl,resetBubble(){this.edit=!1,this.newHref=null,this.referenceTitle=null},async copyLink(){await this.copyToClipboard(this.href)},onReferenceListLoaded(){this.referenceTitle=this.$refs.referencelist.firstReference?.openGraphObject?.name??null},startEdit(){this.edit=!0,this.newHref=this.href},stopEdit(){this.edit=!1,this.newHref=null},updateLink(){this.href!==this.newHref&&this.setLinkUrl(this.newHref),this.stopEdit()},setLinkUrl(t){const e={...this.editor.view.state.selection},{ranges:n}=e,i=Math.min(...n.map((t=>t.$from.pos))),o=Math.max(...n.map((t=>t.$to.pos)));console.debug("selection",e),this.editor.chain().extendMarkRange("link").setLink({href:t}).setTextSelection({from:i,to:o}).focus().run()},removeLink(){this.editor.chain().hideLinkBubble().unsetLink().focus().run(),this.stopEdit()}}};var nn=i(99011),on={};on.styleTagTransform=z(),on.setAttributes=H(),on.insert=D().bind(null,"head"),on.domAPI=P(),on.insertStyleElement=j();L()(nn.A,on);nn.A&&nn.A.locals&&nn.A.locals;const rn=(0,W.A)(en,(function(){var t=this,e=t._self._c;return e("div",{key:t.key,staticClass:"link-view-bubble"},[e("div",{staticClass:"link-view-bubble__header"},[e("div",{staticClass:"link-view-bubble__title"},[t._v("\n\t\t\t"+t._s(t.title)+"\n\t\t")]),t._v(" "),e("NcButton",{attrs:{title:t.copyLinkTooltip,"aria-label":t.copyLinkTooltip,type:"tertiary"},on:{click:t.copyLink},scopedSlots:t._u([{key:"icon",fn:function(){return[t.copySuccess?e("CheckIcon",{attrs:{size:20}}):t.copyLoading?e("NcLoadingIcon",{attrs:{size:20}}):e("ContentCopyIcon",{attrs:{size:20}})]},proxy:!0}])}),t._v(" "),t.isEditable?e("div",{staticClass:"edit-buttons"},[t.edit?e("NcButton",{attrs:{title:t.t("text","Save changes"),"aria-label":t.t("text","Save changes"),type:"tertiary"},on:{click:t.updateLink},scopedSlots:t._u([{key:"icon",fn:function(){return[e("CheckIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,2630571749)}):e("NcButton",{attrs:{title:t.t("text","Edit link"),"aria-label":t.t("text","Edit link"),type:"tertiary"},on:{click:t.startEdit},scopedSlots:t._u([{key:"icon",fn:function(){return[e("PencilIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,4260349822)}),t._v(" "),t.edit?e("NcButton",{attrs:{title:t.t("text","Cancel"),"aria-label":t.t("text","Cancel"),type:"tertiary"},on:{click:t.stopEdit},scopedSlots:t._u([{key:"icon",fn:function(){return[e("CloseIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,2428343285)}):e("NcButton",{attrs:{title:t.t("text","Remove link"),"aria-label":t.t("text","Remove link"),type:"tertiary"},on:{click:t.removeLink},scopedSlots:t._u([{key:"icon",fn:function(){return[e("LinkOffIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,2250374828)})],1):t._e()],1),t._v(" "),t.isEditable&&t.edit?e("div",{staticClass:"link-view-bubble__edit"},[e("NcTextField",{attrs:{name:"newHref",label:t.t("text","URL"),value:t.newHref},on:{"update:value":function(e){t.newHref=e},keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.updateLink.apply(null,arguments))}}})],1):t.showPreview?e("NcReferenceList",{ref:"referencelist",staticClass:"link-view-bubble__reference-list",attrs:{text:t.sanitizedHref,limit:1,interactive:!1,"display-fallback":!0},on:{loaded:t.onReferenceListLoaded}}):t._e()],1)}),[],!1,null,"fb46e0ea",null).exports;const an=class{#t=null;#e=null;constructor(t){let{view:e,options:n,plugin:i}=t;this.options=n,this.view=e,this.plugin=i,this.#e=this.options.editor,this.#t=new I.CS(rn,{parent:this.options.parent,propsData:{editor:this.options.editor,href:null}})}addEventListeners(){this.view.dom.addEventListener("dragstart",this.closeOnExternalEvents),document.addEventListener("mousedown",this.closeOnExternalEvents),document.addEventListener("scroll",this.closeOnExternalEvents,{capture:!0})}removeEventListeners(){this.view.dom.removeEventListener("dragstart",this.closeOnExternalEvents),document.removeEventListener("mousedown",this.closeOnExternalEvents),document.removeEventListener("scroll",this.closeOnExternalEvents,{capture:!0})}closeOnExternalEvents=t=>{this.tippy?.popper?.contains(t.target)||window.Cypress&&"scroll"===t.type||this.#e.commands.hideLinkBubble()};createTooltip(){const t=this.options.editor.options.element,e=!!t.parentElement;!this.tippy&&e&&(this.tippy=(0,We.Ay)(t,{duration:100,getReferenceClientRect:null,content:this.#t.element,interactive:!0,trigger:"manual",placement:"bottom",hideOnClick:"toggle",popperOptions:{strategy:"fixed"}}))}update(t,e){const{active:n}=this.plugin.getState(t.state);t.composing||(this.createTooltip(),n?.mark?setTimeout((()=>{this.updateTooltip(t,n)}),100):(this.removeEventListeners(),setTimeout((()=>{this.tippy?.hide()}),100)))}updateTooltip(t,e){let{mark:n,nodeStart:i}=e,o=t.nodeDOM(i);"[object Text]"===Object.prototype.toString.call(o)&&(o=o.parentElement);const r=o?.getBoundingClientRect();this.#t.updateProps({href:qe(n)}),this.tippy?.setProps({getReferenceClientRect:()=>r}),this.tippy?.show(),this.addEventListeners()}destroy(){this.tippy?.destroy()}};function sn(t,e){const n=function(t){const e=t?.marks.find((t=>"link"===t.type.name));if(!e)return;return Xe(e.attrs.href)?void 0:e}(t);return n?{mark:n,nodeStart:e}:null}const ln=(t,e)=>{const n=cn.getState(t);return!!n?.active&&(e&&e(t.tr.setMeta(cn,{active:null})),!0)},cn=new l.hs("linkBubble");function dn(t){const e=new l.k_({key:cn,state:{init:()=>({active:null}),apply:(t,e)=>{const n=t.getMeta(cn);return n?{...e,active:n.active}:e}},view:n=>new an({view:n,options:t,plugin:e}),appendTransaction:(t,e,n)=>{if(2===e?.doc.content.size)return;const i=e?.selection.eq(n.selection),o=e?.doc.eq(n.doc),r=t.every((t=>!1===t.meta.addToHistory));if(i&&(r||o))return;const a=function(t){let{selection:e,doc:n}=t;const{ranges:i}=e,o=Math.min(...i.map((t=>t.$from.pos))),r=Math.max(...i.map((t=>t.$to.pos))),a=n.resolve(o);if("preview"===a.parent.type.name)return!1;const s=a.parent.maybeChild(a.index()),l=a.pos-a.textOffset;if(r>l+s?.nodeSize)return null;const c=sn(s,l);if(c)return c;const d=a.nodeBefore;return d?sn(d,l-d.nodeSize):null}(n);return n.tr.setMeta(cn,{active:a})},props:{handleClickOn:(t,e,n,i,o,r)=>{if(!r||0!==o.button||o.ctrlKey||o.metaKey)return!1;const{state:a,dispatch:s}=t;return(t=>(e,n)=>{const i=t.marks().find((t=>"link"===t.type.name));if(!i)return!1;const o={mark:i,nodeStart:t.pos-t.textOffset};return n&&n(e.tr.setMeta(cn,{active:o})),!0})(a.doc.resolve(e))(a,s)},handleDOMEvents:{keydown:(t,e)=>{const{state:n,dispatch:i}=t;if("Escape"===e.key)return ln(n,i)}}}});return e}const An=new l.hs("textHandleClickLink");const un=s.YY.create({name:"linkViewBubble",addCommands:()=>({hideLinkBubble:()=>t=>{let{state:e,dispatch:n}=t;return ln(e,n)}}),addProseMirrorPlugins(){return[dn({editor:this.editor,parent:this.editor.contentComponent})]}});var pn=i(18214),mn=i(9040),hn=i(21777);const fn={name:"Mention",components:{NcUserBubble:Z.Z9,NodeViewWrapper:I.VR},props:{updateAttributes:{type:Function,required:!0},node:{type:Object,required:!0}},data(){return{username:this.node.attrs.label}},computed:{isCurrentUser(){return this.node.attrs.id===(0,hn.HW)()?.uid}}};var gn=i(40833),Cn={};Cn.styleTagTransform=z(),Cn.setAttributes=H(),Cn.insert=D().bind(null,"head"),Cn.domAPI=P(),Cn.insertStyleElement=j();L()(gn.A,Cn);gn.A&&gn.A.locals&&gn.A.locals;const vn=(0,W.A)(fn,(function(){var t=this,e=t._self._c;return e("NodeViewWrapper",{staticClass:"mention",attrs:{as:"span",contenteditable:"false"}},[e("NcUserBubble",{staticClass:"mention-user-bubble",attrs:{user:t.node.attrs.id,"display-name":t.username,primary:t.isCurrentUser}},[t._v("\n\t\t@"+t._s(t.username)+"\n\t")])],1)}),[],!1,null,"297bb5fa",null).exports,bn=mn.Ay.extend({parseHTML:()=>[{tag:'span[data-type="user"]',getAttrs:t=>({id:decodeURIComponent(t.getAttribute("data-id")),label:t.innerText||t.textContent||t.getAttribute("data-label")}),priority:100}],renderHTML(t){let{node:e,HTMLAttributes:n}=t;return["span",(0,s.KV)({"data-type":"user",class:"mention"},this.options.HTMLAttributes,n),this.options.renderHTML({options:this.options,node:e})]},addNodeView:()=>(0,I.$7)(vn),toMarkdown(t,e){t.write(`@[${e.attrs.label}](mention://user/${encodeURIComponent(e.attrs.id)})`)}});var yn=i(94264),xn=i(24260);function wn(t){const e=[];return t.descendants(((t,n)=>{!function(t){if("paragraph"!==t.type.name||function(t){return t.childCount>2||2===t.childCount&&t.lastChild.textContent.trim()}(t))return!1;const e=function(t){if(!t)return;const e=t.marks.find((t=>"link"===t.type.name));return e?.attrs.href}(t.firstChild);if(!e||Xe(e))return!1;return!0}(t)?"preview"===t.type.name&&e.push(Object.freeze({offset:n,nodeSize:t.nodeSize,type:"link-preview"})):e.push(Object.freeze({offset:n,nodeSize:t.nodeSize,type:"text-only"}))})),e}var kn=i(85471),_n=i(5929),In=i(79759);const Bn={name:"PreviewOptions",components:{DotsVerticalIcon:_n.A,NcActions:Z.B6,NcActionButton:Z.Ko,NcActionCaption:Z.qN,NcActionRadio:Z.H_,NcActionSeparator:Z.z,DeleteIcon:In.A},props:{type:{type:String,required:!0},offset:{type:Number,required:!0},nodeSize:{type:Number,required:!0},$editor:{type:Object,required:!0}},data:()=>({open:!1}),methods:{onOpen(){this.$editor.commands.hideLinkBubble()},toggle(t){this.open=!1;const e=this.$editor.chain().focus().setTextSelection(this.offset+1);"text-only"!==t?e.setPreview().run():e.unsetPreview().run()},deleteNode(){this.$editor.commands.deleteRange({from:this.offset,to:this.offset+this.nodeSize})}}};var En=i(79600),Sn={};Sn.styleTagTransform=z(),Sn.setAttributes=H(),Sn.insert=D().bind(null,"head"),Sn.domAPI=P(),Sn.insertStyleElement=j();L()(En.A,Sn);En.A&&En.A.locals&&En.A.locals;const Tn=(0,W.A)(Bn,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"preview-options-container",attrs:{contenteditable:"false"}},[e("NcActions",{staticClass:"preview-options",attrs:{"data-text-preview-options":"select",open:t.open},on:{"update:open":function(e){t.open=e},open:t.onOpen},scopedSlots:t._u([{key:"icon",fn:function(){return[e("DotsVerticalIcon",{attrs:{size:20}})]},proxy:!0}])},[t._v(" "),e("NcActionCaption",{attrs:{name:t.t("text","Preview options")}}),t._v(" "),e("NcActionRadio",{attrs:{"data-text-preview-option":"text-only",name:"preview-option",value:"text-only",checked:"text-only"===t.type},on:{change:e=>t.toggle(e.currentTarget.value)}},[t._v("\n\t\t\t"+t._s(t.t("text","Text only"))+"\n\t\t")]),t._v(" "),e("NcActionRadio",{attrs:{"data-text-preview-option":"link-preview",name:"preview-option",value:"link-preview",checked:"link-preview"===t.type},on:{change:e=>t.toggle(e.currentTarget.value)}},[t._v("\n\t\t\t"+t._s(t.t("text","Show link preview"))+"\n\t\t")]),t._v(" "),e("NcActionSeparator"),t._v(" "),e("NcActionButton",{attrs:{"close-after-click":"true"},on:{click:t.deleteNode},scopedSlots:t._u([{key:"icon",fn:function(){return[e("DeleteIcon",{attrs:{size:20}})]},proxy:!0}])},[t._v("\n\t\t\t"+t._s(t.t("text","Remove link"))+"\n\t\t")])],1)],1)}),[],!1,null,"3eac6396",null).exports,Mn=new l.hs("linkParagraphMenu");function Ln(t){let{editor:e}=t;return new l.k_({key:Mn,state:{init(t,n){let{doc:i}=n;if(!e.options.editable)return{decorations:h.zF.create()};const o=wn(i);return{linkParagraphs:o,decorations:Pn(i,o,e)}},apply(t,n,i,o){if(!t.docChanged)return n;if(!e.options.editable)return n;const r=wn(o.doc),a=function(t,e,n){if(i=n,o=t.linkParagraphs,i.length!==o.length||i.some(Nn(o)))return!1;var i,o;let r=!1;const a=t.decorations.map(e.mapping,e.doc,{onRemove:()=>{r=!0}});return!r&&a}(n,t,r)||Pn(o.doc,r,e);return{linkParagraphs:r,decorations:a}}},props:{decorations(t){return this.getState(t).decorations}}})}const Nn=t=>(e,n)=>e.type!==t[n].type||e.nodeSize!==t[n].nodeSize;function Pn(t,e,n){const i=e.map((t=>function(t,e){return h.NZ.widget(t.offset+1,function(t,e){const n={$editor:e,...t},i=document.createElement("div"),o=kn.default.extend(Tn);return new o({propsData:n}).$mount(i).$el}(t,e),{side:-1})}(t,n)));return h.zF.create(t,i)}const $n=xn.A.extend({parseHTML(){return this.parent().map((t=>Object.assign(t,{preserveWhitespace:"full"})))},addKeyboardShortcuts(){return{Backspace:()=>{const t=this.editor.state.selection;if(0!==t.$from.parentOffset)return!1;const e=t.$from.parent,n=t.$from.index(t.$from.depth-1);if(0===n)return!1;const i=t.$from.node(t.$from.depth-1).child(n-1);return e.type.name===this.name&&i.type.name===this.name&&this.editor.chain().joinBackward().setHardBreak().run()}}},addProseMirrorPlugins(){return[Ln({editor:this.editor})]}});var Dn=i(98005);const Rn={name:"Preview",components:{NodeViewWrapper:I.VR,NodeViewContent:I.$p,NcReferenceList:Pe.j0},props:I.en};var Hn=i(69230),On={};On.styleTagTransform=z(),On.setAttributes=H(),On.insert=D().bind(null,"head"),On.domAPI=P(),On.insertStyleElement=j();L()(Hn.A,On);Hn.A&&Hn.A.locals&&Hn.A.locals;const jn=(0,W.A)(Rn,(function(){var t=this,e=t._self._c;return e("NodeViewWrapper",{staticClass:"preview",attrs:{"data-text-el":"preview",as:"div",contenteditable:"false"}},[e("NodeViewContent"),t._v(" "),e("NcReferenceList",{attrs:{text:t.node.attrs.href,limit:1,interactive:!t.extension.options.isEmbedded,"display-fallback":!0}})],1)}),[],!1,null,"26ba0d31",null).exports,Un=s.bP.create({name:"preview",group:"block",content:"text?",atom:!0,marks:"link",isolating:!0,addOptions:()=>({isEmbedded:!1,relativePath:null}),addAttributes:()=>({href:{parseHTML:Ye},title:{parseHTML:t=>t.getAttribute("title")}}),parseHTML:()=>[{tag:'a[title="preview"]',priority:1001}],renderHTML(t){let{node:e}=t;return["a",{...e.attrs,href:qe(e,this.options.relativePath),rel:"noopener noreferrer nofollow"},0]},addNodeView:()=>(0,I.$7)(jn),toMarkdown:(t,e)=>{t.write("["),t.text(e.textContent,!1),t.write(`](${e.attrs.href} (${e.attrs.title}))`),t.closeBlock(e)},addCommands(){return{setPreview:()=>t=>{let{state:e,chain:n}=t;return function(t){let{selection:e}=t;const{$from:n}=e;if(i=n.parent,i.childCount>2||2===i.childCount&&i.lastChild.textContent.trim())return!1;var i;const o=zn(n.parent.firstChild);if(!o||Xe(o))return!1;return!0}(e)&&n().setNode(this.name,function(t){let{selection:e}=t;const{$from:n}=e;return{href:zn(n.nodeAfter),title:"preview"}}(e)).run()},unsetPreview:()=>t=>{let{state:e,chain:n}=t;return function(t,e,n){const i=(0,s.Pg)(t,n.schema);return(0,s.rU)(n,i,e)}(this.name,this.attributes,e)&&n().setNode("paragraph").run()},insertPreview:t=>e=>{let{state:n,chain:i}=e;return i().insertContent({type:"preview",attrs:{href:t,title:"preview"},content:[{type:"text",marks:[{type:"link",attrs:{href:t}}],text:t}]}).run()}}}});function zn(t){if(!t)return;const e=t.marks.find((t=>"link"===t.type.name));return e?.attrs.href}const Vn=Bt;var Gn=i(82939);const Wn=Gn.Ay.extend({addOptions:()=>({nested:!0,HTMLAttributes:{}}),draggable:!1,content:"paragraph block*",addAttributes(){const t={...this.parent()};return t.checked.parseHTML=t=>t.querySelector("input[type=checkbox]")?.checked,t},parseHTML:[{priority:101,tag:"li",getAttrs:t=>t.querySelector("input[type=checkbox]"),context:"taskList/"}],renderHTML(t){let{node:e,HTMLAttributes:n}=t;const i={class:"task-list-item checkbox-item"},o={type:"checkbox",class:"",contenteditable:!1};return e.attrs.checked&&(o.checked=!0,i.class+=" checked"),["li",(0,s.KV)(n,i),["input",o],["label",0]]},addNodeView:!1,toMarkdown:(t,e)=>{t.write(`[${e.attrs.checked?"x":" "}] `),t.renderContent(e)},addInputRules(){return[...this.parent(),(0,s.tG)({find:/^\s*([-+*])\s(\[(x|X|\s)?\])\s$/,type:this.type,getAttributes:t=>({checked:"xX".includes(t[t.length-1])})})]},addProseMirrorPlugins:()=>[new l.k_({props:{handleClick:(t,e,n)=>{const i=t.state,o=i.schema,r=t.posAtCoords({left:n.clientX,top:n.clientY}),a=((t,e)=>{for(let n=t.depth;n>0;n--){const i=t.node(n);if(e(i))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:i}}})(i.doc.resolve(r.pos),(function(t){return t.type===o.nodes.taskItem||t.type===o.nodes.listItem}));if(!("li"===n.target.tagName.toLowerCase())||!a||a.node.type!==o.nodes.taskItem||!t.editable)return;const s=i.tr;s.setNodeMarkup(a.pos,o.nodes.taskItem,{checked:!a.node.attrs.checked}),t.dispatch(s)}}})]});const Fn=i(66646).A.extend({parseHTML:[{priority:100,tag:"ul.contains-task-list"}],renderHTML(t){let{HTMLAttributes:e}=t;return["ul",(0,s.KV)(this.options.HTMLAttributes,e,{class:"contains-task-list"}),0]},addAttributes(){return{...this.parent?.(),bullet:{default:"-",rendered:!1,isRequired:!0,parseHTML:t=>t.getAttribute("data-bullet")}}},toMarkdown:(t,e)=>{t.renderList(e,"  ",(()=>`${e.attrs.bullet} `))}});function Kn(t){let{types:e,node:n}=t;return Array.isArray(e)&&e.includes(n.type)||n.type===e}const qn=s.YY.create({name:"trailingNode",addOptions:()=>({node:"paragraph",notAfter:["paragraph"]}),addProseMirrorPlugins(){const t=new l.hs(this.name),e=Object.entries(this.editor.schema.nodes).map((t=>{let[,e]=t;return e})).filter((t=>this.options.notAfter.includes(t.name)));return[new l.k_({key:t,appendTransaction:(e,n,i)=>{const{doc:o,tr:r,schema:a}=i,s=t.getState(i),l=o.content.size,c=a.nodes[this.options.node];if(s)return r.insert(l,c.create())},state:{init:(t,n)=>!Kn({node:n.tr.doc.lastChild,types:e}),apply:(t,n)=>{if(!t.docChanged)return n;return!Kn({node:t.doc.lastChild,types:e})}}})]}});var Yn=i(412),Xn=i(84460);const Qn=["http:","https:","mailto:","tel:"],Jn=Xn.Ay.extend({addOptions(){return{...this.parent?.(),relativePath:null}},addAttributes:()=>({href:{default:null},title:{default:null}}),inclusive:!1,parseHTML:[{tag:"a[href]",getAttrs:t=>({href:Ye(t),title:t.getAttribute("title")})}],renderHTML(t){const{mark:e}=t,n=new URL(e.attrs.href,window.location),i=Qn.includes(n.protocol)?qe(e,this.options.relativePath):"#";return["a",{...e.attrs,href:i,"data-md-href":e.attrs.href,rel:"noopener noreferrer nofollow"},0]},addProseMirrorPlugins(){return[...this.parent().filter((t=>{let{key:e}=t;return!e.startsWith("handleClickLink")&&!e.startsWith("textHandleClickLink")})),new l.k_({key:An,props:{handleDOMEvents:{auxclick:(t,e)=>{if(e.target.closest("a")&&1===e.button&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey){e.preventDefault(),e.stopImmediatePropagation();const t=e.target.closest("a");window.open(t.href,"_blank")}},paste:(t,e)=>{e.target.closest("a")&&(e.stopPropagation(),e.preventDefault(),e.stopImmediatePropagation())},click:(t,e)=>{const n=e.target.closest("a");if(0===e.button&&n){if(n.closest('svg[id^="mermaid-view"]'))return!1;e.preventDefault(),Xe(n.attributes.href?.value)?location.href=n.attributes.href.value:(e.ctrlKey||e.metaKey)&&window.open(n.href,"_blank")}}}}})]}}),Zn=Jn;const ti=i(56790).Ay.extend({parseHTML:()=>[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",getAttrs:t=>"line-through"===t}],renderHTML:()=>["s",0],toMarkdown:{open:"~~",close:"~~",mixable:!0,expelEnclosingWhitespace:!0}});var ei=i(18049);const ni=ei.yN.extend({name:"strong",addInputRules(){return[(0,s.OX)({find:ei.Mk,type:this.type})]},addPasteRules(){return[(0,s.Zc)({find:ei.TU,type:this.type})]}});const ii=i(37594).A.extend({parseHTML:()=>[{tag:"u"},{style:"text-decoration",getAttrs:t=>"underline"===t}],renderHTML:()=>["u",0],toMarkdown:{open:"__",close:"__",mixable:!0,expelEnclosingWhitespace:!0},addInputRules(){return[(0,s.OX)({find:ei.o0,type:this.type})]},addPasteRules(){return[(0,s.Zc)({find:ei.D4,type:this.type})]}}),oi=Yn.Ay.extend({name:"em"});w.l.registerAlias("plaintext","mermaid");const ri=s.YY.create({name:"RichText",addOptions:()=>({editing:!0,extensions:[],component:null,relativePath:null,isEmbedded:!1}),addExtensions(){const t=[this.options.editing?v.A:null,ft.A,b.A,$n,Xt,le,ni,oi,ti,k.Ay,q.A,Y.Ay,ht.configure({lowlight:w.l,defaultLanguage:"plaintext"}),_,ce.A,yn.Ay,pn.A,this.options.editing?Ut:Vn,Fn,Wn,K,Un.configure({isEmbedded:this.options.isEmbedded}),ii,Be,Ee,gt.A,Yt.A,Se,qt,bn,A.configure({suggestion:(0,zt.A)({listComponent:Kt,items:t=>{let{query:e}=t;return(0,Z.Fo)(e)},command:t=>{let{editor:e,range:n,props:i}=t;e.chain().focus().insertContentAt(n,i.native+" ").run()}})}),Ge,Zn.configure({openOnClick:!0,validate:t=>/^https?:\/\//.test(t),relativePath:this.options.relativePath}),un,this.options.editing?Dn.A.configure({emptyNodeClass:"is-empty",placeholder:(0,Vt.Tl)("text","Add notes, lists or links …"),showOnlyWhenEditable:!0}):null,qn],e=this.options.extensions.map((t=>t.name));return[...t.filter((t=>t&&!e.includes(t.name))),...this.options.extensions]}})},87305:(t,e,n)=>{n.d(e,{A:()=>a,H:()=>o});var i=n(34602);const o=["info","warn","error","success"],r=t=>(e,n,i,o,r)=>{const a=e[n];return 1===a.nesting&&(a.attrSet("data-callout",t),a.attrJoin("class",`callout callout-${t}`)),r.renderToken(e,n,i,o,r)},a=t=>(o.forEach((e=>{t.use(i.A,e,{render:r(e)})})),t)},32931:(t,e,n)=>{n.d(e,{A:()=>w});var i=n(42922),o=n.n(i),r=n(40779),a=n(47036),s=n.n(a);function l(t,e){return t.attrGet("class")?.split(" ").includes(e)||!1}function c(t,e,n){const i=new n("bullet_list_close","ul",-1);i.block=!0;const o=new n("bullet_list_open","ul",1);o.attrSet("class","contains-task-list"),o.block=!0,o.markup=t[e].markup,t.splice(e,0,i,o)}function d(t,e,n){const i=t[e].level+1;for(let o=e+1;o<t.length;o++){const e=t[o];if(e.level<i)return-1;if(e.level===i&&n(t[o]))return o}return-1}var A=n(87305);function u(t,e){const[n,i,o]=t.slice(e-1,e+2);return"paragraph_open"===n?.type&&"inline"===i.type&&i.children&&3===i.children.length&&"link_open"===i.children[0].type&&"preview"===i.children[0].attrGet("title")&&"text"===i.children[1].type&&"link_close"===i.children[2].type&&"paragraph_close"===o.type}function p(t,e){t.splice(e+1,1),t.splice(e-1,1)}var m=n(22534),h=n.n(m),f=n(21231),g=n.n(f);var C=n(17534),v=n.n(C),b=n(53785),y=n(49963);const x=o()("commonmark",{html:!1,breaks:!1}).enable("strikethrough").enable("table").use(r.A,{enable:!0,labelAfter:!0}).use(v(),(t=>{})).use((function(t){t.core.ruler.after("task-lists","split-mixed-task-lists",(t=>{const e=t.tokens;for(let n=0;n<e.length;n++){const i=e[n];if(!l(i,"contains-task-list"))continue;const o=l(e[n+1],"task-list-item");o||(i.attrs.splice(i.attrIndex("class")),0===i.attrs.length&&(i.attrs=null));const r=d(e,n,(t=>1===t.nesting&&l(t,"task-list-item")!==o));r>n&&c(e,r,t.Token)}return!1}))})).use((function(t){t.inline.ruler2.after("emphasis","underline",(t=>{const e=t.tokens;for(let t=e.length-1;t>0;t--){const n=e[t];"__"===n.markup&&("strong_open"===n.type&&(e[t].tag="u",e[t].type="u_open"),"strong_close"===n.type&&(e[t].tag="u",e[t].type="u_close"))}return!1}))})).use((function(t){t.inline.ruler.at("newline",((t,e)=>{const n=h()(t,e);return n&&t.tokens.length&&"hardbreak"===t.tokens[t.tokens.length-1].type&&t.tokens[t.tokens.length-1].attrSet("syntax","  "),n})),t.inline.ruler.at("escape",((t,e)=>{const n=g()(t,e);return n&&t.tokens.length&&"hardbreak"===t.tokens[t.tokens.length-1].type&&t.tokens[t.tokens.length-1].attrSet("syntax","\\"),n})),t.inline.ruler.after("html_inline","html_breaks",(t=>{const e=t.src.slice(t.pos).match(/^\s*<br\s*\/?>/);if(e){return t.push("hardbreak","br",0).attrPush(["syntax","html"]),t.pos+=e[0].length,!0}return!1})),t.renderer.rules.hardbreak=(t,e,n)=>`<br data-syntax="${t[e].attrGet("syntax")}" ${n.xhtmlOut?"/":""}>`})).use(A.A).use((t=>{t.core.ruler.before("linkify","link_previews",(function(t){let{tokens:e}=t;for(let t=1,n=e.length;t<n-1;++t)u(e,t)&&p(e,t)}))})).use((function(t){const e=/(\n(?<linestart>[#\-*+>])|(?<special>[`*\\~[\]]+))/;t.core.ruler.before("text_join","tag-markdown-syntax",(t=>{const n=new t.Token("keep_md_open","span",1);n.attrSet("class","keep-md");const i=new t.Token("keep_md_close","span",-1);for(let o=0;o<t.tokens.length;o++){const r=t.tokens[o];if("inline"===r.type)for(let t=0;t<r.children.length;t++){const o=r.children[t];if("text"===o.type){const a=e.exec(o.content);if(a){const e=a.groups.linestart?a.index+1:a.index,s=e+(a.groups.linestart??a.groups.special).length;r.children.splice(t,1,Object.assign({},o,{content:o.content.slice(0,e)}),Object.assign({},n),Object.assign({},o,{content:o.content.slice(e,s)}),Object.assign({},i),Object.assign({},o,{content:o.content.slice(s)})),t+=3}}}}return!1}))})).use(s()).use(b.A);x.renderer.rules.front_matter=(t,e,n)=>`<pre id="frontmatter"><code>${(0,y.escapeHtml)(t[e].meta)}</code></pre>`,x.renderer.rules.bullet_list_open=(t,e,n)=>(t[e].attrs=[...t[e].attrs||[],["data-bullet",t[e].markup]],x.renderer.renderToken(t,e,n));const w=x},11441:(t,e,n)=>{n.d(e,{A:()=>o});var i=n(72150);const o={data:()=>({$store:i.default}),beforeMount(){void 0===this.$store?this.$store=i.default:this.$store.hasModule("text")||this.$store.registerModule("text",i.M)}}},36841:(t,e,n)=>{n.d(e,{A:()=>s});var i=n(71354),o=n.n(i),r=n(76314),a=n.n(r)()(o());a.push([t.id,".text-menubar button.entry-action__button,.v-popper__inner button.entry-action__button{height:44px;margin:0;border:0;position:relative;background-color:rgba(0,0,0,0);vertical-align:top;box-shadow:none;padding:0}.text-menubar button.entry-action__button p,.v-popper__inner button.entry-action__button p{padding:0}.text-menubar button.entry-action__button:is(li.entry-action-item button),.v-popper__inner button.entry-action__button:is(li.entry-action-item button){padding:0 .5em 0 0}.text-menubar button.entry-action__button:not(li.entry-action-item button),.v-popper__inner button.entry-action__button:not(li.entry-action-item button){width:44px}.text-menubar button.entry-action__button:hover,.text-menubar button.entry-action__button:focus,.text-menubar button.entry-action__button:active,.v-popper__inner button.entry-action__button:hover,.v-popper__inner button.entry-action__button:focus,.v-popper__inner button.entry-action__button:active{background-color:var(--color-background-dark)}.text-menubar button.entry-action__button:hover:not(:disabled),.text-menubar button.entry-action__button:focus:not(:disabled),.text-menubar button.entry-action__button:active:not(:disabled),.v-popper__inner button.entry-action__button:hover:not(:disabled),.v-popper__inner button.entry-action__button:focus:not(:disabled),.v-popper__inner button.entry-action__button:active:not(:disabled){box-shadow:var(--color-primary-element)}.text-menubar button.entry-action__button:hover,.text-menubar button.entry-action__button:focus,.v-popper__inner button.entry-action__button:hover,.v-popper__inner button.entry-action__button:focus{opacity:1}.text-menubar button.entry-action__button:focus-visible,.v-popper__inner button.entry-action__button:focus-visible{box-shadow:var(--color-primary-element)}.text-menubar .button-vue,.v-popper__inner .button-vue{margin-right:2px}@media only screen and (max-width: 767px){.text-menubar .button-vue,.v-popper__inner .button-vue{margin-right:0}}.text-menubar .action-item__menutoggle.action-item__menutoggle--with-icon-slot,.v-popper__inner .action-item__menutoggle.action-item__menutoggle--with-icon-slot{opacity:1}","",{version:3,sources:["webpack://./src/components/Menu/ActionEntry.scss"],names:[],mappings:"AACC,uFACC,WAAA,CACA,QAAA,CACA,QAAA,CAEA,iBAAA,CACA,8BAAA,CACA,kBAAA,CACA,eAAA,CACA,SAAA,CAEA,2FACC,SAAA,CAGD,uJACC,kBAAA,CAGD,yJACC,UAAA,CAGD,2SAGC,6CAAA,CACA,qYACC,uCAAA,CAIF,sMAEC,SAAA,CAED,mHACC,uCAAA,CAKF,uDACC,gBAAA,CAGD,0CACC,uDACC,cAAA,CAAA,CAIF,iKACC,SAAA",sourcesContent:[".text-menubar, .v-popper__inner {\n\tbutton.entry-action__button {\n\t\theight: 44px;\n\t\tmargin: 0;\n\t\tborder: 0;\n\t\t// opacity: 0.5;\n\t\tposition: relative;\n\t\tbackground-color: transparent;\n\t\tvertical-align: top;\n\t\tbox-shadow: none;\n\t\tpadding: 0;\n\n\t\tp {\n\t\t\tpadding: 0;\n\t\t}\n\n\t\t&:is(li.entry-action-item button) {\n\t\t\tpadding: 0 0.5em 0 0;\n\t\t}\n\n\t\t&:not(li.entry-action-item button) {\n\t\t\twidth: 44px;\n\t\t}\n\n\t\t&:hover,\n\t\t&:focus,\n\t\t&:active {\n\t\t\tbackground-color: var(--color-background-dark);\n\t\t\t&:not(:disabled) {\n\t\t\t\tbox-shadow: var(--color-primary-element);\n\t\t\t}\n\t\t}\n\n\t\t&:hover,\n\t\t&:focus {\n\t\t\topacity: 1;\n\t\t}\n\t\t&:focus-visible {\n\t\t\tbox-shadow: var(--color-primary-element);\n\t\t}\n\n\t}\n\n\t.button-vue {\n\t\tmargin-right: 2px;\n\t}\n\n\t@media only screen and (max-width: 767px) {\n\t\t.button-vue {\n\t\t\tmargin-right: 0;\n\t\t}\n\t}\n\n\t.action-item__menutoggle.action-item__menutoggle--with-icon-slot {\n\t\topacity: 1;\n\t}\n}\n"],sourceRoot:""}]);const s=a},99938:(t,e,n)=>{n.d(e,{A:()=>s});var i=n(71354),o=n.n(i),r=n(76314),a=n.n(r)()(o());a.push([t.id,".editor--outline[data-v-2e01a79b]{width:300px;padding:0 10px 10px 10px;position:fixed;overflow:auto;max-height:calc(100% - 204px)}.editor--outline-mobile[data-v-2e01a79b]{border-radius:var(--border-radius-large);box-shadow:0 1px 10px var(--color-box-shadow);background-color:var(--color-main-background-translucent);z-index:1}.editor--outline__header[data-v-2e01a79b]{margin:0;position:sticky;top:0;z-index:1;background-color:var(--color-main-background);padding:.6em .6em .6em 0;display:flex;align-items:center}.editor--outline__header h2[data-v-2e01a79b]{font-size:1rem;line-height:1.1rem;flex-grow:1;padding:0;margin:0}","",{version:3,sources:["webpack://./src/components/Editor/EditorOutline.vue"],names:[],mappings:"AACA,kCACC,WAAA,CACA,wBAAA,CACA,cAAA,CACA,aAAA,CAEA,6BAAA,CAEA,yCACC,wCAAA,CACA,6CAAA,CACA,yDAAA,CACA,SAAA,CAGD,0CACC,QAAA,CACA,eAAA,CACA,KAAA,CACA,SAAA,CACA,6CAAA,CACA,wBAAA,CACA,YAAA,CACA,kBAAA,CAEA,6CACC,cAAA,CACA,kBAAA,CACA,WAAA,CACA,SAAA,CACA,QAAA",sourcesContent:["\n.editor--outline {\n\twidth:  300px;\n\tpadding: 0 10px 10px 10px;\n\tposition: fixed;\n\toverflow: auto;\n\t// 204px = 50px nc header + 60px collectives titlebar + 44px menubar + 50px bottom margin\n\tmax-height: calc(100% - 204px);\n\n\t&-mobile {\n\t\tborder-radius: var(--border-radius-large);\n\t\tbox-shadow: 0 1px 10px var(--color-box-shadow);\n\t\tbackground-color: var(--color-main-background-translucent);\n\t\tz-index: 1;\n\t}\n\n\t&__header {\n\t\tmargin: 0;\n\t\tposition: sticky;\n\t\ttop: 0;\n\t\tz-index: 1;\n\t\tbackground-color: var(--color-main-background);\n\t\tpadding: 0.6em 0.6em 0.6em 0;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\n\t\th2 {\n\t\t\tfont-size: 1rem;\n\t\t\tline-height: 1.1rem;\n\t\t\tflex-grow: 1;\n\t\t\tpadding: 0;\n\t\t\tmargin: 0;\n\t\t}\n\t}\n}\n"],sourceRoot:""}]);const s=a},79600:(t,e,n)=>{n.d(e,{A:()=>s});var i=n(71354),o=n.n(i),r=n(76314),a=n.n(r)()(o());a.push([t.id,"div[contenteditable=false][data-v-3eac6396]{padding:0;margin:0}.preview-options-container[data-v-3eac6396]{position:absolute;width:0 !important;left:-44px;top:50%;transform:translate(0, -50%)}","",{version:3,sources:["webpack://./src/components/Editor/PreviewOptions.vue"],names:[],mappings:"AACA,4CACC,SAAA,CACA,QAAA,CAGD,4CACC,iBAAA,CACA,kBAAA,CACA,UAAA,CACA,OAAA,CACA,4BAAA",sourcesContent:["\ndiv[contenteditable=false] {\n\tpadding: 0;\n\tmargin: 0;\n}\n\n.preview-options-container {\n\tposition: absolute;\n\twidth: 0 !important;\n\tleft: -44px;\n\ttop: 50%;\n\ttransform: translate(0, -50%);\n}\n\n"],sourceRoot:""}]);const s=a},96981:(t,e,n)=>{n.d(e,{A:()=>s});var i=n(71354),o=n.n(i),r=n(76314),a=n.n(r)()(o());a.push([t.id,".--initial-render .editor--toc__item{--initial-padding-left: 0;animation:initialPadding 1.5s}.editor--toc{padding:0 10px;color:var(--color-main-text-maxcontrast);--animation-duration: 0.8s}.editor--toc h3{padding-left:.75rem}.editor--toc__list{width:100%;list-style:none;font-size:.9rem;padding:0;animation-name:fadeInLeft;animation-duration:var(--animation-duration)}.editor--toc__item{transform:translateX(var(--padding-left, 0rem));text-overflow:ellipsis;overflow:hidden;white-space:nowrap;animation:initialPadding calc(var(--animation-duration)*2);width:calc(100% - var(--padding-left))}.editor--toc__item a:hover{color:var(--color-primary-element-hover)}.editor--toc__item--1{--padding-left: 0rem;font-weight:600}.editor--toc__item--1:not(:nth-child(1)){margin-top:.5rem}.editor--toc__item--2{--padding-left: 1rem}.editor--toc__item--3{--padding-left: 2rem}.editor--toc__item--4{--padding-left: 3rem}.editor--toc__item--5{--padding-left: 4rem}.editor--toc__item--6{--padding-left: 5rem}.editor--toc__item--previous-1{--initial-padding-left: 0rem }.editor--toc__item--previous-2{--initial-padding-left: 1rem }.editor--toc__item--previous-3{--initial-padding-left: 2rem }.editor--toc__item--previous-4{--initial-padding-left: 3rem }.editor--toc__item--previous-5{--initial-padding-left: 4rem }.editor--toc__item--previous-6{--initial-padding-left: 5rem }@keyframes initialPadding{from{transform:translateX(var(--initial-padding-left, initial))}to{transform:translateX(var(--padding-left, 0rem))}}","",{version:3,sources:["webpack://./src/components/Editor/TableOfContents.vue"],names:[],mappings:"AAGE,qCACC,yBAAA,CACA,6BAAA,CAKH,aACC,cAAA,CACA,wCAAA,CACA,0BAAA,CAEA,gBACC,mBAAA,CAGD,mBACC,UAAA,CACA,eAAA,CACA,eAAA,CACA,SAAA,CAEA,yBAAA,CACA,4CAAA,CAGD,mBACC,+CAAA,CACA,sBAAA,CACA,eAAA,CACA,kBAAA,CACA,0DAAA,CACA,sCAAA,CAEA,2BACC,wCAAA,CAGD,sBACC,oBAAA,CACA,eAAA,CACA,yCACC,gBAAA,CAIF,sBACC,oBAAA,CAGD,sBACC,oBAAA,CAGD,sBACC,oBAAA,CAGD,sBACC,oBAAA,CAGD,sBACC,oBAAA,CAGD,+BACC,6BAAA,CAGD,+BACC,6BAAA,CAGD,+BACC,6BAAA,CAGD,+BACC,6BAAA,CAGD,+BACC,6BAAA,CAGD,+BACC,6BAAA,CAKH,0BACE,KACD,0DAAA,CAGC,GACD,+CAAA,CAAA",sourcesContent:["\n.--initial-render {\n\t.editor--toc {\n\t\t&__item {\n\t\t\t--initial-padding-left: 0;\n\t\t\tanimation: initialPadding 1.5s;\n\t\t}\n\t}\n}\n\n.editor--toc {\n\tpadding: 0 10px;\n\tcolor: var(--color-main-text-maxcontrast);\n\t--animation-duration: 0.8s;\n\n\th3 {\n\t\tpadding-left: 0.75rem;\n\t}\n\n\t&__list {\n\t\twidth: 100%;\n\t\tlist-style: none;\n\t\tfont-size: 0.9rem;\n\t\tpadding: 0;\n\n\t\tanimation-name: fadeInLeft;\n\t\tanimation-duration: var(--animation-duration);\n\t}\n\n\t&__item {\n\t\ttransform: translateX(var(--padding-left, 0rem));\n\t\ttext-overflow: ellipsis;\n\t\toverflow: hidden;\n\t\twhite-space: nowrap;\n\t\tanimation: initialPadding calc(var(--animation-duration) * 2);\n\t\twidth: calc(100% - var(--padding-left));\n\n\t\ta:hover {\n\t\t\tcolor: var(--color-primary-element-hover);\n\t\t}\n\n\t\t&--1 {\n\t\t\t--padding-left: 0rem;\n\t\t\tfont-weight: 600;\n\t\t\t&:not(:nth-child(1)) {\n\t\t\t\tmargin-top: 0.5rem;\n\t\t\t}\n\t\t}\n\n\t\t&--2 {\n\t\t\t--padding-left: 1rem;\n\t\t}\n\n\t\t&--3 {\n\t\t\t--padding-left: 2rem;\n\t\t}\n\n\t\t&--4 {\n\t\t\t--padding-left: 3rem;\n\t\t}\n\n\t\t&--5 {\n\t\t\t--padding-left: 4rem;\n\t\t}\n\n\t\t&--6 {\n\t\t\t--padding-left: 5rem;\n\t\t}\n\n\t\t&--previous-1 {\n\t\t\t--initial-padding-left: 0rem\n\t\t}\n\n\t\t&--previous-2 {\n\t\t\t--initial-padding-left: 1rem\n\t\t}\n\n\t\t&--previous-3 {\n\t\t\t--initial-padding-left: 2rem\n\t\t}\n\n\t\t&--previous-4 {\n\t\t\t--initial-padding-left: 3rem\n\t\t}\n\n\t\t&--previous-5 {\n\t\t\t--initial-padding-left: 4rem\n\t\t}\n\n\t\t&--previous-6 {\n\t\t\t--initial-padding-left: 5rem\n\t\t}\n\t}\n}\n\n@keyframes initialPadding {\n  from {\n\ttransform: translateX(var(--initial-padding-left, initial));\n  }\n\n  to {\n\ttransform: translateX(var(--padding-left, 0rem));\n  }\n}\n\n"],sourceRoot:""}]);const s=a},54887:(t,e,n)=>{n.d(e,{A:()=>s});var i=n(71354),o=n.n(i),r=n(76314),a=n.n(r)()(o());a.push([t.id,".modal__content[data-v-403f8ff2]{height:80vh;padding:0 50px;display:flex;justify-content:center}.modal__content img[data-v-403f8ff2]{width:100%;height:100%;object-fit:contain}","",{version:3,sources:["webpack://./src/components/ImageView/ShowImageModal.vue"],names:[],mappings:"AACA,iCACC,WAAA,CACA,cAAA,CACA,YAAA,CACA,sBAAA,CACA,qCACC,UAAA,CACA,WAAA,CACA,kBAAA",sourcesContent:["\n.modal__content {\n\theight: 80vh;\n\tpadding: 0 50px;\n\tdisplay: flex;\n\tjustify-content: center;\n\timg {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tobject-fit: contain;\n\t}\n}\n"],sourceRoot:""}]);const s=a},99011:(t,e,n)=>{n.d(e,{A:()=>s});var i=n(71354),o=n.n(i),r=n(76314),a=n.n(r)()(o());a.push([t.id,".link-view-bubble[data-v-fb46e0ea]{padding:4px;width:350px;background-color:var(--color-main-background);border-radius:var(--border-radius-large);filter:drop-shadow(0 1px 10px var(--color-box-shadow));box-sizing:initial !important}.link-view-bubble__header[data-v-fb46e0ea]{display:flex;justify-content:flex-end}.link-view-bubble__header .edit-buttons[data-v-fb46e0ea]{display:flex}.link-view-bubble__title[data-v-fb46e0ea]{align-self:center;padding-left:calc(var(--default-grid-baseline, 4px)*3);margin-right:auto;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-weight:bold}.link-view-bubble__reference-list[data-v-fb46e0ea]{padding:4px;padding-top:0}.link-view-bubble__reference-list[data-v-fb46e0ea] a.widget-default{margin:0;border:0;border-radius:unset}.link-view-bubble__reference-list[data-v-fb46e0ea] img.widget-default--image{border-radius:var(--border-radius-large)}.link-view-bubble__edit[data-v-fb46e0ea]{padding:4px;padding-top:0}.link-view-bubble__edit .input-field[data-v-fb46e0ea]{margin-bottom:12px}","",{version:3,sources:["webpack://./src/components/Link/LinkBubbleView.vue"],names:[],mappings:"AACA,mCACC,WAAA,CACA,WAAA,CACA,6CAAA,CACA,wCAAA,CACA,sDAAA,CACA,6BAAA,CAEA,2CACC,YAAA,CACA,wBAAA,CAEA,yDACC,YAAA,CAIF,0CACC,iBAAA,CACA,sDAAA,CACA,iBAAA,CAEA,eAAA,CACA,sBAAA,CACA,kBAAA,CACA,gBAAA,CAGD,mDACC,WAAA,CACA,aAAA,CAEA,oEACC,QAAA,CACA,QAAA,CACA,mBAAA,CAGD,6EACC,wCAAA,CAIF,yCACC,WAAA,CACA,aAAA,CAEA,sDACC,kBAAA",sourcesContent:["\n.link-view-bubble {\n\tpadding: 4px;\n\twidth: 350px;\n\tbackground-color: var(--color-main-background);\n\tborder-radius: var(--border-radius-large);\n\tfilter: drop-shadow(0 1px 10px var(--color-box-shadow));\n\tbox-sizing: initial !important;\n\n\t&__header {\n\t\tdisplay: flex;\n\t\tjustify-content: flex-end;\n\n\t\t.edit-buttons {\n\t\t\tdisplay: flex;\n\t\t}\n\t}\n\n\t&__title {\n\t\talign-self: center;\n\t\tpadding-left: calc(var(--default-grid-baseline, 4px) * 3);\n\t\tmargin-right: auto;\n\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\twhite-space: nowrap;\n\t\tfont-weight: bold;\n\t}\n\n\t&__reference-list {\n\t\tpadding: 4px;\n\t\tpadding-top: 0;\n\n\t\t:deep(a.widget-default) {\n\t\t\tmargin: 0;\n\t\t\tborder: 0;\n\t\t\tborder-radius: unset;\n\t\t}\n\n\t\t:deep(img.widget-default--image) {\n\t\t\tborder-radius: var(--border-radius-large);\n\t\t}\n\t}\n\n\t&__edit {\n\t\tpadding: 4px;\n\t\tpadding-top: 0;\n\n\t\t.input-field {\n\t\t\tmargin-bottom: 12px;\n\t\t}\n\t}\n}\n"],sourceRoot:""}]);const s=a},13201:(t,e,n)=>{n.d(e,{A:()=>s});var i=n(71354),o=n.n(i),r=n(76314),a=n.n(r)()(o());a.push([t.id,".emoji-list[data-v-74f9a54a]{border-radius:var(--border-radius);background-color:var(--color-main-background);box-shadow:0 1px 5px var(--color-box-shadow);overflow:auto;min-width:200px;max-width:200px;padding:4px;max-height:195.5px;margin:5px 0}.emoji-list__item[data-v-74f9a54a]{border-radius:8px;padding:4px 8px;margin-bottom:4px;opacity:.8;cursor:pointer;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.emoji-list__item[data-v-74f9a54a]:last-child{margin-bottom:0}.emoji-list__item__emoji[data-v-74f9a54a]{padding-right:8px}.emoji-list__item.is-selected[data-v-74f9a54a],.emoji-list__item[data-v-74f9a54a]:focus,.emoji-list__item[data-v-74f9a54a]:hover{opacity:1;background-color:var(--color-primary-element-light)}","",{version:3,sources:["webpack://./src/components/Suggestion/Emoji/EmojiList.vue"],names:[],mappings:"AACA,6BACC,kCAAA,CACA,6CAAA,CACA,4CAAA,CACA,aAAA,CAEA,eAAA,CACA,eAAA,CACA,WAAA,CAEA,kBAAA,CACA,YAAA,CAEA,mCACC,iBAAA,CACA,eAAA,CACA,iBAAA,CACA,UAAA,CACA,cAAA,CAGA,kBAAA,CACA,eAAA,CACA,sBAAA,CAEA,8CACC,eAAA,CAGD,0CACC,iBAAA,CAGD,iIAGC,SAAA,CACA,mDAAA",sourcesContent:["\n.emoji-list {\n\tborder-radius: var(--border-radius);\n\tbackground-color: var(--color-main-background);\n\tbox-shadow: 0 1px 5px var(--color-box-shadow);\n\toverflow: auto;\n\n\tmin-width: 200px;\n\tmax-width: 200px;\n\tpadding: 4px;\n\t// Show maximum 5 entries and a half to show scroll\n\tmax-height: 35.5px * 5 + 18px;\n\tmargin: 5px 0;\n\n\t&__item {\n\t\tborder-radius: 8px;\n\t\tpadding: 4px 8px;\n\t\tmargin-bottom: 4px;\n\t\topacity: 0.8;\n\t\tcursor: pointer;\n\n\t\t// Take care of long names\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\n\t\t&:last-child {\n\t\t\tmargin-bottom: 0;\n\t\t}\n\n\t\t&__emoji {\n\t\t\tpadding-right: 8px;\n\t\t}\n\n\t\t&.is-selected,\n\t\t&:focus,\n\t\t&:hover {\n\t\t\topacity: 1;\n\t\t\tbackground-color: var(--color-primary-element-light);\n\t\t}\n\t}\n}\n"],sourceRoot:""}]);const s=a},1778:(t,e,n)=>{n.d(e,{A:()=>s});var i=n(71354),o=n.n(i),r=n(76314),a=n.n(r)()(o());a.push([t.id,".link-picker__item[data-v-11ad0ffc]{display:flex;align-items:center}.link-picker__item>div[data-v-11ad0ffc]{padding:4px;padding-left:8px;overflow:hidden;text-overflow:ellipsis}.link-picker__item img[data-v-11ad0ffc]{width:20px;height:20px;filter:var(--background-invert-if-dark)}","",{version:3,sources:["webpack://./src/components/Suggestion/LinkPicker/LinkPickerList.vue"],names:[],mappings:"AACA,oCACC,YAAA,CACA,kBAAA,CAEA,wCACC,WAAA,CACA,gBAAA,CACA,eAAA,CACA,sBAAA,CAGD,wCACC,UAAA,CACA,WAAA,CACA,uCAAA",sourcesContent:["\n.link-picker__item {\n\tdisplay: flex;\n\talign-items: center;\n\n\t& > div {\n\t\tpadding: 4px;\n\t\tpadding-left: 8px;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t}\n\n\timg {\n\t\twidth: 20px;\n\t\theight: 20px;\n\t\tfilter: var(--background-invert-if-dark);\n\t}\n}\n"],sourceRoot:""}]);const s=a},35430:(t,e,n)=>{n.d(e,{A:()=>s});var i=n(71354),o=n.n(i),r=n(76314),a=n.n(r)()(o());a.push([t.id,".suggestion-list[data-v-721c3a10]{border-radius:var(--border-radius);background-color:var(--color-main-background);box-shadow:0 1px 5px var(--color-box-shadow);overflow:auto;min-width:200px;max-width:400px;width:80vw;padding:4px;max-height:195.5px;margin:5px 0}.suggestion-list__group[data-v-721c3a10]{font-weight:bold;color:var(--color-primary-element);font-size:var(--default-font-size);line-height:44px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;opacity:.7;box-shadow:none !important;flex-shrink:0;padding-left:8px}.suggestion-list__item[data-v-721c3a10]{border-radius:8px;padding:4px 8px;margin-bottom:4px;opacity:.8;cursor:pointer;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.suggestion-list__item[data-v-721c3a10]:last-child{margin-bottom:0}.suggestion-list__item__emoji[data-v-721c3a10]{padding-right:8px}.suggestion-list__item.is-selected[data-v-721c3a10],.suggestion-list__item[data-v-721c3a10]:focus,.suggestion-list__item[data-v-721c3a10]:hover{opacity:1;background-color:var(--color-primary-element-light)}","",{version:3,sources:["webpack://./src/components/Suggestion/SuggestionListWrapper.vue"],names:[],mappings:"AACA,kCACC,kCAAA,CACA,6CAAA,CACA,4CAAA,CACA,aAAA,CAEA,eAAA,CACA,eAAA,CACA,UAAA,CACA,WAAA,CAEA,kBAAA,CACA,YAAA,CAEA,yCACC,gBAAA,CACA,kCAAA,CACA,kCAAA,CACA,gBAAA,CACA,kBAAA,CACA,eAAA,CACA,sBAAA,CACA,UAAA,CACA,0BAAA,CACA,aAAA,CACA,gBAAA,CAGD,wCACC,iBAAA,CACA,eAAA,CACA,iBAAA,CACA,UAAA,CACA,cAAA,CAGA,kBAAA,CACA,eAAA,CACA,sBAAA,CAEA,mDACC,eAAA,CAGD,+CACC,iBAAA,CAGD,gJAGC,SAAA,CACA,mDAAA",sourcesContent:["\n.suggestion-list {\n\tborder-radius: var(--border-radius);\n\tbackground-color: var(--color-main-background);\n\tbox-shadow: 0 1px 5px var(--color-box-shadow);\n\toverflow: auto;\n\n\tmin-width: 200px;\n\tmax-width: 400px;\n\twidth: 80vw;\n\tpadding: 4px;\n\t// Show maximum 5 entries and a half to show scroll\n\tmax-height: 35.5px * 5 + 18px;\n\tmargin: 5px 0;\n\n\t&__group {\n\t\tfont-weight: bold;\n\t\tcolor: var(--color-primary-element);\n\t\tfont-size: var(--default-font-size);\n\t\tline-height: 44px;\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\topacity: .7;\n\t\tbox-shadow: none !important;\n\t\tflex-shrink: 0;\n\t\tpadding-left: 8px;\n\t}\n\n\t&__item {\n\t\tborder-radius: 8px;\n\t\tpadding: 4px 8px;\n\t\tmargin-bottom: 4px;\n\t\topacity: 0.8;\n\t\tcursor: pointer;\n\n\t\t// Take care of long names\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\n\t\t&:last-child {\n\t\t\tmargin-bottom: 0;\n\t\t}\n\n\t\t&__emoji {\n\t\t\tpadding-right: 8px;\n\t\t}\n\n\t\t&.is-selected,\n\t\t&:focus,\n\t\t&:hover {\n\t\t\topacity: 1;\n\t\t\tbackground-color: var(--color-primary-element-light);\n\t\t}\n\t}\n}\n"],sourceRoot:""}]);const s=a},1798:(t,e,n)=>{n.d(e,{A:()=>s});var i=n(71354),o=n.n(i),r=n(76314),a=n.n(r)()(o());a.push([t.id,".callout[data-v-4387ae9f]{background-color:var(--callout-background, var(--color-background-hover));border-left-color:var(--callout-border, var(--color-primary-element));border-radius:var(--border-radius);padding:1em;padding-left:.5em;border-left-width:.3em;border-left-style:solid;position:relative;margin-bottom:.5em;display:flex;align-items:center;justify-content:flex-start}.callout+*[data-v-4387ae9f]{margin-top:.5em}.callout .callout__content[data-v-4387ae9f]{margin-left:1em}.callout .callout__content[data-v-4387ae9f] p:last-child{margin-bottom:0}.callout .callout__icon[data-v-4387ae9f],.callout .callout__icon[data-v-4387ae9f] svg{color:var(--callout-border)}.callout[data-v-4387ae9f],.callout--info[data-v-4387ae9f]{--callout-border: var(--color-info, #006aa3)}.callout--warn[data-v-4387ae9f]{--callout-border: var(--color-warning)}.callout--error[data-v-4387ae9f]{--callout-border: var(--color-error)}.callout--success[data-v-4387ae9f]{--callout-border: var(--color-success)}","",{version:3,sources:["webpack://./src/nodes/Callout.vue"],names:[],mappings:"AACA,0BACC,yEAAA,CACA,qEAAA,CACA,kCAAA,CACA,WAAA,CACA,iBAAA,CACA,sBAAA,CACA,uBAAA,CACA,iBAAA,CACA,kBAAA,CAEA,YAAA,CACA,kBAAA,CACA,0BAAA,CAEA,4BACC,eAAA,CAGD,4CACC,eAAA,CAEC,yDACC,eAAA,CAMF,sFACC,2BAAA,CAKF,0DACC,4CAAA,CAID,gCACC,sCAAA,CAID,iCACC,oCAAA,CAID,mCACC,sCAAA",sourcesContent:["\n.callout {\n\tbackground-color: var(--callout-background, var(--color-background-hover));\n\tborder-left-color: var(--callout-border, var(--color-primary-element));\n\tborder-radius: var(--border-radius);\n\tpadding: 1em;\n\tpadding-left: 0.5em;\n\tborder-left-width: 0.3em;\n\tborder-left-style: solid;\n\tposition: relative;\n\tmargin-bottom: 0.5em;\n\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: flex-start;\n\n\t&+ * {\n\t\tmargin-top: 0.5em;\n\t}\n\n\t.callout__content {\n\t\tmargin-left: 1em;\n\t\t&:deep(p) {\n\t\t\t&:last-child {\n\t\t\t\tmargin-bottom: 0;\n\t\t\t}\n\t\t}\n\t}\n\n\t.callout__icon {\n\t\t&, :deep(svg) {\n\t\t\tcolor: var(--callout-border);\n\t\t}\n\t}\n\n\t// Info (default) variables\n\t&, &--info {\n\t\t--callout-border: var(--color-info, #006aa3);\n\t}\n\n\t// Warn variables\n\t&--warn {\n\t\t--callout-border: var(--color-warning);\n\t}\n\n\t// Error variables\n\t&--error {\n\t\t--callout-border: var(--color-error);\n\t}\n\n\t// Success variables\n\t&--success {\n\t\t--callout-border: var(--color-success);\n\t}\n}\n"],sourceRoot:""}]);const s=a},87716:(t,e,n)=>{n.d(e,{A:()=>s});var i=n(71354),o=n.n(i),r=n(76314),a=n.n(r)()(o());a.push([t.id,".code-block[data-v-3451a47c]{background-color:var(--color-background-dark);border-radius:var(--border-radius)}.code-block-header[data-v-3451a47c]{display:flex;flex-direction:row;justify-content:space-between;align-items:stretch;position:absolute;right:12px;margin-top:4px}.split-view[data-v-3451a47c]{display:flex;flex-direction:row;justify-content:space-between;align-items:stretch;gap:12px}.split-view>*[data-v-3451a47c]{flex:1}.split-view__preview[data-v-3451a47c]{text-align:center}@media only screen and (max-width: 600px){.split-view[data-v-3451a47c]{flex-direction:column}}.view-switch[data-v-3451a47c]{display:flex;flex-direction:row}","",{version:3,sources:["webpack://./src/nodes/CodeBlockView.vue"],names:[],mappings:"AACA,6BACC,6CAAA,CACA,kCAAA,CAGD,oCACC,YAAA,CACA,kBAAA,CACA,6BAAA,CACA,mBAAA,CACA,iBAAA,CACA,UAAA,CACA,cAAA,CAGD,6BACC,YAAA,CACA,kBAAA,CACA,6BAAA,CACA,mBAAA,CACA,QAAA,CAEA,+BACC,MAAA,CAGD,sCACC,iBAAA,CAIF,0CACC,6BACC,qBAAA,CAAA,CAIF,8BACC,YAAA,CACA,kBAAA",sourcesContent:["\n.code-block {\n\tbackground-color: var(--color-background-dark);\n\tborder-radius: var(--border-radius);\n}\n\n.code-block-header {\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: space-between;\n\talign-items: stretch;\n\tposition: absolute;\n\tright: 12px;\n\tmargin-top: 4px;\n}\n\n.split-view {\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: space-between;\n\talign-items: stretch;\n\tgap: 12px;\n\n\t& > * {\n\t\tflex: 1;\n\t}\n\n\t&__preview {\n\t\ttext-align: center;\n\t}\n}\n\n@media only screen and (max-width: 600px) {\n\t.split-view {\n\t\tflex-direction: column;\n\t}\n}\n\n.view-switch {\n\tdisplay: flex;\n\tflex-direction: row;\n}\n"],sourceRoot:""}]);const s=a},5755:(t,e,n)=>{n.d(e,{A:()=>s});var i=n(71354),o=n.n(i),r=n(76314),a=n.n(r)()(o());a.push([t.id,".image[data-v-bcf16ce4]{margin:0;padding:0}.image[data-v-bcf16ce4],.image *[data-v-bcf16ce4]{-webkit-user-modify:read-only !important}.image__caption[data-v-bcf16ce4]{text-align:center;color:var(--color-text-lighter);display:flex;align-items:center;justify-content:center}.image__caption__wrapper[data-v-bcf16ce4]{position:relative}.image__caption__delete[data-v-bcf16ce4]{display:flex;flex-basis:20%;align-items:center;width:20px !important;height:20px;position:absolute;bottom:-1px;right:-3px}.image__caption__delete[data-v-bcf16ce4],.image__caption__delete svg[data-v-bcf16ce4]{cursor:pointer}.image__caption .image__caption__wrapper[data-v-bcf16ce4]{flex-basis:80%}.image__caption input[type=text][data-v-bcf16ce4]{width:85%;text-align:center;background-color:rgba(0,0,0,0);border:none !important;color:var(--color-text-maxcontrast) !important}.image__caption input[type=text][data-v-bcf16ce4]:focus{border:2px solid var(--color-border-dark) !important;color:var(--color-main-text) !important}.image__caption figcaption[data-v-bcf16ce4]{color:var(--color-text-maxcontrast) !important;max-width:80%;text-align:center;width:fit-content}.image__loading[data-v-bcf16ce4]{height:100px}.image__main[data-v-bcf16ce4]{max-height:calc(100vh - 50px - 50px)}.image__main--broken-icon[data-v-bcf16ce4],.image__error-message[data-v-bcf16ce4]{color:var(--color-text-maxcontrast)}.image__error-message[data-v-bcf16ce4]{display:block;text-align:center}.image__view[data-v-bcf16ce4]{text-align:center;position:relative}.image__view img[data-v-bcf16ce4]{max-width:100%}.image__view:hover input[type=text][data-v-bcf16ce4]{border:2px solid var(--color-border-dark) !important;color:var(--color-main-text) !important}.media[data-v-bcf16ce4]{display:flex;align-items:center;justify-content:left;padding-bottom:0}.media .media__wrapper[data-v-bcf16ce4]{display:flex;border:2px solid var(--color-border);border-radius:var(--border-radius-large);padding:8px}.media .media__wrapper img[data-v-bcf16ce4]{width:44px;height:44px}.media .media__wrapper .metadata[data-v-bcf16ce4]{margin-left:8px;display:flex;flex-direction:column;align-items:start}.media .media__wrapper .metadata span[data-v-bcf16ce4]{line-height:20px;font-weight:normal}.media .media__wrapper .metadata span.size[data-v-bcf16ce4]{color:var(--color-text-maxcontrast)}.media .buttons[data-v-bcf16ce4]{margin-left:8px}.fade-enter-active[data-v-bcf16ce4]{transition:opacity .3s ease-in-out}.fade-enter-to[data-v-bcf16ce4]{opacity:1}.fade-enter[data-v-bcf16ce4]{opacity:0}","",{version:3,sources:["webpack://./src/nodes/ImageView.vue"],names:[],mappings:"AACA,wBACC,QAAA,CACA,SAAA,CAEA,kDACC,wCAAA,CAIF,iCACC,iBAAA,CACA,+BAAA,CACA,YAAA,CACA,kBAAA,CACA,sBAAA,CACA,0CACC,iBAAA,CAED,yCACC,YAAA,CACA,cAAA,CACA,kBAAA,CACA,qBAAA,CACA,WAAA,CACA,iBAAA,CACA,WAAA,CACA,UAAA,CACA,sFACC,cAAA,CAGF,0DACC,cAAA,CAED,kDACC,SAAA,CACA,iBAAA,CACA,8BAAA,CACA,sBAAA,CACA,8CAAA,CAEA,wDACC,oDAAA,CACA,uCAAA,CAGF,4CACC,8CAAA,CACA,aAAA,CACA,iBAAA,CACA,iBAAA,CAIF,iCACC,YAAA,CAGD,8BACC,oCAAA,CAGD,kFACC,mCAAA,CAGD,uCACC,aAAA,CACA,iBAAA,CAGD,8BACC,iBAAA,CACA,iBAAA,CAEA,kCACC,cAAA,CAIA,qDACC,oDAAA,CACA,uCAAA,CAKH,wBACC,YAAA,CACA,kBAAA,CACA,oBAAA,CACA,gBAAA,CAEA,wCACC,YAAA,CACA,oCAAA,CACA,wCAAA,CACA,WAAA,CAEA,4CACC,UAAA,CACA,WAAA,CAGD,kDACC,eAAA,CACA,YAAA,CACA,qBAAA,CACA,iBAAA,CAEA,uDACC,gBAAA,CACA,kBAAA,CAEA,4DACC,mCAAA,CAKJ,iCACC,eAAA,CAIF,oCACC,kCAAA,CAGD,gCACC,SAAA,CAGD,6BACC,SAAA",sourcesContent:["\n.image {\n\tmargin: 0;\n\tpadding: 0;\n\n\t&, * {\n\t\t-webkit-user-modify: read-only !important;\n\t}\n}\n\n.image__caption {\n\ttext-align: center;\n\tcolor: var(--color-text-lighter);\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\t&__wrapper {\n\t\tposition: relative;\n\t}\n\t&__delete {\n\t\tdisplay: flex;\n\t\tflex-basis: 20%;\n\t\talign-items: center;\n\t\twidth: 20px !important;\n\t\theight: 20px;\n\t\tposition: absolute;\n\t\tbottom: -1px;\n\t\tright: -3px;\n\t\t&, svg {\n\t\t\tcursor: pointer;\n\t\t}\n\t}\n\t.image__caption__wrapper {\n\t\tflex-basis: 80%;\n\t}\n\tinput[type='text'] {\n\t\twidth: 85%;\n\t\ttext-align: center;\n\t\tbackground-color: transparent;\n\t\tborder: none !important;\n\t\tcolor: var(--color-text-maxcontrast) !important;\n\n\t\t&:focus {\n\t\t\tborder: 2px solid var(--color-border-dark) !important;\n\t\t\tcolor: var(--color-main-text) !important;\n\t\t}\n\t}\n\tfigcaption {\n\t\tcolor: var(--color-text-maxcontrast) !important;\n\t\tmax-width: 80%;\n\t\ttext-align: center;\n\t\twidth: fit-content;\n\t}\n}\n\n.image__loading {\n\theight: 100px;\n}\n\n.image__main {\n\tmax-height: calc(100vh - 50px - 50px);\n}\n\n.image__main--broken-icon, .image__error-message {\n\tcolor: var(--color-text-maxcontrast);\n}\n\n.image__error-message {\n\tdisplay: block;\n\ttext-align: center;\n}\n\n.image__view {\n\ttext-align: center;\n\tposition: relative;\n\n\timg {\n\t\tmax-width: 100%;\n\t}\n\n\t&:hover {\n\t\tinput[type='text'] {\n\t\t\tborder: 2px solid var(--color-border-dark) !important;\n\t\t\tcolor: var(--color-main-text) !important;\n\t\t}\n\t}\n}\n\n.media {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: left;\n\tpadding-bottom: 0;\n\n\t.media__wrapper {\n\t\tdisplay: flex;\n\t\tborder: 2px solid var(--color-border);\n\t\tborder-radius: var(--border-radius-large);\n\t\tpadding: 8px;\n\n\t\timg {\n\t\t\twidth: 44px;\n\t\t\theight: 44px;\n\t\t}\n\n\t\t.metadata {\n\t\t\tmargin-left: 8px;\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\talign-items: start;\n\n\t\t\tspan {\n\t\t\t\tline-height: 20px;\n\t\t\t\tfont-weight: normal;\n\n\t\t\t\t&.size {\n\t\t\t\t\tcolor: var(--color-text-maxcontrast);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t.buttons {\n\t\tmargin-left: 8px;\n\t}\n}\n\n.fade-enter-active {\n\ttransition: opacity .3s ease-in-out;\n}\n\n.fade-enter-to {\n\topacity: 1;\n}\n\n.fade-enter {\n\topacity: 0;\n}\n"],sourceRoot:""}]);const s=a},69230:(t,e,n)=>{n.d(e,{A:()=>s});var i=n(71354),o=n.n(i),r=n(76314),a=n.n(r)()(o());a.push([t.id,"[data-text-el=preview] [data-node-view-content][data-v-26ba0d31] a{display:none}.preview[data-v-26ba0d31]{position:relative}[data-v-26ba0d31] div.widgets--list a.widget-default{color:var(--color-main-text);padding:0;text-decoration:none;max-width:calc(100vw - 156px)}[data-v-26ba0d31] .widget-default--details{overflow:hidden}[data-v-26ba0d31] .widget-default--details p{margin-bottom:4px !important}[data-v-26ba0d31] .preview-options-container{top:unset;transform:unset;margin-top:calc(var(--default-grid-baseline, 4px)*3) !important}","",{version:3,sources:["webpack://./src/nodes/Preview.vue"],names:[],mappings:"AAGA,mEACC,YAAA,CAGD,0BACC,iBAAA,CAGD,qDACC,4BAAA,CACA,SAAA,CACA,oBAAA,CACA,6BAAA,CAGD,2CACC,eAAA,CACA,6CACC,4BAAA,CAQF,6CACC,SAAA,CACA,eAAA,CACA,+DAAA",sourcesContent:["\n// Hide the link element inside previews. We cannot hide full node view content\n// as the preview options (prosemirror decorations) are inside it.\n[data-text-el='preview'] [data-node-view-content] :deep(a) {\n\tdisplay: none;\n}\n\n.preview {\n\tposition: relative;\n}\n\n:deep(div.widgets--list a.widget-default) {\n\tcolor: var(--color-main-text);\n\tpadding: 0;\n\ttext-decoration: none;\n\tmax-width: calc(100vw - 156px);\n}\n\n:deep(.widget-default--details) {\n\toverflow:hidden;\n\tp {\n\t\tmargin-bottom: 4px !important;\n\t}\n}\n\n/* Top align with preview image:\n * - unset center alignment\n * - margin-top of widget-default\n */\n:deep(.preview-options-container) {\n\ttop: unset;\n\ttransform: unset;\n\tmargin-top: calc(var(--default-grid-baseline, 4px) * 3) !important;\n}\n"],sourceRoot:""}]);const s=a},50580:(t,e,n)=>{n.d(e,{A:()=>s});var i=n(71354),o=n.n(i),r=n(76314),a=n.n(r)()(o());a.push([t.id,"td[data-v-2f56cd8c]{position:relative}td .container[data-v-2f56cd8c]{display:flex;flex-wrap:wrap;min-height:36px}td .content[data-v-2f56cd8c]{flex:1 1 0;margin:0;padding-top:.6em}td .action-item[data-v-2f56cd8c]{position:absolute;right:-48px;flex:0 1 auto;display:none;top:2px}td:last-child .action-item[data-v-2f56cd8c]{display:block;opacity:50%}td:last-child:hover .action-item[data-v-2f56cd8c],td:last-child:active .action-item[data-v-2f56cd8c],td:last-child:focus .action-item[data-v-2f56cd8c],td:last-child:focus-within .action-item[data-v-2f56cd8c]{opacity:100%}","",{version:3,sources:["webpack://./src/nodes/Table/TableCellView.vue"],names:[],mappings:"AACA,oBACC,iBAAA,CAEA,+BACC,YAAA,CACA,cAAA,CACA,eAAA,CAGD,6BACC,UAAA,CACA,QAAA,CACA,gBAAA,CAGD,iCACC,iBAAA,CACA,WAAA,CACA,aAAA,CACA,YAAA,CACA,OAAA,CAIA,4CACC,aAAA,CACA,WAAA,CAIA,gNACC,YAAA",sourcesContent:["\ntd {\n\tposition: relative;\n\n\t.container {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\tmin-height: 36px;\n\t}\n\n\t.content {\n\t\tflex: 1 1 0;\n\t\tmargin: 0;\n\t\tpadding-top: 0.6em;\n\t}\n\n\t.action-item {\n\t\tposition: absolute;\n\t\tright: -48px;\n\t\tflex: 0 1 auto;\n\t\tdisplay: none;\n\t\ttop: 2px;\n\t}\n\n\t&:last-child {\n\t\t.action-item {\n\t\t\tdisplay: block;\n\t\t\topacity: 50%;\n\t\t}\n\n\t\t&:hover, &:active, &:focus, &:focus-within {\n\t\t\t.action-item {\n\t\t\t\topacity: 100%;\n\t\t\t}\n\t\t}\n\t}\n\n}\n\n"],sourceRoot:""}]);const s=a},89045:(t,e,n)=>{n.d(e,{A:()=>s});var i=n(71354),o=n.n(i),r=n(76314),a=n.n(r)()(o());a.push([t.id,"th .content[data-v-a456a642]{margin:0;padding-top:.75em;flex-grow:1}th .action-item[data-v-a456a642]{opacity:50%}th:hover .action-item[data-v-a456a642],th:active .action-item[data-v-a456a642],th:focus .action-item[data-v-a456a642],th:focus-within .action-item[data-v-a456a642]{opacity:100%}","",{version:3,sources:["webpack://./src/nodes/Table/TableHeaderView.vue"],names:[],mappings:"AAGC,6BACC,QAAA,CACA,iBAAA,CACA,WAAA,CAED,iCACC,WAAA,CAIA,oKACC,YAAA",sourcesContent:["\nth {\n\n\t.content {\n\t\tmargin: 0;\n\t\tpadding-top: 0.75em;\n\t\tflex-grow: 1;\n\t}\n\t.action-item {\n\t\topacity: 50%;\n\t}\n\n\t&:hover, &:active, &:focus, &:focus-within {\n\t\t.action-item {\n\t\t\topacity: 100%;\n\t\t}\n\t}\n}\n"],sourceRoot:""}]);const s=a},96526:(t,e,n)=>{n.d(e,{A:()=>s});var i=n(71354),o=n.n(i),r=n(76314),a=n.n(r)()(o());a.push([t.id,".table-wrapper[data-v-048279dc]{position:relative;overflow-x:auto}.clearfix[data-v-048279dc]{clear:both}table[data-v-048279dc]{float:left}.table-settings[data-v-048279dc]{padding-left:3px;opacity:.5;position:absolute;top:0;right:3px}.table-settings[data-v-048279dc]:hover{opacity:1}","",{version:3,sources:["webpack://./src/nodes/Table/TableView.vue"],names:[],mappings:"AACA,gCACC,iBAAA,CACA,eAAA,CAGD,2BACC,UAAA,CAGD,uBACC,UAAA,CAGD,iCACC,gBAAA,CACA,UAAA,CACA,iBAAA,CACA,KAAA,CACA,SAAA,CAEA,uCACC,SAAA",sourcesContent:["\n.table-wrapper {\n\tposition: relative;\n\toverflow-x: auto;\n}\n\n.clearfix {\n\tclear: both;\n}\n\ntable {\n\tfloat: left;\n}\n\n.table-settings {\n\tpadding-left: 3px;\n\topacity: .5;\n\tposition: absolute;\n\ttop: 0;\n\tright: 3px;\n\n\t&:hover {\n\t\topacity: 1;\n\t}\n}\n"],sourceRoot:""}]);const s=a},42389:(t,e,n)=>{n.d(e,{A:()=>s});var i=n(71354),o=n.n(i),r=n(76314),a=n.n(r)()(o());a.push([t.id,"\n.action[data-v-7dd7ca7d] {\n\t/* to unify width of ActionInput and ActionButton */\n\tmin-width: 218px;\n}\n","",{version:3,sources:["webpack://./src/components/Menu/ActionInsertLink.vue"],names:[],mappings:";AAkQA;CACA,mDAAA;CACA,gBAAA;AACA",sourcesContent:["\x3c!--\n  - @copyright Copyright (c) 2022\n  -\n  - @license AGPL-3.0-or-later\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\n  -\n  --\x3e\n<template>\n\t<NcActions class=\"entry-action entry-action__insert-link\"\n\t\t:title=\"actionEntry.label\"\n\t\t:aria-label=\"actionEntry.label\"\n\t\t:class=\"activeClass\"\n\t\t:container=\"menuIDSelector\"\n\t\t:data-text-action-entry=\"actionEntry.key\"\n\t\t:name=\"actionEntry.label\"\n\t\t:open=\"menuOpen\"\n\t\t@update:open=\"(open) => { menuOpen = menuOpen || open }\">\n\t\t<template #icon>\n\t\t\t<component :is=\"icon\"\n\t\t\t\t:name=\"actionEntry.label\"\n\t\t\t\t:aria-label=\"actionEntry.label\" />\n\t\t</template>\n\t\t<NcActionButton v-if=\"state.active\"\n\t\t\t:data-text-action-entry=\"`${actionEntry.key}-remove`\"\n\t\t\t@click=\"removeLink\">\n\t\t\t<template #icon>\n\t\t\t\t<LinkOff />\n\t\t\t</template>\n\t\t\t{{ t('text', 'Remove link') }}\n\t\t</NcActionButton>\n\t\t<NcActionButton v-if=\"!isUsingDirectEditing\"\n\t\t\tref=\"buttonFile\"\n\t\t\t:data-text-action-entry=\"`${actionEntry.key}-file`\"\n\t\t\t@click=\"linkFile\">\n\t\t\t<template #icon>\n\t\t\t\t<Document />\n\t\t\t</template>\n\t\t\t{{ t('text', 'Link to file or folder') }}\n\t\t</NcActionButton>\n\t\t<NcActionInput v-if=\"isInputMode\"\n\t\t\ttype=\"text\"\n\t\t\t:value.sync=\"href\"\n\t\t\t:data-text-action-entry=\"`${actionEntry.key}-input`\"\n\t\t\t@submit=\"linkWebsite\">\n\t\t\t<template #icon>\n\t\t\t\t<Web />\n\t\t\t</template>\n\t\t\t{{ t('text', 'Link to website') }}\n\t\t</NcActionInput>\n\t\t<NcActionButton v-else\n\t\t\t:data-text-action-entry=\"`${actionEntry.key}-website`\"\n\t\t\t@click=\"linkWebsite\">\n\t\t\t<template #icon>\n\t\t\t\t<Web />\n\t\t\t</template>\n\t\t\t{{ state.active ? t('text', 'Update link') : t('text', 'Link to website') }}\n\t\t</NcActionButton>\n\t\t<NcActionButton :data-text-action-entry=\"`${actionEntry.key}-picker`\"\n\t\t\t@click=\"linkPicker\">\n\t\t\t<template #icon>\n\t\t\t\t<Shape />\n\t\t\t</template>\n\t\t\t{{ t('text', 'Open the Smart Picker') }}\n\t\t</NcActionButton>\n\t</NcActions>\n</template>\n\n<script>\nimport { NcActions, NcActionButton, NcActionInput } from '@nextcloud/vue'\nimport { getLinkWithPicker } from '@nextcloud/vue/dist/Components/NcRichText.js'\nimport { FilePickerType, getFilePickerBuilder } from '@nextcloud/dialogs'\nimport { generateUrl } from '@nextcloud/router'\nimport { loadState } from '@nextcloud/initial-state'\n\nimport { getMarkAttributes, isActive } from '@tiptap/core'\n\nimport { Document, Loading, LinkOff, Web, Shape } from '../icons.js'\nimport { BaseActionEntry } from './BaseActionEntry.js'\nimport { useFileMixin } from '../Editor.provider.js'\nimport { useMenuIDMixin } from './MenuBar.provider.js'\n\nexport default {\n\tname: 'ActionInsertLink',\n\tcomponents: {\n\t\tNcActions,\n\t\tNcActionButton,\n\t\tNcActionInput,\n\t\tDocument,\n\t\tLoading,\n\t\tLinkOff,\n\t\tWeb,\n\t\tShape,\n\t},\n\textends: BaseActionEntry,\n\tmixins: [\n\t\tuseFileMixin,\n\t\tuseMenuIDMixin,\n\t],\n\tdata: () => {\n\t\treturn {\n\t\t\thref: '',\n\t\t\tisInputMode: false,\n\t\t\tstartPath: null,\n\t\t\t/** Open state of the actions menu */\n\t\t\tmenuOpen: false,\n\t\t\tisUsingDirectEditing: loadState('text', 'directEditingToken', null) !== null,\n\t\t}\n\t},\n\tcomputed: {\n\t\tactiveClass() {\n\t\t\treturn this.state.active ? 'is-active' : ''\n\t\t},\n\t\trelativePath() {\n\t\t\treturn this.$file?.relativePath ?? '/'\n\t\t},\n\t},\n\tmethods: {\n\t\t/**\n\t\t * Open dialog and ask user which file to link to\n\t\t * Triggered by the \"link file\" button\n\t\t */\n\t\tlinkFile() {\n\t\t\tif (this.startPath === null) {\n\t\t\t\tthis.startPath = this.relativePath.split('/').slice(0, -1).join('/')\n\t\t\t}\n\n\t\t\tconst filePicker = getFilePickerBuilder(t('text', 'Select file or folder to link to'))\n\t\t\t\t.startAt(this.startPath)\n\t\t\t\t.allowDirectories(true)\n\t\t\t\t.setMultiSelect(false)\n\t\t\t\t.setType(FilePickerType.Choose)\n\t\t\t\t.build()\n\n\t\t\tfilePicker.pick()\n\t\t\t\t.then((file) => {\n\t\t\t\t\tconst client = OC.Files.getClient()\n\t\t\t\t\tclient.getFileInfo(file).then((_status, fileInfo) => {\n\t\t\t\t\t\tconst url = new URL(generateUrl(`/f/${fileInfo.id}`), window.origin)\n\t\t\t\t\t\tthis.setLink(url.href, fileInfo.name)\n\t\t\t\t\t\tthis.startPath = fileInfo.path + (fileInfo.type === 'dir' ? `/${fileInfo.name}/` : '')\n\t\t\t\t\t})\n\t\t\t\t\tthis.menuOpen = false\n\t\t\t\t})\n\t\t\t\t.catch(() => {\n\t\t\t\t\t// do not close menu but keep focus\n\t\t\t\t\tthis.$refs.buttonFile.$el.focus()\n\t\t\t\t})\n\t\t},\n\t\t/**\n\t\t * Allow user to enter an URL manually\n\t\t * Triggered when by the \"link url\" button\n\t\t *\n\t\t * @param {Event} event Triggering event\n\t\t */\n\t\tlinkWebsite(event) {\n\t\t\tif (event?.type === 'submit') {\n\t\t\t\tconst href = [...event.target.elements].filter(e => e?.type === 'text')[0].value\n\t\t\t\tthis.menuOpen = false\n\t\t\t\tthis.isInputMode = false\n\t\t\t\tthis.href = ''\n\t\t\t\treturn this.setLink(href, href)\n\t\t\t}\n\n\t\t\tif (isActive(this.$editor.state, 'link')) {\n\t\t\t\tconst attrs = getMarkAttributes(this.$editor.state, 'link')\n\t\t\t\tthis.href = attrs.href\n\t\t\t}\n\t\t\tthis.isInputMode = true\n\t\t},\n\t\t/**\n\t\t * Save user entered URL as a link markup\n\t\t * Triggered when the user submits the ActionInput\n\t\t *\n\t\t * @param {string} url href attribute of the link\n\t\t * @param {string} text Text part of the link\n\t\t */\n\t\tsetLink(url, text) {\n\t\t\t// Heuristics for determining if we need a https:// prefix.\n\t\t\tconst noPrefixes = [\n\t\t\t\t/^[a-zA-Z]+:/, // url with protocol (\"mailTo:email@domain.tld\")\n\t\t\t\t/^\\//, // absolute path\n\t\t\t\t/\\?fileId=/, // relative link with fileId\n\t\t\t\t/^\\.\\.?\\//, // relative link starting with ./ or ../\n\t\t\t\t/^[^.]*[/$]/, // no dots before first '/' - not a domain name\n\t\t\t\t/^#/, // url fragment\n\t\t\t]\n\t\t\tif (url && !noPrefixes.find(regex => url.match(regex))) {\n\t\t\t\turl = 'https://' + url\n\t\t\t}\n\n\t\t\t// Avoid issues when parsing urls later on in markdown that might be entered in an invalid format (e.g. \"mailto: example@example.com\")\n\t\t\tconst href = url.replaceAll(' ', '%20')\n\t\t\tconst chain = this.$editor.chain()\n\t\t\t// Check if any text is selected, if not insert the link using the given text property\n\t\t\tif (this.$editor.view.state?.selection.empty) {\n\t\t\t\tchain.insertContent({\n\t\t\t\t\ttype: 'paragraph',\n\t\t\t\t\tcontent: [{\n\t\t\t\t\t\ttype: 'text',\n\t\t\t\t\t\tmarks: [{\n\t\t\t\t\t\t\ttype: 'link',\n\t\t\t\t\t\t\tattrs: {\n\t\t\t\t\t\t\t\thref,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}],\n\t\t\t\t\t\ttext,\n\t\t\t\t\t}],\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tchain.setLink({ href })\n\t\t\t}\n\t\t\tchain.focus().run()\n\t\t},\n\t\t/**\n\t\t * Remove link markup at current position\n\t\t * Triggered by the \"remove link\" button\n\t\t */\n\t\tremoveLink() {\n\t\t\tthis.$editor.chain().unsetLink().focus().run()\n\t\t\tthis.menuOpen = false\n\t\t},\n\t\tlinkPicker() {\n\t\t\tgetLinkWithPicker(null, true)\n\t\t\t\t.then(link => {\n\t\t\t\t\tconst chain = this.$editor.chain()\n\t\t\t\t\tif (this.$editor.view.state?.selection.empty) {\n\t\t\t\t\t\tchain.focus().insertPreview(link).run()\n\t\t\t\t\t} else {\n\t\t\t\t\t\tchain.setLink({ href: link }).focus().run()\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(error => {\n\t\t\t\t\tconsole.error('Smart picker promise rejected', error)\n\t\t\t\t})\n\t\t},\n\t},\n}\n<\/script>\n\n<style scoped>\n\t.action {\n\t\t/* to unify width of ActionInput and ActionButton */\n\t\tmin-width: 218px;\n\t}\n</style>\n"],sourceRoot:""}]);const s=a},40833:(t,e,n)=>{n.d(e,{A:()=>s});var i=n(71354),o=n.n(i),r=n(76314),a=n.n(r)()(o());a.push([t.id,"\n/* This is required to properly render the bubble text (which seems linke a browser bug) */\n.text-editor__wrapper div.ProseMirror .mention[contenteditable=false][data-v-297bb5fa] * {\n\t-webkit-user-modify: read-only !important;\n}\n","",{version:3,sources:["webpack://./src/extensions/Mention.vue"],names:[],mappings:";AA8CA,0FAAA;AACA;CACA,yCAAA;AACA",sourcesContent:['<template>\n\t<NodeViewWrapper as="span" class="mention" contenteditable="false">\n\t\t<NcUserBubble :user="node.attrs.id"\n\t\t\t:display-name="username"\n\t\t\t:primary="isCurrentUser"\n\t\t\tclass="mention-user-bubble">\n\t\t\t@{{ username }}\n\t\t</NcUserBubble>\n\t</NodeViewWrapper>\n</template>\n\n<script>\nimport { NcUserBubble } from \'@nextcloud/vue\'\nimport { NodeViewWrapper } from \'@tiptap/vue-2\'\nimport { getCurrentUser } from \'@nextcloud/auth\'\n\nexport default {\n\tname: \'Mention\',\n\tcomponents: {\n\t\tNcUserBubble,\n\t\tNodeViewWrapper,\n\t},\n\tprops: {\n\t\tupdateAttributes: {\n\t\t\ttype: Function,\n\t\t\trequired: true,\n\t\t},\n\n\t\tnode: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tusername: this.node.attrs.label,\n\t\t}\n\t},\n\tcomputed: {\n\t\tisCurrentUser() {\n\t\t\treturn this.node.attrs.id === getCurrentUser()?.uid\n\t\t},\n\t},\n}\n<\/script>\n<style scoped>\n/* This is required to properly render the bubble text (which seems linke a browser bug) */\n.text-editor__wrapper div.ProseMirror .mention[contenteditable=false] :deep(*) {\n\t-webkit-user-modify: read-only !important;\n}\n</style>\n'],sourceRoot:""}]);const s=a},71585:(t,e,n)=>{n.d(e,{A:()=>E});var i=n(28317),o=n(95353),r=n(73590),a=n(11441);const s={name:"TableOfContents",mixins:[a.A,r.CB],data:()=>({initialRender:!0}),computed:{...(0,o.aH)({headings:t=>t.text.headings})},mounted(){setTimeout((()=>{this.initialRender=!1}),1e3)},methods:{goto(t){document.getElementById(t.id).scrollIntoView(),this.$nextTick((()=>{window.location.hash=t.id}))}}};var l=n(85072),c=n.n(l),d=n(97825),A=n.n(d),u=n(77659),p=n.n(u),m=n(55056),h=n.n(m),f=n(10540),g=n.n(f),C=n(41113),v=n.n(C),b=n(96981),y={};y.styleTagTransform=v(),y.setAttributes=h(),y.insert=p().bind(null,"head"),y.domAPI=A(),y.insertStyleElement=g();c()(b.A,y);b.A&&b.A.locals&&b.A.locals;var x=n(14486);const w=(0,x.A)(s,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"editor--toc",class:{"--initial-render":t.initialRender},attrs:{"data-text-el":"editor-table-of-contents"}},[e("ul",{staticClass:"editor--toc__list"},t._l(t.headings,(function(n){return e("li",{key:n.id,staticClass:"editor--toc__item",class:{[`editor--toc__item--${n.level}`]:!0,[`editor--toc__item--previous-${n.previous}`]:n.previous>0},attrs:{"data-toc-level":n.level}},[e("a",{attrs:{href:`#${n.id}`},on:{click:function(e){return e.preventDefault(),t.goto(n)}}},[t._v("\n\t\t\t\t"+t._s(n.text)+"\n\t\t\t")])])})),0)])}),[],!1,null,null,null).exports;var k=n(51594);const _={name:"EditorOutline",components:{Close:n(59488).bm,NcButton:i.x1,TableOfContents:w},mixins:[r.bk,a.A,k.yc,k.xU]};var I=n(99938),B={};B.styleTagTransform=v(),B.setAttributes=h(),B.insert=p().bind(null,"head"),B.domAPI=A(),B.insertStyleElement=g();c()(I.A,B);I.A&&I.A.locals&&I.A.locals;const E=(0,x.A)(_,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"editor--outline",class:{"editor--outline-mobile":t.$isMobile},attrs:{"data-text-el":"editor-outline"}},[e("header",{staticClass:"editor--outline__header"},[e("NcButton",{staticClass:"editor--outline__btn-close",attrs:{type:"tertiary","aria-label":t.t("text","Close outline view")},on:{click:t.$outlineActions.toggle},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Close")]},proxy:!0}])}),t._v(" "),e("h2",[t._v(t._s(t.t("text","Outline")))])],1),t._v(" "),e("TableOfContents")],1)}),[],!1,null,"2e01a79b",null).exports},3315:(t,e,n)=>{n.d(e,{A:()=>v});var i=n(53334);const o={name:"SuggestionListWrapper",props:{items:{type:Array,required:!0},command:{type:Function,required:!0}},data:()=>({selectedIndex:0}),computed:{hasGroups(){return Object.keys(this.itemGroups).includes(void 0)},hasResults(){return this.items.length>0},itemHeight(){return this.$el.scrollHeight/this.items.length},itemInsideScrollView(){return this.selectedIndex*this.itemHeight>=this.$el.scrollTop&&(this.selectedIndex+1)*this.itemHeight<=this.$el.scrollTop+this.$el.clientHeight},itemGroups(){const t={};return this.items.forEach((e=>{t[e.suggestGroup]||(t[e.suggestGroup]=[]),t[e.suggestGroup].push(e)})),t},combineIndex(){return(t,e)=>Object.values(this.itemGroups).slice(0,t).reduce(((t,e)=>t+e.length),0)+e}},watch:{items(){this.selectedIndex=0,this.$el.scrollTop=0}},methods:{t:i.Tl,onKeyDown(t){let{event:e}=t;return!(e.ctrlKey||e.shiftKey||e.altKey||e.metaKey)&&("ArrowUp"===e.key?(this.selectedIndex=(this.selectedIndex+this.items.length-1)%this.items.length,this.itemInsideScrollView||(this.$el.scrollTop=this.selectedIndex*this.itemHeight),!0):"ArrowDown"===e.key?(this.selectedIndex=(this.selectedIndex+1)%this.items.length,this.itemInsideScrollView||(this.$el.scrollTop=(this.selectedIndex+1)*this.itemHeight-this.$el.clientHeight),!0):("Enter"===e.key||"Tab"===e.key)&&(this.selectItem(this.selectedIndex),!0))},selectItem(t){const e=this.items[t];e&&(this.$emit("select",e),this.command(e))}}};var r=n(85072),a=n.n(r),s=n(97825),l=n.n(s),c=n(77659),d=n.n(c),A=n(55056),u=n.n(A),p=n(10540),m=n.n(p),h=n(41113),f=n.n(h),g=n(35430),C={};C.styleTagTransform=f(),C.setAttributes=u(),C.insert=d().bind(null,"head"),C.domAPI=l(),C.insertStyleElement=m();a()(g.A,C);g.A&&g.A.locals&&g.A.locals;const v=(0,n(14486).A)(o,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"suggestion-list"},[t.hasResults?t._l(t.itemGroups,(function(n,i,o){return e("div",{key:i},[t.hasGroups?e("div",{staticClass:"suggestion-list__group"},[t._v("\n\t\t\t\t"+t._s(i)+"\n\t\t\t")]):t._e(),t._v(" "),t._l(n,(function(n,i){return e("div",{key:t.combineIndex(o,i),staticClass:"suggestion-list__item",class:{"is-selected":t.combineIndex(o,i)===t.selectedIndex},on:{click:function(e){t.selectItem(t.combineIndex(o,i))}}},[t._t("default",null,{item:n,active:t.combineIndex(o,i)===t.selectedIndex})],2)}))],2)})):e("div",{staticClass:"suggestion-list__item is-empty"},[t._v("\n\t\t"+t._s(t.t("text","No suggestion found"))+"\n\t")])],2)}),[],!1,null,"721c3a10",null).exports},27518:t=>{t.exports="data:image/svg+xml,%3c%21--%20-%20SPDX-FileCopyrightText:%202020%20Google%20Inc.%20-%20SPDX-License-Identifier:%20Apache-2.0%20--%3e%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20width=%2724%27%20height=%2724%27%20fill=%27%23222%27%3e%3cpath%20d=%27M15.4%2016.6L10.8%2012l4.6-4.6L14%206l-6%206%206%206%201.4-1.4z%27/%3e%3c/svg%3e"},27514:t=>{t.exports="data:image/svg+xml,%3c%21--%20-%20SPDX-FileCopyrightText:%202020%20Google%20Inc.%20-%20SPDX-License-Identifier:%20Apache-2.0%20--%3e%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20width=%2724%27%20height=%2724%27%20fill=%27%23222%27%3e%3cpath%20d=%27M18.4%207.4L17%206l-6%206%206%206%201.4-1.4-4.6-4.6%204.6-4.6m-6%200L11%206l-6%206%206%206%201.4-1.4L7.8%2012l4.6-4.6z%27/%3e%3c/svg%3e"},79722:t=>{t.exports="data:image/svg+xml,%3c%21--%20-%20SPDX-FileCopyrightText:%202020%20Google%20Inc.%20-%20SPDX-License-Identifier:%20Apache-2.0%20--%3e%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20width=%2724%27%20height=%2724%27%20fill=%27%23222%27%3e%3cpath%20d=%27M5.6%207.4L7%206l6%206-6%206-1.4-1.4%204.6-4.6-4.6-4.6m6%200L13%206l6%206-6%206-1.4-1.4%204.6-4.6-4.6-4.6z%27/%3e%3c/svg%3e"},86886:t=>{t.exports="data:image/svg+xml,%3c%21--%20-%20SPDX-FileCopyrightText:%202020%20Google%20Inc.%20-%20SPDX-License-Identifier:%20Apache-2.0%20--%3e%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20width=%2724%27%20height=%2724%27%20fill=%27%23222%27%3e%3cpath%20d=%27M8.6%2016.6l4.6-4.6-4.6-4.6L10%206l6%206-6%206-1.4-1.4z%27/%3e%3c/svg%3e"},19756:(t,e,n)=>{t.exports=n.p+"8ef4fd4b0bf5c12e8887.svg"}}]);
//# sourceMappingURL=src_extensions_index_js-src_components_Editor_EditorOutline_vue-data_image_svg_xml_3c_21--_20-ee52b2.js.map?v=51790e55d891a27d5711