{"version":3,"file":"editor-rich.js?v=3d79ad324230288ba69f","mappings":"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KA,EAAKC,MAAM,YAAY,EACxC/C,SAAU,y8CCnHZ,MC3IwK,ED2IxK,CACA,eACA,YACA,iBACA,gBACA,YACA,iBAEA,YACA,YACA,kBAEA,QACA,IACA,MAEA,OACA,YACA,aACA,YAEA,cACA,aACA,YAEA,UACA,aACA,YAEA,UACA,aACA,YAEA,UACA,YACA,YACA,YAEA,QACA,YACA,YACA,WAEA,iBACA,aACA,aAGA,gBACA,OACA,cACA,eACA,iBACA,qBACA,mBACA,WACA,kBAEA,EACA,UACA,qCACA,iDACA,EACA,qCACA,mBACA,SAGA,OAFA,cACA,6BACA,CACA,CACA,EACA,+BACA,sCACA,MACA,SAEA,6BACA,0CACA,CACA,EACA,qBACA,4BACA,mEACA,EACA,+BACA,mBACA,2CACA,CACA,EACA,yCACA,mBACA,uGACA,CACA,EACA,uCACA,qBACA,0BACA,OAEA,aACA,aACA,qBACA,kBACA,eACA,kBACA,EAEA,GACA,CACA,EACA,uCACA,mBACA,qBACA,0BACA,CACA,EACA,gCACA,4EACA,EACA,qBACA,oBACA,iBACA,IAIA,GAJA,uDACA,+BACA,KAEA,EAGA,OAFA,iBAEA,CACA,EACA,qBACA,2BACA,8CACA,EACA,0BAEA,8CACA,GAEA,8BACA,uDACA,mEACA,kEACA,2CACA,qDACA,mBACA,kBAEA,oBACA,8BAEA,QACA,+BAEA,qCACA,mBACA,IAEA,oCACA,mBACA,GACA,EACA,yBACA,0DACA,qEACA,mEACA,EACA,SACA,iCAEA,kCACA,EACA,oCACA,2BACA,mBACA,kBACA,GACA,EACA,mBACA,kCACA,EACA,sBACA,WACA,qBAIA,6CACA,UACA,EACA,2BACA,qDACA,EACA,4BACA,uDACA,EACA,wCACA,sCACA,EACA,uBACA,8BACA,UACA,EACA,0CACA,8FACA,uCACA,GACA,cAEA,EACA,yBACA,iCACA,EACA,oCACA,0CAGA,iBACA,EACA,uCACA,uBAIA,+DACA,yBACA,kCACA,EACA,0BACA,mBACA,oCACA,yBACA,YACA,CACA,EACA,2BACA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","sources":["webpack:///text/src/views/RichWorkspace.vue","webpack:///text/src/views/RichWorkspace.vue?vue&type=script&lang=js&","webpack://text/./src/views/RichWorkspace.vue?06fd","webpack://text/./src/views/RichWorkspace.vue?c027","webpack:///text/src/views/RichWorkspace.vue?vue&type=template&id=4eafc5c2&scoped=true&","webpack:///text/src/helpers/files.js","webpack:///text/src/helpers/mime.js","webpack:///text/src/components/MenuBar.vue?vue&type=style&index=0&id=2c2d396c&scoped=true&lang=scss&","webpack:///text/src/components/MenuBubble.vue?vue&type=style&index=0&id=756732d2&scoped=true&lang=scss&","webpack:///text/src/views/RichWorkspace.vue?vue&type=style&index=0&id=4eafc5c2&lang=scss&scoped=true&","webpack:///text/src/components/MenuBar.vue?vue&type=template&id=2c2d396c&scoped=true&","webpack:///text/src/mixins/menubar.js","webpack:///text/src/components/MenuBar.vue","webpack:///text/src/components/MenuBar.vue?vue&type=script&lang=js&","webpack://text/./src/components/MenuBar.vue?275b","webpack://text/./src/components/MenuBar.vue?ce1f","webpack:///text/src/components/MenuBubble.vue?vue&type=template&id=756732d2&scoped=true&","webpack:///text/src/components/MenuBubble.vue","webpack:///text/src/components/MenuBubble.vue?vue&type=script&lang=js&","webpack://text/./src/components/MenuBubble.vue?258b","webpack://text/./src/components/MenuBubble.vue?8445"],"sourcesContent":["<!--\n  - @copyright Copyright (c) 2019 Julius Härtl <jus@bitgrid.net>\n  -\n  - @author Julius Härtl <jus@bitgrid.net>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\n  -\n  -->\n\n<template>\n\t<div v-if=\"enabled && active\" id=\"rich-workspace\" :class=\"{'icon-loading': !loaded || !ready, 'focus': focus, 'dark': darkTheme, 'creatable': canCreate}\">\n\t\t<div v-if=\"showEmptyWorkspace\" class=\"empty-workspace\" @click=\"createNew\">\n\t\t\t<p class=\"placeholder\">\n\t\t\t\t{{ t('text', 'Add notes, lists or links …') }}\n\t\t\t</p>\n\t\t</div>\n\n\t\t<EditorWrapper v-if=\"file\"\n\t\t\tv-show=\"ready\"\n\t\t\t:key=\"file.path\"\n\t\t\t:file-id=\"file.id\"\n\t\t\t:relative-path=\"file.path\"\n\t\t\t:share-token=\"shareToken\"\n\t\t\t:active=\"true\"\n\t\t\t:autohide=\"true\"\n\t\t\t:mime=\"file.mimetype\"\n\t\t\t:autofocus=\"autofocus\"\n\t\t\t@ready=\"ready=true; loaded=true\"\n\t\t\t@focus=\"focus=true\"\n\t\t\t@blur=\"unfocus\"\n\t\t\t@error=\"reset\" />\n\t</div>\n</template>\n\n<script>\nimport axios from '@nextcloud/axios'\nimport { generateOcsUrl } from '@nextcloud/router'\nimport { subscribe } from '@nextcloud/event-bus'\n\nconst IS_PUBLIC = !!(document.getElementById('isPublic'))\nconst WORKSPACE_URL = generateOcsUrl('apps/text' + (IS_PUBLIC ? '/public' : '') + '/workspace', 2)\n\nexport default {\n\tname: 'RichWorkspace',\n\tcomponents: {\n\t\tEditorWrapper: () => import(/* webpackChunkName: \"editor\" */'./../components/EditorWrapper.vue'),\n\t},\n\tprops: {\n\t\tpath: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tactive: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tfocus: false,\n\t\t\tfolder: null,\n\t\t\tfile: null,\n\t\t\tloaded: false,\n\t\t\tready: false,\n\t\t\tautofocus: false,\n\t\t\tdarkTheme: OCA.Accessibility && OCA.Accessibility.theme === 'dark',\n\t\t\tenabled: OCA.Text.RichWorkspaceEnabled,\n\t\t}\n\t},\n\tcomputed: {\n\t\tshareToken() {\n\t\t\treturn document.getElementById('sharingToken')?.value\n\t\t},\n\t\tcanCreate() {\n\t\t\treturn !!(this.folder && (this.folder.permissions & OC.PERMISSION_CREATE))\n\t\t},\n\t\tshowEmptyWorkspace() {\n\t\t\treturn (!this.file || (this.autofocus && !this.ready)) && this.canCreate\n\t\t},\n\t\tfilepath() {\n\t\t\tconst { path, name } = this.file\n\t\t\treturn path + (path.endsWith('/') ? '' : '/') + name\n\t\t},\n\t},\n\twatch: {\n\t\tpath() {\n\t\t\tthis.getFileInfo()\n\t\t},\n\t\tfocus(newValue) {\n\t\t\tif (!newValue) {\n\t\t\t\tdocument.querySelector('#editor').scrollTo(0, 0)\n\t\t\t}\n\t\t},\n\t},\n\tasync mounted() {\n\t\tif (this.enabled) {\n\t\t\tthis.getFileInfo()\n\t\t}\n\t\tsubscribe('Text::showRichWorkspace', () => {\n\t\t\tthis.enabled = true\n\t\t\tthis.getFileInfo()\n\t\t})\n\t\tsubscribe('Text::hideRichWorkspace', () => {\n\t\t\tthis.enabled = false\n\t\t})\n\t},\n\tmethods: {\n\t\tunfocus() {\n\t\t\t// setTimeout(() => this.focus = false, 2000)\n\t\t},\n\t\treset() {\n\t\t\tthis.file = null\n\t\t\tthis.focus = false\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.creating = false\n\t\t\t\tthis.getFileInfo()\n\t\t\t})\n\t\t},\n\t\tgetFileInfo() {\n\t\t\tthis.loaded = false\n\t\t\tthis.autofocus = false\n\t\t\tthis.ready = false\n\t\t\tconst params = { path: this.path }\n\t\t\tif (IS_PUBLIC) {\n\t\t\t\tparams.shareToken = this.shareToken\n\t\t\t}\n\t\t\treturn axios.get(WORKSPACE_URL, { params }).then((response) => {\n\t\t\t\tconst data = response.data.ocs.data\n\t\t\t\tthis.folder = data.folder || null\n\t\t\t\tthis.file = data.file\n\t\t\t\tthis.editing = true\n\t\t\t\tthis.loaded = true\n\t\t\t\treturn true\n\t\t\t}).catch((error) => {\n\t\t\t\tif (error.response.data.ocs && error.response.data.ocs.data.folder) {\n\t\t\t\t\tthis.folder = error.response.data.ocs.data.folder\n\t\t\t\t} else {\n\t\t\t\t\tthis.folder = null\n\t\t\t\t}\n\t\t\t\tthis.file = null\n\t\t\t\tthis.loaded = true\n\t\t\t\tthis.ready = true\n\t\t\t\tthis.creating = false\n\t\t\t\treturn false\n\t\t\t})\n\t\t},\n\t\tcreateNew() {\n\t\t\tif (this.creating) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.creating = true\n\t\t\tthis.getFileInfo().then((workspaceFileExists) => {\n\t\t\t\tthis.autofocus = true\n\t\t\t\tif (!workspaceFileExists) {\n\t\t\t\t\twindow.FileList.createFile('Readme.md', { scrollTo: false, animate: false }).then((status, data) => {\n\t\t\t\t\t\tthis.getFileInfo()\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n\t#rich-workspace {\n\t\tpadding: 0 50px;\n\t\t/* Slightly reduce vertical space */\n\t\tmargin-bottom: -24px;\n\t\ttext-align: left;\n\t\tmax-height: 0;\n\t\ttransition: max-height 0.5s cubic-bezier(0, 1, 0, 1);\n\t\tz-index: 61;\n\t\tposition: relative;\n\t\t&.creatable {\n\t\t\tmin-height: 90px;\n\t\t}\n\t}\n\n\t/* For subfolders, where there are no Recommendations */\n\t#rich-workspace:only-child {\n\t\tmargin-bottom: 0;\n\t}\n\n\t.empty-workspace {\n\t\tpadding-top: 43px;\n\t\tcolor: var(--color-text-maxcontrast);\n\t\theight: 0;\n\t}\n\n\t#rich-workspace::v-deep div[contenteditable=false] {\n\t\twidth: 100%;\n\t\tpadding: 0px;\n\t\tbackground-color: var(--color-main-background);\n\t\topacity: 1;\n\t\tborder: none;\n\t}\n\n\t#rich-workspace::v-deep #editor-container {\n\t\theight: 100%;\n\t\tposition: unset !important;\n\t\ttop: auto !important;\n\t}\n\n\t#rich-workspace::v-deep #editor-wrapper {\n\t\tposition: unset !important;\n\t\toverflow: visible;\n\t}\n\n\t#rich-workspace::v-deep #editor {\n\t\toverflow: visible !important;\n\t}\n\n\t#rich-workspace::v-deep .content-wrapper {\n\t\toverflow: scroll !important;\n\t\tmax-height: calc(40vh - 50px);\n\t\tpadding-left: 10px;\n\t\tpadding-bottom: 60px; /* ensure menububble fits below */\n\t}\n\n\t#rich-workspace::v-deep #editor-wrapper .ProseMirror {\n\t\tpadding: 0px;\n\t\tmargin: 0;\n\t}\n\n\t#rich-workspace::v-deep .menubar {\n\t\tz-index: 61;\n\t\t/* Slightly reduce vertical space */\n\t\tmargin-bottom: -10px;\n\t}\n\n\t#rich-workspace::v-deep .menubar .menubar-icons {\n\t\tmargin-left: 0;\n\t}\n\n\t#rich-workspace::v-deep .editor__content {\n\t\tmargin: 0;\n\t}\n\n\t#rich-workspace.focus {\n\t\tmax-height: 50vh;\n\t}\n\n\t#rich-workspace:not(.focus) {\n\t\tmax-height: 30vh;\n\t\tposition: relative;\n\t\toverflow: hidden;\n\t}\n\n\t#rich-workspace:not(.focus):not(.icon-loading):after {\n\t\tcontent: '';\n\t\tposition: absolute;\n\t\tz-index: 1;\n\t\tbottom: 0;\n\t\tleft: 0;\n\t\tpointer-events: none;\n\t\tbackground-image: linear-gradient(to bottom, rgba(255, 255, 255, 0), var(--color-main-background));\n\t\twidth: 100%;\n\t\theight: 4em;\n\t}\n\n\t#rich-workspace.dark:not(.focus):not(.icon-loading):after {\n\t\tbackground-image: linear-gradient(to bottom, rgba(0, 0, 0, 0), var(--color-main-background));\n\t}\n\n\t@media only screen and (max-width: 1024px) {\n\t\t#rich-workspace:not(.focus) {\n\t\t\tmax-height: 30vh;\n\t\t}\n\t}\n\n\thtml.ie {\n\t\t#rich-workspace::v-deep {\n\t\t\t#editor-container {\n\t\t\t\tposition: initial;\n\t\t\t}\n\n\t\t\t#editor-wrapper {\n\t\t\t\tposition: relative !important;\n\t\t\t\ttop: auto !important;\n\t\t\t}\n\n\t\t\t#editor {\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: column;\n\t\t\t\toverflow: hidden !important;\n\t\t\t}\n\n\t\t\t.menubar {\n\t\t\t\tposition: relative;\n\t\t\t\toverflow: hidden;\n\t\t\t\tflex-shrink: 0;\n\t\t\t\theight: 44px;\n\t\t\t\ttop: auto;\n\t\t\t}\n\n\t\t\t#editor > div:nth-child(2) {\n\t\t\t\tmin-height: 44px;\n\t\t\t\toverflow-x: hidden;\n\t\t\t\toverflow-y: auto;\n\t\t\t\tflex-shrink: 1;\n\t\t\t}\n\t\t}\n\t}\n\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RichWorkspace.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RichWorkspace.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RichWorkspace.vue?vue&type=style&index=0&id=4eafc5c2&lang=scss&scoped=true&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RichWorkspace.vue?vue&type=style&index=0&id=4eafc5c2&lang=scss&scoped=true&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./RichWorkspace.vue?vue&type=template&id=4eafc5c2&scoped=true&\"\nimport script from \"./RichWorkspace.vue?vue&type=script&lang=js&\"\nexport * from \"./RichWorkspace.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RichWorkspace.vue?vue&type=style&index=0&id=4eafc5c2&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4eafc5c2\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.enabled && _vm.active)?_c('div',{class:{'icon-loading': !_vm.loaded || !_vm.ready, 'focus': _vm.focus, 'dark': _vm.darkTheme, 'creatable': _vm.canCreate},attrs:{\"id\":\"rich-workspace\"}},[(_vm.showEmptyWorkspace)?_c('div',{staticClass:\"empty-workspace\",on:{\"click\":_vm.createNew}},[_c('p',{staticClass:\"placeholder\"},[_vm._v(\"\\n\\t\\t\\t\"+_vm._s(_vm.t('text', 'Add notes, lists or links …'))+\"\\n\\t\\t\")])]):_vm._e(),_vm._v(\" \"),(_vm.file)?_c('EditorWrapper',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.ready),expression:\"ready\"}],key:_vm.file.path,attrs:{\"file-id\":_vm.file.id,\"relative-path\":_vm.file.path,\"share-token\":_vm.shareToken,\"active\":true,\"autohide\":true,\"mime\":_vm.file.mimetype,\"autofocus\":_vm.autofocus},on:{\"ready\":function($event){_vm.ready=true; _vm.loaded=true},\"focus\":function($event){_vm.focus=true},\"blur\":_vm.unfocus,\"error\":_vm.reset}}):_vm._e()],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/*\n * @copyright Copyright (c) 2019 Julius Härtl <jus@bitgrid.net>\n *\n * @author Julius Härtl <jus@bitgrid.net>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nimport { subscribe } from '@nextcloud/event-bus'\nimport { openMimetypes } from './mime.js'\nimport RichWorkspace from '../views/RichWorkspace.vue'\nimport { imagePath } from '@nextcloud/router'\nimport store from '../store.js'\n\nconst FILE_ACTION_IDENTIFIER = 'Edit with text app'\n\nconst optimalPath = function(from, to) {\n\tconst current = from.split('/')\n\tconst target = to.split('/')\n\tcurrent.pop() // ignore filename\n\twhile (current[0] === target[0]) {\n\t\tcurrent.shift()\n\t\ttarget.shift()\n\t}\n\tconst relativePath = current.fill('..').concat(target)\n\tconst absolutePath = to.split('/')\n\treturn relativePath.length < absolutePath.length\n\t\t? relativePath.join('/')\n\t\t: to\n}\n\nconst registerFileCreate = () => {\n\tconst newFileMenuPlugin = {\n\t\tattach(menu) {\n\t\t\tconst fileList = menu.fileList\n\n\t\t\t// only attach to main file list, public view is not supported yet\n\t\t\tif (fileList.id !== 'files' && fileList.id !== 'files.public') {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t// register the new menu entry\n\t\t\tmenu.addMenuEntry({\n\t\t\t\tid: 'file',\n\t\t\t\tdisplayName: t('text', 'New text file'),\n\t\t\t\ttemplateName: t('text', 'New text file') + '.md',\n\t\t\t\ticonClass: 'icon-filetype-text',\n\t\t\t\tfileType: 'file',\n\t\t\t\tactionHandler(name) {\n\t\t\t\t\tfileList.createFile(name).then(function(status, data) {\n\t\t\t\t\t\tconst fileInfoModel = new OCA.Files.FileInfoModel(data)\n\t\t\t\t\t\tif (typeof OCA.Viewer !== 'undefined') {\n\t\t\t\t\t\t\tOCA.Files.fileActions.triggerAction('view', fileInfoModel, fileList)\n\t\t\t\t\t\t} else if (typeof OCA.Viewer === 'undefined') {\n\t\t\t\t\t\t\tOCA.Files.fileActions.triggerAction(FILE_ACTION_IDENTIFIER, fileInfoModel, fileList)\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\t}\n\tOC.Plugins.register('OCA.Files.NewFileMenu', newFileMenuPlugin)\n}\n\nconst registerFileActionFallback = () => {\n\tconst sharingToken = document.getElementById('sharingToken') ? document.getElementById('sharingToken').value : null\n\tconst dir = document.getElementById('dir').value\n\n\tif (!sharingToken || dir !== '') {\n\t\tconst ViewerRoot = document.createElement('div')\n\t\tViewerRoot.id = 'text-viewer-fallback'\n\t\tdocument.body.appendChild(ViewerRoot)\n\t\tconst registerAction = (mime) => OCA.Files.fileActions.register(\n\t\t\tmime,\n\t\t\tFILE_ACTION_IDENTIFIER,\n\t\t\tOC.PERMISSION_UPDATE | OC.PERMISSION_READ,\n\t\t\timagePath('core', 'actions/rename'),\n\t\t\t(filename) => {\n\t\t\t\tconst file = window.FileList.findFile(filename)\n\t\t\t\tPromise.all([\n\t\t\t\t\timport('vue'),\n\t\t\t\t\timport(/* webpackChunkName: \"files-modal\" */'./../components/PublicFilesEditor.vue'),\n\t\t\t\t]).then((imports) => {\n\t\t\t\t\tconst path = window.FileList.getCurrentDirectory() + '/' + filename\n\t\t\t\t\tconst Vue = imports[0].default\n\t\t\t\t\tVue.prototype.t = window.t\n\t\t\t\t\tVue.prototype.n = window.n\n\t\t\t\t\tVue.prototype.OCA = window.OCA\n\t\t\t\t\tconst Editor = imports[1].default\n\t\t\t\t\tconst vm = new Vue({\n\t\t\t\t\t\trender: function(h) { // eslint-disable-line\n\t\t\t\t\t\t\tconst self = this\n\t\t\t\t\t\t\treturn h(Editor, {\n\t\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\t\tfileId: file ? file.id : null,\n\t\t\t\t\t\t\t\t\tactive: true,\n\t\t\t\t\t\t\t\t\tshareToken: sharingToken,\n\t\t\t\t\t\t\t\t\trelativePath: path,\n\t\t\t\t\t\t\t\t\tmimeType: file.mimetype,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\tclose: function() { // eslint-disable-line\n\t\t\t\t\t\t\t\t\t\tself.$destroy()\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t},\n\t\t\t\t\t})\n\t\t\t\t\tvm.$mount(ViewerRoot)\n\t\t\t\t})\n\t\t\t},\n\t\t\tt('text', 'Edit')\n\t\t)\n\n\t\tfor (let i = 0; i < openMimetypes.length; i++) {\n\t\t\tregisterAction(openMimetypes[i])\n\t\t\tOCA.Files.fileActions.setDefault(openMimetypes[i], FILE_ACTION_IDENTIFIER)\n\t\t}\n\t}\n\n}\n\nconst FilesWorkspacePlugin = {\n\n\tel: null,\n\n\tattach(fileList) {\n\t\tif (fileList.id !== 'files' && fileList.id !== 'files.public') {\n\t\t\treturn\n\t\t}\n\n\t\tthis.el = document.createElement('div')\n\t\tfileList.registerHeader({\n\t\t\tid: 'workspace',\n\t\t\tel: this.el,\n\t\t\trender: this.render.bind(this),\n\t\t\tpriority: 10,\n\t\t})\n\t},\n\n\trender(fileList) {\n\t\tif (fileList.id !== 'files' && fileList.id !== 'files.public') {\n\t\t\treturn\n\t\t}\n\n\t\timport('vue').then((module) => {\n\t\t\tconst Vue = module.default\n\t\t\tthis.el.id = 'files-workspace-wrapper'\n\t\t\tVue.prototype.t = window.t\n\t\t\tVue.prototype.n = window.n\n\t\t\tVue.prototype.OCA = window.OCA\n\t\t\tconst View = Vue.extend(RichWorkspace)\n\t\t\tconst vm = new View({\n\t\t\t\tpropsData: {\n\t\t\t\t\tpath: fileList.getCurrentDirectory(),\n\t\t\t\t},\n\t\t\t\tstore,\n\t\t\t}).$mount(this.el)\n\n\t\t\tsubscribe('files:navigation:changed', () => {\n\t\t\t\t// Expose if the default file list is active to the component\n\t\t\t\t// to only render the workspace if the file list is actually visible\n\t\t\t\tvm.active = OCA.Files.App.getCurrentFileList() === fileList\n\t\t\t})\n\n\t\t\tfileList.$el.on('urlChanged', data => {\n\t\t\t\tvm.path = data.dir.toString()\n\t\t\t})\n\t\t\tfileList.$el.on('changeDirectory', data => {\n\t\t\t\tvm.path = data.dir.toString()\n\t\t\t})\n\t\t})\n\t},\n}\n\nexport {\n\toptimalPath,\n\tregisterFileActionFallback,\n\tregisterFileCreate,\n\tFilesWorkspacePlugin,\n\tFILE_ACTION_IDENTIFIER,\n}\n","/*\n * @copyright Copyright (c) 2019 Julius Härtl <jus@bitgrid.net>\n *\n * @author Julius Härtl <jus@bitgrid.net>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nconst openMimetypesMarkdown = [\n\t'text/markdown',\n]\n\nconst openMimetypesPlainText = [\n\t'text/plain',\n\t'application/cmd',\n\t'application/x-empty',\n\t'application/x-msdos-program',\n\t'application/javascript',\n\t'application/json',\n\t'application/x-perl',\n\t'application/x-php',\n\t'application/x-tex',\n\t'application/xml',\n\t'application/yaml',\n\t'text/css',\n\t'text/html',\n\t'text/org',\n\t'text/x-c',\n\t'text/x-c++src',\n\t'text/x-h',\n\t'text/x-java-source',\n\t'text/x-ldif',\n\t'text/x-python',\n\t'text/x-shellscript',\n]\n\nif (!window.oc_appswebroots?.richdocuments && !window.oc_appswebroots?.onlyoffice) {\n\topenMimetypesPlainText.push('text/csv')\n}\n\nconst openMimetypes = [...openMimetypesMarkdown, ...openMimetypesPlainText]\n\nexport {\n\topenMimetypes,\n\topenMimetypesMarkdown,\n\topenMimetypesPlainText,\n}\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".menubar[data-v-2c2d396c]{--background-blur: blur(10px);position:fixed;position:-webkit-sticky;position:sticky;top:0;display:flex;justify-content:flex-end;z-index:10021;background-color:var(--color-main-background-translucent);-webkit-backdrop-filter:var(--background-blur);backdrop-filter:var(--background-blur);max-height:44px;padding-top:3px;padding-bottom:3px}.menubar.autohide[data-v-2c2d396c]{visibility:hidden;opacity:0;transition:visibility .2s .4s,opacity .2s .4s}.menubar.autohide.show[data-v-2c2d396c]{visibility:visible;opacity:1}.menubar .menubar-icons[data-v-2c2d396c]{flex-grow:1;margin-left:calc((100% - 660px)/2)}@media(max-width: 660px){.menubar .menubar-icons[data-v-2c2d396c]{margin-left:0}}.menubar[data-v-2c2d396c] .action-item__menu ul{max-height:calc(100vh - 88px);overflow:scroll}.menubar button[data-v-2c2d396c]{position:relative;width:44px;height:44px;margin:0;background-size:16px;border:0;background-color:transparent;opacity:.5;color:var(--color-main-text);background-position:center center;vertical-align:top}.menubar button[data-v-2c2d396c]:hover,.menubar button[data-v-2c2d396c]:focus,.menubar button[data-v-2c2d396c]:active{background-color:var(--color-background-dark)}.menubar button.is-active[data-v-2c2d396c]::before{transform:translateX(-50%);border-radius:100%;position:absolute;background:var(--color-primary-element);bottom:3px;height:6px;width:6px;content:\\\"\\\";left:50%}.menubar button.is-active[data-v-2c2d396c],.menubar button[data-v-2c2d396c]:hover,.menubar button[data-v-2c2d396c]:focus{opacity:1}.menubar button.icon-undo[data-v-2c2d396c],.menubar button.icon-redo[data-v-2c2d396c]{opacity:.8}.menubar button.icon-undo[data-v-2c2d396c]:disabled,.menubar button.icon-redo[data-v-2c2d396c]:disabled{opacity:.4}.menubar .submenu[data-v-2c2d396c],.menubar .menuitem-emoji[data-v-2c2d396c]{display:inline-block;width:44px;height:44px;position:relative;vertical-align:top}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/MenuBar.vue\"],\"names\":[],\"mappings\":\"AA+ZA,0BACC,6BAAA,CACA,cAAA,CACA,uBAAA,CACA,eAAA,CACA,KAAA,CACA,YAAA,CACA,wBAAA,CACA,aAAA,CACA,yDAAA,CACA,8CAAA,CACA,sCAAA,CACA,eAAA,CACA,eAAA,CACA,kBAAA,CAEA,mCACC,iBAAA,CACA,SAAA,CACA,6CAAA,CACA,wCACC,kBAAA,CACA,SAAA,CAGF,yCACC,WAAA,CACA,kCAAA,CAED,yBACC,yCACC,aAAA,CAAA,CAGF,gDACC,6BAAA,CACA,eAAA,CAIF,iCACC,iBAAA,CACA,UAAA,CACA,WAAA,CACA,QAAA,CACA,oBAAA,CACA,QAAA,CACA,4BAAA,CACA,UAAA,CACA,4BAAA,CACA,iCAAA,CACA,kBAAA,CACA,sHACC,6CAAA,CAGD,mDACC,0BAAA,CACA,kBAAA,CACA,iBAAA,CACA,uCAAA,CACA,UAAA,CACA,UAAA,CACA,SAAA,CACA,UAAA,CACA,QAAA,CAGD,yHAGC,SAAA,CAGD,sFAEC,UAAA,CAEA,wGACC,UAAA,CAKH,6EACC,oBAAA,CACA,UAAA,CACA,WAAA,CACA,iBAAA,CACA,kBAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n.menubar {\\n\\t--background-blur: blur(10px);\\n\\tposition: fixed;\\n\\tposition: -webkit-sticky;\\n\\tposition: sticky;\\n\\ttop: 0;\\n\\tdisplay: flex;\\n\\tjustify-content: flex-end;\\n\\tz-index: 10021; // above modal-header and menububble so menubar is always on top\\n\\tbackground-color: var(--color-main-background-translucent);\\n\\t-webkit-backdrop-filter: var(--background-blur);\\n\\tbackdrop-filter: var(--background-blur);\\n\\tmax-height: 44px; // important for mobile so that the buttons are always inside the container\\n\\tpadding-top:3px;\\n\\tpadding-bottom: 3px;\\n\\n\\t&.autohide {\\n\\t\\tvisibility: hidden;\\n\\t\\topacity: 0;\\n\\t\\ttransition: visibility 0.2s 0.4s, opacity 0.2s 0.4s;\\n\\t\\t&.show {\\n\\t\\t\\tvisibility: visible;\\n\\t\\t\\topacity: 1;\\n\\t\\t}\\n\\t}\\n\\t.menubar-icons {\\n\\t\\tflex-grow: 1;\\n\\t\\tmargin-left: calc((100% - 660px) / 2);\\n\\t}\\n\\t@media (max-width: 660px) {\\n\\t\\t.menubar-icons {\\n\\t\\t\\tmargin-left: 0;\\n\\t\\t}\\n\\t}\\n\\t&::v-deep .action-item__menu ul {\\n\\t\\tmax-height: calc(100vh - 88px);\\n\\t\\toverflow: scroll;\\n\\t}\\n}\\n\\n.menubar button {\\n\\tposition: relative;\\n\\twidth: 44px;\\n\\theight: 44px;\\n\\tmargin: 0;\\n\\tbackground-size: 16px;\\n\\tborder: 0;\\n\\tbackground-color: transparent;\\n\\topacity: .5;\\n\\tcolor: var(--color-main-text);\\n\\tbackground-position: center center;\\n\\tvertical-align: top;\\n\\t&:hover, &:focus, &:active {\\n\\t\\tbackground-color: var(--color-background-dark);\\n\\t}\\n\\n\\t&.is-active::before {\\n\\t\\ttransform: translateX(-50%);\\n\\t\\tborder-radius: 100%;\\n\\t\\tposition: absolute;\\n\\t\\tbackground: var(--color-primary-element);\\n\\t\\tbottom: 3px;\\n\\t\\theight: 6px;\\n\\t\\twidth: 6px;\\n\\t\\tcontent: '';\\n\\t\\tleft: 50%;\\n\\n\\t}\\n\\t&.is-active,\\n\\t&:hover,\\n\\t&:focus {\\n\\t\\topacity: 1;\\n\\t}\\n\\n\\t&.icon-undo,\\n\\t&.icon-redo {\\n\\t\\topacity: .8;\\n\\n\\t\\t&:disabled {\\n\\t\\t\\topacity: .4;\\n\\t\\t}\\n\\t}\\n}\\n\\n.menubar .submenu, .menubar .menuitem-emoji {\\n\\tdisplay: inline-block;\\n\\twidth: 44px;\\n\\theight: 44px;\\n\\tposition: relative;\\n\\tvertical-align: top;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".menububble[data-v-756732d2]{display:flex;z-index:10020;background:var(--color-main-background-translucent);box-shadow:0 1px 5px var(--color-box-shadow);border-radius:var(--border-radius-large);overflow:hidden;padding:0;margin-left:10px;height:44px}.menububble__button[data-v-756732d2]{display:block;flex-grow:1;border:0;padding:.9rem .7rem;margin:0;border-radius:0;cursor:pointer;background-color:var(--color-main-background);border-right:1px solid var(--color-border)}.menububble__button[data-v-756732d2]:focus,.menububble__button[data-v-756732d2]:hover{background-color:var(--color-background-hover);border:0;border-right:1px solid var(--color-border) !important}.menububble__button[data-v-756732d2]:last-child{border:0 !important}.menububble__buttontext[data-v-756732d2]{padding:.4rem;padding-right:0}.menububble__form[data-v-756732d2]{display:flex;align-items:center}.menububble__input[data-v-756732d2]{font:inherit;border:none;background:transparent;min-width:250px}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/MenuBubble.vue\"],\"names\":[],\"mappings\":\"AAmLA,6BACC,YAAA,CACA,aAAA,CACA,mDAAA,CACA,4CAAA,CACA,wCAAA,CACA,eAAA,CACA,SAAA,CACA,gBAAA,CACA,WAAA,CAEA,qCACC,aAAA,CACA,WAAA,CACA,QAAA,CACA,mBAAA,CACA,QAAA,CACA,eAAA,CACA,cAAA,CACA,6CAAA,CACA,0CAAA,CAEA,sFAEC,8CAAA,CACA,QAAA,CACA,qDAAA,CAGD,gDACC,mBAAA,CAIF,yCACC,aAAA,CACA,eAAA,CAGD,mCACC,YAAA,CACA,kBAAA,CAGD,oCACC,YAAA,CACA,WAAA,CACA,sBAAA,CACA,eAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n.menububble {\\n\\tdisplay: flex;\\n\\tz-index: 10020;\\n\\tbackground: var(--color-main-background-translucent);\\n\\tbox-shadow: 0 1px 5px var(--color-box-shadow);\\n\\tborder-radius: var(--border-radius-large);\\n\\toverflow: hidden;\\n\\tpadding: 0;\\n\\tmargin-left: 10px;\\n\\theight: 44px;\\n\\n\\t&__button {\\n\\t\\tdisplay: block;\\n\\t\\tflex-grow: 1;\\n\\t\\tborder: 0;\\n\\t\\tpadding: 0.9rem 0.7rem;\\n\\t\\tmargin: 0;\\n\\t\\tborder-radius: 0;\\n\\t\\tcursor: pointer;\\n\\t\\tbackground-color: var(--color-main-background);\\n\\t\\tborder-right: 1px solid var(--color-border);\\n\\n\\t\\t&:focus,\\n\\t\\t&:hover {\\n\\t\\t\\tbackground-color: var(--color-background-hover);\\n\\t\\t\\tborder: 0;\\n\\t\\t\\tborder-right: 1px solid var(--color-border) !important;\\n\\t\\t}\\n\\n\\t\\t&:last-child {\\n\\t\\t\\tborder: 0 !important;\\n\\t\\t}\\n\\t}\\n\\n\\t&__buttontext {\\n\\t\\tpadding: 0.4rem;\\n\\t\\tpadding-right: 0;\\n\\t}\\n\\n\\t&__form {\\n\\t\\tdisplay: flex;\\n\\t\\talign-items: center;\\n\\t}\\n\\n\\t&__input {\\n\\t\\tfont: inherit;\\n\\t\\tborder: none;\\n\\t\\tbackground: transparent;\\n\\t\\tmin-width: 250px;\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"#rich-workspace[data-v-4eafc5c2]{padding:0 50px;margin-bottom:-24px;text-align:left;max-height:0;transition:max-height .5s cubic-bezier(0, 1, 0, 1);z-index:61;position:relative}#rich-workspace.creatable[data-v-4eafc5c2]{min-height:90px}#rich-workspace[data-v-4eafc5c2]:only-child{margin-bottom:0}.empty-workspace[data-v-4eafc5c2]{padding-top:43px;color:var(--color-text-maxcontrast);height:0}#rich-workspace[data-v-4eafc5c2] div[contenteditable=false]{width:100%;padding:0px;background-color:var(--color-main-background);opacity:1;border:none}#rich-workspace[data-v-4eafc5c2] #editor-container{height:100%;position:unset !important;top:auto !important}#rich-workspace[data-v-4eafc5c2] #editor-wrapper{position:unset !important;overflow:visible}#rich-workspace[data-v-4eafc5c2] #editor{overflow:visible !important}#rich-workspace[data-v-4eafc5c2] .content-wrapper{overflow:scroll !important;max-height:calc(40vh - 50px);padding-left:10px;padding-bottom:60px}#rich-workspace[data-v-4eafc5c2] #editor-wrapper .ProseMirror{padding:0px;margin:0}#rich-workspace[data-v-4eafc5c2] .menubar{z-index:61;margin-bottom:-10px}#rich-workspace[data-v-4eafc5c2] .menubar .menubar-icons{margin-left:0}#rich-workspace[data-v-4eafc5c2] .editor__content{margin:0}#rich-workspace.focus[data-v-4eafc5c2]{max-height:50vh}#rich-workspace[data-v-4eafc5c2]:not(.focus){max-height:30vh;position:relative;overflow:hidden}#rich-workspace[data-v-4eafc5c2]:not(.focus):not(.icon-loading):after{content:\\\"\\\";position:absolute;z-index:1;bottom:0;left:0;pointer-events:none;background-image:linear-gradient(to bottom, rgba(255, 255, 255, 0), var(--color-main-background));width:100%;height:4em}#rich-workspace.dark[data-v-4eafc5c2]:not(.focus):not(.icon-loading):after{background-image:linear-gradient(to bottom, rgba(0, 0, 0, 0), var(--color-main-background))}@media only screen and (max-width: 1024px){#rich-workspace[data-v-4eafc5c2]:not(.focus){max-height:30vh}}html.ie #rich-workspace[data-v-4eafc5c2] #editor-container{position:initial}html.ie #rich-workspace[data-v-4eafc5c2] #editor-wrapper{position:relative !important;top:auto !important}html.ie #rich-workspace[data-v-4eafc5c2] #editor{display:flex;flex-direction:column;overflow:hidden !important}html.ie #rich-workspace[data-v-4eafc5c2] .menubar{position:relative;overflow:hidden;flex-shrink:0;height:44px;top:auto}html.ie #rich-workspace[data-v-4eafc5c2] #editor>div:nth-child(2){min-height:44px;overflow-x:hidden;overflow-y:auto;flex-shrink:1}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/views/RichWorkspace.vue\"],\"names\":[],\"mappings\":\"AAkLA,iCACC,cAAA,CAEA,mBAAA,CACA,eAAA,CACA,YAAA,CACA,kDAAA,CACA,UAAA,CACA,iBAAA,CACA,2CACC,eAAA,CAKF,4CACC,eAAA,CAGD,kCACC,gBAAA,CACA,mCAAA,CACA,QAAA,CAGD,4DACC,UAAA,CACA,WAAA,CACA,6CAAA,CACA,SAAA,CACA,WAAA,CAGD,mDACC,WAAA,CACA,yBAAA,CACA,mBAAA,CAGD,iDACC,yBAAA,CACA,gBAAA,CAGD,yCACC,2BAAA,CAGD,kDACC,0BAAA,CACA,4BAAA,CACA,iBAAA,CACA,mBAAA,CAGD,8DACC,WAAA,CACA,QAAA,CAGD,0CACC,UAAA,CAEA,mBAAA,CAGD,yDACC,aAAA,CAGD,kDACC,QAAA,CAGD,uCACC,eAAA,CAGD,6CACC,eAAA,CACA,iBAAA,CACA,eAAA,CAGD,sEACC,UAAA,CACA,iBAAA,CACA,SAAA,CACA,QAAA,CACA,MAAA,CACA,mBAAA,CACA,iGAAA,CACA,UAAA,CACA,UAAA,CAGD,2EACC,2FAAA,CAGD,2CACC,6CACC,eAAA,CAAA,CAMA,2DACC,gBAAA,CAGD,yDACC,4BAAA,CACA,mBAAA,CAGD,iDACC,YAAA,CACA,qBAAA,CACA,0BAAA,CAGD,kDACC,iBAAA,CACA,eAAA,CACA,aAAA,CACA,WAAA,CACA,QAAA,CAGD,kEACC,eAAA,CACA,iBAAA,CACA,eAAA,CACA,aAAA\",\"sourcesContent\":[\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n#rich-workspace {\\n\\tpadding: 0 50px;\\n\\t/* Slightly reduce vertical space */\\n\\tmargin-bottom: -24px;\\n\\ttext-align: left;\\n\\tmax-height: 0;\\n\\ttransition: max-height 0.5s cubic-bezier(0, 1, 0, 1);\\n\\tz-index: 61;\\n\\tposition: relative;\\n\\t&.creatable {\\n\\t\\tmin-height: 90px;\\n\\t}\\n}\\n\\n/* For subfolders, where there are no Recommendations */\\n#rich-workspace:only-child {\\n\\tmargin-bottom: 0;\\n}\\n\\n.empty-workspace {\\n\\tpadding-top: 43px;\\n\\tcolor: var(--color-text-maxcontrast);\\n\\theight: 0;\\n}\\n\\n#rich-workspace::v-deep div[contenteditable=false] {\\n\\twidth: 100%;\\n\\tpadding: 0px;\\n\\tbackground-color: var(--color-main-background);\\n\\topacity: 1;\\n\\tborder: none;\\n}\\n\\n#rich-workspace::v-deep #editor-container {\\n\\theight: 100%;\\n\\tposition: unset !important;\\n\\ttop: auto !important;\\n}\\n\\n#rich-workspace::v-deep #editor-wrapper {\\n\\tposition: unset !important;\\n\\toverflow: visible;\\n}\\n\\n#rich-workspace::v-deep #editor {\\n\\toverflow: visible !important;\\n}\\n\\n#rich-workspace::v-deep .content-wrapper {\\n\\toverflow: scroll !important;\\n\\tmax-height: calc(40vh - 50px);\\n\\tpadding-left: 10px;\\n\\tpadding-bottom: 60px; /* ensure menububble fits below */\\n}\\n\\n#rich-workspace::v-deep #editor-wrapper .ProseMirror {\\n\\tpadding: 0px;\\n\\tmargin: 0;\\n}\\n\\n#rich-workspace::v-deep .menubar {\\n\\tz-index: 61;\\n\\t/* Slightly reduce vertical space */\\n\\tmargin-bottom: -10px;\\n}\\n\\n#rich-workspace::v-deep .menubar .menubar-icons {\\n\\tmargin-left: 0;\\n}\\n\\n#rich-workspace::v-deep .editor__content {\\n\\tmargin: 0;\\n}\\n\\n#rich-workspace.focus {\\n\\tmax-height: 50vh;\\n}\\n\\n#rich-workspace:not(.focus) {\\n\\tmax-height: 30vh;\\n\\tposition: relative;\\n\\toverflow: hidden;\\n}\\n\\n#rich-workspace:not(.focus):not(.icon-loading):after {\\n\\tcontent: '';\\n\\tposition: absolute;\\n\\tz-index: 1;\\n\\tbottom: 0;\\n\\tleft: 0;\\n\\tpointer-events: none;\\n\\tbackground-image: linear-gradient(to bottom, rgba(255, 255, 255, 0), var(--color-main-background));\\n\\twidth: 100%;\\n\\theight: 4em;\\n}\\n\\n#rich-workspace.dark:not(.focus):not(.icon-loading):after {\\n\\tbackground-image: linear-gradient(to bottom, rgba(0, 0, 0, 0), var(--color-main-background));\\n}\\n\\n@media only screen and (max-width: 1024px) {\\n\\t#rich-workspace:not(.focus) {\\n\\t\\tmax-height: 30vh;\\n\\t}\\n}\\n\\nhtml.ie {\\n\\t#rich-workspace::v-deep {\\n\\t\\t#editor-container {\\n\\t\\t\\tposition: initial;\\n\\t\\t}\\n\\n\\t\\t#editor-wrapper {\\n\\t\\t\\tposition: relative !important;\\n\\t\\t\\ttop: auto !important;\\n\\t\\t}\\n\\n\\t\\t#editor {\\n\\t\\t\\tdisplay: flex;\\n\\t\\t\\tflex-direction: column;\\n\\t\\t\\toverflow: hidden !important;\\n\\t\\t}\\n\\n\\t\\t.menubar {\\n\\t\\t\\tposition: relative;\\n\\t\\t\\toverflow: hidden;\\n\\t\\t\\tflex-shrink: 0;\\n\\t\\t\\theight: 44px;\\n\\t\\t\\ttop: auto;\\n\\t\\t}\\n\\n\\t\\t#editor > div:nth-child(2) {\\n\\t\\t\\tmin-height: 44px;\\n\\t\\t\\toverflow-x: hidden;\\n\\t\\t\\toverflow-y: auto;\\n\\t\\t\\tflex-shrink: 1;\\n\\t\\t}\\n\\t}\\n}\\n\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"menubar\",class:{ 'show': _vm.isVisible, 'autohide': _vm.autohide }},[_c('input',{ref:\"imageFileInput\",staticClass:\"hidden-visually\",attrs:{\"type\":\"file\",\"accept\":\"image/*, image/heic, image/heif\",\"aria-hidden\":\"true\",\"multiple\":true},on:{\"change\":_vm.onImageUploadFilePicked}}),_vm._v(\" \"),(_vm.isRichEditor && !_vm.isReadOnly)?_c('div',{ref:\"menubar\",staticClass:\"menubar-icons\"},[_vm._l((_vm.icons),function(icon){return [(icon.class === 'icon-emoji')?_c('EmojiPicker',{directives:[{name:\"show\",rawName:\"v-show\",value:(icon.priority <= _vm.iconCount),expression:\"icon.priority <= iconCount\"}],key:icon.label,staticClass:\"menuitem-emoji\",on:{\"selectData\":function (emojiObject) { return _vm.addEmoji(icon, emojiObject); }}},[_c('button',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:(_vm.t('text', 'Insert emoji')),expression:\"t('text', 'Insert emoji')\"}],staticClass:\"icon-emoji\",attrs:{\"aria-label\":_vm.t('text', 'Insert emoji'),\"aria-haspopup\":true},on:{\"click\":function($event){return _vm.toggleChildMenu(icon)}}})]):(icon.class === 'icon-image')?_c('Actions',{key:icon.label,ref:\"imageActions\",refInFor:true,staticClass:\"submenu\",attrs:{\"default-icon\":'icon-image'},on:{\"open\":function($event){return _vm.toggleChildMenu(icon)},\"close\":function($event){return _vm.toggleChildMenu(icon)}}},[_c('button',{class:{ 'icon-image': true, 'loading-small': _vm.uploadingImages },attrs:{\"slot\":\"icon\",\"title\":icon.label,\"aria-label\":icon.label,\"aria-haspopup\":true},slot:\"icon\"}),_vm._v(\" \"),_c('ActionButton',{attrs:{\"icon\":\"icon-upload\",\"close-after-click\":true,\"disabled\":_vm.uploadingImages},on:{\"click\":function($event){return _vm.onUploadImage()}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('text', 'Upload from computer'))+\"\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),(!_vm.isPublic)?_c('ActionButton',{attrs:{\"icon\":\"icon-folder\",\"close-after-click\":true,\"disabled\":_vm.uploadingImages},on:{\"click\":function($event){return _vm.showImagePrompt()}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(_vm.t('text', 'Insert from Files'))+\"\\n\\t\\t\\t\\t\")]):_vm._e()],1):(icon.class)?_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(icon.priority <= _vm.iconCount),expression:\"icon.priority <= iconCount\"},{name:\"tooltip\",rawName:\"v-tooltip\",value:(_vm.getLabelAndKeys(icon)),expression:\"getLabelAndKeys(icon)\"}],key:icon.label,class:_vm.getIconClasses(icon),attrs:{\"disabled\":_vm.disabled(icon)},on:{\"click\":function($event){return _vm.clickIcon(icon)}}}):[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(icon.priority <= _vm.iconCount),expression:\"icon.priority <= iconCount\"},{name:\"click-outside\",rawName:\"v-click-outside\",value:(function () { return _vm.hideChildMenu(icon); }),expression:\"() => hideChildMenu(icon)\"}],key:icon.label,staticClass:\"submenu\"},[_c('button',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:(_vm.getLabelAndKeys(icon)),expression:\"getLabelAndKeys(icon)\"}],class:_vm.childIconClasses(icon.children ),on:{\"click\":function($event){$event.preventDefault();return _vm.toggleChildMenu(icon)}}}),_vm._v(\" \"),_c('div',{staticClass:\"popovermenu\",class:[\n\t\t\t\t\t\t\t_vm.isChildMenuVisible(icon) ? 'open' : '',\n\t\t\t\t\t\t\t_vm.menuAlignClass ]},[_c('PopoverMenu',{attrs:{\"menu\":_vm.childPopoverMenu(icon.children, icon)}})],1)])]]}),_vm._v(\" \"),_c('Actions',{on:{\"open\":function($event){return _vm.toggleChildMenu({ label: 'Remaining Actions' })},\"close\":function($event){return _vm.toggleChildMenu({ label: 'Remaining Actions' })}}},[_vm._l((_vm.icons),function(icon){return [(icon.class && _vm.isHiddenInMenu(icon) && !_vm.hasSubmenu(icon))?_c('ActionButton',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:(_vm.getKeys(icon)),expression:\"getKeys(icon)\"}],key:icon.class,attrs:{\"icon\":icon.class,\"close-after-click\":true},on:{\"click\":function($event){return _vm.clickIcon(icon)}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\"+_vm._s(icon.label)+\"\\n\\t\\t\\t\\t\")]):_vm._e()]})],2)],2):_vm._e(),_vm._v(\" \"),_vm._t(\"default\",function(){return [_vm._v(\"\\n\\t\\tLeft side\\n\\t\")]})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/*\n * @copyright Copyright (c) 2019 Julius Härtl <jus@bitgrid.net>\n *\n * @author Julius Härtl <jus@bitgrid.net>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nexport default [\n\t{\n\t\tlabel: t('text', 'Undo'),\n\t\tkeyChar: 'z',\n\t\tkeyModifiers: ['ctrl'],\n\t\tclass: 'icon-undo',\n\t\taction: (command) => command.undo(),\n\t\tpriority: 5,\n\t},\n\t{\n\t\tlabel: t('text', 'Redo'),\n\t\tkeyChar: 'y',\n\t\tkeyModifiers: ['ctrl'],\n\t\tclass: 'icon-redo',\n\t\taction: (command) => command.redo(),\n\t\tpriority: 11,\n\t},\n\t{\n\t\tlabel: t('text', 'Bold'),\n\t\tkeyChar: 'b',\n\t\tkeyModifiers: ['ctrl'],\n\t\tclass: 'icon-bold',\n\t\tisActive: 'strong',\n\t\taction: (command) => {\n\t\t\treturn command.toggleBold()\n\t\t},\n\t\tpriority: 6,\n\t},\n\t{\n\t\tlabel: t('text', 'Italic'),\n\t\tkeyChar: 'i',\n\t\tkeyModifiers: ['ctrl'],\n\t\tclass: 'icon-italic',\n\t\tisActive: 'em',\n\t\taction: (command) => {\n\t\t\treturn command.toggleItalic()\n\t\t},\n\t\tpriority: 7,\n\t},\n\t{\n\t\tlabel: t('text', 'Underline'),\n\t\tkeyChar: 'u',\n\t\tkeyModifiers: ['ctrl'],\n\t\tclass: 'icon-underline',\n\t\tisActive: 'underline',\n\t\taction: (command) => {\n\t\t\treturn command.toggleUnderline()\n\t\t},\n\t\tpriority: 14,\n\t},\n\t{\n\t\tlabel: t('text', 'Strikethrough'),\n\t\tkeyChar: 'd',\n\t\tkeyModifiers: ['ctrl'],\n\t\tclass: 'icon-strike',\n\t\tisActive: 'strike',\n\t\taction: (command) => {\n\t\t\treturn command.toggleStrike()\n\t\t},\n\t\tpriority: 15,\n\t},\n\t{\n\t\tlabel: t('text', 'Headings'),\n\t\tkeyChar: '1…6',\n\t\tkeyModifiers: ['ctrl', 'shift'],\n\t\tvisible: false,\n\t\tchildren: [\n\t\t\t{\n\t\t\t\tlabel: t('text', 'Heading 1'),\n\t\t\t\tclass: 'icon-h1',\n\t\t\t\tisActive: ['heading', { level: 1 }],\n\t\t\t\taction: (command) => {\n\t\t\t\t\treturn command.toggleHeading({ level: 1 })\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: t('text', 'Heading 2'),\n\t\t\t\tclass: 'icon-h2',\n\t\t\t\tisActive: ['heading', { level: 2 }],\n\t\t\t\taction: (command) => {\n\t\t\t\t\treturn command.toggleHeading({ level: 2 })\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: t('text', 'Heading 3'),\n\t\t\t\tclass: 'icon-h3',\n\t\t\t\tisActive: ['heading', { level: 3 }],\n\t\t\t\taction: (command) => {\n\t\t\t\t\treturn command.toggleHeading({ level: 3 })\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: t('text', 'Heading 4'),\n\t\t\t\tclass: 'icon-h4',\n\t\t\t\tisActive: ['heading', { level: 4 }],\n\t\t\t\taction: (command) => {\n\t\t\t\t\treturn command.toggleHeading({ level: 4 })\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: t('text', 'Heading 5'),\n\t\t\t\tclass: 'icon-h5',\n\t\t\t\tisActive: ['heading', { level: 5 }],\n\t\t\t\taction: (command) => {\n\t\t\t\t\treturn command.toggleHeading({ level: 5 })\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: t('text', 'Heading 6'),\n\t\t\t\tclass: 'icon-h6',\n\t\t\t\tisActive: ['heading', { level: 6 }],\n\t\t\t\taction: (command) => {\n\t\t\t\t\treturn command.toggleHeading({ level: 6 })\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t\tpriority: 1,\n\t},\n\t{\n\t\tlabel: t('text', 'Unordered list'),\n\t\tkeyChar: '8',\n\t\tkeyModifiers: ['ctrl', 'shift'],\n\t\tclass: 'icon-ul',\n\t\tisActive: 'bulletList',\n\t\taction: (command) => {\n\t\t\treturn command.toggleBulletList()\n\t\t},\n\t\tpriority: 8,\n\t},\n\t{\n\t\tlabel: t('text', 'Ordered list'),\n\t\tkeyChar: '9',\n\t\tkeyModifiers: ['ctrl', 'shift'],\n\t\tclass: 'icon-ol',\n\t\tisActive: 'orderedList',\n\t\taction: (command) => {\n\t\t\treturn command.toggleOrderedList()\n\t\t},\n\t\tpriority: 9,\n\t},\n\t{\n\t\tlabel: t('text', 'ToDo list'),\n\t\tclass: 'icon-tasklist',\n\t\tisActive: 'taskList',\n\t\taction: (command) => command.toggleTaskList(),\n\t\tpriority: 10,\n\t},\n\t{\n\t\tlabel: t('text', 'Blockquote'),\n\t\tkeyChar: '>',\n\t\tkeyModifiers: ['ctrl'],\n\t\tclass: 'icon-quote',\n\t\tisActive: 'blockquote',\n\t\taction: (command) => {\n\t\t\treturn command.toggleBlockquote()\n\t\t},\n\t\tpriority: 12,\n\t},\n\t{\n\t\tlabel: t('text', 'Callouts'),\n\t\tvisible: false,\n\t\tchildren: [\n\t\t\t{\n\t\t\t\tlabel: t('text', 'Info'),\n\t\t\t\tclass: 'icon-info',\n\t\t\t\tisActive: ['callout', { type: 'info' }],\n\t\t\t\taction: (command) => {\n\t\t\t\t\treturn command.toggleCallout({ type: 'info' })\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: t('text', 'Success'),\n\t\t\t\tclass: 'icon-success',\n\t\t\t\tisActive: ['callout', { type: 'success' }],\n\t\t\t\taction: (command) => {\n\t\t\t\t\treturn command.toggleCallout({ type: 'success' })\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: t('text', 'Warning'),\n\t\t\t\tclass: 'icon-warn',\n\t\t\t\tisActive: ['callout', { type: 'warn' }],\n\t\t\t\taction: (command) => {\n\t\t\t\t\treturn command.toggleCallout({ type: 'warn' })\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: t('text', 'Danger'),\n\t\t\t\tclass: 'icon-error',\n\t\t\t\tisActive: ['callout', { type: 'error' }],\n\t\t\t\taction: (command) => {\n\t\t\t\t\treturn command.toggleCallout({ type: 'error' })\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t\tpriority: 3,\n\t},\n\t{\n\t\tlabel: t('text', 'Code block'),\n\t\tclass: 'icon-code',\n\t\tisActive: 'codeBlock',\n\t\taction: (command) => {\n\t\t\treturn command.toggleCodeBlock()\n\t\t},\n\t\tpriority: 13,\n\t},\n\t{\n\t\tlabel: t('text', 'Table'),\n\t\tclass: 'icon-table',\n\t\tisActive: 'table',\n\t\taction: (command) => {\n\t\t\treturn command.insertTable()\n\t\t},\n\t\tpriority: 16,\n\t},\n\t{\n\t\tlabel: t('text', 'Emoji picker'),\n\t\tclass: 'icon-emoji',\n\t\taction: (command, emojiObject) => {\n\t\t\treturn command.emoji(emojiObject)\n\t\t},\n\t\tpriority: 4,\n\t},\n\t{\n\t\tlabel: t('text', 'Insert image'),\n\t\tclass: 'icon-image',\n\t\tpriority: 2,\n\t},\n\t{\n\t\tlabel: t('text', 'Formatting help'),\n\t\tclass: 'icon-help',\n\t\tclick: (view) => view.$emit('show-help'),\n\t\tpriority: 17,\n\t},\n]\n","<!--\n  - @copyright Copyright (c) 2019 Julius Härtl <jus@bitgrid.net>\n  -\n  - @author Julius Härtl <jus@bitgrid.net>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\n  -\n  -->\n\n<template>\n\t<div class=\"menubar\" :class=\"{ 'show': isVisible, 'autohide': autohide }\">\n\t\t<input ref=\"imageFileInput\"\n\t\t\ttype=\"file\"\n\t\t\taccept=\"image/*, image/heic, image/heif\"\n\t\t\taria-hidden=\"true\"\n\t\t\tclass=\"hidden-visually\"\n\t\t\t:multiple=\"true\"\n\t\t\t@change=\"onImageUploadFilePicked\">\n\t\t<div v-if=\"isRichEditor && !isReadOnly\" ref=\"menubar\" class=\"menubar-icons\">\n\t\t\t<template v-for=\"(icon) in icons\">\n\t\t\t\t<EmojiPicker v-if=\"icon.class === 'icon-emoji'\"\n\t\t\t\t\tv-show=\"icon.priority <= iconCount\"\n\t\t\t\t\t:key=\"icon.label\"\n\t\t\t\t\tclass=\"menuitem-emoji\"\n\t\t\t\t\t@selectData=\"emojiObject => addEmoji(icon, emojiObject)\">\n\t\t\t\t\t<button v-tooltip=\"t('text', 'Insert emoji')\"\n\t\t\t\t\t\tclass=\"icon-emoji\"\n\t\t\t\t\t\t:aria-label=\"t('text', 'Insert emoji')\"\n\t\t\t\t\t\t:aria-haspopup=\"true\"\n\t\t\t\t\t\t@click=\"toggleChildMenu(icon)\" />\n\t\t\t\t</EmojiPicker>\n\t\t\t\t<Actions v-else-if=\"icon.class === 'icon-image'\"\n\t\t\t\t\t:key=\"icon.label\"\n\t\t\t\t\tref=\"imageActions\"\n\t\t\t\t\tclass=\"submenu\"\n\t\t\t\t\t:default-icon=\"'icon-image'\"\n\t\t\t\t\t@open=\"toggleChildMenu(icon)\"\n\t\t\t\t\t@close=\"toggleChildMenu(icon)\">\n\t\t\t\t\t<button slot=\"icon\"\n\t\t\t\t\t\t:class=\"{ 'icon-image': true, 'loading-small': uploadingImages }\"\n\t\t\t\t\t\t:title=\"icon.label\"\n\t\t\t\t\t\t:aria-label=\"icon.label\"\n\t\t\t\t\t\t:aria-haspopup=\"true\" />\n\t\t\t\t\t<ActionButton icon=\"icon-upload\"\n\t\t\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t\t\t:disabled=\"uploadingImages\"\n\t\t\t\t\t\t@click=\"onUploadImage()\">\n\t\t\t\t\t\t{{ t('text', 'Upload from computer') }}\n\t\t\t\t\t</ActionButton>\n\t\t\t\t\t<ActionButton v-if=\"!isPublic\"\n\t\t\t\t\t\ticon=\"icon-folder\"\n\t\t\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t\t\t:disabled=\"uploadingImages\"\n\t\t\t\t\t\t@click=\"showImagePrompt()\">\n\t\t\t\t\t\t{{ t('text', 'Insert from Files') }}\n\t\t\t\t\t</ActionButton>\n\t\t\t\t</Actions>\n\t\t\t\t<button v-else-if=\"icon.class\"\n\t\t\t\t\tv-show=\"icon.priority <= iconCount\"\n\t\t\t\t\t:key=\"icon.label\"\n\t\t\t\t\tv-tooltip=\"getLabelAndKeys(icon)\"\n\t\t\t\t\t:class=\"getIconClasses(icon)\"\n\t\t\t\t\t:disabled=\"disabled(icon)\"\n\t\t\t\t\t@click=\"clickIcon(icon)\" />\n\t\t\t\t<template v-else>\n\t\t\t\t\t<div v-show=\"icon.priority <= iconCount\"\n\t\t\t\t\t\t:key=\"icon.label\"\n\t\t\t\t\t\tv-click-outside=\"() => hideChildMenu(icon)\"\n\t\t\t\t\t\tclass=\"submenu\">\n\t\t\t\t\t\t<button v-tooltip=\"getLabelAndKeys(icon)\"\n\t\t\t\t\t\t\t:class=\"childIconClasses(icon.children, )\"\n\t\t\t\t\t\t\t@click.prevent=\"toggleChildMenu(icon)\" />\n\t\t\t\t\t\t<div :class=\"[\n\t\t\t\t\t\t\t\tisChildMenuVisible(icon) ? 'open' : '',\n\t\t\t\t\t\t\t\tmenuAlignClass,\n\t\t\t\t\t\t\t]\"\n\t\t\t\t\t\t\tclass=\"popovermenu\">\n\t\t\t\t\t\t\t<PopoverMenu :menu=\"childPopoverMenu(icon.children, icon)\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</template>\n\t\t\t<Actions @open=\"toggleChildMenu({ label: 'Remaining Actions' })\"\n\t\t\t\t@close=\"toggleChildMenu({ label: 'Remaining Actions' })\">\n\t\t\t\t<template v-for=\"(icon) in icons\">\n\t\t\t\t\t<ActionButton v-if=\"icon.class && isHiddenInMenu(icon) && !hasSubmenu(icon)\"\n\t\t\t\t\t\t:key=\"icon.class\"\n\t\t\t\t\t\tv-tooltip=\"getKeys(icon)\"\n\t\t\t\t\t\t:icon=\"icon.class\"\n\t\t\t\t\t\t:close-after-click=\"true\"\n\t\t\t\t\t\t@click=\"clickIcon(icon)\">\n\t\t\t\t\t\t{{ icon.label }}\n\t\t\t\t\t</ActionButton>\n\t\t\t\t\t<!--<template v-else-if=\"!icon.class && isHiddenInMenu(icon)\">\n\t\t\t\t\t\t<ActionButton v-for=\"childIcon in icon.children\"\n\t\t\t\t\t\t\t:key=\"childIcon.class\"\n\t\t\t\t\t\t\t:icon=\"childIcon.class\"\n\t\t\t\t\t\t\t@click=\"clickIcon(childIcon)\">\n\t\t\t\t\t\t\tv-tooltip=\"getKeys(childIcon)\"\n\t\t\t\t\t\t\t{{ childIcon.label }}\n\t\t\t\t\t\t</ActionButton>\n\t\t\t\t\t</template>-->\n\t\t\t\t</template>\n\t\t\t</Actions>\n\t\t</div>\n\t\t<slot>\n\t\t\tLeft side\n\t\t</slot>\n\t</div>\n</template>\n\n<script>\nimport Tooltip from '@nextcloud/vue/dist/Directives/Tooltip'\nimport menuBarIcons from './../mixins/menubar.js'\nimport isMobile from './../mixins/isMobile.js'\n\nimport { useEditorMixin } from './EditorWrapper.provider.js'\n\nimport Actions from '@nextcloud/vue/dist/Components/Actions'\nimport ActionButton from '@nextcloud/vue/dist/Components/ActionButton'\nimport PopoverMenu from '@nextcloud/vue/dist/Components/PopoverMenu'\nimport EmojiPicker from '@nextcloud/vue/dist/Components/EmojiPicker'\nimport ClickOutside from 'vue-click-outside'\nimport { getCurrentUser } from '@nextcloud/auth'\nimport { subscribe, unsubscribe } from '@nextcloud/event-bus'\n\nexport default {\n\tname: 'MenuBar',\n\tcomponents: {\n\t\tActionButton,\n\t\tPopoverMenu,\n\t\tActions,\n\t\tEmojiPicker,\n\t},\n\tdirectives: {\n\t\tTooltip,\n\t\tClickOutside,\n\t},\n\tmixins: [\n\t\tisMobile,\n\t\tuseEditorMixin,\n\t],\n\tprops: {\n\t\tisReadOnly: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tisRichEditor: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\tautohide: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tisPublic: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tfilePath: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\tfileId: {\n\t\t\ttype: Number,\n\t\t\trequired: false,\n\t\t\tdefault: 0,\n\t\t},\n\t\tuploadingImages: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tdata: () => {\n\t\treturn {\n\t\t\twindowWidth: 0,\n\t\t\twindowHeight: 0,\n\t\t\tforceRecompute: 0,\n\t\t\tsubmenuVisibility: {},\n\t\t\tlastImagePath: null,\n\t\t\ticons: [...menuBarIcons],\n\t\t\teditorHasFocus: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\tisHiddenInMenu() {\n\t\t\treturn (icon) => icon.priority > this.iconCount\n\t\t},\n\t\tgetIconClasses() {\n\t\t\treturn (icon) => {\n\t\t\t\tconst classes = {}\n\t\t\t\tclasses[icon.class] = true\n\t\t\t\tclasses['is-active'] = this.isActive(icon)\n\t\t\t\treturn classes\n\t\t\t}\n\t\t},\n\t\tisActive() {\n\t\t\treturn ({ isActive }) => {\n\t\t\t\tif (!isActive) {\n\t\t\t\t\treturn false\n\t\t\t\t}\n\t\t\t\tconst args = Array.isArray(isActive) ? isActive : [isActive]\n\t\t\t\treturn this.$editor.isActive(...args)\n\t\t\t}\n\t\t},\n\t\tisVisible() {\n\t\t\treturn this.editorHasFocus\n\t\t\t\t|| Object.values(this.submenuVisibility).find((v) => v)\n\t\t},\n\t\tdisabled() {\n\t\t\treturn (menuItem) => {\n\t\t\t\treturn menuItem.action && !menuItem.action(this.$editor.can())\n\t\t\t}\n\t\t},\n\t\tisChildMenuVisible() {\n\t\t\treturn (icon) => {\n\t\t\t\treturn Object.prototype.hasOwnProperty.call(this.submenuVisibility, icon.label) ? this.submenuVisibility[icon.label] : false\n\t\t\t}\n\t\t},\n\t\tchildPopoverMenu() {\n\t\t\treturn (icons, parent) => {\n\t\t\t\treturn icons.map(icon => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t// text: this.getLabelAndKeys(icons[index]),\n\t\t\t\t\t\ttext: icon.label,\n\t\t\t\t\t\ticon: icon.class,\n\t\t\t\t\t\tactive: this.isActive(icon),\n\t\t\t\t\t\taction: () => {\n\t\t\t\t\t\t\tthis.clickIcon(icon)\n\t\t\t\t\t\t\tthis.hideChildMenu(parent)\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tchildIconClasses() {\n\t\t\treturn (icons) => {\n\t\t\t\tconst icon = this.childIcon(icons)\n\t\t\t\treturn this.getIconClasses(icon)\n\t\t\t}\n\t\t},\n\t\tchildIcon() {\n\t\t\treturn (icons) => icons.find(icon => this.isActive(icon)) || icons[0]\n\t\t},\n\t\ticonCount() {\n\t\t\tthis.forceRecompute // eslint-disable-line\n\t\t\tthis.windowWidth // eslint-disable-line\n\t\t\tconst menuBarWidth = this.$refs.menubar && this.$refs.menubar.clientWidth > 200\n\t\t\t\t? this.$refs.menubar.clientWidth\n\t\t\t\t: 200\n\t\t\t// leave some buffer - this is necessary so the bar does not wrap during resizing\n\t\t\tconst spaceToFill = menuBarWidth - 4\n\t\t\tconst slots = Math.floor(spaceToFill / 44)\n\t\t\t// Leave one slot empty for the three dot menu\n\t\t\treturn slots - 1\n\t\t},\n\t\timagePath() {\n\t\t\treturn this.lastImagePath\n\t\t\t\t|| this.filePath.split('/').slice(0, -1).join('/')\n\t\t},\n\t\tmenuAlignClass() {\n\t\t\t// Align popover menus to the left on mobile (https://github.com/nextcloud/text/issues/2915)\n\t\t\treturn (this.isMobile) ? 'menu-left' : 'menu-center'\n\t\t},\n\t},\n\tmounted() {\n\t\twindow.addEventListener('resize', this.getWindowWidth)\n\t\tsubscribe('files:sidebar:opened', this.redrawAfterTransition)\n\t\tsubscribe('files:sidebar:closed', this.redrawAfterTransition)\n\t\tthis.checkInterval = setInterval(() => {\n\t\t\tconst isWidthAvailable = (this.$refs.menubar && this.$refs.menubar.clientWidth > 0)\n\t\t\tif (this.isRichEditor && isWidthAvailable) {\n\t\t\t\tthis.redrawMenuBar()\n\t\t\t}\n\t\t\tif (!this.isRichEditor || isWidthAvailable) {\n\t\t\t\tclearInterval(this.checkInterval)\n\t\t\t}\n\t\t}, 100)\n\t\tthis.$emit('update:loaded', true)\n\n\t\tthis.$editor.on('focus', _ => {\n\t\t\tthis.editorHasFocus = true\n\t\t})\n\n\t\tthis.$editor.on('blur', _ => {\n\t\t\tthis.editorHasFocus = false\n\t\t})\n\t},\n\tbeforeDestroy() {\n\t\twindow.removeEventListener('resize', this.getWindowWidth)\n\t\tunsubscribe('files:sidebar:opened', this.redrawAfterTransition)\n\t\tunsubscribe('files:sidebar:closed', this.redrawAfterTransition)\n\t},\n\tmethods: {\n\t\tredrawAfterTransition() {\n\t\t\t// wait for transition to complete (100ms)\n\t\t\tsetTimeout(this.redrawMenuBar, 110)\n\t\t},\n\t\tredrawMenuBar() {\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.getWindowWidth()\n\t\t\t\tthis.forceRecompute++\n\t\t\t})\n\t\t},\n\t\trefocus() {\n\t\t\tthis.$editor.chain().focus().run()\n\t\t},\n\t\tclickIcon(icon) {\n\t\t\tif (icon.click) {\n\t\t\t\treturn icon.click(this)\n\t\t\t}\n\t\t\t// Some actions run themselves.\n\t\t\t// others still need to have .run() called upon them.\n\t\t\tconst action = icon.action(this.$editor.chain().focus())\n\t\t\taction && action.run()\n\t\t},\n\t\tgetWindowWidth(event) {\n\t\t\tthis.windowWidth = document.documentElement.clientWidth\n\t\t},\n\t\tgetWindowHeight(event) {\n\t\t\tthis.windowHeight = document.documentElement.clientHeight\n\t\t},\n\t\thideChildMenu({ label }) {\n\t\t\tthis.$set(this.submenuVisibility, label, false)\n\t\t},\n\t\thasSubmenu(icon) {\n\t\t\treturn icon.class === 'icon-emoji'\n\t\t\t\t|| icon.children\n\t\t},\n\t\ttoggleChildMenu({ label }) {\n\t\t\tconst lastValue = Object.prototype.hasOwnProperty.call(this.submenuVisibility, label) ? this.submenuVisibility[label] : false\n\t\t\tthis.$set(this.submenuVisibility, label, !lastValue)\n\t\t\tif (lastValue) {\n\t\t\t\tthis.refocus()\n\t\t\t}\n\t\t},\n\t\tonUploadImage() {\n\t\t\tthis.$refs.imageFileInput.click()\n\t\t},\n\t\tonImageUploadFilePicked(event) {\n\t\t\tthis.$emit('image-upload', event.target.files)\n\t\t\t// Clear input to ensure that the change event will be emitted if\n\t\t\t// the same file is picked again.\n\t\t\tevent.target.value = ''\n\t\t},\n\t\tshowImagePrompt() {\n\t\t\tconst currentUser = getCurrentUser()\n\t\t\tif (!currentUser) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tOC.dialogs.filepicker(t('text', 'Insert an image'), (filePath) => {\n\t\t\t\tthis.$emit('image-insert', filePath)\n\t\t\t}, false, [], true, undefined, this.imagePath)\n\t\t},\n\t\toptimalPathTo(targetFile) {\n\t\t\tconst absolutePath = targetFile.split('/')\n\t\t\tconst relativePath = this.relativePathTo(targetFile).split('/')\n\t\t\treturn relativePath.length < absolutePath.length\n\t\t\t\t? relativePath.join('/')\n\t\t\t\t: targetFile\n\t\t},\n\t\trelativePathTo(targetFile) {\n\t\t\tconst current = this.filePath.split('/')\n\t\t\tconst target = targetFile.split('/')\n\t\t\tcurrent.pop() // ignore filename\n\t\t\twhile (current[0] === target[0]) {\n\t\t\t\tcurrent.shift()\n\t\t\t\ttarget.shift()\n\t\t\t}\n\t\t\treturn current.fill('..').concat(target).join('/')\n\t\t},\n\t\taddEmoji(icon, emojiObject) {\n\t\t\treturn icon.action(this.$editor.chain(), { id: emojiObject.id, native: emojiObject.native })\n\t\t\t\t.focus()\n\t\t\t\t.run()\n\t\t},\n\t\tkeysString(keyChar, modifiers = []) {\n\t\t\tconst translations = {\n\t\t\t\tctrl: t('text', 'Ctrl'),\n\t\t\t\talt: t('text', 'Alt'),\n\t\t\t\tshift: t('text', 'Shift'),\n\t\t\t}\n\t\t\treturn Object.entries(translations)\n\t\t\t\t.filter(([k, v]) => modifiers.includes(k))\n\t\t\t\t.map(([k, v]) => v)\n\t\t\t\t.concat(keyChar.toUpperCase())\n\t\t\t\t.join('+')\n\t\t},\n\t\tgetKeys(icon) {\n\t\t\treturn (icon.keyChar && !this.isMobile)\n\t\t\t\t? `(${this.keysString(icon.keyChar, icon.keyModifiers)})`\n\t\t\t\t: ''\n\t\t},\n\t\tgetLabelAndKeys(icon) {\n\t\t\treturn [icon.label, this.getKeys(icon)].join(' ')\n\t\t},\n\t},\n}\n</script>\n\n<style scoped lang=\"scss\">\n\t.menubar {\n\t\t--background-blur: blur(10px);\n\t\tposition: fixed;\n\t\tposition: -webkit-sticky;\n\t\tposition: sticky;\n\t\ttop: 0;\n\t\tdisplay: flex;\n\t\tjustify-content: flex-end;\n\t\tz-index: 10021; // above modal-header and menububble so menubar is always on top\n\t\tbackground-color: var(--color-main-background-translucent);\n\t\t-webkit-backdrop-filter: var(--background-blur);\n\t\tbackdrop-filter: var(--background-blur);\n\t\tmax-height: 44px; // important for mobile so that the buttons are always inside the container\n\t\tpadding-top:3px;\n\t\tpadding-bottom: 3px;\n\n\t\t&.autohide {\n\t\t\tvisibility: hidden;\n\t\t\topacity: 0;\n\t\t\ttransition: visibility 0.2s 0.4s, opacity 0.2s 0.4s;\n\t\t\t&.show {\n\t\t\t\tvisibility: visible;\n\t\t\t\topacity: 1;\n\t\t\t}\n\t\t}\n\t\t.menubar-icons {\n\t\t\tflex-grow: 1;\n\t\t\tmargin-left: calc((100% - 660px) / 2);\n\t\t}\n\t\t@media (max-width: 660px) {\n\t\t\t.menubar-icons {\n\t\t\t\tmargin-left: 0;\n\t\t\t}\n\t\t}\n\t\t&::v-deep .action-item__menu ul {\n\t\t\tmax-height: calc(100vh - 88px);\n\t\t\toverflow: scroll;\n\t\t}\n\t}\n\n\t.menubar button {\n\t\tposition: relative;\n\t\twidth: 44px;\n\t\theight: 44px;\n\t\tmargin: 0;\n\t\tbackground-size: 16px;\n\t\tborder: 0;\n\t\tbackground-color: transparent;\n\t\topacity: .5;\n\t\tcolor: var(--color-main-text);\n\t\tbackground-position: center center;\n\t\tvertical-align: top;\n\t\t&:hover, &:focus, &:active {\n\t\t\tbackground-color: var(--color-background-dark);\n\t\t}\n\n\t\t&.is-active::before {\n\t\t\ttransform: translateX(-50%);\n\t\t\tborder-radius: 100%;\n\t\t\tposition: absolute;\n\t\t\tbackground: var(--color-primary-element);\n\t\t\tbottom: 3px;\n\t\t\theight: 6px;\n\t\t\twidth: 6px;\n\t\t\tcontent: '';\n\t\t\tleft: 50%;\n\n\t\t}\n\t\t&.is-active,\n\t\t&:hover,\n\t\t&:focus {\n\t\t\topacity: 1;\n\t\t}\n\n\t\t&.icon-undo,\n\t\t&.icon-redo {\n\t\t\topacity: .8;\n\n\t\t\t&:disabled {\n\t\t\t\topacity: .4;\n\t\t\t}\n\t\t}\n\t}\n\n\t.menubar .submenu, .menubar .menuitem-emoji {\n\t\tdisplay: inline-block;\n\t\twidth: 44px;\n\t\theight: 44px;\n\t\tposition: relative;\n\t\tvertical-align: top;\n\t}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuBar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuBar.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuBar.vue?vue&type=style&index=0&id=2c2d396c&scoped=true&lang=scss&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuBar.vue?vue&type=style&index=0&id=2c2d396c&scoped=true&lang=scss&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./MenuBar.vue?vue&type=template&id=2c2d396c&scoped=true&\"\nimport script from \"./MenuBar.vue?vue&type=script&lang=js&\"\nexport * from \"./MenuBar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MenuBar.vue?vue&type=style&index=0&id=2c2d396c&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2c2d396c\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('BubbleMenu',{staticClass:\"menububble\",attrs:{\"editor\":_vm.$editor,\"tippy-options\":{ onHide: _vm.hideLinkMenu, duration: 200, placement: 'bottom' }}},[(_vm.linkMenuIsActive)?_c('form',{staticClass:\"menububble__form\",on:{\"submit\":function($event){$event.preventDefault();return _vm.setLinkUrl()}}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.linkUrl),expression:\"linkUrl\"}],ref:\"linkInput\",staticClass:\"menububble__input\",attrs:{\"type\":\"text\",\"placeholder\":\"https://\"},domProps:{\"value\":(_vm.linkUrl)},on:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"esc\",27,$event.key,[\"Esc\",\"Escape\"])){ return null; }return _vm.hideLinkMenu.apply(null, arguments)},\"input\":function($event){if($event.target.composing){ return; }_vm.linkUrl=$event.target.value}}}),_vm._v(\" \"),_c('button',{staticClass:\"menububble__button icon-confirm\",attrs:{\"type\":\"button\",\"tabindex\":\"0\"},on:{\"click\":function($event){return _vm.setLinkUrl()}}})]):[_c('button',{staticClass:\"menububble__button\",class:{ 'is-active': _vm.isActive },on:{\"click\":function($event){return _vm.showLinkMenu()}}},[_c('span',{staticClass:\"icon-link\"}),_vm._v(\" \"),_c('span',{staticClass:\"menububble__buttontext\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.isActive ? _vm.t('text', 'Update Link') : _vm.t('text', 'Add Link'))+\"\\n\\t\\t\\t\")])]),_vm._v(\" \"),(!_vm.isUsingDirectEditing)?_c('button',{staticClass:\"menububble__button\",class:{ 'is-active': _vm.isActive },on:{\"click\":function($event){return _vm.selectFile()}}},[_c('span',{staticClass:\"icon-file\"}),_vm._v(\" \"),_c('span',{staticClass:\"menububble__buttontext\"},[_vm._v(_vm._s(_vm.t('text', 'Link file')))])]):_vm._e(),_vm._v(\" \"),(_vm.isActive)?_c('button',{staticClass:\"menububble__button\",class:{ 'is-active': _vm.isActive },on:{\"click\":function($event){return _vm.removeLinkUrl()}}},[_c('span',{staticClass:\"icon-delete\"}),_vm._v(\" \"),_c('span',{staticClass:\"menububble__buttontext\"},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.t('text', 'Remove Link'))+\"\\n\\t\\t\\t\")])]):_vm._e()]],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\n  - @copyright Copyright (c) 2019 Julius Härtl <jus@bitgrid.net>\n  -\n  - @author Julius Härtl <jus@bitgrid.net>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\n  -\n  -->\n\n<template>\n\t<BubbleMenu :editor=\"$editor\"\n\t\t:tippy-options=\"{ onHide: hideLinkMenu, duration: 200, placement: 'bottom' }\"\n\t\tclass=\"menububble\">\n\t\t<form v-if=\"linkMenuIsActive\" class=\"menububble__form\" @submit.prevent=\"setLinkUrl()\">\n\t\t\t<input ref=\"linkInput\"\n\t\t\t\tv-model=\"linkUrl\"\n\t\t\t\tclass=\"menububble__input\"\n\t\t\t\ttype=\"text\"\n\t\t\t\tplaceholder=\"https://\"\n\t\t\t\t@keydown.esc=\"hideLinkMenu\">\n\t\t\t<button class=\"menububble__button icon-confirm\"\n\t\t\t\ttype=\"button\"\n\t\t\t\ttabindex=\"0\"\n\t\t\t\t@click=\"setLinkUrl()\" />\n\t\t</form>\n\n\t\t<template v-else>\n\t\t\t<button class=\"menububble__button\"\n\t\t\t\t:class=\"{ 'is-active': isActive }\"\n\t\t\t\t@click=\"showLinkMenu()\">\n\t\t\t\t<span class=\"icon-link\" />\n\t\t\t\t<span class=\"menububble__buttontext\">\n\t\t\t\t\t{{ isActive ? t('text', 'Update Link') : t('text', 'Add Link') }}\n\t\t\t\t</span>\n\t\t\t</button>\n\t\t\t<button v-if=\"!isUsingDirectEditing\"\n\t\t\t\tclass=\"menububble__button\"\n\t\t\t\t:class=\"{ 'is-active': isActive }\"\n\t\t\t\t@click=\"selectFile()\">\n\t\t\t\t<span class=\"icon-file\" />\n\t\t\t\t<span class=\"menububble__buttontext\">{{ t('text', 'Link file') }}</span>\n\t\t\t</button>\n\t\t\t<button v-if=\"isActive\"\n\t\t\t\tclass=\"menububble__button\"\n\t\t\t\t:class=\"{ 'is-active': isActive }\"\n\t\t\t\t@click=\"removeLinkUrl()\">\n\t\t\t\t<span class=\"icon-delete\" />\n\t\t\t\t<span class=\"menububble__buttontext\">\n\t\t\t\t\t{{ t('text', 'Remove Link') }}\n\t\t\t\t</span>\n\t\t\t</button>\n\t\t</template>\n\t</BubbleMenu>\n</template>\n\n<script>\nimport debounce from 'debounce'\nimport { BubbleMenu } from '@tiptap/vue-2'\nimport { getMarkAttributes } from '@tiptap/core'\nimport Tooltip from '@nextcloud/vue/dist/Directives/Tooltip'\nimport { getCurrentUser } from '@nextcloud/auth'\nimport { optimalPath } from './../helpers/files.js'\nimport { loadState } from '@nextcloud/initial-state'\n\nimport { useEditorMixin } from './EditorWrapper.provider.js'\n\nexport default {\n\tname: 'MenuBubble',\n\tcomponents: {\n\t\tBubbleMenu,\n\t},\n\tdirectives: {\n\t\ttooltip: Tooltip,\n\t},\n\tmixins: [useEditorMixin],\n\tprops: {\n\t\t// used to calculate the position based on the scrollOffset\n\t\tcontentWrapper: {\n\t\t\ttype: HTMLDivElement,\n\t\t\trequired: false,\n\t\t\tdefault: null,\n\t\t},\n\t\tfilePath: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\tdata: () => {\n\t\treturn {\n\t\t\tisActive: false,\n\t\t\tlinkUrl: null,\n\t\t\tlinkMenuIsActive: false,\n\t\t\tisUsingDirectEditing: loadState('text', 'directEditingToken', null) !== null,\n\t\t}\n\t},\n\tmounted() {\n\t\tthis.$_updateIsActive = debounce(this.updateIsActive.bind(this), 50)\n\t\tthis.$editor.on('update', this.$_updateIsActive)\n\t\tthis.$editor.on('selectionUpdate', this.$_updateIsActive)\n\t},\n\tbeforeDestroy() {\n\t\tthis.$editor.off('update', this.$_updateIsActive)\n\t\tthis.$editor.off('selectionUpdate', this.$_updateIsActive)\n\t},\n\tmethods: {\n\t\tshowLinkMenu() {\n\t\t\tconst attrs = getMarkAttributes(this.$editor.state, 'link')\n\t\t\tthis.linkUrl = attrs.href\n\t\t\tthis.linkMenuIsActive = true\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.$refs.linkInput.focus()\n\t\t\t})\n\t\t},\n\t\thideLinkMenu() {\n\t\t\tthis.linkUrl = null\n\t\t\tthis.linkMenuIsActive = false\n\t\t},\n\t\tselectFile() {\n\t\t\tconst currentUser = getCurrentUser()\n\t\t\tif (!currentUser) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tconst startPath = this.filePath.split('/').slice(0, -1).join('/')\n\t\t\tOC.dialogs.filepicker(t('text', 'Select file to link to'), (file) => {\n\t\t\t\tconst client = OC.Files.getClient()\n\t\t\t\tclient.getFileInfo(file).then((_status, fileInfo) => {\n\t\t\t\t\tconst path = optimalPath(this.filePath, `${fileInfo.path}/${fileInfo.name}`)\n\t\t\t\t\tconst encodedPath = path.split('/').map(encodeURIComponent).join('/')\n\t\t\t\t\tconst href = `${encodedPath}?fileId=${fileInfo.id}`\n\t\t\t\t\tthis.$editor.chain().setLink({ href }).focus().run()\n\t\t\t\t\tthis.hideLinkMenu()\n\t\t\t\t})\n\t\t\t}, false, [], true, undefined, startPath)\n\t\t},\n\t\tsetLinkUrl() {\n\t\t\tlet url = this.linkUrl\n\t\t\t// Heuristics for determining if we need a https:// prefix.\n\t\t\tconst noPrefixes = [\n\t\t\t\t/^[a-zA-Z]+:/, // url with protocol (\"mailTo:email@domain.tld\")\n\t\t\t\t/^\\//, // absolute path\n\t\t\t\t/\\?fileId=/, // relative link with fileId\n\t\t\t\t/^\\.\\.?\\//, // relative link starting with ./ or ../\n\t\t\t\t/^[^.]*[/$]/, // no dots before first '/' - not a domain name\n\t\t\t\t/^#/, // url fragment\n\t\t\t]\n\t\t\tif (url && !noPrefixes.find(regex => url.match(regex))) {\n\t\t\t\turl = 'https://' + url\n\t\t\t}\n\n\t\t\t// Avoid issues when parsing urls later on in markdown that might be entered in an invalid format (e.g. \"mailto: example@example.com\")\n\t\t\tconst href = url.replaceAll(' ', '%20')\n\t\t\tthis.$editor.chain().setLink({ href }).focus().run()\n\t\t\tthis.hideLinkMenu()\n\t\t},\n\t\tremoveLinkUrl() {\n\t\t\tthis.$editor.chain().unsetLink().focus().run()\n\t\t},\n\t\tupdateIsActive() {\n\t\t\tthis.isActive = this.$editor.isActive('link')\n\t\t},\n\t},\n}\n</script>\n\n<style scoped lang=\"scss\">\n\t.menububble {\n\t\tdisplay: flex;\n\t\tz-index: 10020;\n\t\tbackground: var(--color-main-background-translucent);\n\t\tbox-shadow: 0 1px 5px var(--color-box-shadow);\n\t\tborder-radius: var(--border-radius-large);\n\t\toverflow: hidden;\n\t\tpadding: 0;\n\t\tmargin-left: 10px;\n\t\theight: 44px;\n\n\t\t&__button {\n\t\t\tdisplay: block;\n\t\t\tflex-grow: 1;\n\t\t\tborder: 0;\n\t\t\tpadding: 0.9rem 0.7rem;\n\t\t\tmargin: 0;\n\t\t\tborder-radius: 0;\n\t\t\tcursor: pointer;\n\t\t\tbackground-color: var(--color-main-background);\n\t\t\tborder-right: 1px solid var(--color-border);\n\n\t\t\t&:focus,\n\t\t\t&:hover {\n\t\t\t\tbackground-color: var(--color-background-hover);\n\t\t\t\tborder: 0;\n\t\t\t\tborder-right: 1px solid var(--color-border) !important;\n\t\t\t}\n\n\t\t\t&:last-child {\n\t\t\t\tborder: 0 !important;\n\t\t\t}\n\t\t}\n\n\t\t&__buttontext {\n\t\t\tpadding: 0.4rem;\n\t\t\tpadding-right: 0;\n\t\t}\n\n\t\t&__form {\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t}\n\n\t\t&__input {\n\t\t\tfont: inherit;\n\t\t\tborder: none;\n\t\t\tbackground: transparent;\n\t\t\tmin-width: 250px;\n\t\t}\n\t}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuBubble.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuBubble.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuBubble.vue?vue&type=style&index=0&id=756732d2&scoped=true&lang=scss&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuBubble.vue?vue&type=style&index=0&id=756732d2&scoped=true&lang=scss&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./MenuBubble.vue?vue&type=template&id=756732d2&scoped=true&\"\nimport script from \"./MenuBubble.vue?vue&type=script&lang=js&\"\nexport * from \"./MenuBubble.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MenuBubble.vue?vue&type=style&index=0&id=756732d2&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"756732d2\",\n  null\n  \n)\n\nexport default component.exports"],"names":["options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","_vm","this","_h","$createElement","_c","_self","enabled","active","class","loaded","ready","focus","darkTheme","canCreate","attrs","staticClass","on","createNew","_v","_s","t","_e","directives","name","rawName","value","expression","key","file","path","id","shareToken","mimetype","autofocus","$event","unfocus","reset","FILE_ACTION_IDENTIFIER","optimalPath","from","to","current","split","target","pop","shift","relativePath","fill","concat","absolutePath","length","join","registerFileCreate","newFileMenuPlugin","attach","menu","fileList","addMenuEntry","displayName","templateName","iconClass","fileType","actionHandler","createFile","then","status","data","fileInfoModel","OCA","Files","FileInfoModel","Viewer","fileActions","triggerAction","OC","Plugins","register","registerFileActionFallback","sharingToken","document","getElementById","dir","ViewerRoot","createElement","body","appendChild","registerAction","mime","PERMISSION_UPDATE","PERMISSION_READ","imagePath","filename","window","FileList","findFile","Promise","all","imports","getCurrentDirectory","Vue","default","prototype","n","Editor","render","h","self","props","fileId","mimeType","close","$destroy","$mount","i","openMimetypes","setDefault","FilesWorkspacePlugin","el","registerHeader","bind","priority","module","vm","extend","RichWorkspace","propsData","store","subscribe","App","getCurrentFileList","$el","toString","openMimetypesMarkdown","openMimetypesPlainText","oc_appswebroots","richdocuments","onlyoffice","push","___CSS_LOADER_EXPORT___","label","keyChar","keyModifiers","action","command","undo","redo","isActive","toggleBold","toggleItalic","toggleUnderline","toggleStrike","visible","children","level","toggleHeading","toggleBulletList","toggleOrderedList","toggleTaskList","toggleBlockquote","type","toggleCallout","toggleCodeBlock","insertTable","emojiObject","emoji","click","view","$emit","isVisible","autohide","ref","onImageUploadFilePicked","isRichEditor","isReadOnly","_l","icon","iconCount","addEmoji","toggleChildMenu","refInFor","uploadingImages","slot","onUploadImage","isPublic","showImagePrompt","getLabelAndKeys","getIconClasses","disabled","clickIcon","hideChildMenu","childIconClasses","preventDefault","isChildMenuVisible","menuAlignClass","childPopoverMenu","isHiddenInMenu","hasSubmenu","getKeys","_t","$editor","onHide","hideLinkMenu","duration","placement","setLinkUrl","domProps","indexOf","_k","keyCode","apply","arguments","composing","linkUrl","showLinkMenu","isUsingDirectEditing","selectFile","removeLinkUrl"],"sourceRoot":""}