{"version":3,"file":"SessionList-CMMAXPs3.chunk.mjs","sources":["../node_modules/vue-material-design-icons/AccountMultiple.vue","../src/components/Editor/SessionList.vue"],"sourcesContent":["<template>\n  <span v-bind=\"$attrs\"\n        :aria-hidden=\"title ? null : 'true'\"\n        :aria-label=\"title\"\n        class=\"material-design-icon account-multiple-icon\"\n        role=\"img\"\n        @click=\"$emit('click', $event)\">\n    <svg :fill=\"fillColor\"\n         class=\"material-design-icon__svg\"\n         :width=\"size\"\n         :height=\"size\"\n         viewBox=\"0 0 24 24\">\n      <path d=\"M16 17V19H2V17S2 13 9 13 16 17 16 17M12.5 7.5A3.5 3.5 0 1 0 9 11A3.5 3.5 0 0 0 12.5 7.5M15.94 13A5.32 5.32 0 0 1 18 17V19H22V17S22 13.37 15.94 13M15 4A3.39 3.39 0 0 0 13.07 4.59A5 5 0 0 1 13.07 10.41A3.39 3.39 0 0 0 15 11A3.5 3.5 0 0 0 15 4Z\">\n        <title v-if=\"title\">{{ title }}</title>\n      </path>\n    </svg>\n  </span>\n</template>\n\n<script>\nexport default {\n  name: \"AccountMultipleIcon\",\n  emits: ['click'],\n  props: {\n    title: {\n      type: String,\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n}\n</script>","<!--\n  - SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<NcPopover class=\"session-list\" placement=\"bottom\">\n\t\t<template #trigger=\"{ attrs }\">\n\t\t\t<div>\n\t\t\t\t<NcButton :title=\"label\"\n\t\t\t\t\t:aria-label=\"label\"\n\t\t\t\t\ttype=\"tertiary\"\n\t\t\t\t\tclass=\"avatar-list\"\n\t\t\t\t\tv-bind=\"attrs\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<AccountMultipleIcon :size=\"20\" />\n\t\t\t\t\t\t<AvatarWrapper v-for=\"session in sessionsVisible\"\n\t\t\t\t\t\t\t:key=\"session.id\"\n\t\t\t\t\t\t\t:session=\"session\"\n\t\t\t\t\t\t\t:size=\"28\" />\n\t\t\t\t\t</template>\n\t\t\t\t</NcButton>\n\t\t\t</div>\n\t\t</template>\n\t\t<template #default>\n\t\t\t<div class=\"session-menu\">\n\t\t\t\t<slot name=\"lastSaved\" />\n\t\t\t\t<ul>\n\t\t\t\t\t<slot />\n\t\t\t\t\t<li v-for=\"session in participantsPopover\"\n\t\t\t\t\t\t:key=\"session.id\"\n\t\t\t\t\t\t:style=\"avatarStyle(session)\">\n\t\t\t\t\t\t<AvatarWrapper :session=\"session\" :size=\"36\" />\n\t\t\t\t\t\t<span class=\"session-label\">\n\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\tsession.userId ? session.displayName : (session.guestName ? session.guestName : t('text', 'Guest'))\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span v-if=\"session.userId === null\" class=\"guest-label\">({{ t('text', 'guest') }})</span>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<NcCheckboxRadioSwitch :checked=\"isFullWidth\" @update:checked=\"onWidthToggle\">\n\t\t\t\t\t\t\t{{ t('text', 'Full width editor') }}\n\t\t\t\t\t\t</NcCheckboxRadioSwitch>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</template>\n\t</NcPopover>\n</template>\n\n<script>\nimport { NcButton, NcCheckboxRadioSwitch, NcPopover } from '@nextcloud/vue'\nimport AccountMultipleIcon from 'vue-material-design-icons/AccountMultiple.vue'\nimport AvatarWrapper from './AvatarWrapper.vue'\nimport { COLLABORATOR_DISCONNECT_TIME, COLLABORATOR_IDLE_TIME } from '../../services/SyncService.js'\nimport { loadState } from '@nextcloud/initial-state'\nimport axios from '@nextcloud/axios'\nimport { generateUrl } from '@nextcloud/router'\n\nexport default {\n\tname: 'SessionList',\n\tcomponents: {\n\t\tAccountMultipleIcon,\n\t\tAvatarWrapper,\n\t\tNcButton,\n\t\tNcPopover,\n\t\tNcCheckboxRadioSwitch,\n\t},\n\tprops: {\n\t\tsessions: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => {\n\t\t\t\treturn {}\n\t\t\t},\n\t\t},\n\t},\n\tdata() {\n\t\tconst isFullWidth = loadState('text', 'is_full_width_editor', false)\n\t\treturn {\n\t\t\tmyName: '',\n\t\t\tisFullWidth,\n\t\t}\n\t},\n\tcomputed: {\n\t\tlabel() {\n\t\t\treturn t('text', 'Active people')\n\t\t},\n\t\tparticipantsPopover() {\n\t\t\tif (this.currentSession?.guestName) {\n\t\t\t\treturn this.participantsWithoutCurrent\n\t\t\t}\n\t\t\treturn this.participants\n\t\t},\n\t\tparticipantsWithoutCurrent() {\n\t\t\treturn this.participants.filter((session) => !session.isCurrent)\n\t\t},\n\t\tparticipants() {\n\t\t\treturn Object.values(this.sessions).filter((session) =>\n\t\t\t\tsession.lastContact > Date.now() / 1000 - COLLABORATOR_DISCONNECT_TIME\n\t\t\t\t&& (session.userId !== null || session.guestName !== null),\n\t\t\t).sort((a, b) => a.lastContact < b.lastContact)\n\t\t},\n\t\tcurrentSession() {\n\t\t\treturn Object.values(this.sessions).find((session) => session.isCurrent)\n\t\t},\n\t\tavatarStyle() {\n\t\t\treturn (session) => {\n\t\t\t\treturn {\n\t\t\t\t\topacity: session.lastContact > Date.now() / 1000 - COLLABORATOR_IDLE_TIME ? 1 : 0.5,\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tsessionsVisible() {\n\t\t\treturn this.participantsWithoutCurrent.slice(0, 3)\n\t\t},\n\t},\n\tmethods: {\n\t\tonWidthToggle(checked) {\n\t\t\tthis.isFullWidth = checked\n\t\t\tthis.$emit('editor-width-change', checked ? '100%' : '80ch')\n\n\t\t\taxios.post(generateUrl('/apps/text/settings'), {\n\t\t\t\tkey: 'is_full_width_editor',\n\t\t\t\tvalue: checked ? '1' : '0',\n\t\t\t})\n\t\t},\n\t},\n}\n</script>\n\n<style scoped lang=\"scss\">\n.session-list {\n\theight: var(--default-clickable-area);\n}\n\n.avatar-list {\n\twidth: min-content !important;\n\tpadding-inline: var(--default-grid-baseline);\n\n\t:deep(.button-vue__icon) {\n\t\tdisplay: inline-flex;\n\t\tflex-direction: row-reverse;\n\t\twidth: min-content;\n\n\t\t.avatar-wrapper {\n\t\t\tmargin: 3px -12px 3px 0;\n\t\t\tz-index: 1;\n\t\t\toverflow: hidden;\n\t\t}\n\t}\n}\n\n.session-menu {\n\tmax-width: 280px;\n\tpadding-top: 6px;\n\tpadding-bottom: 6px;\n\n\tul li {\n\t\talign-items: center;\n\t\tdisplay: flex;\n\t\tpadding: 6px;\n\n\t\t.avatar-wrapper {\n\t\t\theight: 36px;\n\t\t\twidth: 36px;\n\t\t\tmargin-right: 6px;\n\t\t}\n\n\t\t.session-label {\n\t\t\tpadding-right: 3px;\n\t\t}\n\n\t\t.guest-label {\n\t\t\tpadding-left: 3px;\n\t\t\tcolor: var(--color-text-maxcontrast);\n\t\t}\n\t}\n}\n\nlabel {\n\tdisplay: block;\n\tmargin: 8px;\n}\n\n.hint {\n\tmargin: 8px;\n\tcolor: var(--color-text-maxcontrast);\n}\n</style>\n"],"names":["_sfc_main","AccountMultipleIcon","AvatarWrapper","NcButton","NcPopover","NcCheckboxRadioSwitch","loadState","session","COLLABORATOR_DISCONNECT_TIME","a","b","COLLABORATOR_IDLE_TIME","checked","axios","generateUrl"],"mappings":"4yBAoBA,MAAAA,EAAA,CACA,KAAA,sBACA,MAAA,CAAA,OAAA,EACA,MAAA,CACA,MAAA,CACA,KAAA,MACA,EACA,UAAA,CACA,KAAA,OACA,QAAA,cACA,EACA,KAAA,CACA,KAAA,OACA,QAAA,EACA,CACA,CACA,uvBCwBAA,EAAA,CACA,KAAA,cACA,WAAA,CACA,oBAAAC,EACA,cAAAC,EACA,SAAAC,EACA,UAAAC,EACA,sBAAAC,CACA,EACA,MAAA,CACA,SAAA,CACA,KAAA,OACA,QAAA,KACA,CAAA,EAEA,CACA,EACA,MAAA,CAEA,MAAA,CACA,OAAA,GACA,YAHAC,EAAA,OAAA,uBAAA,EAAA,CAIA,CACA,EACA,SAAA,CACA,OAAA,CACA,OAAA,EAAA,OAAA,eAAA,CACA,EACA,qBAAA,CACA,OAAA,KAAA,gBAAA,UACA,KAAA,2BAEA,KAAA,YACA,EACA,4BAAA,CACA,OAAA,KAAA,aAAA,OAAAC,GAAA,CAAAA,EAAA,SAAA,CACA,EACA,cAAA,CACA,OAAA,OAAA,OAAA,KAAA,QAAA,EAAA,OAAAA,GACAA,EAAA,YAAA,KAAA,IAAA,EAAA,IAAAC,IACAD,EAAA,SAAA,MAAAA,EAAA,YAAA,KACA,EAAA,KAAA,CAAAE,EAAAC,IAAAD,EAAA,YAAAC,EAAA,WAAA,CACA,EACA,gBAAA,CACA,OAAA,OAAA,OAAA,KAAA,QAAA,EAAA,KAAAH,GAAAA,EAAA,SAAA,CACA,EACA,aAAA,CACA,OAAAA,IACA,CACA,QAAAA,EAAA,YAAA,KAAA,IAAA,EAAA,IAAAI,EAAA,EAAA,EACA,EAEA,EACA,iBAAA,CACA,OAAA,KAAA,2BAAA,MAAA,EAAA,CAAA,CACA,CACA,EACA,QAAA,CACA,cAAAC,EAAA,CACA,KAAA,YAAAA,EACA,KAAA,MAAA,sBAAAA,EAAA,OAAA,MAAA,EAEAC,EAAA,KAAAC,EAAA,qBAAA,EAAA,CACA,IAAA,uBACA,MAAAF,EAAA,IAAA,GACA,CAAA,CACA,CACA,CACA","x_google_ignoreList":[0]}