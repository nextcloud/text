import{n as a,N as o}from"./isDarkTheme-Hvk6Dtjr.chunk.mjs";import{c as l,_ as n}from"./index-CxpdPuya.chunk.mjs";import{b as c,c as u}from"./NcNoteCard-C6xb7vi0-D2CO5T2n.chunk.mjs";import"./modulepreload-polyfill-DE-oIJqv.chunk.mjs";import{l as p}from"./index-DfiDB3im.chunk.mjs";import{A as d}from"./AvatarWrapper-0JwVsvKl.chunk.mjs";import{C as m,a as h}from"./Editor-C6jUQV6y.chunk.mjs";import"./vue.runtime.esm-Dc6Ai3V6.chunk.mjs";import"./emoji-picker-KVqjnXYv.chunk.mjs";import"./index-Bc2S5k6V.chunk.mjs";import"./index-DcZQ5c1R.chunk.mjs";import"./_plugin-vue2_normalizer--qmvqNVe-BKOLJq7m.chunk.mjs";import"./EditorOutline-bdqDW98x.chunk.mjs";import"./index-_3zL-15V.chunk.mjs";import"./MediaHandler.provider-D9rjA3a6.chunk.mjs";import"./logger-BOSm1sVH.chunk.mjs";import"./Wrapper-DYmbMI6z.chunk.mjs";const f={name:"AccountMultipleIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var _=function(){var e=this,i=e._self._c;return i("span",e._b({staticClass:"material-design-icon account-multiple-icon",attrs:{"aria-hidden":e.title?null:"true","aria-label":e.title,role:"img"},on:{click:function(s){return e.$emit("click",s)}}},"span",e.$attrs,!1),[i("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[i("path",{attrs:{d:"M16 17V19H2V17S2 13 9 13 16 17 16 17M12.5 7.5A3.5 3.5 0 1 0 9 11A3.5 3.5 0 0 0 12.5 7.5M15.94 13A5.32 5.32 0 0 1 18 17V19H22V17S22 13.37 15.94 13M15 4A3.39 3.39 0 0 0 13.07 4.59A5 5 0 0 1 13.07 10.41A3.39 3.39 0 0 0 15 11A3.5 3.5 0 0 0 15 4Z"}},[e.title?i("title",[e._v(e._s(e.title))]):e._e()])])])},v=[],g=a(f,_,v,!1,null,null);const C=g.exports,y={name:"SessionList",components:{AccountMultipleIcon:C,AvatarWrapper:d,NcButton:c,NcPopover:u,NcCheckboxRadioSwitch:o},props:{sessions:{type:Object,default:()=>({})}},data(){return{myName:"",isFullWidth:p("text","is_full_width_editor",!1)}},computed:{label(){return t("text","Active people")},participantsPopover(){return this.currentSession?.guestName?this.participantsWithoutCurrent:this.participants},participantsWithoutCurrent(){return this.participants.filter(e=>!e.isCurrent)},participants(){return Object.values(this.sessions).filter(e=>e.lastContact>Date.now()/1e3-m&&(e.userId!==null||e.guestName!==null)).sort((e,i)=>e.lastContact<i.lastContact)},currentSession(){return Object.values(this.sessions).find(e=>e.isCurrent)},avatarStyle(){return e=>({opacity:e.lastContact>Date.now()/1e3-h?1:.5})},sessionsVisible(){return this.participantsWithoutCurrent.slice(0,3)}},methods:{onWidthToggle(e){this.isFullWidth=e,this.$emit("editor-width-change",e?"100%":"80ch"),l.post(n("/apps/text/settings"),{key:"is_full_width_editor",value:e?"1":"0"})}}};var b=function(){var e=this,i=e._self._c;return i("NcPopover",{staticClass:"session-list",attrs:{placement:"bottom"},scopedSlots:e._u([{key:"trigger",fn:function({attrs:s}){return[i("div",[i("NcButton",e._b({staticClass:"avatar-list",attrs:{title:e.label,"aria-label":e.label,type:"tertiary"},scopedSlots:e._u([{key:"icon",fn:function(){return[i("AccountMultipleIcon",{attrs:{size:20}}),e._l(e.sessionsVisible,function(r){return i("AvatarWrapper",{key:r.id,attrs:{session:r,size:28}})})]},proxy:!0}],null,!0)},"NcButton",s,!1))],1)]}},{key:"default",fn:function(){return[i("div",{staticClass:"session-menu"},[e._t("lastSaved"),i("ul",[e._t("default"),e._l(e.participantsPopover,function(s){return i("li",{key:s.id,style:e.avatarStyle(s)},[i("AvatarWrapper",{attrs:{session:s,size:36}}),i("span",{staticClass:"session-label"},[e._v(" "+e._s(s.userId?s.displayName:s.guestName?s.guestName:e.t("text","Guest"))+" ")]),s.userId===null?i("span",{staticClass:"guest-label"},[e._v("("+e._s(e.t("text","guest"))+")")]):e._e()],1)}),i("li",[i("NcCheckboxRadioSwitch",{attrs:{checked:e.isFullWidth},on:{"update:checked":e.onWidthToggle}},[e._v(" "+e._s(e.t("text","Full width editor"))+" ")])],1)],2)],2)]},proxy:!0}],null,!0)})},x=[],A=a(y,b,x,!1,null,"fafdacd7");const R=A.exports;export{R as default};
//# sourceMappingURL=SessionList-CBm1hy5n.chunk.mjs.map
