/*! For license information please see src_views_RichWorkspace_vue-node_modules_nextcloud_vue_dist_chunks_emoji-V6ytyzoR_mjs-node_mo-15fc24.js.LICENSE.txt */
"use strict";(self.webpackChunk_nextcloud_text=self.webpackChunk_nextcloud_text||[]).push([["src_views_RichWorkspace_vue-node_modules_nextcloud_vue_dist_chunks_emoji-V6ytyzoR_mjs-node_mo-15fc24"],{73590:(t,e,r)=>{r.d(e,{CB:()=>h,GH:()=>A,HE:()=>b,PW:()=>i,_S:()=>w,bk:()=>v,c9:()=>f,f_:()=>a,ir:()=>u,l5:()=>m,lV:()=>l,o:()=>c,pN:()=>g,qS:()=>o,wn:()=>d,yS:()=>s,yu:()=>C});var n=r(79843);const o=Symbol("tiptap:editor"),i=Symbol("editor:file"),a=Symbol("attachment:resolver"),s=Symbol("editor:is-mobile"),l=Symbol("editor:is-public"),d=Symbol("editor:is-rich-editor"),c=Symbol("editor:is-rich-woskapace"),A=Symbol("sync:service"),p=Symbol("editor:upload"),h=(Symbol("hook:mention-search"),Symbol("hook:mention-insert"),{inject:{$editor:{from:o,default:null}}}),m={inject:{$syncService:{from:A,default:null}}},u={inject:{$isPublic:{from:l,default:!1}}},f={inject:{$isRichWorkspace:{from:c,default:!1}}},C={inject:{$isRichEditor:{from:d,default:!1}}},v={inject:{$isMobile:{from:s,default:!1}}},g={inject:{$file:{from:i,default:()=>({fileId:0,relativePath:null,document:null})}}},b={inject:{$attachmentResolver:{from:a,default:{resolve:t=>(n.v.warn("No attachment resolver provided. Some attachment sources cannot be resolved."),[t])}}}},w={inject:{$editorUpload:{from:p,default:!0}}}},79843:(t,e,r)=>{r.d(e,{v:()=>n});const n=(0,r(53529).YK)().setApp("text").detectUser().build()},33909:(t,e,r)=>{r.d(e,{A:()=>s});var n=r(71354),o=r.n(n),i=r(76314),a=r.n(i)()(o());a.push([t.id,".editor__content[data-v-151c6c0d]{max-width:var(--text-editor-max-width);margin:auto;position:relative;width:100%}.text-editor__content-wrapper[data-v-151c6c0d]{--side-width: calc((100% - var(--text-editor-max-width)) / 2);display:grid;grid-template-columns:1fr auto}.text-editor__content-wrapper.--show-outline[data-v-151c6c0d]{grid-template-columns:var(--side-width) auto var(--side-width)}.text-editor__content-wrapper .text-editor__content-wrapper__left[data-v-151c6c0d],.text-editor__content-wrapper .text-editor__content-wrapper__right[data-v-151c6c0d]{height:100%;position:relative}","",{version:3,sources:["webpack://./src/components/BaseReader.vue"],names:[],mappings:"AACA,kCACC,sCAAA,CACA,WAAA,CACA,iBAAA,CACA,UAAA,CAGD,+CACC,6DAAA,CACA,YAAA,CACA,8BAAA,CACA,8DACC,8DAAA,CAED,uKAEC,WAAA,CACA,iBAAA",sourcesContent:["\n.editor__content {\n\tmax-width: var(--text-editor-max-width);\n\tmargin: auto;\n\tposition: relative;\n\twidth: 100%;\n}\n\n.text-editor__content-wrapper {\n\t--side-width: calc((100% - var(--text-editor-max-width)) / 2);\n\tdisplay: grid;\n\tgrid-template-columns: 1fr auto;\n\t&.--show-outline {\n\t\tgrid-template-columns: var(--side-width) auto var(--side-width);\n\t}\n\t.text-editor__content-wrapper__left,\n\t.text-editor__content-wrapper__right {\n\t\theight: 100%;\n\t\tposition: relative;\n\t}\n}\n"],sourceRoot:""}]);const s=a},17142:(t,e,r)=>{r.d(e,{A:()=>p});var n=r(71354),o=r.n(n),i=r(76314),a=r.n(i),s=r(4417),l=r.n(s),d=new URL(r(19756),r.b),c=a()(o()),A=l()(d);c.push([t.id,`div.ProseMirror{height:100%;position:relative;word-wrap:break-word;white-space:pre-wrap;-webkit-font-variant-ligatures:none;font-variant-ligatures:none;padding:4px 8px 200px 14px;line-height:150%;font-size:var(--default-font-size);outline:none;--table-color-border: var(--color-border);--table-color-heading: var(--color-text-maxcontrast);--table-color-heading-border: var(--color-border-dark);--table-color-background: var(--color-main-background);--table-color-background-hover: var(--color-primary-element-light);--table-border-radius: var(--border-radius)}div.ProseMirror :target{scroll-margin-top:50px}div.ProseMirror[contenteditable=true],div.ProseMirror[contenteditable=false],div.ProseMirror [contenteditable=true],div.ProseMirror [contenteditable=false]{width:100%;background-color:rgba(0,0,0,0);color:var(--color-main-text);opacity:1;-webkit-user-select:text;user-select:text;font-size:var(--default-font-size)}div.ProseMirror[contenteditable=true]:not(.collaboration-cursor__caret),div.ProseMirror[contenteditable=false]:not(.collaboration-cursor__caret),div.ProseMirror [contenteditable=true]:not(.collaboration-cursor__caret),div.ProseMirror [contenteditable=false]:not(.collaboration-cursor__caret){border:none !important}div.ProseMirror[contenteditable=true]:focus,div.ProseMirror[contenteditable=true]:focus-visible,div.ProseMirror[contenteditable=false]:focus,div.ProseMirror[contenteditable=false]:focus-visible,div.ProseMirror [contenteditable=true]:focus,div.ProseMirror [contenteditable=true]:focus-visible,div.ProseMirror [contenteditable=false]:focus,div.ProseMirror [contenteditable=false]:focus-visible{box-shadow:none !important}div.ProseMirror ul[data-type=taskList]{margin-left:1px}div.ProseMirror .checkbox-item{display:flex;align-items:start}div.ProseMirror .checkbox-item input[type=checkbox]{display:none}div.ProseMirror .checkbox-item:before{content:"";vertical-align:middle;margin:3px 6px 3px 2px;border:1px solid var(--color-text-maxcontrast);display:block;border-radius:var(--border-radius);height:14px;width:14px;box-shadow:none !important;background-position:center;cursor:pointer;left:9px}div.ProseMirror .checkbox-item.checked:before{background-image:url(${A});background-color:var(--color-primary-element);border-color:var(--color-primary-element)}div.ProseMirror .checkbox-item.checked>label>p{color:var(--color-text-maxcontrast);text-decoration:line-through}div.ProseMirror .checkbox-item label{display:block;flex-grow:1;max-width:calc(100% - 28px)}div.ProseMirror>*:first-child{margin-top:10px}div.ProseMirror>h1,div.ProseMirror h2,div.ProseMirror h3,div.ProseMirror h4,div.ProseMirror h5,div.ProseMirror h6{position:relative}div.ProseMirror>h1:first-child,div.ProseMirror h2:first-child,div.ProseMirror h3:first-child,div.ProseMirror h4:first-child,div.ProseMirror h5:first-child,div.ProseMirror h6:first-child{margin-top:0}div.ProseMirror>h1 .heading-anchor[contenteditable=false],div.ProseMirror h2 .heading-anchor[contenteditable=false],div.ProseMirror h3 .heading-anchor[contenteditable=false],div.ProseMirror h4 .heading-anchor[contenteditable=false],div.ProseMirror h5 .heading-anchor[contenteditable=false],div.ProseMirror h6 .heading-anchor[contenteditable=false]{width:1em;opacity:0;padding:0;left:-1em;top:0;font-size:max(1em,16px);position:absolute;text-decoration:none;transition-duration:.15s;transition-property:opacity;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}div.ProseMirror>h1:hover .heading-anchor,div.ProseMirror h2:hover .heading-anchor,div.ProseMirror h3:hover .heading-anchor,div.ProseMirror h4:hover .heading-anchor,div.ProseMirror h5:hover .heading-anchor,div.ProseMirror h6:hover .heading-anchor{opacity:.5 !important}div.ProseMirror>h1:focus-visible,div.ProseMirror h2:focus-visible,div.ProseMirror h3:focus-visible,div.ProseMirror h4:focus-visible,div.ProseMirror h5:focus-visible,div.ProseMirror h6:focus-visible{outline:none}div.ProseMirror a{color:var(--color-primary-element);text-decoration:underline;padding:.5em 0}div.ProseMirror p .paragraph-content{margin-bottom:1em;line-height:150%}div.ProseMirror em{font-style:italic}div.ProseMirror h1,div.ProseMirror h2,div.ProseMirror h3,div.ProseMirror h4,div.ProseMirror h5,div.ProseMirror h6{font-weight:600;line-height:1.1em;margin-top:24px;margin-bottom:12px;color:var(--color-main-text)}div.ProseMirror h1{font-size:30px}div.ProseMirror h2{font-size:26px}div.ProseMirror h3{font-size:23px}div.ProseMirror h4{font-size:20px}div.ProseMirror h5{font-size:17px}div.ProseMirror h6{font-size:var(--default-font-size)}div.ProseMirror img{cursor:default;max-width:100%}div.ProseMirror hr{padding:2px 0;border:none;margin:2em 0;width:100%}div.ProseMirror hr:after{content:"";display:block;height:1px;background-color:var(--color-border-dark);line-height:2px}div.ProseMirror pre{white-space:pre-wrap;background-color:var(--color-background-dark);border-radius:var(--border-radius);padding:1em 1.3em;margin-bottom:1em}div.ProseMirror pre::before{content:attr(data-language);text-transform:uppercase;display:block;text-align:right;font-weight:bold;font-size:.6rem}div.ProseMirror pre code .hljs-comment,div.ProseMirror pre code .hljs-quote{color:#999}div.ProseMirror pre code .hljs-variable,div.ProseMirror pre code .hljs-template-variable,div.ProseMirror pre code .hljs-attribute,div.ProseMirror pre code .hljs-tag,div.ProseMirror pre code .hljs-name,div.ProseMirror pre code .hljs-regexp,div.ProseMirror pre code .hljs-link,div.ProseMirror pre code .hljs-selector-id,div.ProseMirror pre code .hljs-selector-class{color:#f2777a}div.ProseMirror pre code .hljs-number,div.ProseMirror pre code .hljs-meta,div.ProseMirror pre code .hljs-built_in,div.ProseMirror pre code .hljs-builtin-name,div.ProseMirror pre code .hljs-literal,div.ProseMirror pre code .hljs-type,div.ProseMirror pre code .hljs-params{color:#f99157}div.ProseMirror pre code .hljs-string,div.ProseMirror pre code .hljs-symbol,div.ProseMirror pre code .hljs-bullet{color:#9c9}div.ProseMirror pre code .hljs-title,div.ProseMirror pre code .hljs-section{color:#fc6}div.ProseMirror pre code .hljs-keyword,div.ProseMirror pre code .hljs-selector-tag{color:#69c}div.ProseMirror pre code .hljs-emphasis{font-style:italic}div.ProseMirror pre code .hljs-strong{font-weight:700}div.ProseMirror pre.frontmatter{margin-bottom:2em;border-left:4px solid var(--color-primary-element)}div.ProseMirror pre.frontmatter::before{display:block;content:attr(data-title);color:var(--color-text-maxcontrast);padding-bottom:.5em}div.ProseMirror p code{background-color:var(--color-background-dark);border-radius:var(--border-radius);padding:.1em .3em}div.ProseMirror li{position:relative;padding-left:3px}div.ProseMirror li p .paragraph-content{margin-bottom:.5em}div.ProseMirror ul,div.ProseMirror ol{padding-left:10px;margin-left:10px;margin-bottom:1em}div.ProseMirror ul>li{list-style-type:disc}div.ProseMirror li ul>li{list-style-type:circle}div.ProseMirror li li ul>li{list-style-type:square}div.ProseMirror blockquote{padding-left:1em;border-left:4px solid var(--color-primary-element);color:var(--color-text-maxcontrast);margin-left:0;margin-right:0}div.ProseMirror table{border-spacing:0;width:calc(100% - 50px);table-layout:auto;white-space:normal;margin-bottom:1em}div.ProseMirror table+*{margin-top:1em}div.ProseMirror table td,div.ProseMirror table th{border:1px solid var(--table-color-border);border-left:0;vertical-align:top;max-width:100%}div.ProseMirror table td:first-child,div.ProseMirror table th:first-child{border-left:1px solid var(--table-color-border)}div.ProseMirror table td{padding:.5em .75em;border-top:0;color:var(--color-main-text)}div.ProseMirror table th{padding:0 0 0 .75em;font-weight:normal;border-bottom-color:var(--table-color-heading-border);color:var(--table-color-heading)}div.ProseMirror table th>div{display:flex}div.ProseMirror table tr{background-color:var(--table-color-background)}div.ProseMirror table tr:hover,div.ProseMirror table tr:active,div.ProseMirror table tr:focus{background-color:var(--table-color-background-hover)}div.ProseMirror table tr:first-child th:first-child{border-top-left-radius:var(--table-border-radius)}div.ProseMirror table tr:first-child th:last-child{border-top-right-radius:var(--table-border-radius)}div.ProseMirror table tr:last-child td:first-child{border-bottom-left-radius:var(--table-border-radius)}div.ProseMirror table tr:last-child td:last-child{border-bottom-right-radius:var(--table-border-radius)}.ProseMirror-focused .ProseMirror-gapcursor{display:block}.editor__content p.is-empty:first-child::before{content:attr(data-placeholder);float:left;color:var(--color-text-maxcontrast);pointer-events:none;height:0}.editor__content{tab-size:4}.tippy-content div{visibility:visible !important}@media print{@page{size:A4;margin:2.5cm 2cm 2cm 2.5cm}body{position:absolute;overflow:visible !important}#header{display:none !important}#content{display:block !important;position:relative !important;border-radius:0;margin:0;width:100%;height:fit-content}footer{display:none !important}#viewer[data-handler=text]{border:none;width:100% !important;position:absolute !important}#viewer[data-handler=text] .modal-header{display:none !important}#viewer[data-handler=text] .modal-container{top:0px;height:fit-content}.text-editor{height:fit-content !important}.text-editor .text-menubar{display:none !important}.text-editor .action-item{display:none !important}.text-editor .editor__content{max-width:100%}.text-editor .text-editor__wrapper{height:fit-content;position:unset}.text-editor .text-editor__wrapper div.ProseMirror{margin-top:0;margin-bottom:0;padding-top:0;padding-bottom:0}.text-editor .text-editor__wrapper div.ProseMirror h1,.text-editor .text-editor__wrapper div.ProseMirror h2,.text-editor .text-editor__wrapper div.ProseMirror h3,.text-editor .text-editor__wrapper div.ProseMirror h4,.text-editor .text-editor__wrapper div.ProseMirror h5{break-after:avoid;page-break-after:avoid}.text-editor .text-editor__wrapper div.ProseMirror .image,.text-editor .text-editor__wrapper div.ProseMirror img,.text-editor .text-editor__wrapper div.ProseMirror table{break-inside:avoid-page;page-break-inside:avoid;max-width:90% !important;margin:5vw auto 5vw 5% !important}.text-editor .text-editor__wrapper div.ProseMirror th{color:#000 !important;font-weight:bold !important;border-width:0 1px 2px 0 !important;border-color:gray !important;border-style:none solid solid none !important}.text-editor .text-editor__wrapper div.ProseMirror th:last-of-type{border-width:0 0 2px 0 !important}.text-editor .text-editor__wrapper div.ProseMirror td{border-style:none solid none none !important;border-width:1px !important;border-color:gray !important}.text-editor .text-editor__wrapper div.ProseMirror td:last-of-type{border:none !important}.menubar-placeholder,.text-editor--readonly-bar{display:none}.text-editor__content-wrapper.--show-outline{display:block}.text-editor__content-wrapper .editor--outline{width:auto;height:auto;overflow:unset;position:relative}.text-editor__content-wrapper .editor--outline__btn-close{display:none}.collaboration-cursor__caret,.collaboration-cursor__label{display:none}}`,"",{version:3,sources:["webpack://./src/css/prosemirror.scss","webpack://./src/css/print.scss"],names:[],mappings:"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",sourcesContent:["@use 'sass:selector';\n\n/* Document rendering styles */\ndiv.ProseMirror {\n\theight: 100%;\n\tposition: relative;\n\tword-wrap: break-word;\n\twhite-space: pre-wrap;\n\t-webkit-font-variant-ligatures: none;\n\tfont-variant-ligatures: none;\n\tpadding: 4px 8px 200px 14px;\n\tline-height: 150%;\n\tfont-size: var(--default-font-size);\n\toutline: none;\n\n\t:target {\n\t\t// Menubar height: 44px + 3px bottom + 3px top padding\n\t\tscroll-margin-top: 50px;\n\t}\n\n\t&[contenteditable=true],\n\t&[contenteditable=false],\n\t[contenteditable=true],\n\t[contenteditable=false] {\n\t\twidth: 100%;\n\t\tbackground-color: transparent;\n\t\tcolor: var(--color-main-text);\n\t\topacity: 1;\n\t\t-webkit-user-select: text;\n\t\tuser-select: text;\n\t\tfont-size: var(--default-font-size);\n\n\t\t&:not(.collaboration-cursor__caret) {\n\t\t\tborder: none !important;\n\t\t}\n\n\t\t&:focus, &:focus-visible {\n\t\t\tbox-shadow: none !important;\n\t\t}\n\t}\n\n\tul[data-type=taskList] {\n\t\tmargin-left: 1px;\n\t}\n\n\t.checkbox-item {\n\t\tdisplay: flex;\n\t\talign-items: start;\n\n\t\tinput[type=checkbox] {\n\t\t\tdisplay: none;\n\t\t}\n\t\t&:before {\n\t\t\tcontent: '';\n\t\t\tvertical-align: middle;\n\t\t\tmargin: 3px 6px 3px 2px;\n\t\t\tborder: 1px solid var(--color-text-maxcontrast);\n\t\t\tdisplay: block;\n\t\t\tborder-radius: var(--border-radius);\n\t\t\theight: 14px;\n\t\t\twidth: 14px;\n\t\t\tbox-shadow: none !important;\n\t\t\tbackground-position: center;\n\t\t\tcursor: pointer;\n\t\t\tleft: 9px;\n\t\t}\n\t\t&.checked{\n\t\t\t&:before {\n\t\t\t\tbackground-image: url('../../img/checkbox-mark.svg');\n\t\t\t\tbackground-color: var(--color-primary-element);\n\t\t\t\tborder-color: var(--color-primary-element);\n\t\t\t}\n\t\t\t> label > p {\n\t\t\t\tcolor: var(--color-text-maxcontrast);\n\t\t\t\ttext-decoration: line-through;\n\t\t\t}\n\t\t}\n\t\tlabel {\n\t\t\tdisplay: block;\n\t\t\tflex-grow: 1;\n\t\t\tmax-width: calc(100% - 28px);\n\t\t}\n\t}\n\n\t> *:first-child {\n\t\tmargin-top: 10px;\n\t}\n\n\t> h1,h2,h3,h4,h5,h6 {\n\t\tposition: relative;\n\n\t\t&:first-child {\n\t\t\tmargin-top: 0;\n\t\t}\n\n\t\t.heading-anchor[contenteditable='false'] {\n\t\t\t// Shrink clickable area of anchor permalinks to not overlay the heading\n\t\t\twidth: 1em;\n\t\t\topacity: 0;\n\t\t\tpadding: 0;\n\t\t\tleft: -1em;\n\t\t\ttop: 0;\n\t\t\tfont-size: max(1em, 16px);\n\t\t\tposition: absolute;\n\t\t\ttext-decoration: none;\n\t\t\ttransition-duration: .15s;\n\t\t\ttransition-property: opacity;\n\t\t\ttransition-timing-function: cubic-bezier(.4,0,.2,1);\n\t\t}\n\n\t\t&:hover .heading-anchor {\n\t\t\topacity: 0.5!important;\n\t\t}\n\n\t\t&:focus-visible {\n\t\t\toutline: none;\n\t\t}\n\t}\n\n\ta {\n\t\tcolor: var(--color-primary-element);\n\t\ttext-decoration: underline;\n\t\tpadding: .5em 0;\n\t}\n\n\tp .paragraph-content {\n\t\tmargin-bottom: 1em;\n\t\tline-height: 150%;\n\t}\n\n\tem {\n\t\tfont-style: italic;\n\t}\n\n\th1,\n\th2,\n\th3,\n\th4,\n\th5,\n\th6 {\n\t\tfont-weight: 600;\n\t\tline-height: 1.1em;\n\t\tmargin-top: 24px;\n\t\tmargin-bottom: 12px;\n\t\tcolor: var(--color-main-text);\n\t}\n\n\th1 {\n\t\tfont-size: 30px;\n\t}\n\n\th2 {\n\t\tfont-size: 26px;\n\t}\n\n\th3 {\n\t\tfont-size: 23px;\n\t}\n\n\th4 {\n\t\tfont-size: 20px;\n\t}\n\n\th5 {\n\t\tfont-size: 17px;\n\t}\n\n\th6 {\n\t\tfont-size: var(--default-font-size);\n\t}\n\n\timg {\n\t\tcursor: default;\n\t\tmax-width: 100%;\n\t}\n\n\thr {\n\t\tpadding: 2px 0;\n\t\tborder: none;\n\t\tmargin: 2em 0;\n\t\twidth: 100%;\n\t}\n\n\thr:after {\n\t\tcontent: '';\n\t\tdisplay: block;\n\t\theight: 1px;\n\t\tbackground-color: var(--color-border-dark);\n\t\tline-height: 2px;\n\t}\n\n\tpre {\n\t\twhite-space: pre-wrap;\n\t\tbackground-color: var(--color-background-dark);\n\t\tborder-radius: var(--border-radius);\n\t\tpadding: 1em 1.3em;\n\t\tmargin-bottom: 1em;\n\n\t\t&::before {\n\t\t\tcontent: attr(data-language);\n\t\t\ttext-transform: uppercase;\n\t\t\tdisplay: block;\n\t\t\ttext-align: right;\n\t\t\tfont-weight: bold;\n\t\t\tfont-size: 0.6rem;\n\t\t}\n\t\tcode {\n\t\t\t.hljs-comment,\n\t\t\t.hljs-quote {\n\t\t\t\tcolor: #999999;\n\t\t\t}\n\t\t\t.hljs-variable,\n\t\t\t.hljs-template-variable,\n\t\t\t.hljs-attribute,\n\t\t\t.hljs-tag,\n\t\t\t.hljs-name,\n\t\t\t.hljs-regexp,\n\t\t\t.hljs-link,\n\t\t\t.hljs-selector-id,\n\t\t\t.hljs-selector-class {\n\t\t\t\tcolor: #f2777a;\n\t\t\t}\n\t\t\t.hljs-number,\n\t\t\t.hljs-meta,\n\t\t\t.hljs-built_in,\n\t\t\t.hljs-builtin-name,\n\t\t\t.hljs-literal,\n\t\t\t.hljs-type,\n\t\t\t.hljs-params {\n\t\t\t\tcolor: #f99157;\n\t\t\t}\n\t\t\t.hljs-string,\n\t\t\t.hljs-symbol,\n\t\t\t.hljs-bullet {\n\t\t\t\tcolor: #99cc99;\n\t\t\t}\n\t\t\t.hljs-title,\n\t\t\t.hljs-section {\n\t\t\t\tcolor: #ffcc66;\n\t\t\t}\n\t\t\t.hljs-keyword,\n\t\t\t.hljs-selector-tag {\n\t\t\t\tcolor: #6699cc;\n\t\t\t}\n\t\t\t.hljs-emphasis {\n\t\t\t\tfont-style: italic;\n\t\t\t}\n\t\t\t.hljs-strong {\n\t\t\t\tfont-weight: 700;\n\t\t\t}\n\t\t}\n\t}\n\n\tpre.frontmatter {\n\t\tmargin-bottom: 2em;\n\t\tborder-left: 4px solid var(--color-primary-element);\n\t}\n\n\tpre.frontmatter::before {\n\t\tdisplay: block;\n\t\tcontent: attr(data-title);\n\t\tcolor: var(--color-text-maxcontrast);\n\t\tpadding-bottom: 0.5em;\n\t}\n\n\tp code {\n\t\tbackground-color: var(--color-background-dark);\n\t\tborder-radius: var(--border-radius);\n\t\tpadding: .1em .3em;\n\t}\n\n\tli {\n\t\tposition: relative;\n\t\tpadding-left: 3px;\n\n\t\tp .paragraph-content {\n\t\t\tmargin-bottom: 0.5em;\n\t\t}\n\t}\n\n\tul, ol {\n\t\tpadding-left: 10px;\n\t\tmargin-left: 10px;\n\t\tmargin-bottom: 1em;\n\t}\n\n\tul > li {\n\t\tlist-style-type: disc;\n\t}\n\n\t// Second-level list entries\n\tli ul > li {\n\t\tlist-style-type: circle;\n\t}\n\n\t// Third-level and further down list entries\n\tli li ul > li {\n\t\tlist-style-type: square;\n\t}\n\n\tblockquote {\n\t\tpadding-left: 1em;\n\t\tborder-left: 4px solid var(--color-primary-element);\n\t\tcolor: var(--color-text-maxcontrast);\n\t\tmargin-left: 0;\n\t\tmargin-right: 0;\n\t}\n\n\t// table variables\n\t--table-color-border: var(--color-border);\n\t--table-color-heading: var(--color-text-maxcontrast);\n\t--table-color-heading-border: var(--color-border-dark);\n\t--table-color-background: var(--color-main-background);\n\t--table-color-background-hover: var(--color-primary-element-light);\n\t--table-border-radius: var(--border-radius);\n\n\ttable {\n\t\tborder-spacing: 0;\n\t\twidth: calc(100% - 50px);\n\t\ttable-layout: auto;\n\t\twhite-space: normal; // force text to wrapping\n\t\tmargin-bottom: 1em;\n\t\t&+ * {\n\t\t\tmargin-top: 1em;\n\t\t}\n\n\n\t\ttd, th {\n\t\t\tborder: 1px solid var(--table-color-border);\n\t\t\tborder-left: 0;\n\t\t\tvertical-align: top;\n\t\t\tmax-width: 100%;\n\t\t\t&:first-child {\n\t\t\t\tborder-left: 1px solid var(--table-color-border);\n\t\t\t}\n\t\t}\n\t\ttd {\n\t\t\tpadding: 0.5em 0.75em;\n\t\t\tborder-top: 0;\n\t\t\tcolor: var(--color-main-text);\n\t\t}\n\t\tth {\n\t\t\tpadding: 0 0 0 0.75em;\n\t\t\tfont-weight: normal;\n\t\t\tborder-bottom-color: var(--table-color-heading-border);\n\t\t\tcolor: var(--table-color-heading);\n\n\t\t\t& > div {\n\t\t\t\tdisplay: flex;\n\t\t\t}\n\t\t}\n\t\ttr {\n\t\t\tbackground-color: var(--table-color-background);\n\t\t\t&:hover, &:active, &:focus {\n\t\t\t\tbackground-color: var(--table-color-background-hover);\n\t\t\t}\n\t\t}\n\n\t\ttr:first-child {\n\t\t\tth:first-child { border-top-left-radius: var(--table-border-radius); }\n\t\t\tth:last-child { border-top-right-radius: var(--table-border-radius); }\n\t\t}\n\n\t\ttr:last-child {\n\t\t\ttd:first-child { border-bottom-left-radius: var(--table-border-radius); }\n\t\t\ttd:last-child { border-bottom-right-radius: var(--table-border-radius); }\n\t\t}\n\n\t}\n\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n\tdisplay: block;\n}\n\n.editor__content p.is-empty:first-child::before {\n\tcontent: attr(data-placeholder);\n\tfloat: left;\n\tcolor: var(--color-text-maxcontrast);\n\tpointer-events: none;\n\theight: 0;\n}\n\n.editor__content {\n\ttab-size: 4;\n}\n\n.tippy-content div {\n\tvisibility: visible !important;\n}\n","@media print {\n\t@page {\n\t\tsize: A4;\n\t\tmargin: 2.5cm 2cm 2cm 2.5cm;\n\t}\n\n\tbody {\n\t\t// position: fixed does not support scrolling and as such only prints one page\n\t\tposition: absolute;\n\t\toverflow: visible!important;\n\t}\n\n\t#header {\n\t\tdisplay: none!important;\n\t}\n\n\t#content {\n\t\tdisplay: block!important;\n\t\tposition: relative!important;\n\t\tborder-radius: 0;\n\t\tmargin: 0;\n\t\twidth: 100%;\n\t\theight: fit-content;\n\t}\n\n\tfooter {\n\t\tdisplay: none!important;\n\t}\n\n\t#viewer[data-handler='text'] {\n\t\t// Hide top border\n\t\tborder: none;\n\t\twidth: 100%!important;\n\t\t// NcModal uses fixed, which will be cropped when printed\n\t\tposition: absolute!important;\n\n\t\t.modal-header {\n\t\t\t// Hide modal header (close button)\n\t\t\tdisplay: none!important;\n\t\t}\n\t\t.modal-container {\n\t\t\t// Make sure top aligned as we hided the menubar */\n\t\t\ttop: 0px;\n\t\t\theight: fit-content;\n\t\t}\n\t}\n\n\t.text-editor {\n\t\theight: fit-content!important;\n\n\t\t.text-menubar {\n\t\t\t// Hide menu bar\n\t\t\tdisplay: none!important;\n\t\t}\n\t\t.action-item {\n\t\t\t// Hide table settings\n\t\t\tdisplay: none!important;\n\t\t}\n\t\t.editor__content {\n\t\t\t// Margins set by page rule\n\t\t\tmax-width: 100%;\n\t\t}\n\t\t.text-editor__wrapper {\n\t\t\theight: fit-content;\n\t\t\tposition: unset;\n\n\t\t\tdiv.ProseMirror {\n\t\t\t\tmargin-top: 0;\n\t\t\t\tmargin-bottom: 0;\n\t\t\t\tpadding-top: 0;\n\t\t\t\tpadding-bottom: 0;\n\n\t\t\t\th1, h2, h3, h4, h5 {\n\t\t\t\t\t// orphaned headlines are ugly\n\t\t\t\t\tbreak-after: avoid;\n\t\t\t\t\tpage-break-after: avoid;\n\t\t\t\t}\n\t\t\t\t.image, img, table {\n\t\t\t\t\t// try no page breaks within tables or images\n\t\t\t\t\tbreak-inside: avoid-page;\n\t\t\t\t\tpage-break-inside: avoid;\n\t\t\t\t\t// Some more indention\n\t\t\t\t\tmax-width: 90%!important;\n\t\t\t\t\tmargin: 5vw auto 5vw 5%!important;\n\t\t\t\t}\n\n\t\t\t\t// Add some borders below header and between columns\n\t\t\t\tth {\n\t\t\t\t\tcolor: black!important;\n\t\t\t\t\tfont-weight: bold!important;\n\t\t\t\t\tborder-width: 0 1px 2px 0!important;\n\t\t\t\t\tborder-color: gray!important;\n\t\t\t\t\tborder-style: none solid solid none!important;\n\t\t\t\t}\n\t\t\t\tth:last-of-type {\n\t\t\t\t\tborder-width: 0 0 2px 0!important;\n\t\t\t\t}\n\n\t\t\t\ttd {\n\t\t\t\t\tborder-style: none solid none none!important;\n\t\t\t\t\tborder-width: 1px!important;\n\t\t\t\t\tborder-color: gray!important;\n\t\t\t\t}\n\t\t\t\ttd:last-of-type {\n\t\t\t\t\tborder: none!important;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t.menubar-placeholder, .text-editor--readonly-bar {\n\t\tdisplay: none;\n\t}\n\n\t.text-editor__content-wrapper {\n\t\t&.--show-outline {\n\t\t\tdisplay: block;\n\t\t}\n\n\t\t.editor--outline {\n\t\t\twidth: auto;\n\t\t\theight: auto;\n\t\t\toverflow: unset;\n\t\t\tposition: relative;\n\t\t}\n\t\t.editor--outline__btn-close {\n\t\t\tdisplay: none;\n\t\t}\n\t}\n\n\t.collaboration-cursor__caret,\n\t.collaboration-cursor__label {\n\t\tdisplay: none;\n\t}\n}\n"],sourceRoot:""}]);const p=c},5867:(t,e,r)=>{r.d(e,{A:()=>s});var n=r(71354),o=r.n(n),i=r(76314),a=r.n(i)()(o());a.push([t.id,'#rich-workspace[data-v-3cf545d8]{padding:0 50px;margin-bottom:-24px;text-align:left;max-height:0;transition:max-height .5s cubic-bezier(0, 1, 0, 1);z-index:61;position:relative}.rich-workspace--preview[data-v-3cf545d8]{margin-top:44px}.rich-workspace--preview[data-v-3cf545d8] div[contenteditable="false"]{margin:0}#rich-workspace[data-v-3cf545d8]:only-child{margin-bottom:0}.empty-workspace[data-v-3cf545d8]{cursor:pointer;display:block;padding-top:43px;color:var(--color-text-maxcontrast)}#rich-workspace[data-v-3cf545d8] div[contenteditable=false]{width:100%;padding:0px;background-color:var(--color-main-background);opacity:1;border:none}#rich-workspace[data-v-3cf545d8] .text-editor{height:100%;position:unset !important;top:auto !important}#rich-workspace[data-v-3cf545d8] .text-editor__wrapper{position:unset !important;overflow:visible}#rich-workspace[data-v-3cf545d8] .text-editor__main{overflow:visible !important}#rich-workspace[data-v-3cf545d8] .content-wrapper{overflow:scroll !important;max-height:calc(40vh - 50px);padding-left:10px;padding-bottom:10px}#rich-workspace[data-v-3cf545d8] .text-editor__wrapper .ProseMirror{padding:0px;margin:0}#rich-workspace[data-v-3cf545d8] .table-wrapper .content tr th,#rich-workspace[data-v-3cf545d8] .table-wrapper .content tr td{flex-grow:1}#rich-workspace[data-v-3cf545d8] .table-wrapper .content tr th div{width:100%}#rich-workspace[data-v-3cf545d8] .table-wrapper .content tr th .action-item div{display:flex;justify-content:flex-end}#rich-workspace[data-v-3cf545d8] .editor__content{margin:0}#rich-workspace.focus[data-v-3cf545d8]{max-height:50vh}#rich-workspace[data-v-3cf545d8]:not(.focus){max-height:30vh;position:relative;overflow:hidden}#rich-workspace[data-v-3cf545d8]:not(.focus):not(.empty):after{content:"";position:absolute;z-index:1;bottom:0;left:0;pointer-events:none;background-image:linear-gradient(to bottom, rgba(255, 255, 255, 0), var(--color-main-background));width:100%;height:4em}#rich-workspace.dark[data-v-3cf545d8]:not(.focus):after{background-image:linear-gradient(to bottom, rgba(0, 0, 0, 0), var(--color-main-background))}@media only screen and (max-width: 1024px){#rich-workspace[data-v-3cf545d8]:not(.focus){max-height:30vh}}',"",{version:3,sources:["webpack://./src/views/RichWorkspace.vue"],names:[],mappings:"AACA,iCACC,cAAA,CAEA,mBAAA,CACA,eAAA,CACA,YAAA,CACA,kDAAA,CACA,UAAA,CACA,iBAAA,CAGD,0CACC,eAAA,CAEA,uEACC,QAAA,CAKF,4CACC,eAAA,CAGD,kCACC,cAAA,CACA,aAAA,CACA,gBAAA,CACA,mCAAA,CAGD,4DACC,UAAA,CACA,WAAA,CACA,6CAAA,CACA,SAAA,CACA,WAAA,CAGD,8CACC,WAAA,CACA,yBAAA,CACA,mBAAA,CAGD,uDACC,yBAAA,CACA,gBAAA,CAGD,oDACC,2BAAA,CAGD,kDACC,0BAAA,CACA,4BAAA,CACA,iBAAA,CACA,mBAAA,CAGD,oEACC,WAAA,CACA,QAAA,CAKC,8HACC,WAAA,CAIA,mEACC,UAAA,CAGD,gFACC,YAAA,CACA,wBAAA,CAMJ,kDACC,QAAA,CAGD,uCACC,eAAA,CAGD,6CACC,eAAA,CACA,iBAAA,CACA,eAAA,CAGD,+DACC,UAAA,CACA,iBAAA,CACA,SAAA,CACA,QAAA,CACA,MAAA,CACA,mBAAA,CACA,iGAAA,CACA,UAAA,CACA,UAAA,CAGD,wDACC,2FAAA,CAGD,2CACC,6CACC,eAAA,CAAA",sourcesContent:["\n#rich-workspace {\n\tpadding: 0 50px;\n\t/* Slightly reduce vertical space */\n\tmargin-bottom: -24px;\n\ttext-align: left;\n\tmax-height: 0;\n\ttransition: max-height 0.5s cubic-bezier(0, 1, 0, 1);\n\tz-index: 61;\n\tposition: relative;\n}\n\n.rich-workspace--preview {\n\tmargin-top: 44px;\n\n\t&:deep(div[contenteditable='false']) {\n\t\tmargin: 0;\n\t}\n}\n\n/* For subfolders, where there are no Recommendations */\n#rich-workspace:only-child {\n\tmargin-bottom: 0;\n}\n\n.empty-workspace {\n\tcursor: pointer;\n\tdisplay: block;\n\tpadding-top: 43px;\n\tcolor: var(--color-text-maxcontrast);\n}\n\n#rich-workspace:deep(div[contenteditable=false]) {\n\twidth: 100%;\n\tpadding: 0px;\n\tbackground-color: var(--color-main-background);\n\topacity: 1;\n\tborder: none;\n}\n\n#rich-workspace:deep(.text-editor) {\n\theight: 100%;\n\tposition: unset !important;\n\ttop: auto !important;\n}\n\n#rich-workspace:deep(.text-editor__wrapper) {\n\tposition: unset !important;\n\toverflow: visible;\n}\n\n#rich-workspace:deep(.text-editor__main) {\n\toverflow: visible !important;\n}\n\n#rich-workspace:deep(.content-wrapper) {\n\toverflow: scroll !important;\n\tmax-height: calc(40vh - 50px);\n\tpadding-left: 10px;\n\tpadding-bottom: 10px;\n}\n\n#rich-workspace:deep(.text-editor__wrapper .ProseMirror) {\n\tpadding: 0px;\n\tmargin: 0;\n}\n\n#rich-workspace:deep(.table-wrapper .content) {\n\ttr {\n\t\tth, td {\n\t\t\tflex-grow: 1;\n\t\t}\n\n\t\tth {\n\t\t\tdiv {\n\t\t\t\twidth: 100%;\n\t\t\t}\n\n\t\t\t.action-item div {\n\t\t\t\tdisplay: flex;\n\t\t\t\tjustify-content: flex-end;\n\t\t\t}\n\t\t}\n\t}\n}\n\n#rich-workspace:deep(.editor__content) {\n\tmargin: 0;\n}\n\n#rich-workspace.focus {\n\tmax-height: 50vh;\n}\n\n#rich-workspace:not(.focus) {\n\tmax-height: 30vh;\n\tposition: relative;\n\toverflow: hidden;\n}\n\n#rich-workspace:not(.focus):not(.empty):after {\n\tcontent: '';\n\tposition: absolute;\n\tz-index: 1;\n\tbottom: 0;\n\tleft: 0;\n\tpointer-events: none;\n\tbackground-image: linear-gradient(to bottom, rgba(255, 255, 255, 0), var(--color-main-background));\n\twidth: 100%;\n\theight: 4em;\n}\n\n#rich-workspace.dark:not(.focus):after {\n\tbackground-image: linear-gradient(to bottom, rgba(0, 0, 0, 0), var(--color-main-background));\n}\n\n@media only screen and (max-width: 1024px) {\n\t#rich-workspace:not(.focus) {\n\t\tmax-height: 30vh;\n\t}\n}\n"],sourceRoot:""}]);const s=a},61395:(t,e,r)=>{r.d(e,{A:()=>y});var n=r(52781),o=r(58294),i=r(73590),a=r(51594),s=r(599);const l={name:"BaseReader",components:{EditorContent:o.$Z,EditorOutline:s.A},mixins:[a.yc,a.xU],provide(){const t={};return Object.defineProperties(t,{[i.qS]:{get:()=>this.$editor}}),t},inject:["renderHtml","extensions"],props:{content:{type:String,required:!0}},computed:{htmlContent(){return this.renderHtml(this.content)},showOutline(){return this.$outlineState.visible}},watch:{content(){this.updateContent()}},created(){this.$editor=this.createEditor(),this.$editor.setEditable(!1)},beforeDestroy(){this.$editor.destroy()},methods:{createEditor(){return new n.KE({content:this.htmlContent,extensions:this.extensions()})},updateContent(){this.$editor.commands.setContent(this.htmlContent,!0)}}};var d=r(85072),c=r.n(d),A=r(97825),p=r.n(A),h=r(77659),m=r.n(h),u=r(55056),f=r.n(u),C=r(10540),v=r.n(C),g=r(41113),b=r.n(g),w=r(33909),x={};x.styleTagTransform=b(),x.setAttributes=f(),x.insert=m().bind(null,"head"),x.domAPI=p(),x.insertStyleElement=v();c()(w.A,x);w.A&&w.A.locals&&w.A.locals;const y=(0,r(14486).A)(l,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"content-wrapper text-editor__content-wrapper",class:{"--show-outline":t.showOutline},attrs:{"data-text-el":"editor-content-wrapper"}},[t.showOutline?e("div",{staticClass:"text-editor__content-wrapper__left"},[e("EditorOutline")],1):t._e(),t._v(" "),t.$editor?e("EditorContent",{staticClass:"editor__content text-editor__content",attrs:{id:"read-only-editor",editor:t.$editor}}):t._e(),t._v(" "),e("div",{staticClass:"text-editor__content-wrapper__right"})],1)}),[],!1,null,"151c6c0d",null).exports},66104:(t,e,r)=>{r.d(e,{A:()=>w});var n=r(61395),o=r(60775),i=r(32931);const a={name:"RichTextReader",components:{BaseReader:n.A},provide:{renderHtml:t=>i.A.render(t),extensions:()=>[o.sD.configure({editing:!1})]},props:{content:{type:String,required:!0}}};var s=r(85072),l=r.n(s),d=r(97825),c=r.n(d),A=r(77659),p=r.n(A),h=r(55056),m=r.n(h),u=r(10540),f=r.n(u),C=r(41113),v=r.n(C),g=r(17142),b={};b.styleTagTransform=v(),b.setAttributes=m(),b.insert=p().bind(null,"head"),b.domAPI=c(),b.insertStyleElement=f();l()(g.A,b);g.A&&g.A.locals&&g.A.locals;const w=(0,r(14486).A)(a,(function(){var t=this;return(0,t._self._c)("BaseReader",{attrs:{content:t.content},on:{"click-link":(e,r)=>t.$emit("click-link",e,r)}})}),[],!1,null,null,null).exports},81075:(t,e,r)=>{r.d(e,{default:()=>_});var n=r(70715),o=r(63814),i=r(61338);var a=r(66104);const s=!!document.getElementById("isPublic"),l=(0,o.KT)("apps/text"+(s?"/public":"")+"/workspace",2),d=["Readme.md","README.md","readme.md"],c={name:"RichWorkspace",components:{RichTextReader:a.A,Editor:async function(){if(!window._nc_text_editor_instance){if(window._nc_text_editor_importing)return await new Promise((t=>{const e=setInterval((()=>{window._nc_text_editor_instance&&(t(window._nc_text_editor_instance),clearInterval(e))}),200)}));window._nc_text_editor_importing=!0;const t=await Promise.all([r.e("mermaid"),r.e("vendors-node_modules_nextcloud_vue_dist_index_mjs"),r.e("vendors-node_modules_braintree_sanitize-url_dist_index_js-node_modules_quartzy_markdown-it-me-60d959"),r.e("vendors-node_modules_nextcloud_dialogs_dist_chunks__plugin-vue2_normalizer-CQ6iBklL_mjs-node_-6871b3"),r.e("vendors-node_modules_nextcloud_logger_dist_index_js"),r.e("vendors-node_modules_path-normalize_lib_index_js-node_modules_proxy-polyfill_src_index_js-nod-9d20ea"),r.e("src_extensions_index_js-src_components_Editor_EditorOutline_vue-data_image_svg_xml_3c_21--_20-ee52b2"),r.e("editor")]).then(r.bind(r,32617)),{default:e}=await Promise.resolve().then(r.bind(r,85471));e.prototype.t=window.t,e.prototype.OCA=window.OCA;const n=e.extend(t.default);window._nc_text_editor_instance=n}return window._nc_text_editor_instance}},props:{content:{type:String,default:""},path:{type:String,required:!0},active:{type:Boolean,default:!0},hasRichWorkspace:{type:Boolean,default:!1}},data:()=>({localHasRichWorkspace:!1,focus:!1,folder:null,file:null,loaded:!1,ready:!1,autofocus:!1,hideMenu:!0,darkTheme:OCA.Accessibility&&"dark"===OCA.Accessibility.theme,enabled:OCA.Text.RichWorkspaceEnabled}),computed:{shareToken:()=>document.getElementById("sharingToken")?.value},watch:{path(){this.getFileInfo()},focus(t){t||document.querySelector("#rich-workspace .text-editor__main").scrollTo(0,0)},hasRichWorkspace(t){this.localHasRichWorkspace=t}},mounted(){this.localHasRichWorkspace=this.hasRichWorkspace,this.enabled&&this.hasRichWorkspace&&this.getFileInfo(),(0,i.B1)("Text::showRichWorkspace",this.showRichWorkspace),(0,i.B1)("Text::hideRichWorkspace",this.hideRichWorkspace),(0,i.B1)("files:node:created",this.onFileCreated),(0,i.B1)("files:node:deleted",this.onFileDeleted),(0,i.B1)("files:node:renamed",this.onFileRenamed),this.listenKeydownEvents()},beforeDestroy(){(0,i.al)("Text::showRichWorkspace",this.showRichWorkspace),(0,i.al)("Text::hideRichWorkspace",this.hideRichWorkspace),(0,i.al)("files:node:created",this.onFileCreated),(0,i.al)("files:node:deleted",this.onFileDeleted),(0,i.al)("files:node:renamed",this.onFileRenamed),this.unlistenKeydownEvents()},methods:{onFocus(){this.focus=!0,this.hideMenu=!1,this.unlistenKeydownEvents()},reset(){this.localHasRichWorkspace=!1,this.file=null,this.focus=!1,this.$nextTick((()=>{this.creating=!1,this.getFileInfo()}))},getFileInfo(t){if(!this.enabled)return;this.file=null,this.ready=!1,this.loaded=!0,this.autofocus=!1;const e={path:this.path};return s&&(e.shareToken=this.shareToken),n.Ay.get(l,{params:e}).then((e=>{const r=e.data.ocs.data;return this.folder=r.folder||null,this.file=r.file,this.editing=!0,this.loaded=!0,this.autofocus=t||!1,this.localHasRichWorkspace=!0,!0})).catch((t=>(t.response.data.ocs&&t.response.data.ocs.data.folder?this.folder=t.response.data.ocs.data.folder:this.folder=null,this.file=null,this.loaded=!0,this.ready=!0,this.creating=!1,!1)))},showRichWorkspace(t){this.enabled=!0,this.getFileInfo(t?.autofocus||!1)},hideRichWorkspace(){this.enabled=!1},listenKeydownEvents(){window.addEventListener("keydown",this.onKeydown)},unlistenKeydownEvents(){window.removeEventListener("keydown",this.onKeydown)},onKeydown(t){"Tab"===t.key&&(this.hideMenu=!1)},onFileCreated(t){d.includes(t.basename)&&(this.localHasRichWorkspace=!0,this.getFileInfo(!0))},onFileDeleted(t){t.path===this.file?.path&&(this.localHasRichWorkspace=!1)},onFileRenamed(t){d.includes(t.basename)?this.localHasRichWorkspace=!0:t.fileid===this.file?.id&&t.path!==this.file?.path&&(this.localHasRichWorkspace=!1)}}};var A=r(85072),p=r.n(A),h=r(97825),m=r.n(h),u=r(77659),f=r.n(u),C=r(55056),v=r.n(C),g=r(10540),b=r.n(g),w=r(41113),x=r.n(w),y=r(5867),k={};k.styleTagTransform=x(),k.setAttributes=v(),k.insert=f().bind(null,"head"),k.domAPI=m(),k.insertStyleElement=b();p()(y.A,k);y.A&&y.A.locals&&y.A.locals;const _=(0,r(14486).A)(c,(function(){var t=this,e=t._self._c;return t.enabled&&t.localHasRichWorkspace?e("div",{class:{focus:t.focus,dark:t.darkTheme},attrs:{id:"rich-workspace"}},[t.loaded&&t.ready?t._e():e("RichTextReader",{staticClass:"rich-workspace--preview",attrs:{content:t.content}}),t._v(" "),t.file?e("Editor",{directives:[{name:"show",rawName:"v-show",value:t.ready,expression:"ready"}],key:t.file.path,attrs:{"file-id":t.file.id,"relative-path":t.file.path,"share-token":t.shareToken,mime:t.file.mimetype,autofocus:t.autofocus,"hide-menu":t.hideMenu,active:"","rich-workspace":""},on:{ready:function(e){t.ready=!0},focus:t.onFocus,error:t.reset}}):t._e()],1):t._e()}),[],!1,null,"3cf545d8",null).exports},9050:(t,e,r)=>{r.d(e,{a:()=>d,e:()=>l,g:()=>c,s:()=>A});var n=r(59097),o=r(43850),i=r(24715);const a=(0,n.getBuilder)("nextcloud-vue").persist(!0).build();let s;function l(t,e=10){s||(s=new o.EmojiIndex(i));const r=c();let n;return t?(n=s.search(":".concat(t),e),n.length<e&&(n=n.concat(s.search(t,e-n.length)))):n=o.frequently.get(e).map((t=>s.emoji(t)))||[],n.map((t=>t.getSkin(r)))}function d(t){o.frequently.add(t)}function c(){var t;const e=Number.parseInt(null!=(t=a.getItem("NcEmojiPicker::currentSkinTone"))?t:"1");return Math.min(Math.max(e,1),6)}function A(t){t=Math.min(Math.max(t,1),6),a.setItem("NcEmojiPicker::currentSkinTone",t.toString())}},38262:(t,e,r)=>{r.d(e,{$L:()=>S,Ln:()=>C,N0:()=>B,Um:()=>P,Wg:()=>v,dL:()=>G,jP:()=>w,n9:()=>_,oM:()=>x,zy:()=>k});var n=r(58903);const o=Math.pow(2,16);function i(t){return 65535&t}class a{constructor(t,e,r){this.pos=t,this.delInfo=e,this.recover=r}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class s{constructor(t,e=!1){if(this.ranges=t,this.inverted=e,!t.length&&s.empty)return s.empty}recover(t){let e=0,r=i(t);if(!this.inverted)for(let t=0;t<r;t++)e+=this.ranges[3*t+2]-this.ranges[3*t+1];return this.ranges[3*r]+e+function(t){return(t-(65535&t))/o}(t)}mapResult(t,e=1){return this._map(t,e,!1)}map(t,e=1){return this._map(t,e,!0)}_map(t,e,r){let n=0,i=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let d=this.ranges[l]-(this.inverted?n:0);if(d>t)break;let c=this.ranges[l+i],A=this.ranges[l+s],p=d+c;if(t<=p){let i=d+n+((c?t==d?-1:t==p?1:e:e)<0?0:A);if(r)return i;let s=t==(e<0?d:p)?null:l/3+(t-d)*o,h=t==d?2:t==p?1:4;return(e<0?t!=d:t!=p)&&(h|=8),new a(i,h,s)}n+=A-c}return r?t+n:new a(t+n,0,null)}touches(t,e){let r=0,n=i(e),o=this.inverted?2:1,a=this.inverted?1:2;for(let e=0;e<this.ranges.length;e+=3){let i=this.ranges[e]-(this.inverted?r:0);if(i>t)break;let s=this.ranges[e+o];if(t<=i+s&&e==3*n)return!0;r+=this.ranges[e+a]-s}return!1}forEach(t){let e=this.inverted?2:1,r=this.inverted?1:2;for(let n=0,o=0;n<this.ranges.length;n+=3){let i=this.ranges[n],a=i-(this.inverted?o:0),s=i+(this.inverted?0:o),l=this.ranges[n+e],d=this.ranges[n+r];t(a,a+l,s,s+d),o+=d-l}}invert(){return new s(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return 0==t?s.empty:new s(t<0?[0,-t,0]:[0,0,t])}}s.empty=new s([]);class l{constructor(t=[],e,r=0,n=t.length){this.maps=t,this.mirror=e,this.from=r,this.to=n}slice(t=0,e=this.maps.length){return new l(this.maps,this.mirror,t,e)}copy(){return new l(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(t,e){this.to=this.maps.push(t),null!=e&&this.setMirror(this.maps.length-1,e)}appendMapping(t){for(let e=0,r=this.maps.length;e<t.maps.length;e++){let n=t.getMirror(e);this.appendMap(t.maps[e],null!=n&&n<e?r+n:void 0)}}getMirror(t){if(this.mirror)for(let e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]}setMirror(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)}appendMappingInverted(t){for(let e=t.maps.length-1,r=this.maps.length+t.maps.length;e>=0;e--){let n=t.getMirror(e);this.appendMap(t.maps[e].invert(),null!=n&&n>e?r-n-1:void 0)}}invert(){let t=new l;return t.appendMappingInverted(this),t}map(t,e=1){if(this.mirror)return this._map(t,e,!0);for(let r=this.from;r<this.to;r++)t=this.maps[r].map(t,e);return t}mapResult(t,e=1){return this._map(t,e,!1)}_map(t,e,r){let n=0;for(let r=this.from;r<this.to;r++){let o=this.maps[r].mapResult(t,e);if(null!=o.recover){let e=this.getMirror(r);if(null!=e&&e>r&&e<this.to){r=e,t=this.maps[e].recover(o.recover);continue}}n|=o.delInfo,t=o.pos}return r?t:new a(t,n,null)}}const d=Object.create(null);class c{getMap(){return s.empty}merge(t){return null}static fromJSON(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=d[e.stepType];if(!r)throw new RangeError(`No step type ${e.stepType} defined`);return r.fromJSON(t,e)}static jsonID(t,e){if(t in d)throw new RangeError("Duplicate use of step JSON ID "+t);return d[t]=e,e.prototype.jsonID=t,e}}class A{constructor(t,e){this.doc=t,this.failed=e}static ok(t){return new A(t,null)}static fail(t){return new A(null,t)}static fromReplace(t,e,r,o){try{return A.ok(t.replace(e,r,o))}catch(t){if(t instanceof n.vI)return A.fail(t.message);throw t}}}function p(t,e,r){let o=[];for(let n=0;n<t.childCount;n++){let i=t.child(n);i.content.size&&(i=i.copy(p(i.content,e,i))),i.isInline&&(i=e(i,r,n)),o.push(i)}return n.FK.fromArray(o)}class h extends c{constructor(t,e,r){super(),this.from=t,this.to=e,this.mark=r}apply(t){let e=t.slice(this.from,this.to),r=t.resolve(this.from),o=r.node(r.sharedDepth(this.to)),i=new n.Ji(p(e.content,((t,e)=>t.isAtom&&e.type.allowsMarkType(this.mark.type)?t.mark(this.mark.addToSet(t.marks)):t),o),e.openStart,e.openEnd);return A.fromReplace(t,this.from,this.to,i)}invert(){return new m(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return e.deleted&&r.deleted||e.pos>=r.pos?null:new h(e.pos,r.pos,this.mark)}merge(t){return t instanceof h&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new h(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new h(e.from,e.to,t.markFromJSON(e.mark))}}c.jsonID("addMark",h);class m extends c{constructor(t,e,r){super(),this.from=t,this.to=e,this.mark=r}apply(t){let e=t.slice(this.from,this.to),r=new n.Ji(p(e.content,(t=>t.mark(this.mark.removeFromSet(t.marks))),t),e.openStart,e.openEnd);return A.fromReplace(t,this.from,this.to,r)}invert(){return new h(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return e.deleted&&r.deleted||e.pos>=r.pos?null:new m(e.pos,r.pos,this.mark)}merge(t){return t instanceof m&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new m(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new m(e.from,e.to,t.markFromJSON(e.mark))}}c.jsonID("removeMark",m);class u extends c{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return A.fail("No node at mark step's position");let r=e.type.create(e.attrs,null,this.mark.addToSet(e.marks));return A.fromReplace(t,this.pos,this.pos+1,new n.Ji(n.FK.from(r),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);if(e){let t=this.mark.addToSet(e.marks);if(t.length==e.marks.length){for(let r=0;r<e.marks.length;r++)if(!e.marks[r].isInSet(t))return new u(this.pos,e.marks[r]);return new u(this.pos,this.mark)}}return new f(this.pos,this.mark)}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new u(e.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if("number"!=typeof e.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new u(e.pos,t.markFromJSON(e.mark))}}c.jsonID("addNodeMark",u);class f extends c{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return A.fail("No node at mark step's position");let r=e.type.create(e.attrs,null,this.mark.removeFromSet(e.marks));return A.fromReplace(t,this.pos,this.pos+1,new n.Ji(n.FK.from(r),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);return e&&this.mark.isInSet(e.marks)?new u(this.pos,this.mark):this}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new f(e.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if("number"!=typeof e.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new f(e.pos,t.markFromJSON(e.mark))}}c.jsonID("removeNodeMark",f);class C extends c{constructor(t,e,r,n=!1){super(),this.from=t,this.to=e,this.slice=r,this.structure=n}apply(t){return this.structure&&g(t,this.from,this.to)?A.fail("Structure replace would overwrite content"):A.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new s([this.from,this.to-this.from,this.slice.size])}invert(t){return new C(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let e=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return e.deletedAcross&&r.deletedAcross?null:new C(e.pos,Math.max(e.pos,r.pos),this.slice)}merge(t){if(!(t instanceof C)||t.structure||this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;{let e=this.slice.size+t.slice.size==0?n.Ji.empty:new n.Ji(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new C(t.from,this.to,e,this.structure)}}{let e=this.slice.size+t.slice.size==0?n.Ji.empty:new n.Ji(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new C(this.from,this.to+(t.to-t.from),e,this.structure)}}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new C(e.from,e.to,n.Ji.fromJSON(t,e.slice),!!e.structure)}}c.jsonID("replace",C);class v extends c{constructor(t,e,r,n,o,i,a=!1){super(),this.from=t,this.to=e,this.gapFrom=r,this.gapTo=n,this.slice=o,this.insert=i,this.structure=a}apply(t){if(this.structure&&(g(t,this.from,this.gapFrom)||g(t,this.gapTo,this.to)))return A.fail("Structure gap-replace would overwrite content");let e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return A.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,e.content);return r?A.fromReplace(t,this.from,this.to,r):A.fail("Content does not fit in gap")}getMap(){return new s([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let e=this.gapTo-this.gapFrom;return new v(this.from,this.from+this.slice.size+e,this.from+this.insert,this.from+this.insert+e,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let e=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),n=t.map(this.gapFrom,-1),o=t.map(this.gapTo,1);return e.deletedAcross&&r.deletedAcross||n<e.pos||o>r.pos?null:new v(e.pos,r.pos,n,o,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to||"number"!=typeof e.gapFrom||"number"!=typeof e.gapTo||"number"!=typeof e.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new v(e.from,e.to,e.gapFrom,e.gapTo,n.Ji.fromJSON(t,e.slice),e.insert,!!e.structure)}}function g(t,e,r){let n=t.resolve(e),o=r-e,i=n.depth;for(;o>0&&i>0&&n.indexAfter(i)==n.node(i).childCount;)i--,o--;if(o>0){let t=n.node(i).maybeChild(n.indexAfter(i));for(;o>0;){if(!t||t.isLeaf)return!0;t=t.firstChild,o--}}return!1}function b(t,e,r){return(0==e||t.canReplace(e,t.childCount))&&(r==t.childCount||t.canReplace(0,r))}function w(t){let e=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let n=t.$from.node(r),o=t.$from.index(r),i=t.$to.indexAfter(r);if(r<t.depth&&n.canReplace(o,i,e))return r;if(0==r||n.type.spec.isolating||!b(n,o,i))break}return null}function x(t,e,r=null,n=t){let o=function(t,e){let{parent:r,startIndex:n,endIndex:o}=t,i=r.contentMatchAt(n).findWrapping(e);if(!i)return null;let a=i.length?i[0]:e;return r.canReplaceWith(n,o,a)?i:null}(t,e),i=o&&function(t,e){let{parent:r,startIndex:n,endIndex:o}=t,i=r.child(n),a=e.contentMatch.findWrapping(i.type);if(!a)return null;let s=(a.length?a[a.length-1]:e).contentMatch;for(let t=n;s&&t<o;t++)s=s.matchType(r.child(t).type);return s&&s.validEnd?a:null}(n,e);return i?o.map(y).concat({type:e,attrs:r}).concat(i.map(y)):null}function y(t){return{type:t,attrs:null}}function k(t,e,r=1,n){let o=t.resolve(e),i=o.depth-r,a=n&&n[n.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!a.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let t=o.depth-1,e=r-2;t>i;t--,e--){let r=o.node(t),i=o.index(t);if(r.type.spec.isolating)return!1;let a=r.content.cutByIndex(i,r.childCount),s=n&&n[e+1];s&&(a=a.replaceChild(0,s.type.create(s.attrs)));let l=n&&n[e]||r;if(!r.canReplace(i+1,r.childCount)||!l.type.validContent(a))return!1}let s=o.indexAfter(i),l=n&&n[0];return o.node(i).canReplaceWith(s,s,l?l.type:o.node(i+1).type)}function _(t,e){let r=t.resolve(e),n=r.index();return M(r.nodeBefore,r.nodeAfter)&&r.parent.canReplace(n,n+1)}function M(t,e){return!(!t||!e||t.isLeaf||!t.canAppend(e))}function B(t,e,r=-1){let n=t.resolve(e);for(let t=n.depth;;t--){let o,i,a=n.index(t);if(t==n.depth?(o=n.nodeBefore,i=n.nodeAfter):r>0?(o=n.node(t+1),a++,i=n.node(t).maybeChild(a)):(o=n.node(t).maybeChild(a-1),i=n.node(t+1)),o&&!o.isTextblock&&M(o,i)&&n.node(t).canReplace(a,a+1))return e;if(0==t)break;e=r<0?n.before(t):n.after(t)}}function P(t,e,r){let n=t.resolve(e);if(!r.content.size)return e;let o=r.content;for(let t=0;t<r.openStart;t++)o=o.firstChild.content;for(let t=1;t<=(0==r.openStart&&r.size?2:1);t++)for(let e=n.depth;e>=0;e--){let r=e==n.depth?0:n.pos<=(n.start(e+1)+n.end(e+1))/2?-1:1,i=n.index(e)+(r>0?1:0),a=n.node(e),s=!1;if(1==t)s=a.canReplace(i,i,o);else{let t=a.contentMatchAt(i).findWrapping(o.firstChild.type);s=t&&a.canReplaceWith(i,i,t[0])}if(s)return 0==r?n.pos:r<0?n.before(e+1):n.after(e+1)}return null}function S(t,e,r=e,o=n.Ji.empty){if(e==r&&!o.size)return null;let i=t.resolve(e),a=t.resolve(r);return D(i,a,o)?new C(e,r,o):new E(i,a,o).fit()}function D(t,e,r){return!r.openStart&&!r.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),r.content)}c.jsonID("replaceAround",v);class E{constructor(t,e,r){this.$from=t,this.$to=e,this.unplaced=r,this.frontier=[],this.placed=n.FK.empty;for(let e=0;e<=t.depth;e++){let r=t.node(e);this.frontier.push({type:r.type,match:r.contentMatchAt(t.indexAfter(e))})}for(let e=t.depth;e>0;e--)this.placed=n.FK.from(t.node(e).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let t=this.findFittable();t?this.placeNodes(t):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),e=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(t<0?this.$to:r.doc.resolve(t));if(!o)return null;let i=this.placed,a=r.depth,s=o.depth;for(;a&&s&&1==i.childCount;)i=i.firstChild.content,a--,s--;let l=new n.Ji(i,a,s);return t>-1?new v(r.pos,t,this.$to.pos,this.$to.end(),l,e):l.size||r.pos!=this.$to.pos?new C(r.pos,o.pos,l):null}findFittable(){let t=this.unplaced.openStart;for(let e=this.unplaced.content,r=0,n=this.unplaced.openEnd;r<t;r++){let o=e.firstChild;if(e.childCount>1&&(n=0),o.type.spec.isolating&&n<=r){t=r;break}e=o.content}for(let e=1;e<=2;e++)for(let r=1==e?t:this.unplaced.openStart;r>=0;r--){let t,o=null;r?(o=F(this.unplaced.content,r-1).firstChild,t=o.content):t=this.unplaced.content;let i=t.firstChild;for(let t=this.depth;t>=0;t--){let a,{type:s,match:l}=this.frontier[t],d=null;if(1==e&&(i?l.matchType(i.type)||(d=l.fillBefore(n.FK.from(i),!1)):o&&s.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:t,parent:o,inject:d};if(2==e&&i&&(a=l.findWrapping(i.type)))return{sliceDepth:r,frontierDepth:t,parent:o,wrap:a};if(o&&l.matchType(o.type))break}}}openMore(){let{content:t,openStart:e,openEnd:r}=this.unplaced,o=F(t,e);return!(!o.childCount||o.firstChild.isLeaf)&&(this.unplaced=new n.Ji(t,e+1,Math.max(r,o.size+e>=t.size-r?e+1:0)),!0)}dropNode(){let{content:t,openStart:e,openEnd:r}=this.unplaced,o=F(t,e);if(o.childCount<=1&&e>0){let i=t.size-e<=e+o.size;this.unplaced=new n.Ji(R(t,e-1,1),e-1,i?e-1:r)}else this.unplaced=new n.Ji(R(t,e,1),e,r)}placeNodes({sliceDepth:t,frontierDepth:e,parent:r,inject:o,wrap:i}){for(;this.depth>e;)this.closeFrontierNode();if(i)for(let t=0;t<i.length;t++)this.openFrontierNode(i[t]);let a=this.unplaced,s=r?r.content:a.content,l=a.openStart-t,d=0,c=[],{match:A,type:p}=this.frontier[e];if(o){for(let t=0;t<o.childCount;t++)c.push(o.child(t));A=A.matchFragment(o)}let h=s.size+t-(a.content.size-a.openEnd);for(;d<s.childCount;){let t=s.child(d),e=A.matchType(t.type);if(!e)break;d++,(d>1||0==l||t.content.size)&&(A=e,c.push(I(t.mark(p.allowedMarks(t.marks)),1==d?l:0,d==s.childCount?h:-1)))}let m=d==s.childCount;m||(h=-1),this.placed=j(this.placed,e,n.FK.from(c)),this.frontier[e].match=A,m&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let t=0,e=s;t<h;t++){let t=e.lastChild;this.frontier.push({type:t.type,match:t.contentMatchAt(t.childCount)}),e=t.content}this.unplaced=m?0==t?n.Ji.empty:new n.Ji(R(a.content,t-1,1),t-1,h<0?a.openEnd:t-1):new n.Ji(R(a.content,t,d),a.openStart,a.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t,e=this.frontier[this.depth];if(!e.type.isTextblock||!z(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,n=this.$to.after(r);for(;r>1&&n==this.$to.end(--r);)++n;return n}findCloseLevel(t){t:for(let e=Math.min(this.depth,t.depth);e>=0;e--){let{match:r,type:n}=this.frontier[e],o=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),i=z(t,e,n,r,o);if(i){for(let r=e-1;r>=0;r--){let{match:e,type:n}=this.frontier[r],o=z(t,r,n,e,!0);if(!o||o.childCount)continue t}return{depth:e,fit:i,move:o?t.doc.resolve(t.after(e+1)):t}}}}close(t){let e=this.findCloseLevel(t);if(!e)return null;for(;this.depth>e.depth;)this.closeFrontierNode();e.fit.childCount&&(this.placed=j(this.placed,e.depth,e.fit)),t=e.move;for(let r=e.depth+1;r<=t.depth;r++){let e=t.node(r),n=e.type.contentMatch.fillBefore(e.content,!0,t.index(r));this.openFrontierNode(e.type,e.attrs,n)}return t}openFrontierNode(t,e=null,r){let o=this.frontier[this.depth];o.match=o.match.matchType(t),this.placed=j(this.placed,this.depth,n.FK.from(t.create(e,r))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(n.FK.empty,!0);t.childCount&&(this.placed=j(this.placed,this.frontier.length,t))}}function R(t,e,r){return 0==e?t.cutByIndex(r,t.childCount):t.replaceChild(0,t.firstChild.copy(R(t.firstChild.content,e-1,r)))}function j(t,e,r){return 0==e?t.append(r):t.replaceChild(t.childCount-1,t.lastChild.copy(j(t.lastChild.content,e-1,r)))}function F(t,e){for(let r=0;r<e;r++)t=t.firstChild.content;return t}function I(t,e,r){if(e<=0)return t;let o=t.content;return e>1&&(o=o.replaceChild(0,I(o.firstChild,e-1,1==o.childCount?r-1:0))),e>0&&(o=t.type.contentMatch.fillBefore(o).append(o),r<=0&&(o=o.append(t.type.contentMatch.matchFragment(o).fillBefore(n.FK.empty,!0)))),t.copy(o)}function z(t,e,r,n,o){let i=t.node(e),a=o?t.indexAfter(e):t.index(e);if(a==i.childCount&&!r.compatibleContent(i.type))return null;let s=n.fillBefore(i.content,!0,a);return s&&!function(t,e,r){for(let n=r;n<e.childCount;n++)if(!t.allowsMarks(e.child(n).marks))return!0;return!1}(r,i.content,a)?s:null}function J(t,e,r,o,i){if(e<r){let n=t.firstChild;t=t.replaceChild(0,n.copy(J(n.content,e+1,r,o,n)))}if(e>o){let e=i.contentMatchAt(0),r=e.fillBefore(t).append(t);t=r.append(e.matchFragment(r).fillBefore(n.FK.empty,!0))}return t}function N(t,e){let r=[];for(let n=Math.min(t.depth,e.depth);n>=0;n--){let o=t.start(n);if(o<t.pos-(t.depth-n)||e.end(n)>e.pos+(e.depth-n)||t.node(n).type.spec.isolating||e.node(n).type.spec.isolating)break;(o==e.start(n)||n==t.depth&&n==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&n&&e.start(n-1)==o-1)&&r.push(n)}return r}class T extends c{constructor(t,e,r){super(),this.pos=t,this.attr=e,this.value=r}apply(t){let e=t.nodeAt(this.pos);if(!e)return A.fail("No node at attribute step's position");let r=Object.create(null);for(let t in e.attrs)r[t]=e.attrs[t];r[this.attr]=this.value;let o=e.type.create(r,null,e.marks);return A.fromReplace(t,this.pos,this.pos+1,new n.Ji(n.FK.from(o),0,e.isLeaf?0:1))}getMap(){return s.empty}invert(t){return new T(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new T(e.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,e){if("number"!=typeof e.pos||"string"!=typeof e.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new T(e.pos,e.attr,e.value)}}c.jsonID("attr",T);class O extends c{constructor(t,e){super(),this.attr=t,this.value=e}apply(t){let e=Object.create(null);for(let r in t.attrs)e[r]=t.attrs[r];e[this.attr]=this.value;let r=t.type.create(e,t.content,t.marks);return A.ok(r)}getMap(){return s.empty}invert(t){return new O(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,e){if("string"!=typeof e.attr)throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new O(e.attr,e.value)}}c.jsonID("docAttr",O);let W=class extends Error{};W=function t(e){let r=Error.call(this,e);return r.__proto__=t.prototype,r},(W.prototype=Object.create(Error.prototype)).constructor=W,W.prototype.name="TransformError";class G{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new l}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let e=this.maybeStep(t);if(e.failed)throw new W(e.failed);return this}maybeStep(t){let e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e}get docChanged(){return this.steps.length>0}addStep(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e}replace(t,e=t,r=n.Ji.empty){let o=S(this.doc,t,e,r);return o&&this.step(o),this}replaceWith(t,e,r){return this.replace(t,e,new n.Ji(n.FK.from(r),0,0))}delete(t,e){return this.replace(t,e,n.Ji.empty)}insert(t,e){return this.replaceWith(t,t,e)}replaceRange(t,e,r){return function(t,e,r,o){if(!o.size)return t.deleteRange(e,r);let i=t.doc.resolve(e),a=t.doc.resolve(r);if(D(i,a,o))return t.step(new C(e,r,o));let s=N(i,t.doc.resolve(r));0==s[s.length-1]&&s.pop();let l=-(i.depth+1);s.unshift(l);for(let t=i.depth,e=i.pos-1;t>0;t--,e--){let r=i.node(t).type.spec;if(r.defining||r.definingAsContext||r.isolating)break;s.indexOf(t)>-1?l=t:i.before(t)==e&&s.splice(1,0,-t)}let d=s.indexOf(l),c=[],A=o.openStart;for(let t=o.content,e=0;;e++){let r=t.firstChild;if(c.push(r),e==o.openStart)break;t=r.content}for(let t=A-1;t>=0;t--){let e=c[t],r=(p=e.type).spec.defining||p.spec.definingForContent;if(r&&!e.sameMarkup(i.node(Math.abs(l)-1)))A=t;else if(r||!e.type.isTextblock)break}var p;for(let e=o.openStart;e>=0;e--){let l=(e+A+1)%(o.openStart+1),p=c[l];if(p)for(let e=0;e<s.length;e++){let c=s[(e+d)%s.length],A=!0;c<0&&(A=!1,c=-c);let h=i.node(c-1),m=i.index(c-1);if(h.canReplaceWith(m,m,p.type,p.marks))return t.replace(i.before(c),A?a.after(c):r,new n.Ji(J(o.content,0,o.openStart,l),l,o.openEnd))}}let h=t.steps.length;for(let n=s.length-1;n>=0&&(t.replace(e,r,o),!(t.steps.length>h));n--){let t=s[n];t<0||(e=i.before(t),r=a.after(t))}}(this,t,e,r),this}replaceRangeWith(t,e,r){return function(t,e,r,o){if(!o.isInline&&e==r&&t.doc.resolve(e).parent.content.size){let n=function(t,e,r){let n=t.resolve(e);if(n.parent.canReplaceWith(n.index(),n.index(),r))return e;if(0==n.parentOffset)for(let t=n.depth-1;t>=0;t--){let e=n.index(t);if(n.node(t).canReplaceWith(e,e,r))return n.before(t+1);if(e>0)return null}if(n.parentOffset==n.parent.content.size)for(let t=n.depth-1;t>=0;t--){let e=n.indexAfter(t);if(n.node(t).canReplaceWith(e,e,r))return n.after(t+1);if(e<n.node(t).childCount)return null}return null}(t.doc,e,o.type);null!=n&&(e=r=n)}t.replaceRange(e,r,new n.Ji(n.FK.from(o),0,0))}(this,t,e,r),this}deleteRange(t,e){return function(t,e,r){let n=t.doc.resolve(e),o=t.doc.resolve(r),i=N(n,o);for(let e=0;e<i.length;e++){let r=i[e],a=e==i.length-1;if(a&&0==r||n.node(r).type.contentMatch.validEnd)return t.delete(n.start(r),o.end(r));if(r>0&&(a||n.node(r-1).canReplace(n.index(r-1),o.indexAfter(r-1))))return t.delete(n.before(r),o.after(r))}for(let i=1;i<=n.depth&&i<=o.depth;i++)if(e-n.start(i)==n.depth-i&&r>n.end(i)&&o.end(i)-r!=o.depth-i)return t.delete(n.before(i),r);t.delete(e,r)}(this,t,e),this}lift(t,e){return function(t,e,r){let{$from:o,$to:i,depth:a}=e,s=o.before(a+1),l=i.after(a+1),d=s,c=l,A=n.FK.empty,p=0;for(let t=a,e=!1;t>r;t--)e||o.index(t)>0?(e=!0,A=n.FK.from(o.node(t).copy(A)),p++):d--;let h=n.FK.empty,m=0;for(let t=a,e=!1;t>r;t--)e||i.after(t+1)<i.end(t)?(e=!0,h=n.FK.from(i.node(t).copy(h)),m++):c++;t.step(new v(d,c,s,l,new n.Ji(A.append(h),p,m),A.size-p,!0))}(this,t,e),this}join(t,e=1){return function(t,e,r){let o=new C(e-r,e+r,n.Ji.empty,!0);t.step(o)}(this,t,e),this}wrap(t,e){return function(t,e,r){let o=n.FK.empty;for(let t=r.length-1;t>=0;t--){if(o.size){let e=r[t].type.contentMatch.matchFragment(o);if(!e||!e.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}o=n.FK.from(r[t].type.create(r[t].attrs,o))}let i=e.start,a=e.end;t.step(new v(i,a,i,a,new n.Ji(o,0,0),r.length,!0))}(this,t,e),this}setBlockType(t,e=t,r,o=null){return function(t,e,r,o,i){if(!o.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let a=t.steps.length;t.doc.nodesBetween(e,r,((e,r)=>{if(e.isTextblock&&!e.hasMarkup(o,i)&&function(t,e,r){let n=t.resolve(e),o=n.index();return n.parent.canReplaceWith(o,o+1,r)}(t.doc,t.mapping.slice(a).map(r),o)){t.clearIncompatible(t.mapping.slice(a).map(r,1),o);let s=t.mapping.slice(a),l=s.map(r,1),d=s.map(r+e.nodeSize,1);return t.step(new v(l,d,l+1,d-1,new n.Ji(n.FK.from(o.create(i,null,e.marks)),0,0),1,!0)),!1}}))}(this,t,e,r,o),this}setNodeMarkup(t,e,r=null,o){return function(t,e,r,o,i){let a=t.doc.nodeAt(e);if(!a)throw new RangeError("No node at given position");r||(r=a.type);let s=r.create(o,null,i||a.marks);if(a.isLeaf)return t.replaceWith(e,e+a.nodeSize,s);if(!r.validContent(a.content))throw new RangeError("Invalid content for node type "+r.name);t.step(new v(e,e+a.nodeSize,e+1,e+a.nodeSize-1,new n.Ji(n.FK.from(s),0,0),1,!0))}(this,t,e,r,o),this}setNodeAttribute(t,e,r){return this.step(new T(t,e,r)),this}setDocAttribute(t,e){return this.step(new O(t,e)),this}addNodeMark(t,e){return this.step(new u(t,e)),this}removeNodeMark(t,e){if(!(e instanceof n.CU)){let r=this.doc.nodeAt(t);if(!r)throw new RangeError("No node at position "+t);if(!(e=e.isInSet(r.marks)))return this}return this.step(new f(t,e)),this}split(t,e=1,r){return function(t,e,r=1,o){let i=t.doc.resolve(e),a=n.FK.empty,s=n.FK.empty;for(let t=i.depth,e=i.depth-r,l=r-1;t>e;t--,l--){a=n.FK.from(i.node(t).copy(a));let e=o&&o[l];s=n.FK.from(e?e.type.create(e.attrs,s):i.node(t).copy(s))}t.step(new C(e,e,new n.Ji(a.append(s),r,r),!0))}(this,t,e,r),this}addMark(t,e,r){return function(t,e,r,n){let o,i,a=[],s=[];t.doc.nodesBetween(e,r,((t,l,d)=>{if(!t.isInline)return;let c=t.marks;if(!n.isInSet(c)&&d.type.allowsMarkType(n.type)){let d=Math.max(l,e),A=Math.min(l+t.nodeSize,r),p=n.addToSet(c);for(let t=0;t<c.length;t++)c[t].isInSet(p)||(o&&o.to==d&&o.mark.eq(c[t])?o.to=A:a.push(o=new m(d,A,c[t])));i&&i.to==d?i.to=A:s.push(i=new h(d,A,n))}})),a.forEach((e=>t.step(e))),s.forEach((e=>t.step(e)))}(this,t,e,r),this}removeMark(t,e,r){return function(t,e,r,o){let i=[],a=0;t.doc.nodesBetween(e,r,((t,s)=>{if(!t.isInline)return;a++;let l=null;if(o instanceof n.sX){let e,r=t.marks;for(;e=o.isInSet(r);)(l||(l=[])).push(e),r=e.removeFromSet(r)}else o?o.isInSet(t.marks)&&(l=[o]):l=t.marks;if(l&&l.length){let n=Math.min(s+t.nodeSize,r);for(let t=0;t<l.length;t++){let r,o=l[t];for(let t=0;t<i.length;t++){let e=i[t];e.step==a-1&&o.eq(i[t].style)&&(r=e)}r?(r.to=n,r.step=a):i.push({style:o,from:Math.max(s,e),to:n,step:a})}}})),i.forEach((e=>t.step(new m(e.from,e.to,e.style))))}(this,t,e,r),this}clearIncompatible(t,e,r){return function(t,e,r,o=r.contentMatch){let i=t.doc.nodeAt(e),a=[],s=e+1;for(let e=0;e<i.childCount;e++){let l=i.child(e),d=s+l.nodeSize,c=o.matchType(l.type);if(c){o=c;for(let e=0;e<l.marks.length;e++)r.allowsMarkType(l.marks[e].type)||t.step(new m(s,d,l.marks[e]));if(l.isText&&!r.spec.code){let t,e,o=/\r?\n|\r/g;for(;t=o.exec(l.text);)e||(e=new n.Ji(n.FK.from(r.schema.text(" ",r.allowedMarks(l.marks))),0,0)),a.push(new C(s+t.index,s+t.index+t[0].length,e))}}else a.push(new C(s,d,n.Ji.empty));s=d}if(!o.validEnd){let e=o.fillBefore(n.FK.empty,!0);t.replace(s,s,new n.Ji(e,0,0))}for(let e=a.length-1;e>=0;e--)t.step(a[e])}(this,t,e,r),this}}}}]);
//# sourceMappingURL=src_views_RichWorkspace_vue-node_modules_nextcloud_vue_dist_chunks_emoji-V6ytyzoR_mjs-node_mo-15fc24.js.map?v=d58b7f178acb35e13c06