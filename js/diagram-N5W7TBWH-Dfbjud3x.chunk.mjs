var ue=Object.defineProperty;var ne=Object.getOwnPropertySymbols;var fe=Object.prototype.hasOwnProperty,me=Object.prototype.propertyIsEnumerable;var re=(a,t,r)=>t in a?ue(a,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[t]=r,Q=(a,t)=>{for(var r in t||(t={}))fe.call(t,r)&&re(a,r,t[r]);if(ne)for(var r of ne(t))me.call(t,r)&&re(a,r,t[r]);return a};import{_ as $,F as se,G as le,K as ye,e as ge,l as X,aZ as B,d as Z,b as xe,a as Se,q as ve,t as Ce,g as be,s as we,H as $e,a_ as Le,z as Te}from"./mermaid.core-dzRnh7Nb.chunk.mjs";import{s as Me}from"./chunk-QN33PNHL-DZJks5gz.chunk.mjs";import{p as ke}from"./chunk-4BX2VUAB-Blb6cz53.chunk.mjs";import{p as ze}from"./treemap-75Q7IDZK-3_araMK4.chunk.mjs";import{b as H}from"./defaultLocale-0_YM-Ssk.chunk.mjs";import{o as U}from"./ordinal-JciKjLuy.chunk.mjs";import"./index-CZ3naOy2.chunk.mjs";import"./emoji-picker-DQhTjoLy.chunk.mjs";import"./NcLoadingIcon-BWH8fSi-.chunk.mjs";import"./vue.runtime.esm-UAI8SE-v.chunk.mjs";import"./index-DUrHmx5a.chunk.mjs";import"./_baseUniq-MerUOU3e.chunk.mjs";import"./_basePickBy-B2bEGYax.chunk.mjs";import"./clone-CBgTNpxP.chunk.mjs";import"./init-CbUY40dC.chunk.mjs";function Fe(a){var t=0,r=a.children,n=r&&r.length;if(!n)t=1;else for(;--n>=0;)t+=r[n].value;a.value=t}function Ae(){return this.eachAfter(Fe)}function Pe(a,t){let r=-1;for(const n of this)a.call(t,n,++r,this);return this}function Be(a,t){for(var r=this,n=[r],c,o,d=-1;r=n.pop();)if(a.call(t,r,++d,this),c=r.children)for(o=c.length-1;o>=0;--o)n.push(c[o]);return this}function Ne(a,t){for(var r=this,n=[r],c=[],o,d,h,f=-1;r=n.pop();)if(c.push(r),o=r.children)for(d=0,h=o.length;d<h;++d)n.push(o[d]);for(;r=c.pop();)a.call(t,r,++f,this);return this}function We(a,t){let r=-1;for(const n of this)if(a.call(t,n,++r,this))return n}function De(a){return this.eachAfter(function(t){for(var r=+a(t.data)||0,n=t.children,c=n&&n.length;--c>=0;)r+=n[c].value;t.value=r})}function Ie(a){return this.eachBefore(function(t){t.children&&t.children.sort(a)})}function Ee(a){for(var t=this,r=Re(t,a),n=[t];t!==r;)t=t.parent,n.push(t);for(var c=n.length;a!==r;)n.splice(c,0,a),a=a.parent;return n}function Re(a,t){if(a===t)return a;var r=a.ancestors(),n=t.ancestors(),c=null;for(a=r.pop(),t=n.pop();a===t;)c=a,a=r.pop(),t=n.pop();return c}function He(){for(var a=this,t=[a];a=a.parent;)t.push(a);return t}function Ve(){return Array.from(this)}function je(){var a=[];return this.eachBefore(function(t){t.children||a.push(t)}),a}function Ge(){var a=this,t=[];return a.each(function(r){r!==a&&t.push({source:r.parent,target:r})}),t}function*_e(){var a=this,t,r=[a],n,c,o;do for(t=r.reverse(),r=[];a=t.pop();)if(yield a,n=a.children)for(c=0,o=n.length;c<o;++c)r.push(n[c]);while(r.length)}function Y(a,t){a instanceof Map?(a=[void 0,a],t===void 0&&(t=Ke)):t===void 0&&(t=Oe);for(var r=new J(a),n,c=[r],o,d,h,f;n=c.pop();)if((d=t(n.data))&&(f=(d=Array.from(d)).length))for(n.children=d,h=f-1;h>=0;--h)c.push(o=d[h]=new J(d[h])),o.parent=n,o.depth=n.depth+1;return r.eachBefore(Je)}function qe(){return Y(this).eachBefore(Ze)}function Oe(a){return a.children}function Ke(a){return Array.isArray(a)?a[1]:null}function Ze(a){a.data.value!==void 0&&(a.value=a.data.value),a.data=a.data.data}function Je(a){var t=0;do a.height=t;while((a=a.parent)&&a.height<++t)}function J(a){this.data=a,this.depth=this.height=0,this.parent=null}J.prototype=Y.prototype={constructor:J,count:Ae,each:Pe,eachAfter:Ne,eachBefore:Be,find:We,sum:De,sort:Ie,path:Ee,ancestors:He,descendants:Ve,leaves:je,links:Ge,copy:qe,[Symbol.iterator]:_e};function Qe(a){if(typeof a!="function")throw new Error;return a}function V(){return 0}function j(a){return function(){return a}}function Ue(a){a.x0=Math.round(a.x0),a.y0=Math.round(a.y0),a.x1=Math.round(a.x1),a.y1=Math.round(a.y1)}function Xe(a,t,r,n,c){for(var o=a.children,d,h=-1,f=o.length,l=a.value&&(n-t)/a.value;++h<f;)d=o[h],d.y0=r,d.y1=c,d.x0=t,d.x1=t+=d.value*l}function Ye(a,t,r,n,c){for(var o=a.children,d,h=-1,f=o.length,l=a.value&&(c-r)/a.value;++h<f;)d=o[h],d.x0=t,d.x1=n,d.y0=r,d.y1=r+=d.value*l}var et=(1+Math.sqrt(5))/2;function tt(a,t,r,n,c,o){for(var d=[],h=t.children,f,l,p=0,y=0,s=h.length,g,x,S=t.value,u,v,A,k,P,D,T;p<s;){g=c-r,x=o-n;do u=h[y++].value;while(!u&&y<s);for(v=A=u,D=Math.max(x/g,g/x)/(S*a),T=u*u*D,P=Math.max(A/T,T/v);y<s;++y){if(u+=l=h[y].value,l<v&&(v=l),l>A&&(A=l),T=u*u*D,k=Math.max(A/T,T/v),k>P){u-=l;break}P=k}d.push(f={value:u,dice:g<x,children:h.slice(p,y)}),f.dice?Xe(f,r,n,c,S?n+=x*u/S:o):Ye(f,r,n,S?r+=g*u/S:c,o),S-=u,p=y}return d}const at=function a(t){function r(n,c,o,d,h){tt(t,n,c,o,d,h)}return r.ratio=function(n){return a((n=+n)>1?n:1)},r}(et);function nt(){var a=at,t=!1,r=1,n=1,c=[0],o=V,d=V,h=V,f=V,l=V;function p(s){return s.x0=s.y0=0,s.x1=r,s.y1=n,s.eachBefore(y),c=[0],t&&s.eachBefore(Ue),s}function y(s){var g=c[s.depth],x=s.x0+g,S=s.y0+g,u=s.x1-g,v=s.y1-g;u<x&&(x=u=(x+u)/2),v<S&&(S=v=(S+v)/2),s.x0=x,s.y0=S,s.x1=u,s.y1=v,s.children&&(g=c[s.depth+1]=o(s)/2,x+=l(s)-g,S+=d(s)-g,u-=h(s)-g,v-=f(s)-g,u<x&&(x=u=(x+u)/2),v<S&&(S=v=(S+v)/2),a(s,x,S,u,v))}return p.round=function(s){return arguments.length?(t=!!s,p):t},p.size=function(s){return arguments.length?(r=+s[0],n=+s[1],p):[r,n]},p.tile=function(s){return arguments.length?(a=Qe(s),p):a},p.padding=function(s){return arguments.length?p.paddingInner(s).paddingOuter(s):p.paddingInner()},p.paddingInner=function(s){return arguments.length?(o=typeof s=="function"?s:j(+s),p):o},p.paddingOuter=function(s){return arguments.length?p.paddingTop(s).paddingRight(s).paddingBottom(s).paddingLeft(s):p.paddingTop()},p.paddingTop=function(s){return arguments.length?(d=typeof s=="function"?s:j(+s),p):d},p.paddingRight=function(s){return arguments.length?(h=typeof s=="function"?s:j(+s),p):h},p.paddingBottom=function(s){return arguments.length?(f=typeof s=="function"?s:j(+s),p):f},p.paddingLeft=function(s){return arguments.length?(l=typeof s=="function"?s:j(+s),p):l},p}var W,oe=(W=class{constructor(){this.nodes=[],this.levels=new Map,this.outerNodes=[],this.classes=new Map,this.setAccTitle=xe,this.getAccTitle=Se,this.setDiagramTitle=ve,this.getDiagramTitle=Ce,this.getAccDescription=be,this.setAccDescription=we}getNodes(){return this.nodes}getConfig(){var n;const t=$e,r=le();return se(Q(Q({},t.treemap),(n=r.treemap)!=null?n:{}))}addNode(t,r){var n;this.nodes.push(t),this.levels.set(t,r),r===0&&(this.outerNodes.push(t),(n=this.root)!=null||(this.root=t))}getRoot(){return{name:"",children:this.outerNodes}}addClass(t,r){var o;const n=(o=this.classes.get(t))!=null?o:{id:t,styles:[],textStyles:[]},c=r.replace(/\\,/g,"§§§").replace(/,/g,";").replace(/§§§/g,",").split(";");c&&c.forEach(d=>{Le(d)&&(n!=null&&n.textStyles?n.textStyles.push(d):n.textStyles=[d]),n!=null&&n.styles?n.styles.push(d):n.styles=[d]}),this.classes.set(t,n)}getClasses(){return this.classes}getStylesForClass(t){var r,n;return(n=(r=this.classes.get(t))==null?void 0:r.styles)!=null?n:[]}clear(){Te(),this.nodes=[],this.levels=new Map,this.outerNodes=[],this.classes=new Map,this.root=void 0}},$(W,"TreeMapDB"),W);function ie(a){if(!a.length)return[];const t=[],r=[];return a.forEach(n=>{const c={name:n.name,children:n.type==="Leaf"?void 0:[]};for(c.classSelector=n==null?void 0:n.classSelector,n!=null&&n.cssCompiledStyles&&(c.cssCompiledStyles=[n.cssCompiledStyles]),n.type==="Leaf"&&n.value!==void 0&&(c.value=n.value);r.length>0&&r[r.length-1].level>=n.level;)r.pop();if(r.length===0)t.push(c);else{const o=r[r.length-1].node;o.children?o.children.push(c):o.children=[c]}n.type!=="Leaf"&&r.push({node:c,level:n.level})}),t}$(ie,"buildHierarchy");var rt=$((a,t)=>{var o,d,h,f;ke(a,t);const r=[];for(const l of(o=a.TreemapRows)!=null?o:[])l.$type==="ClassDefStatement"&&t.addClass((d=l.className)!=null?d:"",(h=l.styleText)!=null?h:"");for(const l of(f=a.TreemapRows)!=null?f:[]){const p=l.item;if(!p)continue;const y=l.indent?parseInt(l.indent):0,s=st(p),g=p.classSelector?t.getStylesForClass(p.classSelector):[],x=g.length>0?g.join(";"):void 0,S={level:y,name:s,type:p.$type,value:p.value,classSelector:p.classSelector,cssCompiledStyles:x};r.push(S)}const n=ie(r),c=$((l,p)=>{for(const y of l)t.addNode(y,p),y.children&&y.children.length>0&&c(y.children,p+1)},"addNodesRecursively");c(n,0)},"populate"),st=$(a=>a.name?String(a.name):"","getItemName"),ce={parser:{yy:void 0},parse:$(async a=>{var t;try{const r=await ze("treemap",a);X.debug("Treemap AST:",r);const n=(t=ce.parser)==null?void 0:t.yy;if(!(n instanceof oe))throw new Error("parser.parser?.yy was not a TreemapDB. This is due to a bug within Mermaid, please report this issue at https://github.com/mermaid-js/mermaid/issues.");rt(r,n)}catch(r){throw X.error("Error parsing treemap:",r),r}},"parse")},lt=10,N=10,G=25,ot=$((a,t,r,n)=>{var ee,te;const c=n.db,o=c.getConfig(),d=(ee=o.padding)!=null?ee:lt,h=c.getDiagramTitle(),f=c.getRoot(),{themeVariables:l}=le();if(!f)return;const p=h?30:0,y=ye(t),s=o.nodeWidth?o.nodeWidth*N:960,g=o.nodeHeight?o.nodeHeight*N:500,x=s,S=g+p;y.attr("viewBox","0 0 ".concat(x," ").concat(S)),ge(y,S,x,o.useMaxWidth);let u;try{const e=o.valueFormat||",";if(e==="$0,0")u=$(i=>"$"+H(",")(i),"valueFormat");else if(e.startsWith("$")&&e.includes(",")){const i=/\.\d+/.exec(e),m=i?i[0]:"";u=$(w=>"$"+H(","+m)(w),"valueFormat")}else if(e.startsWith("$")){const i=e.substring(1);u=$(m=>"$"+H(i||"")(m),"valueFormat")}else u=H(e)}catch(e){X.error("Error creating format function:",e),u=H(",")}const v=U().range(["transparent",l.cScale0,l.cScale1,l.cScale2,l.cScale3,l.cScale4,l.cScale5,l.cScale6,l.cScale7,l.cScale8,l.cScale9,l.cScale10,l.cScale11]),A=U().range(["transparent",l.cScalePeer0,l.cScalePeer1,l.cScalePeer2,l.cScalePeer3,l.cScalePeer4,l.cScalePeer5,l.cScalePeer6,l.cScalePeer7,l.cScalePeer8,l.cScalePeer9,l.cScalePeer10,l.cScalePeer11]),k=U().range([l.cScaleLabel0,l.cScaleLabel1,l.cScaleLabel2,l.cScaleLabel3,l.cScaleLabel4,l.cScaleLabel5,l.cScaleLabel6,l.cScaleLabel7,l.cScaleLabel8,l.cScaleLabel9,l.cScaleLabel10,l.cScaleLabel11]);h&&y.append("text").attr("x",x/2).attr("y",p/2).attr("class","treemapTitle").attr("text-anchor","middle").attr("dominant-baseline","middle").text(h);const P=y.append("g").attr("transform","translate(0, ".concat(p,")")).attr("class","treemapContainer"),D=Y(f).sum(e=>{var i;return(i=e.value)!=null?i:0}).sort((e,i)=>{var m,w;return((m=i.value)!=null?m:0)-((w=e.value)!=null?w:0)}),T=nt().size([s,g]).paddingTop(e=>e.children&&e.children.length>0?G+N:0).paddingInner(d).paddingLeft(e=>e.children&&e.children.length>0?N:0).paddingRight(e=>e.children&&e.children.length>0?N:0).paddingBottom(e=>e.children&&e.children.length>0?N:0).round(!0)(D),de=T.descendants().filter(e=>e.children&&e.children.length>0),I=P.selectAll(".treemapSection").data(de).enter().append("g").attr("class","treemapSection").attr("transform",e=>"translate(".concat(e.x0,",").concat(e.y0,")"));I.append("rect").attr("width",e=>e.x1-e.x0).attr("height",G).attr("class","treemapSectionHeader").attr("fill","none").attr("fill-opacity",.6).attr("stroke-width",.6).attr("style",e=>e.depth===0?"display: none;":""),I.append("clipPath").attr("id",(e,i)=>"clip-section-".concat(t,"-").concat(i)).append("rect").attr("width",e=>Math.max(0,e.x1-e.x0-12)).attr("height",G),I.append("rect").attr("width",e=>e.x1-e.x0).attr("height",e=>e.y1-e.y0).attr("class",(e,i)=>"treemapSection section".concat(i)).attr("fill",e=>v(e.data.name)).attr("fill-opacity",.6).attr("stroke",e=>A(e.data.name)).attr("stroke-width",2).attr("stroke-opacity",.4).attr("style",e=>{if(e.depth===0)return"display: none;";const i=B({cssCompiledStyles:e.data.cssCompiledStyles});return i.nodeStyles+";"+i.borderStyles.join(";")}),I.append("text").attr("class","treemapSectionLabel").attr("x",6).attr("y",G/2).attr("dominant-baseline","middle").text(e=>e.depth===0?"":e.data.name).attr("font-weight","bold").attr("style",e=>{if(e.depth===0)return"display: none;";const i="dominant-baseline: middle; font-size: 12px; fill:"+k(e.data.name)+"; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;",m=B({cssCompiledStyles:e.data.cssCompiledStyles});return i+m.labelStyles.replace("color:","fill:")}).each(function(e){if(e.depth===0)return;const i=Z(this),m=e.data.name;i.text(m);const w=e.x1-e.x0,z=6;let F;o.showValues!==!1&&e.value?F=w-10-30-10-z:F=w-z-6;const M=Math.max(15,F),L=i.node();if(L.getComputedTextLength()>M){const C="...";let b=m;for(;b.length>0;){if(b=m.substring(0,b.length-1),b.length===0){i.text(C),L.getComputedTextLength()>M&&i.text("");break}if(i.text(b+C),L.getComputedTextLength()<=M)break}}}),o.showValues!==!1&&I.append("text").attr("class","treemapSectionValue").attr("x",e=>e.x1-e.x0-10).attr("y",G/2).attr("text-anchor","end").attr("dominant-baseline","middle").text(e=>e.value?u(e.value):"").attr("font-style","italic").attr("style",e=>{if(e.depth===0)return"display: none;";const i="text-anchor: end; dominant-baseline: middle; font-size: 10px; fill:"+k(e.data.name)+"; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;",m=B({cssCompiledStyles:e.data.cssCompiledStyles});return i+m.labelStyles.replace("color:","fill:")});const pe=T.leaves(),_=P.selectAll(".treemapLeafGroup").data(pe).enter().append("g").attr("class",(e,i)=>"treemapNode treemapLeafGroup leaf".concat(i).concat(e.data.classSelector?" ".concat(e.data.classSelector):"","x")).attr("transform",e=>"translate(".concat(e.x0,",").concat(e.y0,")"));_.append("rect").attr("width",e=>e.x1-e.x0).attr("height",e=>e.y1-e.y0).attr("class","treemapLeaf").attr("fill",e=>e.parent?v(e.parent.data.name):v(e.data.name)).attr("style",e=>B({cssCompiledStyles:e.data.cssCompiledStyles}).nodeStyles).attr("fill-opacity",.3).attr("stroke",e=>e.parent?v(e.parent.data.name):v(e.data.name)).attr("stroke-width",3),_.append("clipPath").attr("id",(e,i)=>"clip-".concat(t,"-").concat(i)).append("rect").attr("width",e=>Math.max(0,e.x1-e.x0-4)).attr("height",e=>Math.max(0,e.y1-e.y0-4)),_.append("text").attr("class","treemapLabel").attr("x",e=>(e.x1-e.x0)/2).attr("y",e=>(e.y1-e.y0)/2).attr("style",e=>{const i="text-anchor: middle; dominant-baseline: middle; font-size: 38px;fill:"+k(e.data.name)+";",m=B({cssCompiledStyles:e.data.cssCompiledStyles});return i+m.labelStyles.replace("color:","fill:")}).attr("clip-path",(e,i)=>"url(#clip-".concat(t,"-").concat(i,")")).text(e=>e.data.name).each(function(e){const i=Z(this),m=e.x1-e.x0,w=e.y1-e.y0,z=i.node(),F=4,M=m-2*F,L=w-2*F;if(M<10||L<10){i.style("display","none");return}let C=parseInt(i.style("font-size"),10);const b=8,E=28,q=.6,R=6,O=2;for(;z.getComputedTextLength()>M&&C>b;)C--,i.style("font-size","".concat(C,"px"));let K=Math.max(R,Math.min(E,Math.round(C*q))),ae=C+O+K;for(;ae>L&&C>b&&(C--,K=Math.max(R,Math.min(E,Math.round(C*q))),!(K<R&&C===b));)i.style("font-size","".concat(C,"px")),ae=C+O+K;i.style("font-size","".concat(C,"px")),(z.getComputedTextLength()>M||C<b||L<C)&&i.style("display","none")}),o.showValues!==!1&&_.append("text").attr("class","treemapValue").attr("x",e=>(e.x1-e.x0)/2).attr("y",function(e){return(e.y1-e.y0)/2}).attr("style",e=>{const i="text-anchor: middle; dominant-baseline: hanging; font-size: 28px;fill:"+k(e.data.name)+";",m=B({cssCompiledStyles:e.data.cssCompiledStyles});return i+m.labelStyles.replace("color:","fill:")}).attr("clip-path",(e,i)=>"url(#clip-".concat(t,"-").concat(i,")")).text(e=>e.value?u(e.value):"").each(function(e){const i=Z(this),m=this.parentNode;if(!m){i.style("display","none");return}const w=Z(m).select(".treemapLabel");if(w.empty()||w.style("display")==="none"){i.style("display","none");return}const z=parseFloat(w.style("font-size")),F=28,M=.6,L=6,C=2,b=Math.max(L,Math.min(F,Math.round(z*M)));i.style("font-size","".concat(b,"px"));const E=(e.y1-e.y0)/2+z/2+C;i.attr("y",E);const q=e.x1-e.x0,R=e.y1-e.y0-4,O=q-2*4;i.node().getComputedTextLength()>O||E+b>R||b<L?i.style("display","none"):i.style("display",null)});const he=(te=o.diagramPadding)!=null?te:8;Me(y,he,"flowchart",(o==null?void 0:o.useMaxWidth)||!1)},"draw"),it=$(function(a,t){return t.db.getClasses()},"getClasses"),ct={draw:ot,getClasses:it},dt={sectionStrokeColor:"black",sectionStrokeWidth:"1",sectionFillColor:"#efefef",leafStrokeColor:"black",leafStrokeWidth:"1",leafFillColor:"#efefef",labelColor:"black",labelFontSize:"12px",valueFontSize:"10px",valueColor:"black",titleColor:"black",titleFontSize:"14px"},pt=$(({treemap:a}={})=>{const t=se(dt,a);return"\n  .treemapNode.section {\n    stroke: ".concat(t.sectionStrokeColor,";\n    stroke-width: ").concat(t.sectionStrokeWidth,";\n    fill: ").concat(t.sectionFillColor,";\n  }\n  .treemapNode.leaf {\n    stroke: ").concat(t.leafStrokeColor,";\n    stroke-width: ").concat(t.leafStrokeWidth,";\n    fill: ").concat(t.leafFillColor,";\n  }\n  .treemapLabel {\n    fill: ").concat(t.labelColor,";\n    font-size: ").concat(t.labelFontSize,";\n  }\n  .treemapValue {\n    fill: ").concat(t.valueColor,";\n    font-size: ").concat(t.valueFontSize,";\n  }\n  .treemapTitle {\n    fill: ").concat(t.titleColor,";\n    font-size: ").concat(t.titleFontSize,";\n  }\n  ")},"getStyles"),ht=pt,zt={parser:ce,get db(){return new oe},renderer:ct,styles:ht};export{zt as diagram};
//# sourceMappingURL=diagram-N5W7TBWH-Dfbjud3x.chunk.mjs.map
