{"version":3,"file":"SessionList-6hUkwiaj.chunk.mjs","sources":["../src/components/Editor/SessionList.vue"],"sourcesContent":["<!--\n  - SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<NcPopover class=\"session-list\" placement=\"bottom\">\n\t\t<template #trigger=\"{ attrs }\">\n\t\t\t<div>\n\t\t\t\t<button :title=\"label\"\n\t\t\t\t\t:aria-label=\"label\"\n\t\t\t\t\tclass=\"avatar-list\"\n\t\t\t\t\tv-bind=\"attrs\">\n\t\t\t\t\t<div class=\"avatardiv icon-group\" />\n\t\t\t\t\t<AvatarWrapper v-for=\"session in sessionsVisible\"\n\t\t\t\t\t\t:key=\"session.id\"\n\t\t\t\t\t\t:session=\"session\"\n\t\t\t\t\t\t:size=\"30\" />\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</template>\n\t\t<template #default>\n\t\t\t<div class=\"session-menu\">\n\t\t\t\t<slot name=\"lastSaved\" />\n\t\t\t\t<ul>\n\t\t\t\t\t<slot />\n\t\t\t\t\t<li v-for=\"session in participantsPopover\"\n\t\t\t\t\t\t:key=\"session.id\"\n\t\t\t\t\t\t:style=\"avatarStyle(session)\">\n\t\t\t\t\t\t<AvatarWrapper :session=\"session\" :size=\"36\" />\n\t\t\t\t\t\t<span class=\"session-label\">\n\t\t\t\t\t\t\t{{ session.userId ? session.displayName : (session.guestName ? session.guestName : t('text', 'Guest')) }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span v-if=\"session.userId === null\" class=\"guest-label\">({{ t('text', 'guest') }})</span>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</template>\n\t</NcPopover>\n</template>\n\n<script>\nimport { NcPopover } from '@nextcloud/vue'\nimport AvatarWrapper from './AvatarWrapper.vue'\nimport { COLLABORATOR_IDLE_TIME, COLLABORATOR_DISCONNECT_TIME } from '../../services/SyncService.js'\n\nexport default {\n\tname: 'SessionList',\n\tcomponents: {\n\t\tAvatarWrapper,\n\t\tNcPopover,\n\t},\n\tprops: {\n\t\tsessions: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => { return {} },\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tmyName: '',\n\t\t}\n\t},\n\tcomputed: {\n\t\tlabel() {\n\t\t\treturn t('text', 'Active people')\n\t\t},\n\t\tparticipantsPopover() {\n\t\t\tif (this.currentSession?.guestName) {\n\t\t\t\treturn this.participantsWithoutCurrent\n\t\t\t}\n\t\t\treturn this.participants\n\t\t},\n\t\tparticipantsWithoutCurrent() {\n\t\t\treturn this.participants.filter((session) => !session.isCurrent)\n\t\t},\n\t\tparticipants() {\n\t\t\treturn Object.values(this.sessions).filter((session) =>\n\t\t\t\tsession.lastContact > Date.now() / 1000 - COLLABORATOR_DISCONNECT_TIME\n\t\t\t\t\t&& (session.userId !== null || session.guestName !== null),\n\t\t\t).sort((a, b) => a.lastContact < b.lastContact)\n\t\t},\n\t\tcurrentSession() {\n\t\t\treturn Object.values(this.sessions).find((session) => session.isCurrent)\n\t\t},\n\t\tavatarStyle() {\n\t\t\treturn (session) => {\n\t\t\t\treturn {\n\t\t\t\t\topacity: session.lastContact > Date.now() / 1000 - COLLABORATOR_IDLE_TIME ? 1 : 0.5,\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tsessionsVisible() {\n\t\t\treturn this.participantsWithoutCurrent.slice(0, 3)\n\t\t},\n\t},\n}\n</script>\n\n<style scoped lang=\"scss\">\n\t.session-list {\n\t\theight: var(--default-clickable-area);\n\t}\n\t.avatar-list {\n\t\tborder: none;\n\t\tbackground-color: var(--color-main-background);\n\t\tpadding: 0;\n\t\tmargin: 0;\n\t\tpadding-left: 3px;\n\t\tdisplay: inline-flex;\n\t\tflex-direction: row-reverse;\n\n\t\t.avatar-wrapper {\n\t\t\tmargin: 0 -12px 0 0;\n\t\t\tz-index: 1;\n\t\t\tborder-radius: 50%;\n\t\t\toverflow: hidden;\n\t\t\tbox-sizing: content-box !important;\n\t\t\theight: calc(var(--default-clickable-area) - 4px);\n\t\t\twidth: calc(var(--default-clickable-area) - 4px);\n\t\t}\n\n\t\t.icon-more, .icon-group, .icon-settings-dark {\n\t\t\twidth: var(--default-clickable-area);\n\t\t\theight: var(--default-clickable-area);\n\t\t\tmargin: 0 3px 0 0;\n\n\t\t\t&:hover {\n\t\t\t\tbackground-color: var(--color-background-hover);\n\t\t\t}\n\t\t}\n\t}\n\n\t.session-menu {\n\t\tmax-width: 280px;\n\t\tpadding-top: 6px;\n\t\tpadding-bottom: 6px;\n\n\t\tul li {\n\t\t\talign-items: center;\n\t\t\tdisplay: flex;\n\t\t\tpadding: 6px;\n\n\t\t\t.avatar-wrapper {\n\t\t\t\theight: 36px;\n\t\t\t\twidth: 36px;\n\t\t\t\tmargin-right: 6px;\n\t\t\t}\n\n\t\t\t.session-label {\n\t\t\t\tpadding-right: 3px;\n\t\t\t}\n\t\t\t.guest-label {\n\t\t\t\tpadding-left: 3px;\n\t\t\t\tcolor: var(--color-text-maxcontrast);\n\t\t\t}\n\t\t}\n\t}\n\n\tlabel {\n\t\tdisplay: block;\n\t\tmargin: 8px;\n\t}\n\n\t.hint {\n\t\tmargin: 8px;\n\t\tcolor: var(--color-text-maxcontrast);\n\t}\n</style>\n"],"names":["_sfc_main","AvatarWrapper","NcPopover","_a","session","COLLABORATOR_DISCONNECT_TIME","a","b","COLLABORATOR_IDLE_TIME"],"mappings":";gzBA8CA,MAAAA,EAAA,CACA,KAAA,cACA,WAAA,CACA,cAAAC,EACA,UAAAC,CACA,EACA,MAAA,CACA,SAAA,CACA,KAAA,OACA,QAAA,KAAA,GACA,CACA,EACA,MAAA,CACA,MAAA,CACA,OAAA,EACA,CACA,EACA,SAAA,CACA,OAAA,CACA,OAAA,EAAA,OAAA,eAAA,CACA,EACA,qBAAA,OACA,OAAAC,EAAA,KAAA,iBAAA,MAAAA,EAAA,UACA,KAAA,2BAEA,KAAA,YACA,EACA,4BAAA,CACA,OAAA,KAAA,aAAA,OAAAC,GAAA,CAAAA,EAAA,SAAA,CACA,EACA,cAAA,CACA,OAAA,OAAA,OAAA,KAAA,QAAA,EAAA,OAAAA,GACAA,EAAA,YAAA,KAAA,IAAA,EAAA,IAAAC,IACAD,EAAA,SAAA,MAAAA,EAAA,YAAA,KACA,EAAA,KAAA,CAAAE,EAAAC,IAAAD,EAAA,YAAAC,EAAA,WAAA,CACA,EACA,gBAAA,CACA,OAAA,OAAA,OAAA,KAAA,QAAA,EAAA,KAAAH,GAAAA,EAAA,SAAA,CACA,EACA,aAAA,CACA,OAAAA,IACA,CACA,QAAAA,EAAA,YAAA,KAAA,IAAA,EAAA,IAAAI,EAAA,EAAA,EACA,EAEA,EACA,iBAAA,CACA,OAAA,KAAA,2BAAA,MAAA,EAAA,CAAA,CACA,CACA,CACA"}